[buildout]
extends = versions.cfg

find-links =
    http://dist.repoze.org/zope2/dev

versions = versions

parts =
    wsgi-conf
    instance-conf
    instance-script
    instance
    test
    test_full
    zopepy

develop =
    src/*

eggs =


[versions]
elementtree = 1.2.6-20050316
zope.testing = 3.7.1


[environment]
INSTANCE_HOME = ${buildout:directory}
CLIENT_HOME = ${buildout:directory}/var/instance
ZOPE_CONF = ${buildout:directory}/etc/zope.conf
zope_i18n_compile_mo_files = true
zope_i18n_allowed_languages = en


[wsgi-conf]
recipe = collective.recipe.template
input = templates/plone.ini
output = ${buildout:directory}/etc/plone.ini
instancehome = ${buildout:directory}


[instance-conf]
recipe = collective.recipe.template
input = templates/zope.conf
output = ${buildout:directory}/etc/zope.conf
instancehome = ${buildout:directory}
clienthome = ${buildout:directory}/var/instance
blobstorage = ${buildout:directory}/var/blobstorage
filestorage = ${buildout:directory}/var/filestorage
debug-mode = on


[instance-script]
recipe = zc.recipe.egg
eggs = ${instance:eggs}
scripts = paster=instance
initialization =
    import sys
    args = ['serve', '${buildout:directory}/etc/plone.ini'] + sys.argv[1:]
arguments = args


[instance]
recipe = zc.recipe.egg

# The environment argument is only available for zc.recipe.egg:custom, which
# accepts only one egg and not multiple eggs. It should really be available
# all the time.
initialization =
    import os
    os.environ['ZOPE_CONF'] = '${buildout:directory}/etc/zope.conf'
    os.environ['zope_i18n_compile_mo_files'] = 'true'
    os.environ['zope_i18n_allowed_languages'] = 'en'

# Some dependencies aren't declared yet in the packages themselves
# Products.ZopeVersionControl is required by Products.CMFEditions
eggs =
    ${buildout:eggs}
    PasteScript
    WSGIUtils
    Plone [test]
    repoze.zope2
    repoze.profile


[test]
recipe = zc.recipe.testrunner
eggs =
    ${instance:eggs}
    plone.portlets [test]
    Products.ATContentTypes
    Products.ATReferenceBrowserWidget
    Products.Archetypes
    Products.CMFCalendar
    Products.CMFCore
    Products.CMFDefault
    Products.CMFDynamicViewFTI
    Products.CMFFormController
    Products.CMFTestCase
    Products.CMFUid
    Products.DCWorkflow
    Products.ExtendedPathIndex
    Products.GenericSetup
    Products.Marshall
    Products.MimetypesRegistry
    Products.PasswordResetTool
    Products.PloneLanguageTool
    Products.PlonePAS
    Products.PloneTestCase
    Products.PluggableAuthService
    Products.PluginRegistry
    Products.PortalTransforms
    Products.ResourceRegistries
    Products.statusmessages
    Products.validation
    borg.localrole
    five.customerize
    five.localsitemanager
    plone.app.content
    plone.app.contentmenu
    plone.app.controlpanel
    plone.app.customerize
    plone.app.form
    plone.app.i18n
    plone.app.layout
    plone.app.portlets
    plone.app.users
    plone.app.viewletmanager
    plone.app.vocabularies
    plone.app.workflow
    plone.browserlayer
    plone.contentrules
    plone.fieldsets
    plone.i18n
    plone.intelligenttext
    plone.keyring
    plone.locking
    plone.memoize
    plone.navigation
    plone.portlet.collection
    plone.portlet.static
    plone.portlets
    plone.protect
    plone.session
    plone.sequencebatch
    plone.theme

environment = environment

[test_full]
recipe = zc.recipe.testrunner
eggs =
    ${test:eggs}
    Products.CMFDiffTool
    Products.CMFEditions
    Products.CMFPlacefulWorkflow
    Products.ZopeVersionControl
    plone.app.contentrules
    plone.app.iterate
    plone.app.openid
    plone.app.redirector
    plone.app.upgrade
    plone.openid


[zopepy]
recipe = zc.recipe.egg
eggs = ${instance:eggs}
interpreter = zopepy
scripts = zopepy

