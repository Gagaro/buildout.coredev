===================================
PLIP 10886 event improvements notes
===================================

NOTE: this plip is not finished yet.

http://dev.plone.org/plone/ticket/10886

Introduction
============
The purpose of PLIP10886 is to provide an improved Event content type and
calendaring infrastructure, based on ideas and developments from other packages.
The infrastructure should be compatible with RFC2445 [1] (the iCalendar
specification) as much as possible. This includes also recurrence support with
the ability to define multiple complex recurrence rules.


Please note
===========
We often reference the RFC2445 specification here. It's title is "Internet
Calendaring and Scheduling Core Object Specification (iCalendar)", called the
iCalendar specification. Don't confuse that with Apple's iCal calendaring
client.

Prerequisites
=============
* git - Make sure, you have git installed. We use it for some checkouts from
  github and for patching.
* Don't install this plip buildout in an existing buildout. Use a fresh one.


Known Issues
============
* plone.app.event implements archetypes based ATEvent and depends on
archetypes.datetimewidget. Archetypes dependencies should be seperated from
plone.app.event to simplify migration for Plone5, where Dexterity will be used.

* Recurrence rules are defined as RFC2445 compatible strings, which are parsed
by python-dateutil. Due to a bug in this package, timezones other than UTC based
can't be set in RFC2445 strings - although python-dateutil respects timezones in
python datetime instances. This bug affects primary RDATE components, which
define individual dates to include in the recurrence rule.
e.g. does not work: RDATE;TZID=Europe/Vienna:20101010T090000;
works: RDATE:20101010T090000Z;
This bug is reported. For now, RDATE components shouldn't be used and disabled
in the UI until this bug is fixed.

* Calendaring clients (Evolution, iCal, Outlook, Sunbird, Google Calendar etc.)
might not be fully RFC2445 compatible. This could be an issue for exporting ics
iCalendar files with multiple recurrence rules.

* As we recently found out, there is a new iCalendar (RFC5545, [2])
specification from September 2009 which obsoletes RFC2445. RFC5545 is simpler
than RFC2445. This affects recurrence rules - e.g. it does not support EXRULES
(recurrence exclusion rules) any more and EXDATES and RDATES (exclusion and
inclusion dates) are formated as list of dates.
This might not be too much of a problem for now, since we can disable the
affected recurrence rule parts in the UI and Calendaring clients might still
implementing RFC2445. Python-dateutil, on which plone.event depends on, supports
only RFC2445 for now.

* There are no upgrade steps from now. Upgrade would basically just be
reindexing the whole portal catalog for Products.DateRecurringIndex. This work
will be done after the PLIP deadline.


Overview of packages and it's features
======================================

plone.app.event
---------------
Integration package for plone. Defines the Archetype content type ATEvent,
browser views and event related portlets.
This ATEvent implementation supports RFC2445 recurrence rules and whole day
events.
Url: https://svn.plone.org/svn/plone/plone.app.event/trunk/


plone.event
-----------
Event related infrastructure. Recurrence calculation tools based on RFC2445 and
timedelta recurrence rules, ical export support, timezone tools and date
conversion tools. Plone.app.event uses RFC2445 recurrence rules only.
Url: https://github.com/collective/plone.event


Products.DateRecurringIndex
---------------------------
A drop-in replacement for Zope's DateIndex. Supports indexing of a list of dates
for one instance. The DateRecurringIndex can be configured to use RFC2445 or
timedelta only recurrence rules. Plone.app.event uses RFC2445 recurrence rules
only.
Url: https://github.com/collective/Products.DateRecurringIndex


archetypes.datetimewidget
-------------------------
A replacement for Archetype's CalendarWidget, based on JQueryTools Dateinput.
The package itself depends on the current plone.app.jquerytools package, which
includes JQueryTools Dateinput.
Url: https://github.com/collective/archetypes.datetimewidget


jquery.recurrenceinput.js
-------------------------
Jquery plugin widget which support the definition of complex recurrence
rulesets.
Url: https://github.com/collective/jquery.recurrenceinput.js


plone.formwidget.recurrence
---------------------------
An archetypes based recurrence widget which makes use of
jquery.recurrenceinput.js. plone.app.event's ATEvent depends on it.
Url: https://github.com/collective/plone.formwidget.recurrence


External Dependencies
=====================
* python-dateutil
Info: http://labix.org/python-dateutil
PyPi: http://pypi.python.org/pypi/python-dateutil


Tests and code checkers
=======================

Future plans
============
* Calendar views
* iCal import
* caldav support


Documentation
=============


Needed documentation changes
============================


Backwards compatibility
=======================


Credits
=======

 - Philip Bauer (bauer@starzel.de): Fixing some plone.event / plone.app.event
related tests.

 - Vincent Fretin (vincent.fretin@gmail.com): vs.event merge, Translations,
JQueryUI based collective.calendarwidget.

 - Rok Garbas (rok.garbas@gmail.com): Author of jquery.recurrenceinput.js widget.
PLIP driver and TODO delegation.

 - Tom Gross (itconsense@gmail.com): Merging vs.event into plone.app.event,
Testing infrastructure, plone.formwidget.recurrence.

  - Andreas Jung (lists@zopyx.com): Author of vs.event team, PLIP 9302 leader,
plone.app.event cologne sprint leader.

  - Jens Klein (jens@bluedynamics.com): Author of Products.DateRecurringIndex with
timedelta support.

  - Ryan Northey (ryan@3ca.org.uk): Worked with Vitaliy on iCal export.

 - Simone Orsi (simahawk@gmail.com): Author of archetypes.datetimewidget, a port
of collective.z3cform.datetimewidget to archetypes.

 - Vitaliy Podoba (vitaliypodoba@gmail.com): iCal export in plone.event,
 improving test coverage.

 - Johannes Raggam (johannes@raggam.co.at): PLIP leader, Recurring support in
plone.event, updating Products.DateRecurringIndex for RFC2445 recurrence rules.

  - Lennart Regebro (regebro@gmail.com): Leader of recurring event sprint team
at the Snowsprint2007. Author of dateable.chronos and dateable.kalends packages.

 - Dorneles Tremea (dorneles@tremea.com): Author of demo package
archetypes.recurringdate. UI part of jquery.recurrenceinput.js is based on it.
Benchmarks for P.DateRecurringIndex vs. DateIndex.


References
==========
[1] http://www.ietf.org/rfc/rfc2445.txt
[2] http://www.ietf.org/rfc/rfc5545.txt
