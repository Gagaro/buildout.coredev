PLIP 9286: Allow to show/hide portlets
=================================================================

This plip is ready for final review.

PLIP ticket: https://dev.plone.org/plone/ticket/9286

Answers to review questions are at the bottom.

To do
-----

- After merge, links for show/hide options should use specific symbols. 
  Currently, they are only text links. Although, show/hide options are quite
  clear and it should bew reviewed by the UI team.

- Use different style for hidden portlets. This needs to take into account
  plip #9285, which also adds new style to identify blocked portlets.

- Migration path to handle hidden property in old instances of 
  plone.portlet.static.

Summary of changes
------------------

- Added new options show/hide to portlet management screen. Hidden portlets
  are shown in the management screen, but not when viewing.
  The implementation strategy is based on a new feature to add in
  plone.portlets (portlet assignment settings) that basically consists of a
  list of settings (per assignment) that can be also used by other
  implementations. By default, there is only the 'visible' setting.

- Removed field 'hide' from plone.portlet.static's schema, and added 
  deprecation message for the use of the 'hide' parameter at
  static.Assignment's contructor.

- Added new assignment attribute ("visible") to import/export the visible
  property. For example an assingment in portlet.xml can be as follows:

    <assignment
        manager="plone.leftcolumn"
        category="context"
        key="/"
        type="portlets.Calendar"
        name="calendar"
        visible="0"
        />

  If "visible" is "0", the portlet will be hidden. If "visible" is "1" or
  in its absence, the portlet will be shown.

Needed documentation changes
----------------------------

- The Plone User Manual needs to be updated, more specifically the "Portlet
  Management" section:
  http://plone.org/documentation/manual/plone-3-user-manual/portlet-management/


Backwards compatibiliy
-----------------------

Migration for legacy static portlets not implemented yet.


Credits
-------

Ricardo Alves


Review
------

- Could we factor up the repetition between hide_portlet and show_portlet at
  https://dev.plone.org/old/plone/browser/plone.app.portlets/branches/plip9286-allow-show-hide-portlets/plone/app/portlets/browser/editmanager.py?rev=29095#L282 ?

    A: Yes, thanks for the suggestion. I refactored it and now we have
       toggle visibility methods, which simply change the "visible" value.

- Do we even want "specific symbols" for hide and show? Sometimes a word is
  worth a thousand pictures.

    A: Yes, maybe. But it will probably be a good idea to get more feedback
       about it.

- Another out-of-scope niggle: I assigned a portlet at the root of the site and
  was surprised I couldn't click "hide" at some lower level's Manage Portlets
  page. (It took me several few minutes to figure out where to see the new Hide
  link!) I can't change the ordering at inherited levels either, so at least
  you're consistent. However, I'd expect to be able to move and change the
  visibility of any portlet anywhere I can see it. After all, I can still click
  its title and edit its params. Since you're such a portlet jockey, do you have
  any idea how big a deal that would be to implement?

    A: I'm not sure. The new "visible" setting is stored as an annotation 
       at each specific portlet assignment.
       To be able to change the visibility of a portlet for each context, I
       think we'd need to set these settings at the context...

- As the to-do section says, this PLIP isn't done yet. We should probably do a
  migration for people who upgrade straight from the old plone.portlet.static to
  2.0, but your migrate-as-we-go code at
  https://dev.plone.org/old/plone/browser/plone.portlet.static/branches/plip9286-allow-show-hide-portlets/plone/portlet/static/static.py?rev=29096#L79
  goes a long way.

    A: The migration isn't finished yet. Comming soon.

All in all, great work so far. I can't see anything wrong with your code.
