PLIP 9259: Group dashboards
===========================

This plip is in progress.

PLIP ticket: https://dev.plone.org/plone/ticket/9259

To do
-----

- more testing
- when merged, we should add rolemap.xml entries for the following permissions

    - "Portlets: Manage group portlets" => Manager
    - "Portlets: View dashboard"        => Authenticated


Summary of changes
------------------

- Two new permissions added:

    - "Portlets: Manage group portlets"", used to control access to the group
      dashboard and sitewide-group portlet management screens.
      
    - "Portlets: View dashboard", used to control access to the dashboard.
      Note that this previously used "Portlets: Manage own portlets", which
      meant it was impossible to let someone see a group dashboard, but not
      edit their own portlets. This also necessitated a change in the
      PersonalBarViewlet
    
    - NOTE: These permissions are not set up by default yet, because I didn't
      want to branch the Plone egg in order to modify rolemap.xml. To test the
      dashboard as non-Manager, edit the permission in the portal root.
    
- plone.app.layout's dashboard and viewlets modules changed to use these 
  permissions.

- A new ++groupdashboard++ namespace added to plone.app.portlets.

- A new GroupDashboardPortletAssignmentMapping added to plone.app.portlets.

- A new @@manage-group-dashboard view added, with a link from the
  @@manage-group-portlets view.

Needed documentation changes
----------------------------

We should document this feature, and the permission changes. Something like:

It is now possible to assign dashboard portlets by group as well as by user.
Go to Site Setup, Users and Groups, find a group, and click on Group Portlets.
Then click "Edit group dashboard portlets" to assign portlets to this group's
dashboard. Members of the group will see these portlets on their dashboard,
underneath any personal dashboard portlets.

In addition, the permissions controlling access to the dashboard have been
made more granular:

 * "Portlets: View dashboard" is used to control who can see the dashboard.
 * "Portlets: Manage own portlets" is used to control access to the "edit"
   tab of the dashboard, and thus the ability to manage personal dashboard
   portlets.
 * "Portlets: Manage group portlets" is used to control access to the
   group portlet management screens.

Backwards compatibility
-----------------------

People who have taken away "Portlets: Mange own portlets" to hide the
dashboard will now need to take away "Portlets: View dashboard" as well.

Credits
-------

Martin Aspeli
