From e5421abe88a21d8bbd01b35c8de395ad7cba3670 Mon Sep 17 00:00:00 2001
From: Johannes Raggam <raggam-nl@adm.at>
Date: Sat, 30 Oct 2010 01:23:34 +0100
Subject: [PATCH 1/4] + plone.app.event dep

---
 setup.py |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/setup.py b/setup.py
index 1572b91..b96359f 100644
--- a/setup.py
+++ b/setup.py
@@ -134,5 +134,6 @@ setup(name='Plone',
           'zope.structuredtext',
           'zope.tal',
           'zope.tales',
+          'plone.app.event',
       ],
       )
-- 
1.7.1

From f94dfd61ff83fe563e5533f5c318bce096f111c0 Mon Sep 17 00:00:00 2001
From: Johannes Raggam <raggam-nl@adm.at>
Date: Sat, 30 Oct 2010 01:23:48 +0100
Subject: [PATCH 2/4] include plone.app.event

---
 Products/CMFPlone/configure.zcml |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/Products/CMFPlone/configure.zcml b/Products/CMFPlone/configure.zcml
index 5f37648..a80697c 100644
--- a/Products/CMFPlone/configure.zcml
+++ b/Products/CMFPlone/configure.zcml
@@ -14,6 +14,7 @@
   <include package="plone.app.contentrules" />
   <include package="plone.app.controlpanel" />
   <include package="plone.app.customerize" />
+  <include package="plone.app.event" />
   <include package="plone.app.folder" />
   <include package="plone.app.form" />
   <include package="plone.app.i18n" />
-- 
1.7.1

From 9b4c87e47d09e0c7b0260acdd241f79f9006a932 Mon Sep 17 00:00:00 2001
From: Johannes Raggam <raggam-nl@adm.at>
Date: Sat, 30 Oct 2010 01:23:59 +0100
Subject: [PATCH 3/4] install plone.app.event

---
 .../CMFPlone/profiles/dependencies/metadata.xml    |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/Products/CMFPlone/profiles/dependencies/metadata.xml b/Products/CMFPlone/profiles/dependencies/metadata.xml
index d43b2d2..e4bc741 100644
--- a/Products/CMFPlone/profiles/dependencies/metadata.xml
+++ b/Products/CMFPlone/profiles/dependencies/metadata.xml
@@ -13,5 +13,6 @@
     <dependency>profile-Products.TinyMCE:TinyMCE</dependency>
     <dependency>profile-plone.app.jquerytools:default</dependency>
     <dependency>profile-plone.app.imaging:default</dependency>
+    <dependency>profile-plone.app.event:default</dependency>
   </dependencies>
 </metadata>
-- 
1.7.1

From 2a5bec40def143cb04297f6cfcffd9439f4c0bcb Mon Sep 17 00:00:00 2001
From: Johannes Raggam <raggam-nl@adm.at>
Date: Sat, 30 Oct 2010 01:24:26 +0100
Subject: [PATCH 4/4] remove start/end indeces + metadata columns. set by plone.app.event

---
 Products/CMFPlone/profiles/default/catalog.xml |    8 --------
 1 files changed, 0 insertions(+), 8 deletions(-)

diff --git a/Products/CMFPlone/profiles/default/catalog.xml b/Products/CMFPlone/profiles/default/catalog.xml
index 04fc773..7826ae3 100644
--- a/Products/CMFPlone/profiles/default/catalog.xml
+++ b/Products/CMFPlone/profiles/default/catalog.xml
@@ -57,9 +57,6 @@
  </index>
  <index name="effectiveRange" meta_type="DateRangeIndex"
     since_field="effective" until_field="expires"/>
- <index name="end" meta_type="DateIndex">
-  <property name="index_naive_time_as_local">True</property>
- </index>
  <index name="expires" meta_type="DateIndex">
   <property name="index_naive_time_as_local">True</property>
  </index>
@@ -103,9 +100,6 @@
  <index name="sortable_title" meta_type="FieldIndex">
   <indexed_attr value="sortable_title"/>
  </index>
- <index name="start" meta_type="DateIndex">
-  <property name="index_naive_time_as_local">True</property>
- </index>
  <column value="CreationDate"/>
  <column value="Creator"/>
  <column value="Date"/>
@@ -119,7 +113,6 @@
  <column value="UID"/>
  <column value="created"/>
  <column value="effective"/>
- <column value="end"/>
  <column value="exclude_from_nav"/>
  <column value="expires"/>
  <column value="getIcon"/>
@@ -134,5 +127,4 @@
  <column value="modified"/>
  <column value="portal_type"/>
  <column value="review_state"/>
- <column value="start"/>
 </object>
-- 
1.7.1

