# Use z3c.form instead of zope.formlib in plone.app.users
# https://dev.plone.org/ticket/12253

[buildout]
extends = plipbase.cfg

parts +=
    omelette
    coverage_pau
    report

auto-checkout +=
    plone.app.users
    collective.examples.userdata

eggs +=
    plone.app.users
    collective.examples.userdata

[sources]
plone.app.users = git git://github.com/plone/plone.app.users.git branch=plip12253-use-z3c.form
collective.examples.userdata = git git@github.com:collective/collective.examples.userdata.git branch=plip12253-use-z3c.form

[instance]
zcml +=
    collective.examples.userdata-configure
    collective.examples.userdata-overrides

[omelette]
recipe = collective.recipe.omelette
eggs = ${instance:eggs}
# ignore-develop = true

[coverage_pau]
recipe = zc.recipe.egg
eggs = coverage
initialization =
    include = '--source=plone.app.users'
    sys.argv = sys.argv[:] + ['run', include, 'bin/test', '--all', '-s', 'plone.app.users']

[report]
recipe = zc.recipe.egg
eggs = coverage
scripts = coverage=report
initialization =
    sys.argv = sys.argv[:] + ['html', '-i']
