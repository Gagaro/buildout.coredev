

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Introduction &mdash; buildout.coredev v4.2.beta2 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '4.2.beta2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="buildout.coredev v4.2.beta2 documentation" href="#" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="#">buildout.coredev v4.2.beta2 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<p>This is the development buildout for Plone 4.2. If this is your first time here, please read ALL if the instructions below before getting started. It will save you time in the end, we promise!</p>
<p>This document assumes you want to fix a bug and will detail the full process. For more information on writing PLIPS, please <a class="reference internal" href="plips.html"><em>go here</em></a>.</p>
</div>
<div class="section" id="stop">
<h1>STOP!<a class="headerlink" href="#stop" title="Permalink to this headline">¶</a></h1>
<p>Legally, you can NOT contribute code unless you have signed the <a class="reference internal" href="agreement.html"><em>contributor agreement</em></a>. This means that we can NOT accept pull requests from you unless this is done so please don&#8217;t put the code reviewers at risk and do it anyways. Subimtting the agreement is easy (and will soon be easier) and if you want quick access and are familiar with the community, go into <a class="reference internal" href="culture.html"><em>irc</em></a> and ask on of the repo admins to give you access with a scanned copy of the agreement. They will get you going as fast as possible!</p>
<div class="toctree-wrapper compound">
<ul class="simple">
</ul>
</div>
<div class="section" id="version-support-policy">
<h2>Version Support Policy<a class="headerlink" href="#version-support-policy" title="Permalink to this headline">¶</a></h2>
<p>If you are doing bug triaging or fixing, keep in mind that Plone has a <a class="reference external" href="http://plone.org/support/version-support-policy">version support policy</a>.</p>
</div>
<div class="section" id="dependencies">
<h2>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="http://help.github.com/mac-set-up-git/">Git</a></li>
<li><a class="reference external" href="http://python.org/">Python</a> 2.6</li>
<li>If you are on Mac OSX, you will need to install XCode. You can do this through the app store or several other soul selling methods. You will likely want to install your own python 2.6 as well since they strip out all the header files which makes compiling some extensions weird. You can ignore this advice to start but have faith, you&#8217;ll come back to it later. They always do...</li>
<li><a class="reference external" href="http://www.pythonware.com/products/pil/">Python Imaging Library (PIL)</a>. Make sure to install this into the proper python environment.</li>
</ul>
</div>
<div class="section" id="setting-up-your-development-environment">
<h2>Setting up Your Development Environment<a class="headerlink" href="#setting-up-your-development-environment" title="Permalink to this headline">¶</a></h2>
<p>The first step in fixing a bug is getting this buildout running. We recommend fixing the bug on the latest branch and then backporting as necessary. <a class="reference external" href="https://github.com/plone/buildout.coredev/">Github</a> by default always points to the currently active branch. More information on switching release branches is below.</p>
<p>To set up a plone 4.2 development environment:</p>
<div class="highlight-python"><pre>&gt; git clone -b 4.2  https://github.com/plone/buildout.coredev ./plone42devel
&gt; cd ./plone42devel
&gt; python bootstrap.py # (where "python" is your python 2.6 binary).
&gt; bin/buildout -v</pre>
</div>
<p>This will run for a long time if it is your first pull (~20 mins). Once that is done pulling down eggs, You can start your new instance with:</p>
<div class="highlight-python"><pre>&gt; ./bin/instance fg</pre>
</div>
<div class="section" id="switching-branches">
<h3>Switching Branches<a class="headerlink" href="#switching-branches" title="Permalink to this headline">¶</a></h3>
<p>If your bug is specific to one branch or you think it should be backported, you can easily switch branches. The first time you get a branch, you must do:</p>
<div class="highlight-python"><pre>&gt; git checkout -t origin/4.1</pre>
</div>
<p>This should automatically track to the remote repository. From then on you can just do:</p>
<div class="highlight-python"><pre>&gt; git checkout 4.1</pre>
</div>
<p>To see what branch you are currently on, just do:</p>
<div class="highlight-python"><pre>&gt; git branch</pre>
</div>
<p>The line with a * by it will indicate which branch you are currently working on.</p>
<p>Make sure to rerun buildout if you were in a different branch earlier to get the correct versions of packages, otherwise you will get some weird behavior!</p>
<p>For more information on buildout, please see the <a class="reference external" href="http://collective-docs.plone.org/en/latest/tutorials/buildout/index.html">collective developer manual documentation on buildout</a>.</p>
</div>
</div>
<div class="section" id="checking-out-packages-for-fixing">
<h2>Checking out Packages for Fixing<a class="headerlink" href="#checking-out-packages-for-fixing" title="Permalink to this headline">¶</a></h2>
<p>If you are checking out a buildout, you obviously want to fix a package. Most packages are not in src/ by default so we can user mr.developer to get the latest and make sure you are always up to date. It can be a little daunting at first to find out which packages are causing the bug in question but just on irc if you need some help. Once you [think you] know which package(s) you want, we can use mr.developer to get the latest source. For example, if the issue is in plone.app.caching and plone.caching:</p>
<div class="highlight-python"><pre>&gt; ./bin/develop co plone.app.caching
&gt; ./bin/develop co plone.caching
&gt; ./bin/buildout</pre>
</div>
<p>Don&#8217;t forget to rerun buildout! mr.developer will download the source from github (or otherwise) and put the package in the src directory. You can repeat this process with as many or as few packages as you need. For some more tips on working with mr.developer, please <a class="reference internal" href="mrdeveloper.html"><em>read more here</em></a>.</p>
</div>
<div class="section" id="testing-locally">
<h2>Testing Locally<a class="headerlink" href="#testing-locally" title="Permalink to this headline">¶</a></h2>
<p>In an ideal world, you would write a test case for your issue before actually trying to fix it. In reality this rarely happens. No matter how you approach it, you should ALWAYS run test cases for both the module and plone.org before commiting any changes.</p>
<p>First and formost, you need to make sure the egg is set up for testing. Open up buildout.cfg and make sure that the test section has the eggs you have modified. Using the same packages above, this would be:</p>
<div class="highlight-python"><pre>[test]
eggs +=
  plone.app.caching [test]
  plone.caching [test]
  ...</pre>
</div>
<p>To run test for the specific module you are modifying:</p>
<div class="highlight-python"><pre>&gt; ./bin/test -m plone.app.caching
&gt; ./bin/test -m plone.caching</pre>
</div>
<p>These should all run without error. Please don&#8217;t check in anything that doesn&#8217;t! If you haven&#8217;t written it already, this is a good time to write a test case for the bug you are fixing and make sure everything is running as it should.</p>
<p>After the module level tests run with your change, please make sure other modules aren&#8217;t affected by the change by running the full suite:</p>
<div class="highlight-python"><pre>&gt; ./bin/test</pre>
</div>
</div>
<div class="section" id="updating-changes-rst-and-checkouts-cfg">
<h2>Updating CHANGES.rst and checkouts.cfg<a class="headerlink" href="#updating-changes-rst-and-checkouts-cfg" title="Permalink to this headline">¶</a></h2>
<p>Once all the tests are running locally on your machine, you are ALMOST ready to commit the changes. A couple housekeeping things before moving on.</p>
<p>First, please edit CHANGES.rst (or CHANGES.txt) in each pakage you have modified and add a summary of the change. This change note will bo collated for the next Plone release and is important for integrators and developers.</p>
<p><em>Most importantly</em>, edit checkouts.cfg in the buildout directory and add your changes package to the auto-checkout list. This let&#8217;s the release manager know that the package has been updated so that when the next release of Plone is cut a new egg will be released and plone will need to pin to the next version of that package. READ: this is how your fix becomes an egg!</p>
<p>Note that there is a section seperator called &#8220;# Test Fixes Only&#8221;. Make sure your egg is above that line or your egg probably won&#8217;t get made very quickly. This just tells the release manager that any eggs below this line have tests that are updated, but no code changes.</p>
<p>Modifying checkouts.cfg also triggers the buildbot, jenkins, to pull in the egg and run all the tests against the changes you just made. Not that you would ever skip running all tests of course... More on that below.</p>
<p>If your bug is in more than one release (e.g. 4.1 and 4.2), please checkout both branches and add to the checkouts.cfg.</p>
</div>
<div class="section" id="commiting-and-pull-requests">
<h2>Commiting and Pull Requests<a class="headerlink" href="#commiting-and-pull-requests" title="Permalink to this headline">¶</a></h2>
<p>Phew! We are in the home stretch. How about a last minute checklist:</p>
<blockquote>
<div><ul class="simple">
<li>Did you fix the original bug?</li>
<li>Did you write a test case for that bug?</li>
<li>Are all test cases for the modules(s) and for Plone passing?</li>
<li>Did you update CHANGES.rst in each packages you touched?</li>
<li>Did you add your changed packages to checkouts.cfg?</li>
</ul>
</div></blockquote>
<p>If you answered YES to all of these questions, you are ready to push your changes!</p>
<div class="section" id="branches-and-forks-and-direct-commits-oh-my">
<h3>Branches and Forks and Direct Commits - Oh My!<a class="headerlink" href="#branches-and-forks-and-direct-commits-oh-my" title="Permalink to this headline">¶</a></h3>
<p>Plone used to be in an svn repository, so everyone is familiar and accustomed to commiting directly to the branches. After the migration to github, the community decided to maintain this spirit. If you have signed the contributor agreement, you can commit directly to the branch (for plone this would be the version branch, for most other packages this would be mster).</p>
<p>HOWEVER, if you are just getting started or you are not sure about your changes or just want general feedback, you may create a branch of whatever packages you are using and then use the pull request feature of github to get review. Everything about this process would be the same except you need to work on a branch. Take the plone.app.caching example. After checking it out with mr.developer, create your own branch with:</p>
<div class="highlight-python"><pre>&gt; cd src/plone.app.caching
&gt; git branch my_descriptive_branch_name</pre>
</div>
<p><em>Note</em>: Branching or forking is your choice. I prefer forking, and I&#8217;m writing the docs so this uses the branch method. If you branch, it helps us because we <em>know</em> that you have committer rights. Either way it&#8217;s your call.</p>
<p>Proceed as normal. When you are ready to push your fix, push to a remote branch with:</p>
<div class="highlight-python"><pre>&gt; git push origin/my_descriptive_branch_name</pre>
</div>
<p>This will make a remote branch in github. Navigate to this branch in the github UI and on the top right there will be a button that says &#8220;Pull Request&#8221;. This will turn your request into a pull request on the main branch. There are people who look once a week or more for pending pull requests and will confirm whether or not its a good fix and give you feedback where necessary. The reviewers are informal and very nice so don&#8217;t worry - they are there to help! If you want immediate feedback, jump into irc with the pull request link and ask for a review.</p>
<p><em>Note</em>: you still need to update checkouts.cfg in the correct branches of buildout.coredev!</p>
</div>
</div>
<div class="section" id="jenkins">
<h2>Jenkins<a class="headerlink" href="#jenkins" title="Permalink to this headline">¶</a></h2>
<p>You STILL aren&#8217;t done! Please check jenkins to make sure your changes haven&#8217;t borked things. It runs every half an hour and takes a while to run so checking back in an hour is a safe bet. Have a beer and head over to the <a class="reference external" href="https://jenkins.plone.org/">Jenkins control panel</a>.</p>
</div>
<div class="section" id="finalizing-tickets">
<h2>Finalizing Tickets<a class="headerlink" href="#finalizing-tickets" title="Permalink to this headline">¶</a></h2>
<p>If you are working from a ticket, please don&#8217;t forget to go back to the ticket and add a link to the changeset. We don&#8217;t have integration with github yet so it&#8217;s a nice way to trac changes. It also let&#8217;s the reporter know that you care. If the bug is really bad, consider pinging the release manager and asking him to make a release pronto.</p>
</div>
<div class="section" id="faq">
<h2>FAQ<a class="headerlink" href="#faq" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li><em>How do I know when my package got made?</em></li>
</ul>
</div></blockquote>
<p>You can follow the project on github and watch its timeline. You can also check the CHANGES.txt of every plone release for a comprehensive list of all changes and validate that yours is present.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Introduction</a></li>
<li><a class="reference internal" href="#stop">STOP!</a><ul>
<li><a class="reference internal" href="#version-support-policy">Version Support Policy</a></li>
<li><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li><a class="reference internal" href="#setting-up-your-development-environment">Setting up Your Development Environment</a><ul>
<li><a class="reference internal" href="#switching-branches">Switching Branches</a></li>
</ul>
</li>
<li><a class="reference internal" href="#checking-out-packages-for-fixing">Checking out Packages for Fixing</a></li>
<li><a class="reference internal" href="#testing-locally">Testing Locally</a></li>
<li><a class="reference internal" href="#updating-changes-rst-and-checkouts-cfg">Updating CHANGES.rst and checkouts.cfg</a></li>
<li><a class="reference internal" href="#commiting-and-pull-requests">Commiting and Pull Requests</a><ul>
<li><a class="reference internal" href="#branches-and-forks-and-direct-commits-oh-my">Branches and Forks and Direct Commits - Oh My!</a></li>
</ul>
</li>
<li><a class="reference internal" href="#jenkins">Jenkins</a></li>
<li><a class="reference internal" href="#finalizing-tickets">Finalizing Tickets</a></li>
<li><a class="reference internal" href="#faq">FAQ</a></li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/index.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li><a href="#">buildout.coredev v4.2.beta2 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, The Plone Foundation.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.8.
    </div>
  </body>
</html>