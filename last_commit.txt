Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2015-09-10T08:57:12-04:00
Author: esteele (esteele) <eric@esteele.net>
Commit: https://github.com/plone/plone.app.upgrade/commit/fd20d75c4608a77d0633fabf121cc5954aa03e6a

Add rc2 upgrade

Files changed:
M plone/app/upgrade/v50/betas.py
M plone/app/upgrade/v50/configure.zcml
M plone/app/upgrade/v50/profiles.zcml

diff --git a/plone/app/upgrade/v50/betas.py b/plone/app/upgrade/v50/betas.py
index 144880f..0f7fbaa 100644
--- a/plone/app/upgrade/v50/betas.py
+++ b/plone/app/upgrade/v50/betas.py
@@ -398,3 +398,8 @@ def to50rc1(context):
         if site_properties.hasProperty(p):
             site_properties._delProperty(p)
 
+
+def to50rc2(context):
+    """5.0rc1 -> 5.0rc2"""
+    loadMigrationProfile(context, 'profile-plone.app.upgrade.v50:to50rc2')
+    portal = getSite()
diff --git a/plone/app/upgrade/v50/configure.zcml b/plone/app/upgrade/v50/configure.zcml
index dcc12fa..18b316e 100644
--- a/plone/app/upgrade/v50/configure.zcml
+++ b/plone/app/upgrade/v50/configure.zcml
@@ -173,4 +173,19 @@
            />
 
     </gs:upgradeSteps>
+
+    <gs:upgradeSteps
+        source="5008"
+        destination="5009"
+        profile="Products.CMFPlone:plone">
+
+       <gs:upgradeStep
+           title="Run to50rc2 upgrade profile"
+           description=""
+           handler=".betas.to50rc2"
+           />
+
+    </gs:upgradeSteps>
+
+
 </configure>
diff --git a/plone/app/upgrade/v50/profiles.zcml b/plone/app/upgrade/v50/profiles.zcml
index 515fc49..5a600ee 100644
--- a/plone/app/upgrade/v50/profiles.zcml
+++ b/plone/app/upgrade/v50/profiles.zcml
@@ -66,4 +66,14 @@
       provides="Products.GenericSetup.interfaces.EXTENSION"
       />
 
+  <genericsetup:registerProfile
+      name="to50rc2"
+      title="Upgrade profile for Plone 5008 to Plone 5.0rc2"
+      description=""
+      directory="profiles/to_rc2"
+      for="Products.CMFPlone.interfaces.IMigratingPloneSiteRoot"
+      provides="Products.GenericSetup.interfaces.EXTENSION"
+      />
+
+
 </configure>


