Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2015-09-04T18:54:03-04:00
Author: esteele (esteele) <eric@esteele.net>
Commit: https://github.com/plone/Products.CMFPlone/commit/501826581cca5eb0eec28042ed3644f20e32f3b2

Remove no-longer-used images from portal_images.

Files changed:
M Products/CMFPlone/tests/testPortalCreation.py
D Products/CMFPlone/skins/plone_images/arrowBlank.png
D Products/CMFPlone/skins/plone_images/arrowBlank.png.metadata
D Products/CMFPlone/skins/plone_images/arrowDownAlternative.png
D Products/CMFPlone/skins/plone_images/arrowDownAlternative.png.metadata
D Products/CMFPlone/skins/plone_images/arrowUpAlternative.png
D Products/CMFPlone/skins/plone_images/arrowUpAlternative.png.metadata
D Products/CMFPlone/skins/plone_images/history_compare_with_previous_inline.png.metadata
D Products/CMFPlone/skins/plone_images/plone_powered.png
D Products/CMFPlone/skins/plone_images/plone_powered.png.metadata
D Products/CMFPlone/skins/plone_images/spinner.gif
D Products/CMFPlone/skins/plone_images/spinner.gif.metadata

diff --git a/Products/CMFPlone/skins/plone_images/arrowBlank.png b/Products/CMFPlone/skins/plone_images/arrowBlank.png
deleted file mode 100644
index 3e0bc78..0000000
Binary files a/Products/CMFPlone/skins/plone_images/arrowBlank.png and /dev/null differ
diff --git a/Products/CMFPlone/skins/plone_images/arrowBlank.png.metadata b/Products/CMFPlone/skins/plone_images/arrowBlank.png.metadata
deleted file mode 100644
index 855fecc..0000000
--- a/Products/CMFPlone/skins/plone_images/arrowBlank.png.metadata
+++ /dev/null
@@ -1,2 +0,0 @@
-[default]
-cache=HTTPCache
diff --git a/Products/CMFPlone/skins/plone_images/arrowDownAlternative.png b/Products/CMFPlone/skins/plone_images/arrowDownAlternative.png
deleted file mode 100644
index 65f40a9..0000000
Binary files a/Products/CMFPlone/skins/plone_images/arrowDownAlternative.png and /dev/null differ
diff --git a/Products/CMFPlone/skins/plone_images/arrowDownAlternative.png.metadata b/Products/CMFPlone/skins/plone_images/arrowDownAlternative.png.metadata
deleted file mode 100644
index 855fecc..0000000
--- a/Products/CMFPlone/skins/plone_images/arrowDownAlternative.png.metadata
+++ /dev/null
@@ -1,2 +0,0 @@
-[default]
-cache=HTTPCache
diff --git a/Products/CMFPlone/skins/plone_images/arrowUpAlternative.png b/Products/CMFPlone/skins/plone_images/arrowUpAlternative.png
deleted file mode 100644
index f177d99..0000000
Binary files a/Products/CMFPlone/skins/plone_images/arrowUpAlternative.png and /dev/null differ
diff --git a/Products/CMFPlone/skins/plone_images/arrowUpAlternative.png.metadata b/Products/CMFPlone/skins/plone_images/arrowUpAlternative.png.metadata
deleted file mode 100644
index 855fecc..0000000
--- a/Products/CMFPlone/skins/plone_images/arrowUpAlternative.png.metadata
+++ /dev/null
@@ -1,2 +0,0 @@
-[default]
-cache=HTTPCache
diff --git a/Products/CMFPlone/skins/plone_images/history_compare_with_previous_inline.png.metadata b/Products/CMFPlone/skins/plone_images/history_compare_with_previous_inline.png.metadata
deleted file mode 100644
index b16ea22..0000000
--- a/Products/CMFPlone/skins/plone_images/history_compare_with_previous_inline.png.metadata
+++ /dev/null
@@ -1,3 +0,0 @@
-[default]
-title=Zope
-cache=HTTPCache
diff --git a/Products/CMFPlone/skins/plone_images/plone_powered.png b/Products/CMFPlone/skins/plone_images/plone_powered.png
deleted file mode 100644
index f1350e1..0000000
Binary files a/Products/CMFPlone/skins/plone_images/plone_powered.png and /dev/null differ
diff --git a/Products/CMFPlone/skins/plone_images/plone_powered.png.metadata b/Products/CMFPlone/skins/plone_images/plone_powered.png.metadata
deleted file mode 100644
index 855fecc..0000000
--- a/Products/CMFPlone/skins/plone_images/plone_powered.png.metadata
+++ /dev/null
@@ -1,2 +0,0 @@
-[default]
-cache=HTTPCache
diff --git a/Products/CMFPlone/skins/plone_images/spinner.gif b/Products/CMFPlone/skins/plone_images/spinner.gif
deleted file mode 100644
index 872ede5..0000000
Binary files a/Products/CMFPlone/skins/plone_images/spinner.gif and /dev/null differ
diff --git a/Products/CMFPlone/skins/plone_images/spinner.gif.metadata b/Products/CMFPlone/skins/plone_images/spinner.gif.metadata
deleted file mode 100644
index c8bef28..0000000
--- a/Products/CMFPlone/skins/plone_images/spinner.gif.metadata
+++ /dev/null
@@ -1,3 +0,0 @@
-[default]
-title=Spinner
-cache=HTTPCache
diff --git a/Products/CMFPlone/tests/testPortalCreation.py b/Products/CMFPlone/tests/testPortalCreation.py
index 7963985..bfa16bf 100644
--- a/Products/CMFPlone/tests/testPortalCreation.py
+++ b/Products/CMFPlone/tests/testPortalCreation.py
@@ -74,7 +74,7 @@ def testProfileVersion(self):
 
     def testPloneSkins(self):
         # Plone skins should have been set up
-        self.assertTrue(hasattr(self.folder, 'plone_powered.png'))
+        self.assertTrue(hasattr(self.folder, 'logo.png'))
 
     def testDefaultSkin(self):
         # index_html should render


Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2015-09-04T18:54:22-04:00
Author: esteele (esteele) <eric@esteele.net>
Commit: https://github.com/plone/Products.CMFPlone/commit/a86d4efb7e124ad1c4464e8ccac30fdfa8d3818e

events_listing.pt isn't used

Files changed:
D Products/CMFPlone/skins/plone_templates/events_listing.pt
D Products/CMFPlone/skins/plone_templates/events_listing.pt.metadata

diff --git a/Products/CMFPlone/skins/plone_templates/events_listing.pt b/Products/CMFPlone/skins/plone_templates/events_listing.pt
deleted file mode 100644
index 23fbdbc..0000000
--- a/Products/CMFPlone/skins/plone_templates/events_listing.pt
+++ /dev/null
@@ -1,120 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
-      xmlns:tal="http://xml.zope.org/namespaces/tal"
-      xmlns:metal="http://xml.zope.org/namespaces/metal"
-      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
-      lang="en"
-      metal:use-macro="context/main_template/macros/master"
-      i18n:domain="plone">
-
-<head>
-
-</head>
-
-<body>
-<metal:main fill-slot="main">
-<div id="content-core"
-     tal:define="path context/@@plone_portal_state/navigation_root_path;
-                 results python:context.portal_catalog.searchResults(dict(
-                            portal_type='Event',
-                            end={'query': context.ZopeTime(),
-                                 'range': 'min'},
-                            sort_on='start',
-                            review_state='published',
-                            path=path));
-                 results python:[r for r in results if r.getObject()];
-                 Batch python:modules['Products.CMFPlone'].Batch;
-                 b_start python:request.get('b_start',0);
-                 home_url python:context.portal_membership.getHomeUrl;
-                 isAnon context/@@plone_portal_state/anonymous;
-                 portal context/@@plone_portal_state/portal;
-                 show_about python:not isAnon or context.portal_registry['plone.allow_anon_views_about'];">
-
-
-    <form name="searchresults" action="" method="post" tal:condition="results"
-                      tal:define="batch python:Batch(results, 15, int(b_start), orphan=1);
-                                  toLocalizedTime nocall: context/@@plone/toLocalizedTime;">
-
-        <metal:block tal:repeat="result batch">
-
-            <div class="newsItem"
-                 metal:define-macro="listitem"
-                 tal:define="resultObject result/getObject;
-                             creator result/Creator;
-                             resulturl resultObject/absolute_url;">
-
-                <h2>
-                    <a href="/view"
-                       tal:attributes="href resulturl"
-                       tal:content="result/pretty_title_or_id">
-                        Event headline
-                    </a>
-                </h2>
-
-                <div class="newsContent">
-
-                    <p tal:content="result/Description">
-                        Description
-                    </p>
-
-                    <ul class="newsAbout">
-                        <li tal:define="subject python:resultObject.Subject()"
-                            tal:condition="subject">
-                        <span tal:replace="python:modules['string'].join(subject, ' ')"> Conference </span>
-                        </li>
-                        <li>
-                        <span tal:replace="python:toLocalizedTime(resultObject.start(), long_format=1)">Start Date Time</span>
-                        <span i18n:translate="event_and">to</span>
-                        <span tal:replace="python:toLocalizedTime(resultObject.end(), long_format=1)">End Date Time</span>.
-                        </li>
-                        <tal:about-info condition="show_about">
-                        <li>
-                            <span tal:omit-tag="" i18n:translate="posted_by">Posted by</span>
-
-                            <span class="link-user">
-                                <a href=""
-                                   tal:attributes="href python: home_url(creator)"
-                                   tal:content="creator">
-                                    Author
-                                </a>
-                            </span>.
-                        </li>
-                        <li>
-                            <span tal:omit-tag="" i18n:translate="label_published">Published</span>:
-                            <span tal:replace="python:toLocalizedTime(result.Date)" />
-                        </li>
-                        </tal:about-info>
-                    </ul>
-
-                    <ul class="newsFooter">
-                        <li>
-                            <a href="/view" tal:attributes="href resulturl">
-                                <span class="hiddenStructure"><span tal:replace="result/pretty_title_or_id" /> - </span>
-                                <span i18n:translate="read_more">Read More&hellip;</span>
-                            </a>
-                        </li>
-
-                    </ul>
-
-                </div>
-
-            </div>
-
-        </metal:block>
-
-        <div metal:use-macro="context/batch_macros/macros/navigation" />
-
-    </form>
-
-    <p tal:condition="not: results" i18n:translate="no_new_events">
-        No events have been posted.
-    </p>
-
-    <div tal:define="contentTypes context/getAllowedTypes" tal:omit-tag="python:1"
-         tal:condition="python:'events' in portal.contentIds() and context==portal.events">
-    </div>
-
-  </div>
-
-</metal:main>
-</body>
-</html>
diff --git a/Products/CMFPlone/skins/plone_templates/events_listing.pt.metadata b/Products/CMFPlone/skins/plone_templates/events_listing.pt.metadata
deleted file mode 100644
index ecac971..0000000
--- a/Products/CMFPlone/skins/plone_templates/events_listing.pt.metadata
+++ /dev/null
@@ -1,2 +0,0 @@
-[default]
-title=Events


Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2015-09-04T19:14:36-04:00
Author: esteele (esteele) <eric@esteele.net>
Commit: https://github.com/plone/Products.CMFPlone/commit/6484d00ce1fc4262335353dc31d1b019bad18dcd

Changelog

Files changed:
M CHANGES.rst

diff --git a/CHANGES.rst b/CHANGES.rst
index 36d63e6..9d61a5f 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -8,6 +8,9 @@ Changelog
 5.0b5 (unreleased)
 ------------------
 
+- Remove no-longer-used images from portal_images. 
+  [esteele]
+
 - Typo in delete modal configuration caused submission redirection errors
   [vangheem]
 


Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2015-09-04T19:14:45-04:00
Author: esteele (esteele) <eric@esteele.net>
Commit: https://github.com/plone/Products.CMFPlone/commit/284d1219f4bcb4370b12747a72618bcca601104d

Bump metadata version

Files changed:
M Products/CMFPlone/profiles/default/metadata.xml

diff --git a/Products/CMFPlone/profiles/default/metadata.xml b/Products/CMFPlone/profiles/default/metadata.xml
index cdc956c..d0ab284 100644
--- a/Products/CMFPlone/profiles/default/metadata.xml
+++ b/Products/CMFPlone/profiles/default/metadata.xml
@@ -1,4 +1,4 @@
 <?xml version="1.0"?>
 <metadata>
-  <version>5007</version>
+  <version>5008</version>
 </metadata>


Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2015-09-04T19:25:22-04:00
Author: esteele (esteele) <eric@esteele.net>
Commit: https://github.com/plone/Products.CMFPlone/commit/5de042e53503030d2374e170fa3002c6eab4cc1e

Drop unused history forms.

These live in CMFEditions now.

Files changed:
M CHANGES.rst
M Products/CMFPlone/profiles/default/skins.xml
D Products/CMFPlone/skins/plone_forms/history_comparison.pt
D Products/CMFPlone/skins/plone_forms/history_form.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index 9d61a5f..afcbc42 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -8,6 +8,10 @@ Changelog
 5.0b5 (unreleased)
 ------------------
 
+- Remove history_form, history_comparison templates.
+  Remove now-empty plone_forms skins folder.
+  [esteele]
+
 - Remove no-longer-used images from portal_images. 
   [esteele]
 
diff --git a/Products/CMFPlone/profiles/default/skins.xml b/Products/CMFPlone/profiles/default/skins.xml
index 670224a..8c9a3fa 100644
--- a/Products/CMFPlone/profiles/default/skins.xml
+++ b/Products/CMFPlone/profiles/default/skins.xml
@@ -38,7 +38,6 @@
   <layer name="plone_templates"/>
   <layer name="plone_form_scripts"/>
   <layer name="plone_scripts"/>
-  <layer name="plone_forms"/>
   <layer name="plone_images"/>
   <layer name="plone_content"/>
   <layer name="plone_login"/>
diff --git a/Products/CMFPlone/skins/plone_forms/history_comparison.pt b/Products/CMFPlone/skins/plone_forms/history_comparison.pt
deleted file mode 100644
index fc965a9..0000000
--- a/Products/CMFPlone/skins/plone_forms/history_comparison.pt
+++ /dev/null
@@ -1,25 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
-      xmlns:tal="http://xml.zope.org/namespaces/tal"
-      xmlns:metal="http://xml.zope.org/namespaces/metal"
-      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
-      metal:use-macro="here/main_template/macros/master"
-      i18n:domain="plone">
-  <body>
-  <metal:main fill-slot="main" tal:define="results request/historyComparisonResults|nothing;">
-
-    <div id="content-core">
-        <div tal:condition="results">
-          <span tal:replace="structure results" />
-        </div>
-
-        <div tal:condition="python:test(results, 0, 1)">
-          <p i18n:translate="description_no_comparison_support">
-          This object does not provide comparison support.
-          </p>
-        </div>
-    </div>
-
-  </metal:main>
-  </body>
-</html>
-
diff --git a/Products/CMFPlone/skins/plone_forms/history_form.pt b/Products/CMFPlone/skins/plone_forms/history_form.pt
deleted file mode 100644
index 8af40f1..0000000
--- a/Products/CMFPlone/skins/plone_forms/history_form.pt
+++ /dev/null
@@ -1,72 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
-      xmlns:tal="http://xml.zope.org/namespaces/tal"
-      xmlns:metal="http://xml.zope.org/namespaces/metal"
-      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
-      metal:use-macro="here/main_template/macros/master" i18n:domain="plone">
-<metal:main fill-slot="main"
-        tal:define="HistoryBatchSize python:request.get('HistoryBatchSize',20);
-                    first_trx python:request.get('first_transaction',0);
-                    last_trx python:20;
-                    has_history python:getattr(here, 'manage_change_history',None) is not  None;
-                    history python: has_history and context.manage_change_history() or [];">
-
-  <div id="content-core">
-      <form action="#"
-            method="post"
-            tal:define="here_url context/@@plone_context_state/object_url;"
-            tal:attributes="action here_url"
-            tal:condition="has_history" >
-
-      <table summary="History" i18n:attributes="summary summary_history;" tal:define="history_length python:len(history)">
-         <tr>
-           <td>
-             <div class="list-nav" tal:condition="first_trx" tal:define="next python:(first_trx*2-last_trx)">
-               <a href="" tal:attributes="href string:${request/URL}?first_trx:int=$next&amp;last_trx:int=$first_trx&amp;HistoryBatchSize:int=$HistoryBatchSize"> &lt; <span tal:omit-tag="" i18n:translate="label_rev_later">Later Revisions</span></a>
-             </div>
-
-             <div tal:condition="python:test(history_length==HistoryBatchSize, 0, 1)"
-                  tal:define="last python:last_trx+HistoryBatchSize">
-               <a href="" tal:attributes="href string:${request/URL}?first_trx:int=$last_trx&amp;last_transaction:int=$last&amp;HistoryBatchSize:int=$HistoryBatchSize"> <span tal:omit-tag="" i18n:translate="label_rev_earlier">Earlier Revisions</span> &gt; </a>
-             </div>
-
-             <div tal:condition="history" tal:repeat="version history">
-                 <input type="checkbox" value="" name="keys:list" tal:attributes="value version/key" />
-                 <a href="#" tal:attributes="href string:$here_url/HistoricalRevisions/${version/key}">
-                   <span tal:replace="version/time" />
-                   <span tal:condition="version/user_name" tal:replace="string:(${version/user_name})" />
-                 </a>
-                 <span tal:replace="version/description" />
-                 <br />
-             </div>
-           </td>
-         </tr>
-
-         <tr>
-           <td>
-             <input class="context"
-                    type="submit"
-                    name="manage_customHistoryCopy:method"
-                    value="Copy to present"
-                    i18n:attributes="value label_copy_to_present;" />
-             <input class="context"
-                    type="submit"
-                    name="manage_historicalComparison:method"
-                    value="Compare"
-                    i18n:attributes="value label_compare;" />
-           </td>
-         </tr>
-      </table>
-      </form>
-
-      <metal:block tal:condition="not: has_history">
-      <h2 i18n:translate="label_historical_unavailable">Historical not available</h2>
-      <span tal:omit-tag="" i18n:translate="description_historical_unavailable">
-      This class does not support the historical interface. The content must
-      mix-in OFS.History.Historical
-      </span>
-      </metal:block>
-  </div>
-
-</metal:main>
-</html>
-


