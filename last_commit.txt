Repository: plone.theme
Branch: refs/heads/master
Date: 2015-03-20T09:46:14+01:00
Author: Ramon Navarro Bosch (bloodbare) <ramon.nb@gmail.com>
Commit: https://github.com/plone/plone.theme/commit/0eb42ea57e9674a98dd1116b3fd8e4e10647a84a

test layer is testing layer

Files changed:
M plone/theme/tests/testBrowserLayerPrecedence.py

diff --git a/plone/theme/tests/testBrowserLayerPrecedence.py b/plone/theme/tests/testBrowserLayerPrecedence.py
index 7c3b2b4..c562b7d 100644
--- a/plone/theme/tests/testBrowserLayerPrecedence.py
+++ b/plone/theme/tests/testBrowserLayerPrecedence.py
@@ -4,8 +4,6 @@
 from plone.theme.interfaces import IDefaultPloneLayer
 from plone.theme.testing import PLONETHEME_INTEGRATION_TESTING
 
-from zope.publisher.browser import TestRequest
-
 from zope.event import notify
 from zope.interface import Interface, directlyProvides, directlyProvidedBy
 from zope.component import getGlobalSiteManager
@@ -48,7 +46,7 @@ def setUp(self):
                                 self._skin_name)
 
     def _get_request_interfaces(self):
-        request = TestRequest()
+        request = self.layer['request']
         setDefaultSkin(request)
         orig_iro = list(directlyProvidedBy(request).__iro__)
         directlyProvides(request, [self.additive_layer] + orig_iro)


Repository: plone.theme
Branch: refs/heads/master
Date: 2015-03-25T19:26:17+01:00
Author: Timo Stollenwerk (tisto) <tisto@plone.org>
Commit: https://github.com/plone/plone.theme/commit/275d0f90c72a5d6c68a078bf24b94a05532d08a0

Merge branch 'master' into plip13091

Files changed:
M CHANGES.txt
M setup.py

diff --git a/CHANGES.txt b/CHANGES.txt
index 7fc46c9..9ee5e54 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -1,12 +1,19 @@
 Changelog
 =========
 
-2.1.2 (unreleased)
+2.1.3 (unreleased)
 ------------------
 
 - Nothing changed yet.
 
 
+2.1.2 (2015-03-21)
+------------------
+
+- Move tests from PloneTestCase to plone.app.testing.
+  [sdelcourt,timo]
+
+
 2.1.1 (2014-03-02)
 ------------------
 
diff --git a/setup.py b/setup.py
index 085a8db..41e6460 100644
--- a/setup.py
+++ b/setup.py
@@ -5,7 +5,7 @@
 def read(*rnames):
     return open(os.path.join(os.path.dirname(__file__), *rnames)).read()
 
-version = '2.1.2.dev0'
+version = '2.1.3.dev0'
 
 long_description = (
     read('README.txt')


Repository: plone.theme
Branch: refs/heads/master
Date: 2015-03-25T21:36:21+01:00
Author: Ramon Navarro Bosch (bloodbare) <ramon.nb@gmail.com>
Commit: https://github.com/plone/plone.theme/commit/4fd28594a5bb5a82ea82633e6651375dc972b9a2

Merge pull request #2 from plone/plip13091

test layer is testing layer

Files changed:
M plone/theme/tests/testBrowserLayerPrecedence.py

diff --git a/plone/theme/tests/testBrowserLayerPrecedence.py b/plone/theme/tests/testBrowserLayerPrecedence.py
index 7c3b2b4..c562b7d 100644
--- a/plone/theme/tests/testBrowserLayerPrecedence.py
+++ b/plone/theme/tests/testBrowserLayerPrecedence.py
@@ -4,8 +4,6 @@
 from plone.theme.interfaces import IDefaultPloneLayer
 from plone.theme.testing import PLONETHEME_INTEGRATION_TESTING
 
-from zope.publisher.browser import TestRequest
-
 from zope.event import notify
 from zope.interface import Interface, directlyProvides, directlyProvidedBy
 from zope.component import getGlobalSiteManager
@@ -48,7 +46,7 @@ def setUp(self):
                                 self._skin_name)
 
     def _get_request_interfaces(self):
-        request = TestRequest()
+        request = self.layer['request']
         setDefaultSkin(request)
         orig_iro = list(directlyProvidedBy(request).__iro__)
         directlyProvides(request, [self.additive_layer] + orig_iro)


