Repository: Products.CMFPlone
Branch: refs/heads/master
Date: 2015-03-13T10:44:06-05:00
Author: vangheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/c713121042d33a972f1360c06f68ea7bb6f28abc

if no resources are defined for bundle, do not try and compile it

Files changed:
M Products/CMFPlone/resources/browser/scripts.py

diff --git a/Products/CMFPlone/resources/browser/scripts.py b/Products/CMFPlone/resources/browser/scripts.py
index 5675c91..f130da2 100644
--- a/Products/CMFPlone/resources/browser/scripts.py
+++ b/Products/CMFPlone/resources/browser/scripts.py
@@ -29,10 +29,12 @@ def get_data(self, bundle, result):
                         result.append(data)
         else:
             if bundle.compile is False:
-                # Its a legacy css bundle
-                if not bundle.last_compilation\
-                        or self.last_legacy_import > bundle.last_compilation:
-                    # We need to compile
+                # Its a legacy css bundle OR compiling is happening outside of plone
+                if ((not bundle.last_compilation
+                        or self.last_legacy_import > bundle.last_compilation)
+                        and bundle.resources):
+                    # We need to combine files. It's possible no resources are defined
+                    # because the compiling is done outside of plone
                     cookWhenChangingSettings(self.context, bundle)
             if bundle.jscompilation:
                 result.append({


