Repository: Products.PortalTransforms


Branch: refs/heads/master
Date: 2015-09-12T02:23:11-05:00
Author: vangheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/Products.PortalTransforms/commit/f1f2b6a40682a8073765c7a29116fea700ed2852

add iframe as a valid tag

Files changed:
M CHANGES.rst
M Products/PortalTransforms/transforms/safe_html.py

diff --git a/CHANGES.rst b/CHANGES.rst
index df28101..c2ad092 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,7 +4,8 @@ Changelog
 2.1.10 (unreleased)
 -------------------
 
-- Nothing changed yet.
+- Add iframe as a valid tag
+  [vangheem]
 
 
 2.1.9 (2015-09-04)
diff --git a/Products/PortalTransforms/transforms/safe_html.py b/Products/PortalTransforms/transforms/safe_html.py
index 8fb7b63..e2e2b46 100644
--- a/Products/PortalTransforms/transforms/safe_html.py
+++ b/Products/PortalTransforms/transforms/safe_html.py
@@ -62,6 +62,7 @@ class IllegalHTML(ValueError):
              , 'tt'         : 1
              , 'u'          : 1
              , 'ul'         : 1
+             , 'iframe'     : 1
              }
 
 NASTY_TAGS = { 'script'     : 1
@@ -2609,7 +2610,7 @@ def __init__(self, name=None, **kwargs):
                 'cellspacing', 'cellpadding', 'bgcolor'],
             'stripped_combinations': {'table th td': 'width height'},
             'style_whitelist': ['text-align', 'list-style-type', 'float',
-                                'padding-left', ],
+                                'padding-left', 'text-decoration'],
             'class_blacklist': [],
             'remove_javascript': 1,
             'disable_transform': 0,


