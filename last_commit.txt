Repository: plone.app.contenttypes
Branch: refs/heads/master
Date: 2015-04-10T13:20:37+02:00
Author: Vincent Fretin (vincentfretin) <vincent.fretin@gmail.com>
Commit: https://github.com/plone/plone.app.contenttypes/commit/77fc76b2dc437bfe4f3c3ecb5b5a1b2572db634c

i18n fixes

Files changed:
M docs/CHANGES.rst
M plone/app/contenttypes/browser/templates/archetypes_warning_viewlet.pt
M plone/app/contenttypes/migration/atct_migrator.pt

diff --git a/docs/CHANGES.rst b/docs/CHANGES.rst
index 02cdf38..6a25092 100644
--- a/docs/CHANGES.rst
+++ b/docs/CHANGES.rst
@@ -4,6 +4,9 @@ Changelog
 1.2a8 (unreleased)
 ------------------
 
+- I18n fixes.
+  [vincentfretin]
+
 - Fix ``test_warning_for_uneditable_content`` to work with recent browser layer
   changes in ``plone.app.z3cform``.
   [thet]
diff --git a/plone/app/contenttypes/browser/templates/archetypes_warning_viewlet.pt b/plone/app/contenttypes/browser/templates/archetypes_warning_viewlet.pt
index 8ba1390..789a05d 100644
--- a/plone/app/contenttypes/browser/templates/archetypes_warning_viewlet.pt
+++ b/plone/app/contenttypes/browser/templates/archetypes_warning_viewlet.pt
@@ -6,7 +6,8 @@
     </tal:manager>
     <tal:manager tal:condition="view/can_migrate">
       <span i18n:translate="">You can't edit this content unless you
-        <a href="#" tal:attributes="href string:${context/plone_portal_state/portal_url}/@@atct_migrator">
+        <a href="#" i18n:name="migrate" i18n:translate=""
+          tal:attributes="href string:${context/plone_portal_state/portal_url}/@@atct_migrator">
           migrate the default content-types to Dexterity.
         </a>
       </span>
diff --git a/plone/app/contenttypes/migration/atct_migrator.pt b/plone/app/contenttypes/migration/atct_migrator.pt
index 9bb49e9..2d7d0d3 100644
--- a/plone/app/contenttypes/migration/atct_migrator.pt
+++ b/plone/app/contenttypes/migration/atct_migrator.pt
@@ -82,7 +82,7 @@
     <tal:block condition="python: subtopics and not collections_are_folderish">
       <div class="important">
         <h2 i18n:translate="">Error</h2>
-        <p i18n:translate="">Your site has <span tal:replace="python: len(subtopics)" /> subtopic(s). Before migrating them you have to either remove all subtopics or create folderish Collections to be able to migrate them. Inheriting criteria to sub-collections is not supported by the default types. You can still migrate other content.</p>
+        <p i18n:translate="">Your site has <span i18n:name="n" tal:replace="python: len(subtopics)" /> subtopic(s). Before migrating them you have to either remove all subtopics or create folderish Collections to be able to migrate them. Inheriting criteria to sub-collections is not supported by the default types. You can still migrate other content.</p>
         <p><a i18n:translate="" href="https://pypi.python.org/pypi/plone.app.contenttypes#migration">See here for details.</a></p>
         <p i18n:translate="">Your subtopics:</p>
         <ul>
@@ -93,7 +93,7 @@
     <tal:block condition="python: subtopics and collections_are_folderish">
       <div class="important">
         <h2 i18n:translate="">Warning</h2>
-        <p i18n:translate="">Your site has <span tal:replace="python: len(subtopics)" /> subtopic(s). You can migrate them since you have folderish Collections but their functionality to inherit criteria will not work unless you.</p>
+        <p i18n:translate="">Your site has <span i18n:name="n" tal:replace="python: len(subtopics)" /> subtopic(s). You can migrate them since you have folderish Collections but their functionality to inherit criteria will not work unless you.</p>
       </div>
     </tal:block>
     <tal:block condition="python: has_contentleadimage"


