Repository: plone.app.widgets
Branch: refs/heads/master
Date: 2015-02-05T08:31:51-06:00
Author: vangheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/plone.app.widgets/commit/309c6da9e8269f77cfea98be92803411f75dd400

use patterns-loaded class

Files changed:
M plone/app/widgets/tests/robot/common.robot
M plone/app/widgets/tests/robot/test_querystring_widget.robot

diff --git a/plone/app/widgets/tests/robot/common.robot b/plone/app/widgets/tests/robot/common.robot
index d158bc6..68c4bff 100644
--- a/plone/app/widgets/tests/robot/common.robot
+++ b/plone/app/widgets/tests/robot/common.robot
@@ -38,11 +38,11 @@ I edit
 I create a collection
   [Arguments]  ${title}
   Go to  ${PLONE_URL}/++add++Collection
-  Wait For Condition  return $('.autotoc-nav .active:visible').size() > 0
+  Wait For Condition  return $('body.patterns-loaded').size() > 0
   Execute Javascript  $('#form-widgets-IDublinCore-title').val('${title}'); return 0;
 
 I create a folder
   [Arguments]  ${title}
   Go to  ${PLONE_URL}/++add++Folder
-  Wait For Condition  return $('.autotoc-nav .active:visible').size() > 0
+  Wait For Condition  return $('body.patterns-loaded').size() > 0
   Execute Javascript  $('#form-widgets-IDublinCore-title').val('${title}'); return 0;
diff --git a/plone/app/widgets/tests/robot/test_querystring_widget.robot b/plone/app/widgets/tests/robot/test_querystring_widget.robot
index 4db2486..90bbaf4 100644
--- a/plone/app/widgets/tests/robot/test_querystring_widget.robot
+++ b/plone/app/widgets/tests/robot/test_querystring_widget.robot
@@ -13,7 +13,7 @@ ${querywidget_selector}  \#formfield-form-widgets-ICollection-query
 Querystring Widget rows appear and disappear correctly
   Given I'm logged in as a 'Site Administrator'
     And I create a collection  My Collection
-        Wait For Condition  return $('.querystring-wrapper:visible').size() > 0
+        Wait For Condition  return $('body.patterns-loaded').size() > 0
         Page should contain Element  css=${querywidget_selector} .querystring-criteria-wrapper:nth-child(1)
         Page should not contain Element  css=${querywidget_selector} .querystring-criteria-wrapper:nth-child(2)
    When I select criteria index in row  1  Expiration date


