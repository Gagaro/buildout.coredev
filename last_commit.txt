Repository: mockup


Branch: refs/heads/master
Date: 2015-09-19T14:45:37+02:00
Author: JC Brand (jcbrand) <jc@opkode.com>
Commit: https://github.com/plone/mockup/commit/2f725065919c4bbda5071026fc23a2d394ff280b

Use pat-base instead of mockup-patterns-base

Files changed:
M mockup/js/bundles/filemanager.js
M mockup/js/bundles/plone.js
M mockup/js/bundles/structure.js
M mockup/js/bundles/widgets.js
M mockup/js/config.js
M mockup/patterns/autotoc/pattern.js
M mockup/patterns/backdrop/pattern.js
M mockup/patterns/contentloader/pattern.js
M mockup/patterns/cookietrigger/pattern.js
M mockup/patterns/eventedit/pattern.js
M mockup/patterns/filemanager/pattern.js
M mockup/patterns/formautofocus/pattern.js
M mockup/patterns/formunloadalert/pattern.js
M mockup/patterns/inlinevalidation/pattern.js
M mockup/patterns/livesearch/pattern.js
M mockup/patterns/markspeciallinks/pattern.js
M mockup/patterns/modal/pattern.js
M mockup/patterns/moment/pattern.js
M mockup/patterns/passwordstrength/pattern.js
M mockup/patterns/pickadate/pattern.js
M mockup/patterns/preventdoublesubmit/pattern.js
M mockup/patterns/querystring/pattern.js
M mockup/patterns/recurrence/pattern.js
M mockup/patterns/relateditems/pattern.js
M mockup/patterns/resourceregistry/pattern.js
M mockup/patterns/select2/pattern.js
M mockup/patterns/sortable/pattern.js
M mockup/patterns/structure/pattern.js
M mockup/patterns/textareamimetypeselector/pattern.js
M mockup/patterns/texteditor/pattern.js
M mockup/patterns/thememapper/pattern.js
M mockup/patterns/tinymce/js/links.js
M mockup/patterns/tinymce/pattern.js
M mockup/patterns/toggle/pattern.js
M mockup/patterns/tooltip/pattern.js
M mockup/patterns/tree/pattern.js
M mockup/patterns/upload/pattern.js
M mockup/tests/fakeserver.js

diff --git a/mockup/js/bundles/filemanager.js b/mockup/js/bundles/filemanager.js
index f568a84..28f8f14 100644
--- a/mockup/js/bundles/filemanager.js
+++ b/mockup/js/bundles/filemanager.js
@@ -1,7 +1,7 @@
 define([
   'jquery',
   'pat-registry',
-  'mockup-patterns-base',
+  'pat-base',
   'mockup-patterns-filemanager'
 ], function($, registry, Base) {
   'use strict';
diff --git a/mockup/js/bundles/plone.js b/mockup/js/bundles/plone.js
index 11f1438..65f4718 100644
--- a/mockup/js/bundles/plone.js
+++ b/mockup/js/bundles/plone.js
@@ -1,7 +1,7 @@
 define([
   'jquery',
   'pat-registry',
-  'mockup-patterns-base',
+  'pat-base',
 
   'mockup-patterns-select2',
   'mockup-patterns-pickadate',
diff --git a/mockup/js/bundles/structure.js b/mockup/js/bundles/structure.js
index 5adfc56..2a4be61 100644
--- a/mockup/js/bundles/structure.js
+++ b/mockup/js/bundles/structure.js
@@ -8,7 +8,7 @@ if (window.jQuery) {
 define([
   'jquery',
   'pat-registry',
-  'mockup-patterns-base',
+  'pat-base',
   'mockup-patterns-modal',
   'mockup-patterns-structure'
 ], function($, registry, Base, Modal, Structure) {
diff --git a/mockup/js/bundles/widgets.js b/mockup/js/bundles/widgets.js
index 93a5092..2fb36c9 100644
--- a/mockup/js/bundles/widgets.js
+++ b/mockup/js/bundles/widgets.js
@@ -1,7 +1,7 @@
 define([
   'jquery',
   'pat-registry',
-  'mockup-patterns-base',
+  'pat-base',
 
   'mockup-patterns-select2',
   'mockup-patterns-passwordstrength',
diff --git a/mockup/js/config.js b/mockup/js/config.js
index 9fde4c4..ef5bf86 100644
--- a/mockup/js/config.js
+++ b/mockup/js/config.js
@@ -63,7 +63,6 @@
       'mockup-parser': 'bower_components/mockup-core/js/parser',
       'mockup-patterns-autotoc': 'patterns/autotoc/pattern',
       'mockup-patterns-backdrop': 'patterns/backdrop/pattern',
-      'mockup-patterns-base': 'bower_components/mockup-core/js/pattern',
       'mockup-patterns-contentloader': 'patterns/contentloader/pattern',
       'mockup-patterns-cookietrigger': 'patterns/cookietrigger/pattern',
       'mockup-patterns-eventedit': 'patterns/eventedit/pattern',
@@ -119,6 +118,7 @@
       'pat-compat': 'bower_components/patternslib/src/core/compat',
       'pat-jquery-ext': 'bower_components/patternslib/src/core/jquery-ext',
       'pat-logger': 'bower_components/patternslib/src/core/logger',
+      'pat-base': 'bower_components/patternslib/src/core/base',
       'pat-registry': 'bower_components/patternslib/src/core/registry',
       'pat-utils': 'bower_components/patternslib/src/core/utils',
       'logging': 'bower_components/logging/src/logging'
diff --git a/mockup/patterns/autotoc/pattern.js b/mockup/patterns/autotoc/pattern.js
index 6b240cd..2bc0b3e 100644
--- a/mockup/patterns/autotoc/pattern.js
+++ b/mockup/patterns/autotoc/pattern.js
@@ -71,7 +71,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base'
+  'pat-base'
 ], function($, Base) {
   'use strict';
 
diff --git a/mockup/patterns/backdrop/pattern.js b/mockup/patterns/backdrop/pattern.js
index ede1246..3c0cdf5 100644
--- a/mockup/patterns/backdrop/pattern.js
+++ b/mockup/patterns/backdrop/pattern.js
@@ -18,7 +18,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base'
+  'pat-base'
 ], function($, Base) {
   'use strict';
 
diff --git a/mockup/patterns/contentloader/pattern.js b/mockup/patterns/contentloader/pattern.js
index 10670fd..55033bb 100644
--- a/mockup/patterns/contentloader/pattern.js
+++ b/mockup/patterns/contentloader/pattern.js
@@ -27,7 +27,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base',
+  'pat-base',
   'pat-logger',
   'pat-registry',
   'mockup-utils',
diff --git a/mockup/patterns/cookietrigger/pattern.js b/mockup/patterns/cookietrigger/pattern.js
index 20669f8..2763ddc 100644
--- a/mockup/patterns/cookietrigger/pattern.js
+++ b/mockup/patterns/cookietrigger/pattern.js
@@ -14,7 +14,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base'
+  'pat-base'
 ], function ($, Base) {
   'use strict';
 
diff --git a/mockup/patterns/eventedit/pattern.js b/mockup/patterns/eventedit/pattern.js
index 01dedef..e94051b 100644
--- a/mockup/patterns/eventedit/pattern.js
+++ b/mockup/patterns/eventedit/pattern.js
@@ -71,7 +71,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base',
+  'pat-base',
   'mockup-patterns-pickadate',
 ], function ($, Base, pickadate) {
   'use strict';
diff --git a/mockup/patterns/filemanager/pattern.js b/mockup/patterns/filemanager/pattern.js
index 51a3a53..5311986 100644
--- a/mockup/patterns/filemanager/pattern.js
+++ b/mockup/patterns/filemanager/pattern.js
@@ -33,7 +33,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base',
+  'pat-base',
   'underscore',
   'backbone',
   'mockup-ui-url/views/base',
diff --git a/mockup/patterns/formautofocus/pattern.js b/mockup/patterns/formautofocus/pattern.js
index 310a238..addec3f 100644
--- a/mockup/patterns/formautofocus/pattern.js
+++ b/mockup/patterns/formautofocus/pattern.js
@@ -15,7 +15,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base'
+  'pat-base'
 ], function($, Base, undefined) {
   'use strict';
 
diff --git a/mockup/patterns/formunloadalert/pattern.js b/mockup/patterns/formunloadalert/pattern.js
index 11e7427..63dd924 100644
--- a/mockup/patterns/formunloadalert/pattern.js
+++ b/mockup/patterns/formunloadalert/pattern.js
@@ -29,7 +29,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base',
+  'pat-base',
   'translate'
 ], function ($, Base, _t) {
   'use strict';
diff --git a/mockup/patterns/inlinevalidation/pattern.js b/mockup/patterns/inlinevalidation/pattern.js
index 182ba32..571879d 100644
--- a/mockup/patterns/inlinevalidation/pattern.js
+++ b/mockup/patterns/inlinevalidation/pattern.js
@@ -20,7 +20,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base'
+  'pat-base'
 ], function ($, Base) {
   'use strict';
 
diff --git a/mockup/patterns/livesearch/pattern.js b/mockup/patterns/livesearch/pattern.js
index 6cfbfdd..de683b7 100644
--- a/mockup/patterns/livesearch/pattern.js
+++ b/mockup/patterns/livesearch/pattern.js
@@ -24,7 +24,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base',
+  'pat-base',
   'underscore',
   'translate'
 ], function ($, Base, _, _t){
diff --git a/mockup/patterns/markspeciallinks/pattern.js b/mockup/patterns/markspeciallinks/pattern.js
index 25475e4..71c2afc 100644
--- a/mockup/patterns/markspeciallinks/pattern.js
+++ b/mockup/patterns/markspeciallinks/pattern.js
@@ -79,7 +79,7 @@
  */
 
 define([
-  'mockup-patterns-base',
+  'pat-base',
   'jquery'
 ], function (Base, $) {
   'use strict';
diff --git a/mockup/patterns/modal/pattern.js b/mockup/patterns/modal/pattern.js
index 5b4e6fb..138d85a 100644
--- a/mockup/patterns/modal/pattern.js
+++ b/mockup/patterns/modal/pattern.js
@@ -69,7 +69,7 @@
 define([
   'jquery',
   'underscore',
-  'mockup-patterns-base',
+  'pat-base',
   'mockup-patterns-backdrop',
   'pat-registry',
   'mockup-router',
diff --git a/mockup/patterns/moment/pattern.js b/mockup/patterns/moment/pattern.js
index 9eb2a6e..538fb49 100644
--- a/mockup/patterns/moment/pattern.js
+++ b/mockup/patterns/moment/pattern.js
@@ -83,7 +83,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base',
+  'pat-base',
   'moment',
   'mockup-i18n'
 ], function($, Base, moment, i18n) {
diff --git a/mockup/patterns/passwordstrength/pattern.js b/mockup/patterns/passwordstrength/pattern.js
index 2682bd1..6f80b48 100644
--- a/mockup/patterns/passwordstrength/pattern.js
+++ b/mockup/patterns/passwordstrength/pattern.js
@@ -26,7 +26,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base'
+  'pat-base'
 ], function($, Base) {
   'use strict';
   function loadScript(src) {
diff --git a/mockup/patterns/pickadate/pattern.js b/mockup/patterns/pickadate/pattern.js
index e9fbd6a..004cb16 100644
--- a/mockup/patterns/pickadate/pattern.js
+++ b/mockup/patterns/pickadate/pattern.js
@@ -84,7 +84,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base',
+  'pat-base',
   'picker',
   'picker.date',
   'picker.time',
diff --git a/mockup/patterns/preventdoublesubmit/pattern.js b/mockup/patterns/preventdoublesubmit/pattern.js
index 167ad7b..656deb6 100644
--- a/mockup/patterns/preventdoublesubmit/pattern.js
+++ b/mockup/patterns/preventdoublesubmit/pattern.js
@@ -22,7 +22,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base',
+  'pat-base',
   'translate'
 ], function($, Base, _t) {
   'use strict';
diff --git a/mockup/patterns/querystring/pattern.js b/mockup/patterns/querystring/pattern.js
index 9c27c5e..65cb130 100644
--- a/mockup/patterns/querystring/pattern.js
+++ b/mockup/patterns/querystring/pattern.js
@@ -41,7 +41,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base',
+  'pat-base',
   'mockup-patterns-select2',
   'mockup-patterns-pickadate',
   'select2',
diff --git a/mockup/patterns/recurrence/pattern.js b/mockup/patterns/recurrence/pattern.js
index b77d1d7..470016f 100644
--- a/mockup/patterns/recurrence/pattern.js
+++ b/mockup/patterns/recurrence/pattern.js
@@ -19,7 +19,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base',
+  'pat-base',
   'jquery.recurrenceinput'
 ], function($, Base) {
   'use strict';
diff --git a/mockup/patterns/relateditems/pattern.js b/mockup/patterns/relateditems/pattern.js
index 28061ac..a6ddf4b 100644
--- a/mockup/patterns/relateditems/pattern.js
+++ b/mockup/patterns/relateditems/pattern.js
@@ -71,7 +71,7 @@
 define([
   'jquery',
   'underscore',
-  'mockup-patterns-base',
+  'pat-base',
   'mockup-patterns-select2',
   'mockup-utils',
   'mockup-patterns-tree',
diff --git a/mockup/patterns/resourceregistry/pattern.js b/mockup/patterns/resourceregistry/pattern.js
index 4d2f293..d8491f5 100644
--- a/mockup/patterns/resourceregistry/pattern.js
+++ b/mockup/patterns/resourceregistry/pattern.js
@@ -88,7 +88,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base',
+  'pat-base',
   'underscore',
   'mockup-ui-url/views/base',
   'mockup-utils',
diff --git a/mockup/patterns/select2/pattern.js b/mockup/patterns/select2/pattern.js
index 70fd5ef..ba22737 100644
--- a/mockup/patterns/select2/pattern.js
+++ b/mockup/patterns/select2/pattern.js
@@ -63,7 +63,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base',
+  'pat-base',
   'select2',
   'jquery.event.drag',
   'jquery.event.drop'
diff --git a/mockup/patterns/sortable/pattern.js b/mockup/patterns/sortable/pattern.js
index bacf5a2..f343d23 100644
--- a/mockup/patterns/sortable/pattern.js
+++ b/mockup/patterns/sortable/pattern.js
@@ -46,7 +46,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base',
+  'pat-base',
   'jquery.event.drag',
   'jquery.event.drop'
 ], function($, Base, drag, drop) {
diff --git a/mockup/patterns/structure/pattern.js b/mockup/patterns/structure/pattern.js
index 5b80ba5..edeb7d3 100644
--- a/mockup/patterns/structure/pattern.js
+++ b/mockup/patterns/structure/pattern.js
@@ -25,7 +25,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base',
+  'pat-base',
   'mockup-utils',
   'mockup-patterns-structure-url/js/views/app',
   'text!mockup-patterns-structure-url/templates/paging.xml',
diff --git a/mockup/patterns/textareamimetypeselector/pattern.js b/mockup/patterns/textareamimetypeselector/pattern.js
index 391e61c..f7a6bea 100644
--- a/mockup/patterns/textareamimetypeselector/pattern.js
+++ b/mockup/patterns/textareamimetypeselector/pattern.js
@@ -89,7 +89,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base',
+  'pat-base',
   'pat-registry',
   'mockup-patterns-tinymce'
 ], function ($, Base, registry, tinymce) {
diff --git a/mockup/patterns/texteditor/pattern.js b/mockup/patterns/texteditor/pattern.js
index 010f5f7..da0ae12 100644
--- a/mockup/patterns/texteditor/pattern.js
+++ b/mockup/patterns/texteditor/pattern.js
@@ -56,7 +56,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base',
+  'pat-base',
   'mockup-utils',
   'ace',
 ], function($, Base, utils) {
diff --git a/mockup/patterns/thememapper/pattern.js b/mockup/patterns/thememapper/pattern.js
index f2ed7bb..2509be6 100644
--- a/mockup/patterns/thememapper/pattern.js
+++ b/mockup/patterns/thememapper/pattern.js
@@ -29,7 +29,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base',
+  'pat-base',
   'underscore',
   'translate',
   'text!mockup-patterns-thememapper-url/templates/inspector.xml',
diff --git a/mockup/patterns/tinymce/js/links.js b/mockup/patterns/tinymce/js/links.js
index 138ac5f..82e8526 100644
--- a/mockup/patterns/tinymce/js/links.js
+++ b/mockup/patterns/tinymce/js/links.js
@@ -2,7 +2,7 @@ define([
   'jquery',
   'underscore',
   'pat-registry',
-  'mockup-patterns-base',
+  'pat-base',
   'mockup-patterns-relateditems',
   'mockup-patterns-modal',
   'tinymce',
diff --git a/mockup/patterns/tinymce/pattern.js b/mockup/patterns/tinymce/pattern.js
index 010565b..abb0f1c 100644
--- a/mockup/patterns/tinymce/pattern.js
+++ b/mockup/patterns/tinymce/pattern.js
@@ -61,7 +61,7 @@
 define([
   'jquery',
   'underscore',
-  'mockup-patterns-base',
+  'pat-base',
   'mockup-patterns-relateditems',
   'mockup-patterns-modal',
   'tinymce',
diff --git a/mockup/patterns/toggle/pattern.js b/mockup/patterns/toggle/pattern.js
index 212ce4f..f2d2cc0 100644
--- a/mockup/patterns/toggle/pattern.js
+++ b/mockup/patterns/toggle/pattern.js
@@ -121,7 +121,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base'
+  'pat-base'
 ], function($, Base, undefined) {
   'use strict';
 
diff --git a/mockup/patterns/tooltip/pattern.js b/mockup/patterns/tooltip/pattern.js
index 02b6438..ffcc70d 100644
--- a/mockup/patterns/tooltip/pattern.js
+++ b/mockup/patterns/tooltip/pattern.js
@@ -37,7 +37,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base'
+  'pat-base'
 ], function($, Base, undefined) {
   'use strict';
 
diff --git a/mockup/patterns/tree/pattern.js b/mockup/patterns/tree/pattern.js
index cb310dd..864eaf4 100644
--- a/mockup/patterns/tree/pattern.js
+++ b/mockup/patterns/tree/pattern.js
@@ -53,7 +53,7 @@
 define([
   'jquery',
   'underscore',
-  'mockup-patterns-base',
+  'pat-base',
   'mockup-utils',
   'jqtree'
 ], function($, _, Base, utils) {
diff --git a/mockup/patterns/upload/pattern.js b/mockup/patterns/upload/pattern.js
index 1f28e51..9f83746 100644
--- a/mockup/patterns/upload/pattern.js
+++ b/mockup/patterns/upload/pattern.js
@@ -42,7 +42,7 @@
 define([
   'jquery',
   'underscore',
-  'mockup-patterns-base',
+  'pat-base',
   'mockup-patterns-relateditems',
   'dropzone',
   'text!mockup-patterns-upload-url/templates/upload.xml',
diff --git a/mockup/tests/fakeserver.js b/mockup/tests/fakeserver.js
index be4caa2..196fdf4 100644
--- a/mockup/tests/fakeserver.js
+++ b/mockup/tests/fakeserver.js
@@ -673,7 +673,7 @@ define([
       data = {
         paths: {
           'autotoc': 'patterns/autotoc/pattern',
-          'mockup-patterns-base': 'bower_components/mockup-core/js/pattern',
+          'pat-base': 'bower_components/patternslib/src/core/base',
           'jquery': 'bower_components/jquery/dist/jquery',
           'pat-registry': 'bower_components/patternslib/src/core/registry'
         },


Repository: mockup


Branch: refs/heads/master
Date: 2015-09-19T14:54:27+02:00
Author: JC Brand (jcbrand) <jc@opkode.com>
Commit: https://github.com/plone/mockup/commit/562a9107a3ed67d68b9936cbb60c49c7df39ad6d

Explicitly declare that the mockup parser should be used.

By default the Patternslib parser will be used, unless overridden.

Files changed:
M mockup/patterns/autotoc/pattern.js
M mockup/patterns/backdrop/pattern.js
M mockup/patterns/contentloader/pattern.js
M mockup/patterns/cookietrigger/pattern.js
M mockup/patterns/eventedit/pattern.js
M mockup/patterns/filemanager/pattern.js
M mockup/patterns/formautofocus/pattern.js
M mockup/patterns/formunloadalert/pattern.js
M mockup/patterns/inlinevalidation/pattern.js
M mockup/patterns/livesearch/pattern.js
M mockup/patterns/markspeciallinks/pattern.js
M mockup/patterns/modal/pattern.js
M mockup/patterns/moment/pattern.js
M mockup/patterns/passwordstrength/pattern.js
M mockup/patterns/pickadate/pattern.js
M mockup/patterns/preventdoublesubmit/pattern.js
M mockup/patterns/querystring/pattern.js
M mockup/patterns/recurrence/pattern.js
M mockup/patterns/relateditems/pattern.js
M mockup/patterns/resourceregistry/pattern.js
M mockup/patterns/select2/pattern.js
M mockup/patterns/sortable/pattern.js
M mockup/patterns/structure/pattern.js
M mockup/patterns/textareamimetypeselector/pattern.js
M mockup/patterns/texteditor/pattern.js
M mockup/patterns/thememapper/pattern.js
M mockup/patterns/tinymce/pattern.js
M mockup/patterns/toggle/pattern.js
M mockup/patterns/tooltip/pattern.js
M mockup/patterns/tree/pattern.js
M mockup/patterns/upload/pattern.js

diff --git a/mockup/patterns/autotoc/pattern.js b/mockup/patterns/autotoc/pattern.js
index 2bc0b3e..9997f8d 100644
--- a/mockup/patterns/autotoc/pattern.js
+++ b/mockup/patterns/autotoc/pattern.js
@@ -68,7 +68,6 @@
  *
  */
 
-
 define([
   'jquery',
   'pat-base'
@@ -78,6 +77,7 @@ define([
   var AutoTOC = Base.extend({
     name: 'autotoc',
     trigger: '.pat-autotoc',
+    parser: 'mockup',
     defaults: {
       section: 'section',
       levels: 'h1,h2,h3',
diff --git a/mockup/patterns/backdrop/pattern.js b/mockup/patterns/backdrop/pattern.js
index 3c0cdf5..de75788 100644
--- a/mockup/patterns/backdrop/pattern.js
+++ b/mockup/patterns/backdrop/pattern.js
@@ -25,6 +25,7 @@ define([
   var Backdrop = Base.extend({
     name: 'backdrop',
     trigger: '.pat-backdrop',
+    parser: 'mockup',
     defaults: {
       zIndex: null,
       opacity: 0.8,
diff --git a/mockup/patterns/contentloader/pattern.js b/mockup/patterns/contentloader/pattern.js
index 55033bb..e085744 100644
--- a/mockup/patterns/contentloader/pattern.js
+++ b/mockup/patterns/contentloader/pattern.js
@@ -39,6 +39,7 @@ define([
   var ContentLoader = Base.extend({
     name: 'contentloader',
     trigger: '.pat-contentloader',
+    parser: 'mockup',
     defaults: {
       url: null,
       content: null,
diff --git a/mockup/patterns/cookietrigger/pattern.js b/mockup/patterns/cookietrigger/pattern.js
index 2763ddc..ef78aa7 100644
--- a/mockup/patterns/cookietrigger/pattern.js
+++ b/mockup/patterns/cookietrigger/pattern.js
@@ -21,6 +21,7 @@ define([
   var CookieTrigger = Base.extend({
     name: 'cookietrigger',
     trigger: '.pat-cookietrigger',
+    parser: 'mockup',
 
     isCookiesEnabled: function() {
       /* Test whether cookies are enabled by attempting to set a cookie
diff --git a/mockup/patterns/eventedit/pattern.js b/mockup/patterns/eventedit/pattern.js
index e94051b..4b20b11 100644
--- a/mockup/patterns/eventedit/pattern.js
+++ b/mockup/patterns/eventedit/pattern.js
@@ -79,6 +79,7 @@ define([
   var EventEdit = Base.extend({
     name: 'eventedit',
     trigger: '.pat-eventedit',
+    parser: 'mockup',
     defaults: {
       errorClass: 'error'
     },
diff --git a/mockup/patterns/filemanager/pattern.js b/mockup/patterns/filemanager/pattern.js
index 5311986..77a1acc 100644
--- a/mockup/patterns/filemanager/pattern.js
+++ b/mockup/patterns/filemanager/pattern.js
@@ -60,6 +60,7 @@ define([
   var FileManager = Base.extend({
     name: 'filemanager',
     trigger: '.pat-filemanager',
+    parser: 'mockup',
     template: _.template(AppTemplate),
     tabItemTemplate: _.template(
       '<li class="active" data-path="<%= path %>">' +
diff --git a/mockup/patterns/formautofocus/pattern.js b/mockup/patterns/formautofocus/pattern.js
index addec3f..4475ef3 100644
--- a/mockup/patterns/formautofocus/pattern.js
+++ b/mockup/patterns/formautofocus/pattern.js
@@ -22,6 +22,7 @@ define([
   var FormAutoFocus = Base.extend({
     name: 'formautofocus',
     trigger: '.pat-formautofocus',
+    parser: 'mockup',
     defaults: {
       condition: 'div.error',
       target: 'div.error :input:not(.formTabs):visible:first',
diff --git a/mockup/patterns/formunloadalert/pattern.js b/mockup/patterns/formunloadalert/pattern.js
index 63dd924..6e691bc 100644
--- a/mockup/patterns/formunloadalert/pattern.js
+++ b/mockup/patterns/formunloadalert/pattern.js
@@ -37,6 +37,7 @@ define([
   var FormUnloadAlert = Base.extend({
     name: 'formunloadalert',
     trigger: '.pat-formunloadalert',
+    parser: 'mockup',
     _changed : false,       // Stores a listing of raised changes by their key
     _suppressed : false,     // whether or not warning should be suppressed
     defaults: {
diff --git a/mockup/patterns/inlinevalidation/pattern.js b/mockup/patterns/inlinevalidation/pattern.js
index 571879d..11b14db 100644
--- a/mockup/patterns/inlinevalidation/pattern.js
+++ b/mockup/patterns/inlinevalidation/pattern.js
@@ -27,6 +27,7 @@ define([
   var InlineValidation = Base.extend({
     name: 'inlinevalidation',
     trigger: '.pat-inlinevalidation',
+    parser: 'mockup',
 
     render_error: function ($field, errmsg) {
        var $errbox = $('div.fieldErrorBox', $field);
diff --git a/mockup/patterns/livesearch/pattern.js b/mockup/patterns/livesearch/pattern.js
index de683b7..be4ccd4 100644
--- a/mockup/patterns/livesearch/pattern.js
+++ b/mockup/patterns/livesearch/pattern.js
@@ -33,6 +33,7 @@ define([
   var Livesearch = Base.extend({
     name: 'livesearch',
     trigger: '.pat-livesearch',
+    parser: 'mockup',
     timeout: null,
     active: false,
     results: null,
diff --git a/mockup/patterns/markspeciallinks/pattern.js b/mockup/patterns/markspeciallinks/pattern.js
index 71c2afc..6a0217f 100644
--- a/mockup/patterns/markspeciallinks/pattern.js
+++ b/mockup/patterns/markspeciallinks/pattern.js
@@ -87,6 +87,7 @@ define([
   var MarkSpecialLinks = Base.extend({
     name: 'markspeciallinks',
     trigger: '.pat-markspeciallinks',
+    parser: 'mockup',
     defaults: {
       external_links_open_new_window: false,
       mark_special_links: true
diff --git a/mockup/patterns/modal/pattern.js b/mockup/patterns/modal/pattern.js
index 138d85a..96e8552 100644
--- a/mockup/patterns/modal/pattern.js
+++ b/mockup/patterns/modal/pattern.js
@@ -82,6 +82,7 @@ define([
   var Modal = Base.extend({
     name: 'plone-modal',
     trigger: '.pat-plone-modal',
+    parser: 'mockup',
     createModal: null,
     $model: null,
     defaults: {
diff --git a/mockup/patterns/moment/pattern.js b/mockup/patterns/moment/pattern.js
index 538fb49..9d76661 100644
--- a/mockup/patterns/moment/pattern.js
+++ b/mockup/patterns/moment/pattern.js
@@ -92,6 +92,7 @@ define([
   var Moment = Base.extend({
     name: 'moment',
     trigger: '.pat-moment',
+    parser: 'mockup',
     defaults: {
       // selector of elements to format dates for
       selector: null,
diff --git a/mockup/patterns/passwordstrength/pattern.js b/mockup/patterns/passwordstrength/pattern.js
index 6f80b48..c48f102 100644
--- a/mockup/patterns/passwordstrength/pattern.js
+++ b/mockup/patterns/passwordstrength/pattern.js
@@ -55,6 +55,7 @@ define([
   var PasswordStrength = Base.extend({
     name: 'passwordstrength',
     trigger: '.pat-passwordstrength',
+    parser: 'mockup',
     defaults: {
         zxcvbn: '//cdnjs.cloudflare.com/ajax/libs/zxcvbn/1.0/zxcvbn.js'
     },
diff --git a/mockup/patterns/pickadate/pattern.js b/mockup/patterns/pickadate/pattern.js
index 004cb16..6bc19c3 100644
--- a/mockup/patterns/pickadate/pattern.js
+++ b/mockup/patterns/pickadate/pattern.js
@@ -96,6 +96,7 @@ define([
   var PickADate = Base.extend({
     name: 'pickadate',
     trigger: '.pat-pickadate',
+    parser: 'mockup',
     defaults: {
       separator: ' ',
       date: {
diff --git a/mockup/patterns/preventdoublesubmit/pattern.js b/mockup/patterns/preventdoublesubmit/pattern.js
index 656deb6..2598177 100644
--- a/mockup/patterns/preventdoublesubmit/pattern.js
+++ b/mockup/patterns/preventdoublesubmit/pattern.js
@@ -30,6 +30,7 @@ define([
   var PreventDoubleSubmit = Base.extend({
     name: 'preventdoublesubmit',
     trigger: '.pat-preventdoublesubmit',
+    parser: 'mockup',
     defaults: {
       message : _t('You already clicked the submit button. ' +
                 'Do you really want to submit this form again?'),
diff --git a/mockup/patterns/querystring/pattern.js b/mockup/patterns/querystring/pattern.js
index 65cb130..1feffcb 100644
--- a/mockup/patterns/querystring/pattern.js
+++ b/mockup/patterns/querystring/pattern.js
@@ -433,6 +433,7 @@ define([
   var QueryString = Base.extend({
     name: 'querystring',
     trigger: '.pat-querystring',
+    parser: 'mockup',
     defaults: {
       indexes: [],
       classWrapperName: 'querystring-wrapper',
diff --git a/mockup/patterns/recurrence/pattern.js b/mockup/patterns/recurrence/pattern.js
index 470016f..6992dbb 100644
--- a/mockup/patterns/recurrence/pattern.js
+++ b/mockup/patterns/recurrence/pattern.js
@@ -27,6 +27,7 @@ define([
   var Recurrence = Base.extend({
     name: 'recurrence',
     trigger: '.pat-recurrence',
+    parser: 'mockup',
     defaults: {
       // just passed onto the widget
       language: 'en',
diff --git a/mockup/patterns/relateditems/pattern.js b/mockup/patterns/relateditems/pattern.js
index a6ddf4b..351f731 100644
--- a/mockup/patterns/relateditems/pattern.js
+++ b/mockup/patterns/relateditems/pattern.js
@@ -82,6 +82,7 @@ define([
   var RelatedItems = Base.extend({
     name: 'relateditems',
     trigger: '.pat-relateditems',
+    parser: 'mockup',
     browsing: false,
     currentPath: null,
     defaults: {
diff --git a/mockup/patterns/resourceregistry/pattern.js b/mockup/patterns/resourceregistry/pattern.js
index d8491f5..5721617 100644
--- a/mockup/patterns/resourceregistry/pattern.js
+++ b/mockup/patterns/resourceregistry/pattern.js
@@ -222,6 +222,7 @@ define([
   var ResourceRegistry = Base.extend({
     name: 'resourceregistry',
     trigger: '.pat-resourceregistry',
+    parser: 'mockup',
     defaults: {
       bundles: {},
       resources: {},
diff --git a/mockup/patterns/select2/pattern.js b/mockup/patterns/select2/pattern.js
index ba22737..ef143ff 100644
--- a/mockup/patterns/select2/pattern.js
+++ b/mockup/patterns/select2/pattern.js
@@ -73,6 +73,7 @@ define([
   var Select2 = Base.extend({
     name: 'select2',
     trigger: '.pat-select2',
+    parser: 'mockup',
     defaults: {
       separator: ','
     },
diff --git a/mockup/patterns/sortable/pattern.js b/mockup/patterns/sortable/pattern.js
index f343d23..cecf964 100644
--- a/mockup/patterns/sortable/pattern.js
+++ b/mockup/patterns/sortable/pattern.js
@@ -55,6 +55,7 @@ define([
   var SortablePattern = Base.extend({
     name: 'sortable',
     trigger: '.pat-sortable',
+    parser: 'mockup',
     defaults: {
       selector: 'li',
       dragClass: 'item-dragging',
diff --git a/mockup/patterns/structure/pattern.js b/mockup/patterns/structure/pattern.js
index edeb7d3..41c2df0 100644
--- a/mockup/patterns/structure/pattern.js
+++ b/mockup/patterns/structure/pattern.js
@@ -39,6 +39,7 @@ define([
   var Structure = Base.extend({
     name: 'structure',
     trigger: '.pat-structure',
+    parser: 'mockup',
     defaults: {
       // for implementing history changes
       // Example: {base: 'http://mysite.com', appended: '/folder_contents'}
diff --git a/mockup/patterns/textareamimetypeselector/pattern.js b/mockup/patterns/textareamimetypeselector/pattern.js
index f7a6bea..7d42d24 100644
--- a/mockup/patterns/textareamimetypeselector/pattern.js
+++ b/mockup/patterns/textareamimetypeselector/pattern.js
@@ -98,6 +98,7 @@ define([
   var TextareaMimetypeSelector = Base.extend({
     name: 'textareamimetypeselector',
     trigger: '.pat-textareamimetypeselector',
+    parser: 'mockup',
     textarea: undefined,
     currentWidget: undefined,
     defaults: {
diff --git a/mockup/patterns/texteditor/pattern.js b/mockup/patterns/texteditor/pattern.js
index da0ae12..283d1df 100644
--- a/mockup/patterns/texteditor/pattern.js
+++ b/mockup/patterns/texteditor/pattern.js
@@ -65,6 +65,7 @@ define([
   var AcePattern = Base.extend({
     name: 'texteditor',
     trigger: '.pat-texteditor',
+    parser: 'mockup',
     defaults: {
       theme: null,
       mode: 'text',
diff --git a/mockup/patterns/thememapper/pattern.js b/mockup/patterns/thememapper/pattern.js
index 2509be6..59e6ada 100644
--- a/mockup/patterns/thememapper/pattern.js
+++ b/mockup/patterns/thememapper/pattern.js
@@ -263,6 +263,7 @@ define([
   var ThemeMapper = Base.extend({
     name: 'thememapper',
     trigger: '.pat-thememapper',
+    parser: 'mockup',
     defaults: {
       filemanagerConfig: {},
       themeUrl: null,
diff --git a/mockup/patterns/tinymce/pattern.js b/mockup/patterns/tinymce/pattern.js
index abb0f1c..29d37b7 100644
--- a/mockup/patterns/tinymce/pattern.js
+++ b/mockup/patterns/tinymce/pattern.js
@@ -123,6 +123,7 @@ define([
   var TinyMCE = Base.extend({
     name: 'tinymce',
     trigger: '.pat-tinymce',
+    parser: 'mockup',
     defaults: {
       upload: {
         uploadMultiple: false,
diff --git a/mockup/patterns/toggle/pattern.js b/mockup/patterns/toggle/pattern.js
index f2d2cc0..de8bb87 100644
--- a/mockup/patterns/toggle/pattern.js
+++ b/mockup/patterns/toggle/pattern.js
@@ -128,6 +128,7 @@ define([
   var Toggle = Base.extend({
     name: 'toggle',
     trigger: '.pat-toggle',
+    parser: 'mockup',
     defaults: {
       attribute: 'class',
       event: 'click',
diff --git a/mockup/patterns/tooltip/pattern.js b/mockup/patterns/tooltip/pattern.js
index ffcc70d..6a5a69c 100644
--- a/mockup/patterns/tooltip/pattern.js
+++ b/mockup/patterns/tooltip/pattern.js
@@ -44,6 +44,7 @@ define([
   var Tooltip = Base.extend({
     name: 'tooltip',
     trigger: '.pat-tooltip',
+    parser: 'mockup',
     defaults: {
       html: false
     },
diff --git a/mockup/patterns/tree/pattern.js b/mockup/patterns/tree/pattern.js
index 864eaf4..d2d3509 100644
--- a/mockup/patterns/tree/pattern.js
+++ b/mockup/patterns/tree/pattern.js
@@ -62,6 +62,7 @@ define([
   var Tree = Base.extend({
     name: 'tree',
     trigger: '.pat-tree',
+    parser: 'mockup',
     defaults: {
       dragAndDrop: false,
       autoOpen: false,
diff --git a/mockup/patterns/upload/pattern.js b/mockup/patterns/upload/pattern.js
index 9f83746..42aa9d6 100644
--- a/mockup/patterns/upload/pattern.js
+++ b/mockup/patterns/upload/pattern.js
@@ -58,6 +58,7 @@ define([
   var UploadPattern = Base.extend({
     name: 'upload',
     trigger: '.pat-upload',
+    parser: 'mockup',
     defaults: {
       showTitle: true,
       url: null, // XXX MUST provide url to submit to OR be in a form


Repository: mockup


Branch: refs/heads/master
Date: 2015-09-19T17:12:48+02:00
Author: JC Brand (jcbrand) <jc@opkode.com>
Commit: https://github.com/plone/mockup/commit/105199103ea243d6d7c755fbc22256f48b47284f

Bump to latest Patternslib

which contains the mockup parser and an updated Base pattern.

Files changed:
M bower.json

diff --git a/bower.json b/bower.json
index aaa37a6..efe76f9 100644
--- a/bower.json
+++ b/bower.json
@@ -18,7 +18,7 @@
     "logging": "",
     "mockup-core": "2.1.12",
     "moment": "2.10.3",
-    "patternslib": "2.0.9",
+    "patternslib": "master",
     "pickadate": "3.5.6",
     "requirejs-text": "2.0.12",
     "select2": "3.5.1",
@@ -32,6 +32,7 @@
     "bootstrap": "3.3.4",
     "jquery": "1.11.3",
     "select2": "3.5.1",
-    "patternslib": "2.0.9"
+    "moment": "2.10.3",
+    "patternslib": "master"
   }
 }


Repository: mockup


Branch: refs/heads/master
Date: 2015-09-19T17:15:38+02:00
Author: JC Brand (jcbrand) <jc@opkode.com>
Commit: https://github.com/plone/mockup/commit/8503f222c4c2fd266f9bb8c3184b47cbcd3e4e3f

Updated JS config

- Remove mockup-parser and add pat-mockup-parser (from Patternslib)
- Add lodash and let underscore point to underscore pulled in from Patternslib.
    Looks like the lodash version from mockup is quite old and incompatible
    with the underscore version from Patternslib, so we need both for now :(

Files changed:
M mockup/js/config.js

diff --git a/mockup/js/config.js b/mockup/js/config.js
index ef5bf86..43f1b51 100644
--- a/mockup/js/config.js
+++ b/mockup/js/config.js
@@ -60,7 +60,6 @@
       'mockup-docs-view': 'bower_components/mockup-core/js/docs/view',
       'mockup-fakeserver': 'tests/fakeserver',
       'mockup-i18n': 'js/i18n',
-      'mockup-parser': 'bower_components/mockup-core/js/parser',
       'mockup-patterns-autotoc': 'patterns/autotoc/pattern',
       'mockup-patterns-backdrop': 'patterns/backdrop/pattern',
       'mockup-patterns-contentloader': 'patterns/contentloader/pattern',
@@ -112,13 +111,15 @@
       'text': 'bower_components/requirejs-text/text',
       'tinymce': 'bower_components/tinymce-builded/js/tinymce/tinymce',
       'tinymce-modern-theme': 'bower_components/tinymce-builded/js/tinymce/themes/modern/theme',
-      'underscore': 'bower_components/lodash/dist/lodash.underscore',
+      'underscore': 'bower_components/underscore/underscore',
+      'lodash': 'bower_components/lodash/dist/lodash.underscore',
 
       // Patternslib
       'pat-compat': 'bower_components/patternslib/src/core/compat',
       'pat-jquery-ext': 'bower_components/patternslib/src/core/jquery-ext',
       'pat-logger': 'bower_components/patternslib/src/core/logger',
       'pat-base': 'bower_components/patternslib/src/core/base',
+      'pat-mockup-parser': 'bower_components/patternslib/src/core/mockup-parser',
       'pat-registry': 'bower_components/patternslib/src/core/registry',
       'pat-utils': 'bower_components/patternslib/src/core/utils',
       'logging': 'bower_components/logging/src/logging'


Repository: mockup


Branch: refs/heads/master
Date: 2015-09-19T17:18:08+02:00
Author: JC Brand (jcbrand) <jc@opkode.com>
Commit: https://github.com/plone/mockup/commit/55f0526c48081f621bdd1488f1924f1e0782d296

Fix test for toggle, now that we use Patternslib Base obj

Files changed:
M mockup/tests/pattern-toggle-test.js

diff --git a/mockup/tests/pattern-toggle-test.js b/mockup/tests/pattern-toggle-test.js
index 054ccdc..ef0b50b 100644
--- a/mockup/tests/pattern-toggle-test.js
+++ b/mockup/tests/pattern-toggle-test.js
@@ -2,8 +2,10 @@ define([
   'expect',
   'jquery',
   'pat-registry',
-  'mockup-patterns-toggle'
-], function(expect, $, registry, Toggle) {
+  'pat-logger',
+  'mockup-patterns-toggle',
+  'sinon',
+], function(expect, $, registry, logger, Toggle, sinon) {
   'use strict';
 
   window.mocha.setup('bdd');
@@ -273,11 +275,12 @@ define([
         '   <a href="patterns.html">Click here to go somewhere else</a>' +
         ' </div>' +
         '</div>');
-      try {
-        registry.scan($el);
-      } catch (err) {
-        expect(err.message).to.equal('No target found for "#notarget".');
-      }
+      var log = logger.getLogger("pat.toggle");
+      sinon.spy(log, 'error');
+      registry.scan($el);
+      expect(log.error.calledOnce).to.be(true);
+      expect(log.error.calledWith("Failed while initializing 'toggle' pattern.")).to.be(true);
+      log.error.restore();
     });
   });
 


Repository: mockup


Branch: refs/heads/master
Date: 2015-09-19T17:18:51+02:00
Author: JC Brand (jcbrand) <jc@opkode.com>
Commit: https://github.com/plone/mockup/commit/90d28eab975178b3664be0eeb10b764de1fc1f2a

Explicitly use lodash instead of underscore.

This fixed a lot of broken tests because the version of lodash used by Mockup
is older and not compatible with the version of underscore required by
Patternslib.

Files changed:
M mockup/patterns/contentloader/pattern.js
M mockup/patterns/filemanager/js/addnew.js
M mockup/patterns/filemanager/js/basepopover.js
M mockup/patterns/filemanager/js/customize.js
M mockup/patterns/filemanager/js/delete.js
M mockup/patterns/filemanager/js/newfolder.js
M mockup/patterns/filemanager/js/rename.js
M mockup/patterns/filemanager/js/upload.js
M mockup/patterns/filemanager/pattern.js
M mockup/patterns/livesearch/pattern.js
M mockup/patterns/modal/pattern.js
M mockup/patterns/querystring/pattern.js
M mockup/patterns/relateditems/pattern.js
M mockup/patterns/resourceregistry/js/builder.js
M mockup/patterns/resourceregistry/js/fields.js
M mockup/patterns/resourceregistry/js/less.js
M mockup/patterns/resourceregistry/js/overrides.js
M mockup/patterns/resourceregistry/js/patternoptions.js
M mockup/patterns/resourceregistry/js/registry.js
M mockup/patterns/resourceregistry/pattern.js
M mockup/patterns/structure/js/collections/result.js
M mockup/patterns/structure/js/views/actionmenu.js
M mockup/patterns/structure/js/views/addmenu.js
M mockup/patterns/structure/js/views/app.js
M mockup/patterns/structure/js/views/columns.js
M mockup/patterns/structure/js/views/generic-popover.js
M mockup/patterns/structure/js/views/paging.js
M mockup/patterns/structure/js/views/rearrange.js
M mockup/patterns/structure/js/views/selectionbutton.js
M mockup/patterns/structure/js/views/selectionwell.js
M mockup/patterns/structure/js/views/table.js
M mockup/patterns/structure/js/views/tablerow.js
M mockup/patterns/structure/js/views/textfilter.js
M mockup/patterns/structure/js/views/upload.js
M mockup/patterns/thememapper/js/cacheview.js
M mockup/patterns/thememapper/js/lessbuilderview.js
M mockup/patterns/thememapper/js/rulebuilder.js
M mockup/patterns/thememapper/js/rulebuilderview.js
M mockup/patterns/thememapper/pattern.js
M mockup/patterns/tinymce/js/links.js
M mockup/patterns/tinymce/pattern.js
M mockup/patterns/tree/pattern.js
M mockup/patterns/upload/pattern.js

diff --git a/mockup/patterns/contentloader/pattern.js b/mockup/patterns/contentloader/pattern.js
index e085744..f3ad897 100644
--- a/mockup/patterns/contentloader/pattern.js
+++ b/mockup/patterns/contentloader/pattern.js
@@ -31,7 +31,7 @@ define([
   'pat-logger',
   'pat-registry',
   'mockup-utils',
-  'underscore'
+  'lodash'
 ], function($, Base, logger, Registry, utils, _) {
   'use strict';
   var log = logger.getLogger('pat-contentloader');
diff --git a/mockup/patterns/filemanager/js/addnew.js b/mockup/patterns/filemanager/js/addnew.js
index 9cdfa99..aa5c5a6 100644
--- a/mockup/patterns/filemanager/js/addnew.js
+++ b/mockup/patterns/filemanager/js/addnew.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'underscore',
+  'lodash',
   'backbone',
   'mockup-patterns-filemanager-url/js/basepopover'
 ], function($, _, Backbone, PopoverView) {
diff --git a/mockup/patterns/filemanager/js/basepopover.js b/mockup/patterns/filemanager/js/basepopover.js
index 1559f72..97315a8 100644
--- a/mockup/patterns/filemanager/js/basepopover.js
+++ b/mockup/patterns/filemanager/js/basepopover.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'underscore',
+  'lodash',
   'backbone',
   'mockup-ui-url/views/popover'
 ], function($, _, Backbone, PopoverView) {
diff --git a/mockup/patterns/filemanager/js/customize.js b/mockup/patterns/filemanager/js/customize.js
index 985108f..d1d1ff2 100644
--- a/mockup/patterns/filemanager/js/customize.js
+++ b/mockup/patterns/filemanager/js/customize.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'underscore',
+  'lodash',
   'backbone',
   'mockup-patterns-filemanager-url/js/basepopover',
   'translate'
diff --git a/mockup/patterns/filemanager/js/delete.js b/mockup/patterns/filemanager/js/delete.js
index ef60adc..ce3612a 100644
--- a/mockup/patterns/filemanager/js/delete.js
+++ b/mockup/patterns/filemanager/js/delete.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'underscore',
+  'lodash',
   'backbone',
   'mockup-patterns-filemanager-url/js/basepopover'
 ], function($, _, Backbone, PopoverView) {
diff --git a/mockup/patterns/filemanager/js/newfolder.js b/mockup/patterns/filemanager/js/newfolder.js
index 8560eb8..d411a44 100644
--- a/mockup/patterns/filemanager/js/newfolder.js
+++ b/mockup/patterns/filemanager/js/newfolder.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'underscore',
+  'lodash',
   'backbone',
   'mockup-patterns-filemanager-url/js/basepopover'
 ], function($, _, Backbone, PopoverView) {
diff --git a/mockup/patterns/filemanager/js/rename.js b/mockup/patterns/filemanager/js/rename.js
index 18f16a5..6b26705 100644
--- a/mockup/patterns/filemanager/js/rename.js
+++ b/mockup/patterns/filemanager/js/rename.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'underscore',
+  'lodash',
   'backbone',
   'mockup-patterns-filemanager-url/js/basepopover'
 ], function($, _, Backbone, PopoverView) {
diff --git a/mockup/patterns/filemanager/js/upload.js b/mockup/patterns/filemanager/js/upload.js
index 684d10a..3994719 100644
--- a/mockup/patterns/filemanager/js/upload.js
+++ b/mockup/patterns/filemanager/js/upload.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'underscore',
+  'lodash',
   'backbone',
   'mockup-patterns-filemanager-url/js/basepopover',
   'mockup-patterns-upload'
diff --git a/mockup/patterns/filemanager/pattern.js b/mockup/patterns/filemanager/pattern.js
index 77a1acc..8c04036 100644
--- a/mockup/patterns/filemanager/pattern.js
+++ b/mockup/patterns/filemanager/pattern.js
@@ -34,7 +34,7 @@
 define([
   'jquery',
   'pat-base',
-  'underscore',
+  'lodash',
   'backbone',
   'mockup-ui-url/views/base',
   'mockup-patterns-tree',
diff --git a/mockup/patterns/livesearch/pattern.js b/mockup/patterns/livesearch/pattern.js
index be4ccd4..d3f063b 100644
--- a/mockup/patterns/livesearch/pattern.js
+++ b/mockup/patterns/livesearch/pattern.js
@@ -25,7 +25,7 @@
 define([
   'jquery',
   'pat-base',
-  'underscore',
+  'lodash',
   'translate'
 ], function ($, Base, _, _t){
   'use strict';
diff --git a/mockup/patterns/modal/pattern.js b/mockup/patterns/modal/pattern.js
index 96e8552..d2ab956 100644
--- a/mockup/patterns/modal/pattern.js
+++ b/mockup/patterns/modal/pattern.js
@@ -68,7 +68,7 @@
 
 define([
   'jquery',
-  'underscore',
+  'lodash',
   'pat-base',
   'mockup-patterns-backdrop',
   'pat-registry',
diff --git a/mockup/patterns/querystring/pattern.js b/mockup/patterns/querystring/pattern.js
index 1feffcb..891c08f 100644
--- a/mockup/patterns/querystring/pattern.js
+++ b/mockup/patterns/querystring/pattern.js
@@ -46,7 +46,7 @@ define([
   'mockup-patterns-pickadate',
   'select2',
   'translate',
-  'underscore'
+  'lodash'
 ], function($, Base, Select2, PickADate, undefined, _t, _) {
   'use strict';
 
diff --git a/mockup/patterns/relateditems/pattern.js b/mockup/patterns/relateditems/pattern.js
index 351f731..be1b0c6 100644
--- a/mockup/patterns/relateditems/pattern.js
+++ b/mockup/patterns/relateditems/pattern.js
@@ -70,7 +70,7 @@
 
 define([
   'jquery',
-  'underscore',
+  'lodash',
   'pat-base',
   'mockup-patterns-select2',
   'mockup-utils',
diff --git a/mockup/patterns/resourceregistry/js/builder.js b/mockup/patterns/resourceregistry/js/builder.js
index 65331db..4fb15a1 100644
--- a/mockup/patterns/resourceregistry/js/builder.js
+++ b/mockup/patterns/resourceregistry/js/builder.js
@@ -2,7 +2,7 @@
 define([
   'jquery',
   'mockup-patterns-modal',
-  'underscore',
+  'lodash',
   'mockup-utils',
   'mockup-patterns-resourceregistry-url/js/iframe',
   'translate'
diff --git a/mockup/patterns/resourceregistry/js/fields.js b/mockup/patterns/resourceregistry/js/fields.js
index e59ddc9..973a6e1 100644
--- a/mockup/patterns/resourceregistry/js/fields.js
+++ b/mockup/patterns/resourceregistry/js/fields.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'underscore',
+  'lodash',
   'mockup-ui-url/views/base',
   'mockup-patterns-sortable',
   'mockup-patterns-select2',
diff --git a/mockup/patterns/resourceregistry/js/less.js b/mockup/patterns/resourceregistry/js/less.js
index 1f2a3e3..7f4e5ff 100644
--- a/mockup/patterns/resourceregistry/js/less.js
+++ b/mockup/patterns/resourceregistry/js/less.js
@@ -1,7 +1,7 @@
 define([
   'jquery',
   'mockup-ui-url/views/base',
-  'underscore',
+  'lodash',
   'mockup-utils',
   'mockup-patterns-resourceregistry-url/js/fields',
 ], function($, BaseView, _, utils, fields) {
diff --git a/mockup/patterns/resourceregistry/js/overrides.js b/mockup/patterns/resourceregistry/js/overrides.js
index 10c53a9..447074c 100644
--- a/mockup/patterns/resourceregistry/js/overrides.js
+++ b/mockup/patterns/resourceregistry/js/overrides.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'underscore',
+  'lodash',
   'mockup-ui-url/views/base',
   'mockup-patterns-texteditor',
   'mockup-utils',
diff --git a/mockup/patterns/resourceregistry/js/patternoptions.js b/mockup/patterns/resourceregistry/js/patternoptions.js
index e4228e6..0ea0c40 100644
--- a/mockup/patterns/resourceregistry/js/patternoptions.js
+++ b/mockup/patterns/resourceregistry/js/patternoptions.js
@@ -1,7 +1,7 @@
 define([
   'jquery',
   'mockup-ui-url/views/base',
-  'underscore',
+  'lodash',
   'mockup-utils',
   'mockup-patterns-resourceregistry-url/js/fields',
 ], function($, BaseView, _, utils, fields) {
diff --git a/mockup/patterns/resourceregistry/js/registry.js b/mockup/patterns/resourceregistry/js/registry.js
index e934179..8b22d29 100644
--- a/mockup/patterns/resourceregistry/js/registry.js
+++ b/mockup/patterns/resourceregistry/js/registry.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'underscore',
+  'lodash',
   'mockup-ui-url/views/base',
   'mockup-utils',
   'mockup-patterns-resourceregistry-url/js/fields',
diff --git a/mockup/patterns/resourceregistry/pattern.js b/mockup/patterns/resourceregistry/pattern.js
index 5721617..557881a 100644
--- a/mockup/patterns/resourceregistry/pattern.js
+++ b/mockup/patterns/resourceregistry/pattern.js
@@ -89,7 +89,7 @@
 define([
   'jquery',
   'pat-base',
-  'underscore',
+  'lodash',
   'mockup-ui-url/views/base',
   'mockup-utils',
   'mockup-patterns-resourceregistry-url/js/less',
diff --git a/mockup/patterns/structure/js/collections/result.js b/mockup/patterns/structure/js/collections/result.js
index 40cf6f6..d91edbb 100644
--- a/mockup/patterns/structure/js/collections/result.js
+++ b/mockup/patterns/structure/js/collections/result.js
@@ -1,5 +1,5 @@
 define([
-  'underscore',
+  'lodash',
   'backbone',
   'mockup-patterns-structure-url/js/models/result',
   'backbone.paginator'
diff --git a/mockup/patterns/structure/js/views/actionmenu.js b/mockup/patterns/structure/js/views/actionmenu.js
index e5ae548..ead3738 100644
--- a/mockup/patterns/structure/js/views/actionmenu.js
+++ b/mockup/patterns/structure/js/views/actionmenu.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'underscore',
+  'lodash',
   'backbone',
   'mockup-ui-url/views/base',
   'mockup-patterns-structure-url/js/models/result',
diff --git a/mockup/patterns/structure/js/views/addmenu.js b/mockup/patterns/structure/js/views/addmenu.js
index c8fe9fa..07ef730 100644
--- a/mockup/patterns/structure/js/views/addmenu.js
+++ b/mockup/patterns/structure/js/views/addmenu.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'underscore',
+  'lodash',
   'backbone',
   'mockup-ui-url/views/buttongroup',
   'mockup-ui-url/views/button',
diff --git a/mockup/patterns/structure/js/views/app.js b/mockup/patterns/structure/js/views/app.js
index 94f78f9..d9f86bc 100644
--- a/mockup/patterns/structure/js/views/app.js
+++ b/mockup/patterns/structure/js/views/app.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'underscore',
+  'lodash',
   'backbone',
   'mockup-ui-url/views/toolbar',
   'mockup-ui-url/views/buttongroup',
diff --git a/mockup/patterns/structure/js/views/columns.js b/mockup/patterns/structure/js/views/columns.js
index 3784ac4..89bc9ea 100644
--- a/mockup/patterns/structure/js/views/columns.js
+++ b/mockup/patterns/structure/js/views/columns.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'underscore',
+  'lodash',
   'backbone',
   'mockup-ui-url/views/popover',
   'mockup-patterns-sortable'
diff --git a/mockup/patterns/structure/js/views/generic-popover.js b/mockup/patterns/structure/js/views/generic-popover.js
index a399348..358b87d 100644
--- a/mockup/patterns/structure/js/views/generic-popover.js
+++ b/mockup/patterns/structure/js/views/generic-popover.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'underscore',
+  'lodash',
   'backbone',
   'mockup-ui-url/views/popover',
   'translate',
diff --git a/mockup/patterns/structure/js/views/paging.js b/mockup/patterns/structure/js/views/paging.js
index 77b8e38..b38379c 100644
--- a/mockup/patterns/structure/js/views/paging.js
+++ b/mockup/patterns/structure/js/views/paging.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'underscore',
+  'lodash',
   'backbone',
   'text!mockup-patterns-structure-url/templates/paging.xml',
   'translate'
diff --git a/mockup/patterns/structure/js/views/rearrange.js b/mockup/patterns/structure/js/views/rearrange.js
index c6a4095..cc26f67 100644
--- a/mockup/patterns/structure/js/views/rearrange.js
+++ b/mockup/patterns/structure/js/views/rearrange.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'underscore',
+  'lodash',
   'mockup-ui-url/views/popover',
   'translate'
 ], function($, _, PopoverView, _t) {
diff --git a/mockup/patterns/structure/js/views/selectionbutton.js b/mockup/patterns/structure/js/views/selectionbutton.js
index 0492a30..758069a 100644
--- a/mockup/patterns/structure/js/views/selectionbutton.js
+++ b/mockup/patterns/structure/js/views/selectionbutton.js
@@ -1,7 +1,7 @@
 define([
   'jquery',
   'backbone',
-  'underscore',
+  'lodash',
   'mockup-ui-url/views/button',
   'text!mockup-patterns-structure-url/templates/selection_button.xml'
 ], function($, Backbone, _, ButtonView, tplButton) {
diff --git a/mockup/patterns/structure/js/views/selectionwell.js b/mockup/patterns/structure/js/views/selectionwell.js
index 9f1a53e..4834271 100644
--- a/mockup/patterns/structure/js/views/selectionwell.js
+++ b/mockup/patterns/structure/js/views/selectionwell.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'underscore',
+  'lodash',
   'backbone',
   'mockup-ui-url/views/popover',
   'text!mockup-patterns-structure-url/templates/selection_item.xml'
diff --git a/mockup/patterns/structure/js/views/table.js b/mockup/patterns/structure/js/views/table.js
index 24775e9..ca9c78d 100644
--- a/mockup/patterns/structure/js/views/table.js
+++ b/mockup/patterns/structure/js/views/table.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'underscore',
+  'lodash',
   'backbone',
   'mockup-patterns-structure-url/js/views/tablerow',
   'text!mockup-patterns-structure-url/templates/table.xml',
diff --git a/mockup/patterns/structure/js/views/tablerow.js b/mockup/patterns/structure/js/views/tablerow.js
index 896d728..3a52149 100644
--- a/mockup/patterns/structure/js/views/tablerow.js
+++ b/mockup/patterns/structure/js/views/tablerow.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'underscore',
+  'lodash',
   'backbone',
   'mockup-patterns-structure-url/js/views/actionmenu',
   'text!mockup-patterns-structure-url/templates/tablerow.xml',
diff --git a/mockup/patterns/structure/js/views/textfilter.js b/mockup/patterns/structure/js/views/textfilter.js
index d5ac1e0..177ee75 100644
--- a/mockup/patterns/structure/js/views/textfilter.js
+++ b/mockup/patterns/structure/js/views/textfilter.js
@@ -1,7 +1,7 @@
 define([
   'jquery',
   'backbone',
-  'underscore',
+  'lodash',
   'mockup-ui-url/views/base',
   'mockup-ui-url/views/button',
   'mockup-ui-url/views/popover',
diff --git a/mockup/patterns/structure/js/views/upload.js b/mockup/patterns/structure/js/views/upload.js
index f9c5921..815bf7b 100644
--- a/mockup/patterns/structure/js/views/upload.js
+++ b/mockup/patterns/structure/js/views/upload.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'underscore',
+  'lodash',
   'backbone',
   'mockup-ui-url/views/popover',
   'mockup-patterns-upload'
diff --git a/mockup/patterns/thememapper/js/cacheview.js b/mockup/patterns/thememapper/js/cacheview.js
index 565e5e2..1ef001b 100644
--- a/mockup/patterns/thememapper/js/cacheview.js
+++ b/mockup/patterns/thememapper/js/cacheview.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'underscore',
+  'lodash',
   'backbone',
   'mockup-patterns-filemanager-url/js/basepopover',
   'mockup-utils'
diff --git a/mockup/patterns/thememapper/js/lessbuilderview.js b/mockup/patterns/thememapper/js/lessbuilderview.js
index f986a05..383f175 100644
--- a/mockup/patterns/thememapper/js/lessbuilderview.js
+++ b/mockup/patterns/thememapper/js/lessbuilderview.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'underscore',
+  'lodash',
   'backbone',
   'mockup-patterns-filemanager-url/js/basepopover',
   'mockup-patterns-resourceregistry-url/js/iframe'
diff --git a/mockup/patterns/thememapper/js/rulebuilder.js b/mockup/patterns/thememapper/js/rulebuilder.js
index c829030..dcd79b7 100644
--- a/mockup/patterns/thememapper/js/rulebuilder.js
+++ b/mockup/patterns/thememapper/js/rulebuilder.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'underscore',
+  'lodash',
   'backbone',
 ], function($, _, Backbone) {
   'use strict';
diff --git a/mockup/patterns/thememapper/js/rulebuilderview.js b/mockup/patterns/thememapper/js/rulebuilderview.js
index efc3553..678cd50 100644
--- a/mockup/patterns/thememapper/js/rulebuilderview.js
+++ b/mockup/patterns/thememapper/js/rulebuilderview.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'underscore',
+  'lodash',
   'backbone',
   'mockup-patterns-filemanager-url/js/basepopover',
   'text!mockup-patterns-thememapper-url/templates/rulebuilder.xml',
diff --git a/mockup/patterns/thememapper/pattern.js b/mockup/patterns/thememapper/pattern.js
index 59e6ada..739c990 100644
--- a/mockup/patterns/thememapper/pattern.js
+++ b/mockup/patterns/thememapper/pattern.js
@@ -30,7 +30,7 @@
 define([
   'jquery',
   'pat-base',
-  'underscore',
+  'lodash',
   'translate',
   'text!mockup-patterns-thememapper-url/templates/inspector.xml',
   'mockup-patterns-filemanager',
diff --git a/mockup/patterns/tinymce/js/links.js b/mockup/patterns/tinymce/js/links.js
index 82e8526..225d362 100644
--- a/mockup/patterns/tinymce/js/links.js
+++ b/mockup/patterns/tinymce/js/links.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'underscore',
+  'lodash',
   'pat-registry',
   'pat-base',
   'mockup-patterns-relateditems',
diff --git a/mockup/patterns/tinymce/pattern.js b/mockup/patterns/tinymce/pattern.js
index 29d37b7..4d3ea44 100644
--- a/mockup/patterns/tinymce/pattern.js
+++ b/mockup/patterns/tinymce/pattern.js
@@ -60,7 +60,7 @@
 
 define([
   'jquery',
-  'underscore',
+  'lodash',
   'pat-base',
   'mockup-patterns-relateditems',
   'mockup-patterns-modal',
diff --git a/mockup/patterns/tree/pattern.js b/mockup/patterns/tree/pattern.js
index d2d3509..8ed0105 100644
--- a/mockup/patterns/tree/pattern.js
+++ b/mockup/patterns/tree/pattern.js
@@ -52,7 +52,7 @@
 
 define([
   'jquery',
-  'underscore',
+  'lodash',
   'pat-base',
   'mockup-utils',
   'jqtree'
diff --git a/mockup/patterns/upload/pattern.js b/mockup/patterns/upload/pattern.js
index 42aa9d6..827a754 100644
--- a/mockup/patterns/upload/pattern.js
+++ b/mockup/patterns/upload/pattern.js
@@ -41,7 +41,7 @@
 
 define([
   'jquery',
-  'underscore',
+  'lodash',
   'pat-base',
   'mockup-patterns-relateditems',
   'dropzone',


Repository: mockup


Branch: refs/heads/master
Date: 2015-09-19T18:23:42+02:00
Author: JC Brand (jcbrand) <jc@opkode.com>
Commit: https://github.com/plone/mockup/commit/0b4fd8fe3263a504ad7c6cdaa26fb7ba1c6efaa6

Pin parsley.js version.

Files changed:
M bower.json
M mockup/patterns/pickadate/pattern.js

diff --git a/bower.json b/bower.json
index efe76f9..bdb0aba 100644
--- a/bower.json
+++ b/bower.json
@@ -33,6 +33,7 @@
     "jquery": "1.11.3",
     "select2": "3.5.1",
     "moment": "2.10.3",
-    "patternslib": "master"
+    "patternslib": "master",
+    "parsleyjs": "1.2.4"
   }
 }
diff --git a/mockup/patterns/pickadate/pattern.js b/mockup/patterns/pickadate/pattern.js
index 6bc19c3..5b05114 100644
--- a/mockup/patterns/pickadate/pattern.js
+++ b/mockup/patterns/pickadate/pattern.js
@@ -112,8 +112,7 @@ define([
         labelMonthSelect: _t('Select a month'),
         labelYearSelect: _t('Select a year')
       },
-      time: {
-      },
+      time: {},
       timezone: null,
       classWrapperName: 'pattern-pickadate-wrapper',
       classSeparatorName: 'pattern-pickadate-separator',


Repository: mockup


Branch: refs/heads/master
Date: 2015-09-19T18:49:51+02:00
Author: JC Brand (jcbrand) <jc@opkode.com>
Commit: https://github.com/plone/mockup/commit/262de2459a8581116b706ac6488269d278a10b60

Move last files from mockup-core so that we can finally remove it.

Files changed:
A mockup/js/grunt.js
M mockup/Gruntfile.js
M mockup/js/config.js
M mockup/less/docs.less

diff --git a/mockup/Gruntfile.js b/mockup/Gruntfile.js
index 8b5a421..cfdccd5 100644
--- a/mockup/Gruntfile.js
+++ b/mockup/Gruntfile.js
@@ -5,7 +5,7 @@ module.exports = function(grunt) {
 
   var fs = require('fs');
 
-  var MockupGrunt = require('./bower_components/mockup-core/js/grunt'),
+  var MockupGrunt = require('./js/grunt'),
       requirejsOptions = require('./js/config'),
       mockup = new MockupGrunt(requirejsOptions),
       docsExtraIncludes = [];
diff --git a/mockup/js/config.js b/mockup/js/config.js
index 43f1b51..debe07c 100644
--- a/mockup/js/config.js
+++ b/mockup/js/config.js
@@ -53,11 +53,11 @@
       'mockup-bundles-structure': 'js/bundles/structure',
       'mockup-bundles-tiles': 'js/bundles/widgets',
       'mockup-bundles-widgets': 'js/bundles/widgets',
-      'mockup-docs': 'bower_components/mockup-core/js/docs/app',
-      'mockup-docs-navigation': 'bower_components/mockup-core/js/docs/navigation',
-      'mockup-docs-page': 'bower_components/mockup-core/js/docs/page',
-      'mockup-docs-pattern': 'bower_components/mockup-core/js/docs/pattern',
-      'mockup-docs-view': 'bower_components/mockup-core/js/docs/view',
+      'mockup-docs': 'js/docs/app',
+      'mockup-docs-navigation': 'js/docs/navigation',
+      'mockup-docs-page': 'js/docs/page',
+      'mockup-docs-pattern': 'js/docs/pattern',
+      'mockup-docs-view': 'js/docs/view',
       'mockup-fakeserver': 'tests/fakeserver',
       'mockup-i18n': 'js/i18n',
       'mockup-patterns-autotoc': 'patterns/autotoc/pattern',
diff --git a/mockup/js/grunt.js b/mockup/js/grunt.js
new file mode 100644
index 0000000..0203207
--- /dev/null
+++ b/mockup/js/grunt.js
@@ -0,0 +1,434 @@
+/* global module:true, process:true */
+
+(function() {
+  'use strict';
+
+  var fs = require('fs'),
+      less = require('less'),
+      extend = require('extend'),
+      path = require('path'),
+      appDir = process.cwd(),
+      karmaConstants = require(appDir + '/node_modules/karma/lib/constants'),
+      MockupGrunt = function (requirejsOptions) { this.init(requirejsOptions); },
+      BROWSERS = process.env.BROWSERS;
+
+  if (BROWSERS) {
+    BROWSERS = BROWSERS.split(',');
+  } else {
+    BROWSERS = [ 'SL_Chrome', 'SL_Firefox' ];
+  }
+
+  MockupGrunt.prototype = {
+
+    sections: {
+      requirejs: {
+        registerBundle: function(name, customGruntConfig, bundleOptions, sections) {
+          this.gruntConfig.requirejs = this.gruntConfig.requirejs || {};
+          this.gruntConfig.requirejs[name] = this.gruntConfig.requirejs[name] || {};
+          this.gruntConfig.requirejs[name].options = this.gruntConfig.requirejs[name].options || {};
+
+          this.gruntConfig.requirejs[name].options = {
+            name: 'node_modules/requirejs/require.js',
+            include: ['mockup-bundles-' + name].concat(bundleOptions.extraInclude || []),
+            exclude: bundleOptions.exclude || [],
+            insertRequire: ['mockup-bundles-' + name],
+            out: bundleOptions.path + name + '.js'
+          };
+        }
+      },
+      uglify: {
+        registerBundle: function(name, customGruntConfig, bundleOptions, sections) {
+          this.gruntConfig.uglify = this.gruntConfig.uglify || {};
+          this.gruntConfig.uglify[name] = this.gruntConfig.uglify[name] || {};
+          this.gruntConfig.uglify[name].files = this.gruntConfig.uglify[name].files || {};
+          this.gruntConfig.uglify[name].options = {
+            mangle: false,
+            sourceMap: true,
+            sourceMapName: bundleOptions.path + name + '.min.js.map'
+          };
+          this.gruntConfig.uglify[name].files[bundleOptions.path + name + '.min.js'] = [
+            bundleOptions.path + name + '.js'
+          ];
+        }
+      },
+      less: {
+        registerBundle: function(name, customGruntConfig, bundleOptions, sections) {
+          var gruntConfig = this.gruntConfig;
+
+          gruntConfig.less = gruntConfig.less || {};
+          gruntConfig.less[name] = gruntConfig.less[name] || {};
+          gruntConfig.less[name].files = gruntConfig.less[name].files || {};
+          gruntConfig.less[name].files[bundleOptions.path + name + '.min.css'] = 'less/' + name + '.less';
+          gruntConfig.less[name].options = {
+            sourceMap: true,
+            sourceMapFilename: bundleOptions.path + name + '.min.css.map'
+          };
+
+          gruntConfig.watch = gruntConfig.watch || {};
+          gruntConfig.watch['less-' + name] = gruntConfig.watch['less-' + name] || {
+            files: [ 'less/' + name + '.less' ],
+            tasks: [ 'less:' + name ]
+          };
+
+          var parser = new(less.Parser)({ syncImport: true, paths: ['less'], filename: name + '.less' }),
+              bundleFile = fs.readFileSync('less/' + name + '.less', { encoding: 'utf-8' });
+
+          parser.parse(bundleFile, function() {
+            for(var file in parser.imports.files) {
+              gruntConfig.watch['less-' + name].files.push(file);
+            }
+          });
+        }
+      },
+      copy: {
+        registerBundle: function(name, customGruntConfig, bundleOptions, sections) {
+          this.gruntConfig.copy = this.gruntConfig.copy || {};
+          this.gruntConfig.copy[name] = this.gruntConfig.copy[name] || {};
+          this.gruntConfig.copy[name].files = this.gruntConfig.copy[name].files || [];
+          this.gruntConfig.copy[name].files = this.gruntConfig.copy[name].files.concat([
+            // BOOTSTRAP
+            { expand: true, cwd: 'bower_components/bootstrap/dist/fonts/', src: 'glyphicons-halflings-regular.*', dest: bundleOptions.path,
+              rename: function(dest, src) { return dest + name + '-bootstrap-' + src; }},
+            // TINYMCE
+            { expand: true, cwd: 'bower_components/tinymce-builded/js/tinymce/langs', src: '*', dest: bundleOptions.path + name + '-tinymce/langs'},
+            { expand: true, cwd: 'bower_components/tinymce-builded/js/tinymce/skins/lightgray/fonts/', src: 'tinymce*', dest: bundleOptions.path,
+              rename: function(dest, src) { return dest + name + '-tinymce-font-' + src; }},
+            { expand: true, cwd: 'bower_components/tinymce-builded/js/tinymce/skins/lightgray/img/', src: '*', dest: bundleOptions.path,
+              rename: function(dest, src) { return dest + name + '-tinymce-img-' + src; }},
+            { expand: true, cwd: 'bower_components/tinymce-builded/js/tinymce/skins/lightgray/', src: 'content.min.css', dest: bundleOptions.path,
+              rename: function(dest, src) { return dest + name + '-tinymce-' + src; }},
+            // JQTREE
+            { expand: true, cwd: 'bower_components/jqtree/', src: 'jqtree-circle.png', dest: bundleOptions.path,
+              rename: function(dest, src) { return dest + name + '-jqtree-' + src; }},
+            // SELECT2
+            { expand: true, cwd: 'bower_components/select2/', src: 'select2*.png', dest: bundleOptions.path,
+              rename: function(dest, src) { return dest + name + '-select2-' + src; }},
+            { expand: true, cwd: 'bower_components/select2/', src: 'select2*.gif', dest: bundleOptions.path,
+              rename: function(dest, src) { return dest + name + '-select2-' + src; }},
+          ]);
+        }
+      },
+      sed: {
+        registerBundle: function(name, customGruntConfig, bundleOptions, sections) {
+          this.gruntConfig.sed = this.gruntConfig.sed || {};
+          // source maps
+          this.gruntConfig.sed[name + '.min.css.map'] = {
+            path: bundleOptions.path + name + '.min.css',
+            pattern: 'sourceMappingURL=' + bundleOptions.path + name + '.min.css.map',
+            replacement: 'sourceMappingURL=' + bundleOptions.url + '.min.css.map',
+          };
+          this.gruntConfig.sed[name + '.min.js.map'] = {
+            path: bundleOptions.path + name + '.min.js',
+            pattern: 'sourceMappingURL=' + name + '.min.js.map',
+            replacement: 'sourceMappingURL=' + bundleOptions.url + '.min.js.map',
+          };
+          // pattern resources
+          // BOOTSTRAP
+          this.gruntConfig.sed[name + '-bootstrap-glyphicons'] = {
+            path: bundleOptions.path + name + '.min.css',
+            pattern: 'url\\(\'../bower_components/bootstrap/dist/fonts/glyphicons-halflings-regular',
+            replacement: 'url(\'' + bundleOptions.url + '-bootstrap-glyphicons-halflings-regular'
+          };
+          // TINYMCE
+          this.gruntConfig.sed[name + '-tinymce-fonts'] = {
+            path: bundleOptions.path + name + '.min.css',
+            pattern: 'url\\((\'?)fonts/tinymce',  // match urls with and without quotes
+            replacement: 'url($1' + bundleOptions.url + '-tinymce-font-tinymce'
+          };
+          this.gruntConfig.sed[name + '-tinymce-img-loader'] = {
+            path: bundleOptions.path + name + '.min.css',
+            pattern: 'url\\(\'?img/loader.gif\'?',  // match urls with and without quotes
+            replacement: 'url(\'' + bundleOptions.url + '-tinymce-img-loader.gif\''
+          };
+          this.gruntConfig.sed[name + '-tinymce-img-anchor'] = {
+            path: bundleOptions.path + name + '.min.css',
+            pattern: 'url\\(\'?img/anchor.gif\'?',
+            replacement: 'url(\'' + bundleOptions.url + '-tinymce-img-anchor.gif\''
+          };
+          this.gruntConfig.sed[name + '-tinymce-img-object'] = {
+            path: bundleOptions.path + name + '.min.css',
+            pattern: 'url\\(\'?img/object.gif\'?',
+            replacement: 'url(\'' + bundleOptions.url + '-tinymce-img-object.gif\''
+          };
+          // TINYMCE content.min
+          this.gruntConfig.sed[name + '-tinymce-content.min.css'] = {
+            // replace default content.min.css
+            path: bundleOptions.path,
+            recursive: true,
+            pattern: '../../../bower_components/tinymce-builded/js/tinymce/skins/lightgray/content.min.css',
+            replacement: bundleOptions.url + '-tinymce-content.min.css'
+          };
+          this.gruntConfig.sed[name + '-tinymce-fonts2'] = {
+            path: bundleOptions.path + name + '-tinymce-content.min.css',
+            pattern: 'url\\((\'?)fonts/tinymce',  // match urls with and without quotes
+            replacement: 'url($1' + bundleOptions.url + '-tinymce-font-tinymce'
+          };
+          this.gruntConfig.sed[name + '-tinymce-img-loader2'] = {
+            path: bundleOptions.path + name + '-tinymce-content.min.css',
+            pattern: 'url\\(\'?img/loader.gif\'?',
+            replacement: 'url(\'' + bundleOptions.url + '-tinymce-img-loader.gif\''
+          };
+          this.gruntConfig.sed[name + '-tinymce-img-anchor2'] = {
+            path: bundleOptions.path + name + '-tinymce-content.min.css',
+            pattern: 'url\\(\'?img/anchor.gif\'?',
+            replacement: 'url(\'' + bundleOptions.url + '-tinymce-img-anchor.gif\''
+          };
+          this.gruntConfig.sed[name + '-tinymce-img-object2'] = {
+            path: bundleOptions.path + name + '-tinymce-content.min.css',
+            pattern: 'url\\(\'?img/object.gif\'?',
+            replacement: 'url(\'' + bundleOptions.url + '-tinymce-img-object.gif\''
+          };
+          // SELECT2
+          this.gruntConfig.sed[name + '-select2-images'] = {
+            path: bundleOptions.path + name + '.min.css',
+            pattern: 'url\\(\'select2',
+            replacement: 'url(\'' + bundleOptions.url + '-select2-select2'
+          };
+          // JQTREE
+          this.gruntConfig.sed[name + '-jqtree-circle'] = {
+            path: bundleOptions.path + name + '.min.css',
+            pattern: 'url\\(jqtree-circle.png',
+            replacement: 'url(\'' + bundleOptions.url + '-jqtree-jqtree-circle.png\''
+          };
+        }
+      }
+
+    },
+    init: function(requirejsOptions) {
+      this.requirejsOptions = requirejsOptions;
+      this.patterns = [];
+      this.bundles = {};
+      this.gruntConfig = {};
+      this.files = [
+        /*
+        * include initial framework (mocha and requirejs) with html5
+        * shims/shams/polyfills
+        */
+        'bower_components/selectivizr/selectivizr.js',
+        'bower_components/es5-shim/es5-shim.js',
+        'bower_components/es5-shim/es5-sham.js',
+        'bower_components/console-polyfill/index.js',
+        'node_modules/mocha/mocha.js',
+        'node_modules/karma-mocha/lib/adapter.js',
+        'node_modules/requirejs/require.js',
+        'node_modules/karma-requirejs/lib/adapter.js',
+
+        /*
+        * include requirejs configuration
+        */
+        'js/config.js',
+
+        /*
+        * include karma requirejs configuration
+        */
+        'tests/config.js',
+      ];
+
+      /*
+      * provide (but not include) all scripts defined in requirejs's
+      * configuration
+      *
+      * also at the same time create a list of all patterns to be loaded with
+      * docs bundle
+      */
+      var path;
+      for (var key in this.requirejsOptions.paths) {
+        path = this.requirejsOptions.paths[key];
+        if (path.indexOf('.md') !== path.length - 3) {
+          this.files.push({ pattern: path + '.js', included: false });
+        }
+        if (key.indexOf('mockup-patterns-') === 0) {
+          this.patterns.push(key);
+        }
+      }
+
+      /*
+      * provide (but not include) all files in "tests/" and "js/" folder
+      * those files will be loaded by requirejs at later points
+      *
+      * TODO: simplify the pattern to include everything inside js/ and
+      * tests/ folders.
+      */
+      this.files = this.files.concat([
+        {pattern: 'tests/**/*', included: false},
+        {pattern: 'js/**/*', included: false},
+        {pattern: 'patterns/**/*', included: false}
+      ]);
+
+
+    },
+    registerBundle: function(name, customGruntConfig, bundleOptions, sections) {
+
+      extend(true, this.gruntConfig, customGruntConfig || {});
+
+      bundleOptions = extend(true, {
+        path: 'build/',
+        url: '++resource++plone.app.' + name,
+        insertExtraRequires: []
+      }, bundleOptions || {});
+
+      sections = sections || ['requirejs', 'uglify', 'less', 'copy', 'sed'];
+
+      for (var i = 0; i < sections.length; i = i + 1) {
+        if (this.sections[sections[i]]) {
+          this.sections[sections[i]].registerBundle.apply(
+            this,
+            [ name, customGruntConfig, bundleOptions, sections ]
+          );
+        }
+      }
+
+      var bundleTasks = [];
+      for (var j = 0; j < sections.length; j = j + 1) {
+        if (this.gruntConfig[sections[j]][name] !== {} && sections[j] !== 'sed') {
+          bundleTasks.push(sections[j] + ':' + name);
+        } else if (sections[j] === 'sed') {
+          for (var sedSection in this.gruntConfig.sed) {
+            if (this.gruntConfig.sed.hasOwnProperty(sedSection) && sedSection.indexOf(name) === 0) {
+              bundleTasks.push('sed:' + sedSection);
+            }
+          }
+        }
+      }
+      this.bundles[name] = bundleTasks;
+    },
+
+    initGrunt: function(grunt, customGruntConfig) {
+      extend(true, this.gruntConfig, customGruntConfig || {});
+
+      /*
+       * Register different test runners
+       */
+      var bundles = [];
+      for (var name in this.bundles) {
+        bundles.push('bundle-' + name);
+        grunt.registerTask('bundle-' + name, this.bundles[name]);
+      }
+      grunt.registerTask('test', [ 'jshint', 'karma:test' ]);
+      grunt.registerTask('test_once', [ 'jshint', 'karma:testOnce' ]);
+      grunt.registerTask('test_jenkins', [ 'jshint', 'karma:testJenkins' ]);
+      grunt.registerTask('test_dev', [ 'karma:testDev' ]);
+      grunt.registerTask('test_serve', [ 'karma:testServe' ]);
+      grunt.registerTask('test_ci', [ 'jshint', 'karma:testCI'].concat(bundles));
+
+      grunt.initConfig(extend(true, {
+        jshint: { options: { jshintrc: '.jshintrc' }, all: ['Gruntfile.js', 'js/**/*.js', 'tests/*.js'] },
+        karma: {
+          options: {
+            basePath: './',
+            frameworks: ['mocha', 'chai'],
+            files: this.files,
+            preprocessors: { 'js/**/*.js': 'coverage' },
+            reporters: ['dots', 'progress', 'coverage', 'spec'],
+            coverageReporter: { type : 'lcov', dir : 'coverage/' },
+            port: 9876,
+            colors: true,
+            // logLevel: karmaConstants.LOG_DEBUG,
+            logLevel: karmaConstants.LOG_INFO,
+            browserNoActivityTimeout: 200000,
+            autoWatch: true,
+            captureTimeout: 60000,
+            plugins: [
+              'karma-mocha',
+              'karma-chai',
+              'karma-coverage',
+              'karma-requirejs',
+              'karma-sauce-launcher',
+              'karma-chrome-launcher',
+              'karma-phantomjs-launcher',
+              'karma-junit-reporter',
+              'karma-spec-reporter'
+            ]
+          },
+          test: {
+            browsers: ['PhantomJS']
+          },
+          testOnce: {
+            singleRun: true,
+            browsers: ['PhantomJS']
+          },
+          testJenkins: {
+            autoWatch: false,
+            colors: false,
+            singleRun: true,
+            browsers: ['PhantomJS'],
+            reporters: ['junit'],
+            junitReporter: {
+              outputFile: 'test-results.xml'
+            },
+          },
+          testDev: {
+            browsers: ['Chrome'],
+            preprocessors: {},
+            reporters: ['dots', 'progress'],
+            plugins: [
+              'karma-mocha',
+              'karma-chai',
+              'karma-requirejs',
+              'karma-chrome-launcher'
+            ]
+          },
+          testServe: {
+            preprocessors: {},
+            reporters: ['dots', 'progress'],
+            plugins: [
+              'karma-mocha',
+              'karma-chai',
+              'karma-requirejs'
+            ]
+          },
+          testCI: {
+            singleRun: true,
+            port: 8080,
+            recordVideo: true,
+            reporters: ['junit', 'coverage', 'saucelabs'],
+            junitReporter: { outputFile: 'test-results.xml' },
+            sauceLabs: { testName: 'Mockup', startConnect: true },
+            browsers: BROWSERS,
+            customLaunchers: {
+              'SL_Chrome': { base: 'SauceLabs', browserName: 'chrome', platform: 'Windows 8.1', version: '38' },
+              'SL_Firefox': { base: 'SauceLabs', browserName: 'firefox', platform: 'Windows 8.1', version: '33' },
+              'SL_Opera': { base: 'SauceLabs', browserName: 'opera', platform: 'Windows 8.1', version: '25' },
+              'SL_Safari': { base: 'SauceLabs', browserName: 'safari', platform: 'Mac 10.9', version: '7.1' },
+              'SL_IE_8': { base: 'SauceLabs', browserName: 'internet explorer', platform: 'Windows 7', version: '8' },
+              'SL_IE_9': { base: 'SauceLabs', browserName: 'internet explorer', platform: 'Windows 7', version: '9' },
+              'SL_IE_10': { base: 'SauceLabs', browserName: 'internet explorer', platform: 'Windows 7', version: '10' },
+              'SL_IE_11': { base: 'SauceLabs', browserName: 'internet explorer', platform: 'Windows 8.1', version: '11' },
+              'SL_IPhone': { base: 'SauceLabs', browserName: 'iphone', platform: 'OS X 10.9', version: '7.1' },
+              'SL_IPad': { base: 'SauceLabs', browserName: 'ipad', platform: 'OS X 10.9', version: '7.1' },
+              'SL_Android': { base: 'SauceLabs', browserName: 'android', platform: 'Linux', version: '4.3' }
+            }
+          }
+        },
+        requirejs: {
+          options: this.requirejsOptions
+        },
+        less: {
+          options: {
+            compress: true,
+            cleancss: false,
+            ieCompat: true,
+            paths: ['less']
+          }
+        },
+        sed: {
+          'bootstrap': {
+            path: 'node_modules/lcov-result-merger/index.js',
+            pattern: 'throw new Error\\(\'Unknown Prefix ',
+            replacement: '//throw// new Error(\'Unknown Prefix '
+          }
+        }
+      }, this.gruntConfig));
+
+      grunt.loadNpmTasks('grunt-contrib-copy');
+      grunt.loadNpmTasks('grunt-contrib-jshint');
+      grunt.loadNpmTasks('grunt-contrib-less');
+      grunt.loadNpmTasks('grunt-contrib-requirejs');
+      grunt.loadNpmTasks('grunt-contrib-uglify');
+      grunt.loadNpmTasks('grunt-contrib-watch');
+      grunt.loadNpmTasks('grunt-karma');
+      grunt.loadNpmTasks('grunt-sed');
+    }
+  };
+  module.exports = MockupGrunt;
+})();
diff --git a/mockup/less/docs.less b/mockup/less/docs.less
index 88b6f50..3725c90 100644
--- a/mockup/less/docs.less
+++ b/mockup/less/docs.less
@@ -25,4 +25,302 @@
 @import "../patterns/livesearch/pattern.livesearch.less";
 @import "../patterns/recurrence/pattern.recurrence.less";
 
-@import "@{bowerPath}/mockup-core/less/docs.less";
+@import "@{bowerPath}/bootstrap/less/variables.less";
+@import "@{bowerPath}/bootstrap/less/bootstrap.less";
+
+@mockupColor1: #0083BE;
+@mockupColor2: #026B99;
+@mockupColor3: #A1D2E7;
+
+body {
+  position: relative;
+  padding-top: 50px;
+}
+
+.mockup-header {
+  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.15);
+  background-color: @mockupColor1;
+  border-color: @mockupColor2;
+  box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1);
+
+  .navbar-header {
+    .navbar-toggle {
+      border: 0;
+
+      &:hover, &:focus {
+        background-color: #FFF;
+
+        .icon-bar {
+          background-color: @mockupColor1;
+        }
+      }
+    }
+  }
+
+  .navbar-brand {
+    color: #FFF;
+
+    &:focus {
+      outline: none;
+    }
+  }
+  .navbar-left {
+    margin-bottom: 0;
+  }
+  .navbar-right {
+    margin-top: 0;
+  }
+  .navbar-collapse {
+    border-color: @mockupColor2;
+  }
+  .navbar-nav > li > a {
+    color: @mockupColor3;
+    text-align: left;
+  }
+  .navbar-nav > li.active > a,
+  .navbar-nav > li.active > a:hover,
+  .navbar-nav > li.active > a:focus {
+    background-color: @mockupColor2;
+    outline: none;
+  }
+}
+
+.mockup-content {
+
+  .page-header {
+    margin: 0;
+    color: @mockupColor3;
+    background-color: @mockupColor1;
+    text-align: center;
+    padding: 30px 0 40px 0;
+
+    h1 {
+      color: #FFF;
+    }
+    p {
+      .lead();
+      margin: 0;
+      font-size: @font-size-base * 1.2;
+    }
+  }
+
+  .mockup-autotoc {
+    margin-top: 30px;
+    margin-bottom: 30px;
+    padding-top: 10px;
+    padding-bottom: 10px;
+    text-shadow: 0 1px 0 #FFF;
+    background-color: #F5F5F5;
+    border: 1px solid #CCCCCC;
+    border-radius: 0.3em;
+    ul ul {
+      display: none;
+    }
+    ul li.active > a {
+      font-weight: bold;
+    }
+    a {
+      color: #333333;
+      font-size: @font-size-base;
+      padding-top: 0.3em;
+      padding-bottom: 0.3em;
+    }
+  }
+
+  .mockup-patterns {
+    margin: 1em 0 0 0;
+
+    .mockup-pattern-tile {
+      color: #333;
+      text-align: center;
+      text-decoration: none;
+      margin: 0 0 1em 0;
+      padding: 0.5em;
+      border: 1px solid #CCC;
+      display: block;
+      height: 135px;
+
+      &:focus {
+        outline: none;
+      }
+      &.active {
+        background-color: #F5F5F5;
+        border-bottom: none;
+        margin-bottom: 0;
+        z-index: 1000;
+      }
+    }
+
+    .mockup-pattern {
+      border: 1px solid #CCC;
+      background-color: #F5F5F5;
+      float: left;
+      width: 100%;
+      margin: -15px 0 1em 0;
+      padding: 1em;
+    }
+
+    .mockup-pattern-documentation {
+      padding: 1em;
+      background-color: #FFF;
+    }
+  }
+}
+
+.mockup-footer {
+  border-radius: 0;
+  margin: 0;
+  padding: 0 0 0.5em 0;
+  border-top: 0;
+  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.15);
+  background-color: @mockupColor1;
+  border-color: @mockupColor2;
+  box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1);
+  color: @mockupColor3;
+
+  a {
+    color: #FFF;
+    border-style: dotted;
+    border-width: 0 0 1px 0;
+    border-color: #FFF;
+
+    &:hover {
+      text-decoration: none;
+    }
+  }
+  .github-btn {
+    border: 0;
+    margin: 0;
+  }
+  .mockup-credits {
+    margin: 1em 0;
+
+    p {
+      margin: 0;
+    }
+  }
+  .mockup-links {
+    list-style: none;
+    margin: 1em 0;
+    padding: 0;
+    li {
+      display: inline;
+      a {
+        margin: 0 1em;
+      }
+    }
+  }
+}
+
+.page-index {
+
+  color: @mockupColor3;
+  background-color: @mockupColor1;
+  text-align: center;
+
+  .page-header {
+    border: 0;
+    padding: 30px;
+
+    h1 {
+      font-size: @font-size-base * 3.6;
+      line-height: 1;
+    }
+  }
+
+  .page-content {
+    padding: 30px;
+    a {
+      color:  #FFF;
+      display: inline-block;
+      border: 1px solid @mockupColor3;
+      padding: 0.5em 1em;
+      margin: 30px;
+      font-size: 18px;
+      border-radius: 0.2em;
+      text-decoration: none;
+
+      &:hover, &focus {
+        color: @mockupColor1;
+        border-color: #FFF;
+        background-color: #FFF;
+      }
+    }
+  }
+}
+  
+@media (min-width: @screen-sm-min) {
+
+  .mockup-header {
+    .navbar-header {
+      margin-right: 15px;
+    }
+  }
+
+  .mockup-content .page-header {
+    text-align: left;
+
+    h1 {
+      font-size: @font-size-base * 4.4;
+    }
+    p {
+      font-size: @font-size-base * 1.6;
+    }
+  }
+
+  .mockup-footer {
+    .mockup-github {
+      text-align: center;
+    }
+    .mockup-links {
+      text-align: right;
+      margin-top: 2.5em;
+
+      li a {
+        margin-right: 0;
+      }
+    }
+  }
+
+  .page-index {
+    text-align: left;
+
+    .page-header {
+      padding: 140px 0 0 0;
+
+      h1 {
+        font-size: @font-size-base * 7.1;
+      }
+      p {
+        font-size: @font-size-base * 2.5;
+      }
+    }
+
+    .page-content {
+      padding: 30px 0px 140px 0;
+
+      a {
+        font-size: @font-size-base * 1.8;
+        margin: 0;
+      }
+    }
+  }
+}
+
+@media (min-width: @screen-md-min) {
+
+  .mockup-content .mockup-autotoc {
+    ul ul {
+      display: block;
+      li > a {
+        padding-left: 2em;
+      }
+    }
+  }
+}
+
+@media (min-width: @screen-lg-min) {
+
+  .mockup-content .mockup-autotoc {
+  }
+}


Repository: mockup


Branch: refs/heads/master
Date: 2015-09-19T19:07:53+02:00
Author: JC Brand (jcbrand) <jc@opkode.com>
Commit: https://github.com/plone/mockup/commit/9b96758f5014b8df63793379acb38d51d8a254d4

Update changelog. Remove mockup-core from bower.json

Files changed:
M CHANGES.rst
M bower.json

diff --git a/CHANGES.rst b/CHANGES.rst
index e61ae3a..77b43d0 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -24,6 +24,9 @@ Changelog
 - Fix scrolling when closing a modal within a modal
   [ebrehault]
 
+- Remove mockup-core as a dependency.
+  [jcbrand, goibhniu]
+
 
 2.0.8 (2015-09-08)
 ------------------
diff --git a/bower.json b/bower.json
index bdb0aba..828463d 100644
--- a/bower.json
+++ b/bower.json
@@ -9,6 +9,7 @@
     "console-polyfill": "0.1.2",
     "dropzone": "4.0.1",
     "es5-shim": "4.0.3",
+    "marked": "0.3.3",
     "jqtree": "0.22.0",
     "jquery": "1.11.3",
     "jquery-form": "3.46.0",
@@ -16,11 +17,12 @@
     "jquery.recurrenceinput.js": "v1.5.2",
     "lodash": "2.4.1",
     "logging": "",
-    "mockup-core": "2.1.12",
     "moment": "2.10.3",
     "patternslib": "master",
     "pickadate": "3.5.6",
+    "react": "0.10.0",
     "requirejs-text": "2.0.12",
+    "selectivizr": "1.0.2",
     "select2": "3.5.1",
     "tinymce-builded": "4.2.5"
   },


Repository: mockup


Branch: refs/heads/master
Date: 2015-09-19T19:10:01+02:00
Author: JC Brand (jcbrand) <jc@opkode.com>
Commit: https://github.com/plone/mockup/commit/018f5abff4d8bcfb22c68d95d8f803381416d1ba

Remove reference to mockup-core in getting started docs.

Files changed:
M mockup/GETTING_STARTED.md

diff --git a/mockup/GETTING_STARTED.md b/mockup/GETTING_STARTED.md
index 2095cca..830ca56 100644
--- a/mockup/GETTING_STARTED.md
+++ b/mockup/GETTING_STARTED.md
@@ -132,21 +132,6 @@ After that, access the served site in a webbrowser under the url:
     http://localhost:8000
 
 
-# Including a local mockup-core checkout for developing
-
-If you want to also hack on mockup-core together with mockup and not push the
-changes from mockup-core to github, you can include it from a local checkout.
-Just replace the mockup-core line in bower.json with:
-
-    "mockup-core": "file:///PATH/TO/mockup-core/.git/#BRANCHNAME"
-
-Please note, you have to commit the changes on mockup-core before running
-``make bootstrap``.
-
-Alternatively, on UNIX based systems, simply make a symlink from
-bower_components/mockup-core/ to your local mockup-core checkout.
-
-
 # Upgrade from pre-2.0 to 2.0 based Mockup patterns
 
 Since version 2.0, Mockup uses the Patternslib scanner and it's registry. This


Repository: mockup


Branch: refs/heads/master
Date: 2015-09-20T00:38:03+02:00
Author: JC Brand (jcbrand) <jc@opkode.com>
Commit: https://github.com/plone/mockup/commit/c1eab5b1116448de012c54a6bb2aa7d8a6f1782b

Figured out how to use only one version of underscore.

Same version used by Patternslib and means we don't need to load both lodash
and underscore.

Files changed:
M bower.json
M mockup/LEARN.md
M mockup/js/config.js
M mockup/patterns/contentloader/pattern.js
M mockup/patterns/filemanager/js/addnew.js
M mockup/patterns/filemanager/js/basepopover.js
M mockup/patterns/filemanager/js/customize.js
M mockup/patterns/filemanager/js/delete.js
M mockup/patterns/filemanager/js/newfolder.js
M mockup/patterns/filemanager/js/rename.js
M mockup/patterns/filemanager/js/upload.js
M mockup/patterns/filemanager/pattern.js
M mockup/patterns/livesearch/pattern.js
M mockup/patterns/modal/pattern.js
M mockup/patterns/querystring/pattern.js
M mockup/patterns/relateditems/pattern.js
M mockup/patterns/resourceregistry/js/builder.js
M mockup/patterns/resourceregistry/js/fields.js
M mockup/patterns/resourceregistry/js/less.js
M mockup/patterns/resourceregistry/js/overrides.js
M mockup/patterns/resourceregistry/js/patternoptions.js
M mockup/patterns/resourceregistry/js/registry.js
M mockup/patterns/resourceregistry/pattern.js
M mockup/patterns/structure/js/collections/result.js
M mockup/patterns/structure/js/views/actionmenu.js
M mockup/patterns/structure/js/views/addmenu.js
M mockup/patterns/structure/js/views/app.js
M mockup/patterns/structure/js/views/columns.js
M mockup/patterns/structure/js/views/generic-popover.js
M mockup/patterns/structure/js/views/paging.js
M mockup/patterns/structure/js/views/rearrange.js
M mockup/patterns/structure/js/views/selectionbutton.js
M mockup/patterns/structure/js/views/selectionwell.js
M mockup/patterns/structure/js/views/table.js
M mockup/patterns/structure/js/views/tablerow.js
M mockup/patterns/structure/js/views/textfilter.js
M mockup/patterns/structure/js/views/upload.js
M mockup/patterns/thememapper/js/cacheview.js
M mockup/patterns/thememapper/js/lessbuilderview.js
M mockup/patterns/thememapper/js/rulebuilder.js
M mockup/patterns/thememapper/js/rulebuilderview.js
M mockup/patterns/thememapper/pattern.js
M mockup/patterns/tinymce/js/links.js
M mockup/patterns/tinymce/pattern.js
M mockup/patterns/tree/pattern.js
M mockup/patterns/upload/pattern.js

diff --git a/bower.json b/bower.json
index 828463d..b071fcb 100644
--- a/bower.json
+++ b/bower.json
@@ -15,7 +15,6 @@
     "jquery-form": "3.46.0",
     "jquery.cookie": "1.4.1",
     "jquery.recurrenceinput.js": "v1.5.2",
-    "lodash": "2.4.1",
     "logging": "",
     "moment": "2.10.3",
     "patternslib": "master",
diff --git a/mockup/LEARN.md b/mockup/LEARN.md
index 1e33020..b27f8a0 100644
--- a/mockup/LEARN.md
+++ b/mockup/LEARN.md
@@ -114,7 +114,7 @@ So, first open the file *js/config.js* and add the following line under the *pat
     baseUrl: './',
     paths: {
       &hellip;
-      'underscore': 'bower_components/lodash/dist/lodash.underscore',
+      'underscore': 'bower_components/underscore/underscore',
       'mockup-patterns-helloworld': 'js/patterns/hello' // <- right here!
   },
   &hellip;
diff --git a/mockup/js/config.js b/mockup/js/config.js
index debe07c..d1e40d5 100644
--- a/mockup/js/config.js
+++ b/mockup/js/config.js
@@ -112,7 +112,6 @@
       'tinymce': 'bower_components/tinymce-builded/js/tinymce/tinymce',
       'tinymce-modern-theme': 'bower_components/tinymce-builded/js/tinymce/themes/modern/theme',
       'underscore': 'bower_components/underscore/underscore',
-      'lodash': 'bower_components/lodash/dist/lodash.underscore',
 
       // Patternslib
       'pat-compat': 'bower_components/patternslib/src/core/compat',
diff --git a/mockup/patterns/contentloader/pattern.js b/mockup/patterns/contentloader/pattern.js
index f3ad897..a2fbecf 100644
--- a/mockup/patterns/contentloader/pattern.js
+++ b/mockup/patterns/contentloader/pattern.js
@@ -31,7 +31,7 @@ define([
   'pat-logger',
   'pat-registry',
   'mockup-utils',
-  'lodash'
+  'underscore'
 ], function($, Base, logger, Registry, utils, _) {
   'use strict';
   var log = logger.getLogger('pat-contentloader');
@@ -90,7 +90,7 @@ define([
               data = data[0];
             }
             try{
-              $el = $(_.template(that.options.template, data));
+              $el = $(_.template(that.options.template)(data));
             }catch(e){
               // log this
               log.warn('error rendering template. pat-contentloader will not work');
diff --git a/mockup/patterns/filemanager/js/addnew.js b/mockup/patterns/filemanager/js/addnew.js
index aa5c5a6..9cdfa99 100644
--- a/mockup/patterns/filemanager/js/addnew.js
+++ b/mockup/patterns/filemanager/js/addnew.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'lodash',
+  'underscore',
   'backbone',
   'mockup-patterns-filemanager-url/js/basepopover'
 ], function($, _, Backbone, PopoverView) {
diff --git a/mockup/patterns/filemanager/js/basepopover.js b/mockup/patterns/filemanager/js/basepopover.js
index 97315a8..1559f72 100644
--- a/mockup/patterns/filemanager/js/basepopover.js
+++ b/mockup/patterns/filemanager/js/basepopover.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'lodash',
+  'underscore',
   'backbone',
   'mockup-ui-url/views/popover'
 ], function($, _, Backbone, PopoverView) {
diff --git a/mockup/patterns/filemanager/js/customize.js b/mockup/patterns/filemanager/js/customize.js
index d1d1ff2..985108f 100644
--- a/mockup/patterns/filemanager/js/customize.js
+++ b/mockup/patterns/filemanager/js/customize.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'lodash',
+  'underscore',
   'backbone',
   'mockup-patterns-filemanager-url/js/basepopover',
   'translate'
diff --git a/mockup/patterns/filemanager/js/delete.js b/mockup/patterns/filemanager/js/delete.js
index ce3612a..ef60adc 100644
--- a/mockup/patterns/filemanager/js/delete.js
+++ b/mockup/patterns/filemanager/js/delete.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'lodash',
+  'underscore',
   'backbone',
   'mockup-patterns-filemanager-url/js/basepopover'
 ], function($, _, Backbone, PopoverView) {
diff --git a/mockup/patterns/filemanager/js/newfolder.js b/mockup/patterns/filemanager/js/newfolder.js
index d411a44..8560eb8 100644
--- a/mockup/patterns/filemanager/js/newfolder.js
+++ b/mockup/patterns/filemanager/js/newfolder.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'lodash',
+  'underscore',
   'backbone',
   'mockup-patterns-filemanager-url/js/basepopover'
 ], function($, _, Backbone, PopoverView) {
diff --git a/mockup/patterns/filemanager/js/rename.js b/mockup/patterns/filemanager/js/rename.js
index 6b26705..18f16a5 100644
--- a/mockup/patterns/filemanager/js/rename.js
+++ b/mockup/patterns/filemanager/js/rename.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'lodash',
+  'underscore',
   'backbone',
   'mockup-patterns-filemanager-url/js/basepopover'
 ], function($, _, Backbone, PopoverView) {
diff --git a/mockup/patterns/filemanager/js/upload.js b/mockup/patterns/filemanager/js/upload.js
index 3994719..684d10a 100644
--- a/mockup/patterns/filemanager/js/upload.js
+++ b/mockup/patterns/filemanager/js/upload.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'lodash',
+  'underscore',
   'backbone',
   'mockup-patterns-filemanager-url/js/basepopover',
   'mockup-patterns-upload'
diff --git a/mockup/patterns/filemanager/pattern.js b/mockup/patterns/filemanager/pattern.js
index 8c04036..77a1acc 100644
--- a/mockup/patterns/filemanager/pattern.js
+++ b/mockup/patterns/filemanager/pattern.js
@@ -34,7 +34,7 @@
 define([
   'jquery',
   'pat-base',
-  'lodash',
+  'underscore',
   'backbone',
   'mockup-ui-url/views/base',
   'mockup-patterns-tree',
diff --git a/mockup/patterns/livesearch/pattern.js b/mockup/patterns/livesearch/pattern.js
index d3f063b..be4ccd4 100644
--- a/mockup/patterns/livesearch/pattern.js
+++ b/mockup/patterns/livesearch/pattern.js
@@ -25,7 +25,7 @@
 define([
   'jquery',
   'pat-base',
-  'lodash',
+  'underscore',
   'translate'
 ], function ($, Base, _, _t){
   'use strict';
diff --git a/mockup/patterns/modal/pattern.js b/mockup/patterns/modal/pattern.js
index d2ab956..3f7c4a0 100644
--- a/mockup/patterns/modal/pattern.js
+++ b/mockup/patterns/modal/pattern.js
@@ -68,7 +68,7 @@
 
 define([
   'jquery',
-  'lodash',
+  'underscore',
   'pat-base',
   'mockup-patterns-backdrop',
   'pat-registry',
@@ -413,7 +413,7 @@ define([
         }
 
         // Render html
-        self.$modal = $(_.template(self.options.templateOptions.template, tplObject));
+        self.$modal = $(_.template(self.options.templateOptions.template)(tplObject));
         self.$modalDialog = $('> .' + self.options.templateOptions.classDialog, self.$modal);
         self.$modalContent = $('> .' + self.options.templateOptions.classModal, self.$modalDialog);
 
diff --git a/mockup/patterns/querystring/pattern.js b/mockup/patterns/querystring/pattern.js
index 891c08f..1feffcb 100644
--- a/mockup/patterns/querystring/pattern.js
+++ b/mockup/patterns/querystring/pattern.js
@@ -46,7 +46,7 @@ define([
   'mockup-patterns-pickadate',
   'select2',
   'translate',
-  'lodash'
+  'underscore'
 ], function($, Base, Select2, PickADate, undefined, _t, _) {
   'use strict';
 
diff --git a/mockup/patterns/relateditems/pattern.js b/mockup/patterns/relateditems/pattern.js
index be1b0c6..021444d 100644
--- a/mockup/patterns/relateditems/pattern.js
+++ b/mockup/patterns/relateditems/pattern.js
@@ -70,7 +70,7 @@
 
 define([
   'jquery',
-  'lodash',
+  'underscore',
   'pat-base',
   'mockup-patterns-select2',
   'mockup-utils',
@@ -170,7 +170,7 @@ define([
       // let's give all the options possible to the template generation
       var options = $.extend(true, {}, self.options, item);
       options._item = item;
-      return _.template(template, options);
+      return _.template(template)(options);
     },
     activateBrowsing: function() {
       var self = this;
diff --git a/mockup/patterns/resourceregistry/js/builder.js b/mockup/patterns/resourceregistry/js/builder.js
index 4fb15a1..022964d 100644
--- a/mockup/patterns/resourceregistry/js/builder.js
+++ b/mockup/patterns/resourceregistry/js/builder.js
@@ -2,7 +2,7 @@
 define([
   'jquery',
   'mockup-patterns-modal',
-  'lodash',
+  'underscore',
   'mockup-utils',
   'mockup-patterns-resourceregistry-url/js/iframe',
   'translate'
@@ -28,7 +28,7 @@ define([
         '<ul class="list-group hidden"></ul>' +
         '<button class="plone-btn plone-btn-default cancel hidden cancel-build"><%- _t("Close") %></button>' +
         '<button class="plone-btn plone-btn-primary build"><%- _t("Build it") %></button>' +
-      '</div>', $.extend({ _t: _t }, bundleListItem.options)),
+      '</div>')($.extend({ _t: _t }, bundleListItem.options)),
       content: null,
       width: 500,
       buttons: '.plone-btn'
diff --git a/mockup/patterns/resourceregistry/js/fields.js b/mockup/patterns/resourceregistry/js/fields.js
index 973a6e1..e59ddc9 100644
--- a/mockup/patterns/resourceregistry/js/fields.js
+++ b/mockup/patterns/resourceregistry/js/fields.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'lodash',
+  'underscore',
   'mockup-ui-url/views/base',
   'mockup-patterns-sortable',
   'mockup-patterns-select2',
diff --git a/mockup/patterns/resourceregistry/js/less.js b/mockup/patterns/resourceregistry/js/less.js
index 7f4e5ff..1f2a3e3 100644
--- a/mockup/patterns/resourceregistry/js/less.js
+++ b/mockup/patterns/resourceregistry/js/less.js
@@ -1,7 +1,7 @@
 define([
   'jquery',
   'mockup-ui-url/views/base',
-  'lodash',
+  'underscore',
   'mockup-utils',
   'mockup-patterns-resourceregistry-url/js/fields',
 ], function($, BaseView, _, utils, fields) {
diff --git a/mockup/patterns/resourceregistry/js/overrides.js b/mockup/patterns/resourceregistry/js/overrides.js
index 447074c..10c53a9 100644
--- a/mockup/patterns/resourceregistry/js/overrides.js
+++ b/mockup/patterns/resourceregistry/js/overrides.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'lodash',
+  'underscore',
   'mockup-ui-url/views/base',
   'mockup-patterns-texteditor',
   'mockup-utils',
diff --git a/mockup/patterns/resourceregistry/js/patternoptions.js b/mockup/patterns/resourceregistry/js/patternoptions.js
index 0ea0c40..e4228e6 100644
--- a/mockup/patterns/resourceregistry/js/patternoptions.js
+++ b/mockup/patterns/resourceregistry/js/patternoptions.js
@@ -1,7 +1,7 @@
 define([
   'jquery',
   'mockup-ui-url/views/base',
-  'lodash',
+  'underscore',
   'mockup-utils',
   'mockup-patterns-resourceregistry-url/js/fields',
 ], function($, BaseView, _, utils, fields) {
diff --git a/mockup/patterns/resourceregistry/js/registry.js b/mockup/patterns/resourceregistry/js/registry.js
index 8b22d29..e934179 100644
--- a/mockup/patterns/resourceregistry/js/registry.js
+++ b/mockup/patterns/resourceregistry/js/registry.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'lodash',
+  'underscore',
   'mockup-ui-url/views/base',
   'mockup-utils',
   'mockup-patterns-resourceregistry-url/js/fields',
diff --git a/mockup/patterns/resourceregistry/pattern.js b/mockup/patterns/resourceregistry/pattern.js
index 557881a..53b1ce5 100644
--- a/mockup/patterns/resourceregistry/pattern.js
+++ b/mockup/patterns/resourceregistry/pattern.js
@@ -89,7 +89,7 @@
 define([
   'jquery',
   'pat-base',
-  'lodash',
+  'underscore',
   'mockup-ui-url/views/base',
   'mockup-utils',
   'mockup-patterns-resourceregistry-url/js/less',
@@ -101,7 +101,6 @@ define([
             OverridesView,RegistryView, PatternOptionsView, _t) {
   'use strict';
 
-
   var TabView = BaseView.extend({
     tagName: 'div',
     activeTab: 'registry',
diff --git a/mockup/patterns/structure/js/collections/result.js b/mockup/patterns/structure/js/collections/result.js
index d91edbb..40cf6f6 100644
--- a/mockup/patterns/structure/js/collections/result.js
+++ b/mockup/patterns/structure/js/collections/result.js
@@ -1,5 +1,5 @@
 define([
-  'lodash',
+  'underscore',
   'backbone',
   'mockup-patterns-structure-url/js/models/result',
   'backbone.paginator'
diff --git a/mockup/patterns/structure/js/views/actionmenu.js b/mockup/patterns/structure/js/views/actionmenu.js
index ead3738..e5ae548 100644
--- a/mockup/patterns/structure/js/views/actionmenu.js
+++ b/mockup/patterns/structure/js/views/actionmenu.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'lodash',
+  'underscore',
   'backbone',
   'mockup-ui-url/views/base',
   'mockup-patterns-structure-url/js/models/result',
diff --git a/mockup/patterns/structure/js/views/addmenu.js b/mockup/patterns/structure/js/views/addmenu.js
index 07ef730..c8fe9fa 100644
--- a/mockup/patterns/structure/js/views/addmenu.js
+++ b/mockup/patterns/structure/js/views/addmenu.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'lodash',
+  'underscore',
   'backbone',
   'mockup-ui-url/views/buttongroup',
   'mockup-ui-url/views/button',
diff --git a/mockup/patterns/structure/js/views/app.js b/mockup/patterns/structure/js/views/app.js
index d9f86bc..94f78f9 100644
--- a/mockup/patterns/structure/js/views/app.js
+++ b/mockup/patterns/structure/js/views/app.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'lodash',
+  'underscore',
   'backbone',
   'mockup-ui-url/views/toolbar',
   'mockup-ui-url/views/buttongroup',
diff --git a/mockup/patterns/structure/js/views/columns.js b/mockup/patterns/structure/js/views/columns.js
index 89bc9ea..3784ac4 100644
--- a/mockup/patterns/structure/js/views/columns.js
+++ b/mockup/patterns/structure/js/views/columns.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'lodash',
+  'underscore',
   'backbone',
   'mockup-ui-url/views/popover',
   'mockup-patterns-sortable'
diff --git a/mockup/patterns/structure/js/views/generic-popover.js b/mockup/patterns/structure/js/views/generic-popover.js
index 358b87d..2218d57 100644
--- a/mockup/patterns/structure/js/views/generic-popover.js
+++ b/mockup/patterns/structure/js/views/generic-popover.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'lodash',
+  'underscore',
   'backbone',
   'mockup-ui-url/views/popover',
   'translate',
@@ -103,4 +103,4 @@ define([
   });
 
   return PropertiesView;
-});
\ No newline at end of file
+});
diff --git a/mockup/patterns/structure/js/views/paging.js b/mockup/patterns/structure/js/views/paging.js
index b38379c..77b8e38 100644
--- a/mockup/patterns/structure/js/views/paging.js
+++ b/mockup/patterns/structure/js/views/paging.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'lodash',
+  'underscore',
   'backbone',
   'text!mockup-patterns-structure-url/templates/paging.xml',
   'translate'
diff --git a/mockup/patterns/structure/js/views/rearrange.js b/mockup/patterns/structure/js/views/rearrange.js
index cc26f67..c6a4095 100644
--- a/mockup/patterns/structure/js/views/rearrange.js
+++ b/mockup/patterns/structure/js/views/rearrange.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'lodash',
+  'underscore',
   'mockup-ui-url/views/popover',
   'translate'
 ], function($, _, PopoverView, _t) {
diff --git a/mockup/patterns/structure/js/views/selectionbutton.js b/mockup/patterns/structure/js/views/selectionbutton.js
index 758069a..0492a30 100644
--- a/mockup/patterns/structure/js/views/selectionbutton.js
+++ b/mockup/patterns/structure/js/views/selectionbutton.js
@@ -1,7 +1,7 @@
 define([
   'jquery',
   'backbone',
-  'lodash',
+  'underscore',
   'mockup-ui-url/views/button',
   'text!mockup-patterns-structure-url/templates/selection_button.xml'
 ], function($, Backbone, _, ButtonView, tplButton) {
diff --git a/mockup/patterns/structure/js/views/selectionwell.js b/mockup/patterns/structure/js/views/selectionwell.js
index 4834271..9f1a53e 100644
--- a/mockup/patterns/structure/js/views/selectionwell.js
+++ b/mockup/patterns/structure/js/views/selectionwell.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'lodash',
+  'underscore',
   'backbone',
   'mockup-ui-url/views/popover',
   'text!mockup-patterns-structure-url/templates/selection_item.xml'
diff --git a/mockup/patterns/structure/js/views/table.js b/mockup/patterns/structure/js/views/table.js
index ca9c78d..24775e9 100644
--- a/mockup/patterns/structure/js/views/table.js
+++ b/mockup/patterns/structure/js/views/table.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'lodash',
+  'underscore',
   'backbone',
   'mockup-patterns-structure-url/js/views/tablerow',
   'text!mockup-patterns-structure-url/templates/table.xml',
diff --git a/mockup/patterns/structure/js/views/tablerow.js b/mockup/patterns/structure/js/views/tablerow.js
index 3a52149..896d728 100644
--- a/mockup/patterns/structure/js/views/tablerow.js
+++ b/mockup/patterns/structure/js/views/tablerow.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'lodash',
+  'underscore',
   'backbone',
   'mockup-patterns-structure-url/js/views/actionmenu',
   'text!mockup-patterns-structure-url/templates/tablerow.xml',
diff --git a/mockup/patterns/structure/js/views/textfilter.js b/mockup/patterns/structure/js/views/textfilter.js
index 177ee75..d5ac1e0 100644
--- a/mockup/patterns/structure/js/views/textfilter.js
+++ b/mockup/patterns/structure/js/views/textfilter.js
@@ -1,7 +1,7 @@
 define([
   'jquery',
   'backbone',
-  'lodash',
+  'underscore',
   'mockup-ui-url/views/base',
   'mockup-ui-url/views/button',
   'mockup-ui-url/views/popover',
diff --git a/mockup/patterns/structure/js/views/upload.js b/mockup/patterns/structure/js/views/upload.js
index 815bf7b..f9c5921 100644
--- a/mockup/patterns/structure/js/views/upload.js
+++ b/mockup/patterns/structure/js/views/upload.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'lodash',
+  'underscore',
   'backbone',
   'mockup-ui-url/views/popover',
   'mockup-patterns-upload'
diff --git a/mockup/patterns/thememapper/js/cacheview.js b/mockup/patterns/thememapper/js/cacheview.js
index 1ef001b..565e5e2 100644
--- a/mockup/patterns/thememapper/js/cacheview.js
+++ b/mockup/patterns/thememapper/js/cacheview.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'lodash',
+  'underscore',
   'backbone',
   'mockup-patterns-filemanager-url/js/basepopover',
   'mockup-utils'
diff --git a/mockup/patterns/thememapper/js/lessbuilderview.js b/mockup/patterns/thememapper/js/lessbuilderview.js
index 383f175..f986a05 100644
--- a/mockup/patterns/thememapper/js/lessbuilderview.js
+++ b/mockup/patterns/thememapper/js/lessbuilderview.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'lodash',
+  'underscore',
   'backbone',
   'mockup-patterns-filemanager-url/js/basepopover',
   'mockup-patterns-resourceregistry-url/js/iframe'
diff --git a/mockup/patterns/thememapper/js/rulebuilder.js b/mockup/patterns/thememapper/js/rulebuilder.js
index dcd79b7..c829030 100644
--- a/mockup/patterns/thememapper/js/rulebuilder.js
+++ b/mockup/patterns/thememapper/js/rulebuilder.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'lodash',
+  'underscore',
   'backbone',
 ], function($, _, Backbone) {
   'use strict';
diff --git a/mockup/patterns/thememapper/js/rulebuilderview.js b/mockup/patterns/thememapper/js/rulebuilderview.js
index 678cd50..efc3553 100644
--- a/mockup/patterns/thememapper/js/rulebuilderview.js
+++ b/mockup/patterns/thememapper/js/rulebuilderview.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'lodash',
+  'underscore',
   'backbone',
   'mockup-patterns-filemanager-url/js/basepopover',
   'text!mockup-patterns-thememapper-url/templates/rulebuilder.xml',
diff --git a/mockup/patterns/thememapper/pattern.js b/mockup/patterns/thememapper/pattern.js
index 739c990..59e6ada 100644
--- a/mockup/patterns/thememapper/pattern.js
+++ b/mockup/patterns/thememapper/pattern.js
@@ -30,7 +30,7 @@
 define([
   'jquery',
   'pat-base',
-  'lodash',
+  'underscore',
   'translate',
   'text!mockup-patterns-thememapper-url/templates/inspector.xml',
   'mockup-patterns-filemanager',
diff --git a/mockup/patterns/tinymce/js/links.js b/mockup/patterns/tinymce/js/links.js
index 225d362..82e8526 100644
--- a/mockup/patterns/tinymce/js/links.js
+++ b/mockup/patterns/tinymce/js/links.js
@@ -1,6 +1,6 @@
 define([
   'jquery',
-  'lodash',
+  'underscore',
   'pat-registry',
   'pat-base',
   'mockup-patterns-relateditems',
diff --git a/mockup/patterns/tinymce/pattern.js b/mockup/patterns/tinymce/pattern.js
index 4d3ea44..29d37b7 100644
--- a/mockup/patterns/tinymce/pattern.js
+++ b/mockup/patterns/tinymce/pattern.js
@@ -60,7 +60,7 @@
 
 define([
   'jquery',
-  'lodash',
+  'underscore',
   'pat-base',
   'mockup-patterns-relateditems',
   'mockup-patterns-modal',
diff --git a/mockup/patterns/tree/pattern.js b/mockup/patterns/tree/pattern.js
index 8ed0105..d2d3509 100644
--- a/mockup/patterns/tree/pattern.js
+++ b/mockup/patterns/tree/pattern.js
@@ -52,7 +52,7 @@
 
 define([
   'jquery',
-  'lodash',
+  'underscore',
   'pat-base',
   'mockup-utils',
   'jqtree'
diff --git a/mockup/patterns/upload/pattern.js b/mockup/patterns/upload/pattern.js
index 827a754..0a8e4a4 100644
--- a/mockup/patterns/upload/pattern.js
+++ b/mockup/patterns/upload/pattern.js
@@ -41,7 +41,7 @@
 
 define([
   'jquery',
-  'lodash',
+  'underscore',
   'pat-base',
   'mockup-patterns-relateditems',
   'dropzone',
@@ -111,7 +111,7 @@ define([
       self.currentPath = self.options.currentPath;
       self.currentFile = 0;
 
-      template = _.template(template, {_t: _t});
+      template = _.template(template)({_t: _t});
       self.$el.addClass(self.options.className);
       self.$el.append(template);
 


Repository: mockup


Branch: refs/heads/master
Date: 2015-09-20T00:43:40+02:00
Author: JC Brand (jcbrand) <jc@opkode.com>
Commit: https://github.com/plone/mockup/commit/c8bceda978053fb0a0f72da9ef79169e2bb97ff6

Use pat-base in the docs.

Files changed:
M mockup/GETTING_STARTED.md
M mockup/LEARN.md

diff --git a/mockup/GETTING_STARTED.md b/mockup/GETTING_STARTED.md
index 830ca56..7bf4411 100644
--- a/mockup/GETTING_STARTED.md
+++ b/mockup/GETTING_STARTED.md
@@ -144,7 +144,7 @@ require that some small changes be made to newly developed Mockup patterns:
 
         define([
             'jquery'
-            'mockup-patterns-base',
+            'pat-base',
             'pat-registry'
         ], function($, Base, registry) {
 
diff --git a/mockup/LEARN.md b/mockup/LEARN.md
index b27f8a0..bfe71cb 100644
--- a/mockup/LEARN.md
+++ b/mockup/LEARN.md
@@ -58,12 +58,13 @@ The first step is to go to the *js/patterns* subdirectory and create a file call
 <pre>
 define([
   'jquery',
-  'mockup-patterns-base'
+  'pat-base'
 ], function ($, Base) {
   'use strict';
 
   var HelloWorld = Base.extend({
     name: 'helloworld',
+    trigger: '.pat-helloworld',
     init: function () {
       var $label = this.$el;
       $label.text('Hello, world!');
@@ -616,7 +617,7 @@ $ mv jquery.foggy.min.js lib/
 
     define([
       'jquery',
-      'mockup-patterns-base',
+      'pat-base',
       'jquery.foggy'
     ], function ($, Base) {
       'use strict';


Repository: mockup


Branch: refs/heads/master
Date: 2015-09-20T00:58:55+02:00
Author: JC Brand (jcbrand) <jc@opkode.com>
Commit: https://github.com/plone/mockup/commit/b9405c97202552956d02981419db623fdf979f41

Pin the Patternslib version to the current latest commit.

Files changed:
M bower.json

diff --git a/bower.json b/bower.json
index b071fcb..85ce8c8 100644
--- a/bower.json
+++ b/bower.json
@@ -17,7 +17,7 @@
     "jquery.recurrenceinput.js": "v1.5.2",
     "logging": "",
     "moment": "2.10.3",
-    "patternslib": "master",
+    "patternslib": "https://github.com/Patternslib/Patterns.git#6872c52f00d9aca1b31d3e7ce8ef918f349da8e1",
     "pickadate": "3.5.6",
     "react": "0.10.0",
     "requirejs-text": "2.0.12",


Repository: mockup


Branch: refs/heads/master
Date: 2015-09-20T01:45:40+02:00
Author: JC Brand (jcbrand) <jc@opkode.com>
Commit: https://github.com/plone/mockup/commit/3dba9535b15ab30b8ac34763b19bf6844cabc477

Try to fix the TinyMCE heisenbug.

It happens in the afterEach method when $('body').empty() is called and
apparently has to do with TinyMCE itself not being properly cleared.

TypeError: 'undefined' is not an object (evaluating 'doc.createRange')
(/home/jc/buildout.coredev/src/mockup/mockup/bower_components/tinymce-builded/js/tinymce/tinymce.js

Files changed:
M mockup/tests/pattern-tinymce-test.js

diff --git a/mockup/tests/pattern-tinymce-test.js b/mockup/tests/pattern-tinymce-test.js
index e2da9da..e2554b3 100644
--- a/mockup/tests/pattern-tinymce-test.js
+++ b/mockup/tests/pattern-tinymce-test.js
@@ -82,6 +82,7 @@ define([
       ).appendTo('body');
       registry.scan($el);
       expect(tinymce.get(0).getContent()).to.be.equal('<p>foobar</p>');
+      tinymce.get(0).remove();
     });
 
     it('loads buttons for plugins', function() {
@@ -93,6 +94,7 @@ define([
       ).appendTo('body');
       registry.scan($el);
       expect(tinymce.get(0).buttons).to.have.keys('plonelink', 'ploneimage');
+      tinymce.get(0).remove();
     });
 
     it('on form submit, save data to form', function() {
@@ -412,8 +414,8 @@ define([
       var $form = $container.find('form');
       $container.trigger('submit');
       expect($el.val()).to.be.equal(changed_txt);
+      tinymce.get(0).remove();
     });
 
   });
-
 });


Repository: mockup


Branch: refs/heads/master
Date: 2015-09-21T22:23:04+02:00
Author: JC Brand (jcbrand) <jc@opkode.com>
Commit: https://github.com/plone/mockup/commit/8d616f966c016c7d26223d6c8d3d3aa70e8aaa56

Add a shim for the Patterns Base pattern.

This shim automatically sets the 'parser' attribute to 'mockup' and it is
configured to have the name of the old mockup-core base pattern
"mockup-patterns-base".

Added a deprecation warning to inform users to change to pat-base.

Files changed:
A mockup/patterns/base/pattern.js
M mockup/js/config.js

diff --git a/mockup/js/config.js b/mockup/js/config.js
index d1e40d5..32dbcd0 100644
--- a/mockup/js/config.js
+++ b/mockup/js/config.js
@@ -61,6 +61,7 @@
       'mockup-fakeserver': 'tests/fakeserver',
       'mockup-i18n': 'js/i18n',
       'mockup-patterns-autotoc': 'patterns/autotoc/pattern',
+      'mockup-patterns-base': 'patterns/base/pattern',
       'mockup-patterns-backdrop': 'patterns/backdrop/pattern',
       'mockup-patterns-contentloader': 'patterns/contentloader/pattern',
       'mockup-patterns-cookietrigger': 'patterns/cookietrigger/pattern',
diff --git a/mockup/patterns/base/pattern.js b/mockup/patterns/base/pattern.js
new file mode 100644
index 0000000..7e02b1c
--- /dev/null
+++ b/mockup/patterns/base/pattern.js
@@ -0,0 +1,31 @@
+/* Mockup shim of the Patternslib Base Pattern
+ */
+
+define([
+  'jquery',
+  'pat-base',
+], function($, Base) {
+  'use strict';
+
+  var MockupBase = function MockupBaseWrapper() {
+    return Base.apply(this, arguments);
+  };
+  for (var key in Base) {
+    if (Base.hasOwnProperty(key)) {
+      MockupBase[key] = Base[key];
+    }
+  }
+  MockupBase.prototype = Base.prototype;
+  MockupBase.prototype.constructor = MockupBase;
+
+  MockupBase.extend = function() {
+    console.log(
+      "Usage of the mockup-patterns-base pattern is deprecated and it will eventually be removed."+
+      "Instead, use pat-base and explicitly set parser to 'mockup' when calling extend.");
+    var child = Base.extend.apply(this, arguments);
+    child.prototype.parser = 'mockup';
+    return child;
+  };
+
+  return MockupBase;
+});


Repository: mockup


Branch: refs/heads/master
Date: 2015-09-21T23:12:25+02:00
Author: JC Brand (jcbrand) <jc@opkode.com>
Commit: https://github.com/plone/mockup/commit/76cff4318c3647902f09f019055256942f6530f8

Bump the version number and note changes required.

Files changed:
M CHANGES.rst

diff --git a/CHANGES.rst b/CHANGES.rst
index 77b43d0..1be7677 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -1,7 +1,7 @@
 Changelog
 =========
 
-2.0.9 (Unreleased)
+2.1.0 (Unreleased)
 ------------------
 
 - Fix buttons positions on resource registry (closes `886`).
@@ -27,6 +27,13 @@ Changelog
 - Remove mockup-core as a dependency.
   [jcbrand, goibhniu]
 
+**NOTE**:
+    `mockup-patterns-base` has been deprecated.
+    Individual patterns now need to be updated to use `pat-base` instead
+    of `mockup-patterns-base` and also explicitly set `parser` to `'mockup'`
+    in the `Base.extend` call.
+    Refer to any of the core Mockup patterns for examples.
+
 
 2.0.8 (2015-09-08)
 ------------------


Repository: mockup


Branch: refs/heads/master
Date: 2015-09-21T23:15:48+02:00
Author: JC Brand (jcbrand) <jc@opkode.com>
Commit: https://github.com/plone/mockup/commit/f24f8ee573b2a79a59628db810395efd8966bdd2

Merge branch 'master' into remove-mockup-core

Conflicts:
	CHANGES.rst

Files changed:
M CHANGES.rst
M MANIFEST.in
M mockup/patterns/moment/pattern.js
M mockup/patterns/recurrence/pattern.recurrence.less
M mockup/patterns/relateditems/pattern.relateditems.less
M package.json

diff --git a/CHANGES.rst b/CHANGES.rst
index 1be7677..7076c17 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -2,7 +2,33 @@ Changelog
 =========
 
 2.1.0 (Unreleased)
-------------------
+-------------------
+
+- Remove mockup-core as a dependency.
+  [jcbrand, goibhniu]
+
+**NOTE**:
+    `mockup-patterns-base` has been deprecated.
+    Individual patterns now need to be updated to use `pat-base` instead
+    of `mockup-patterns-base` and also explicitly set `parser` to `'mockup'`
+    in the `Base.extend` call.
+    Refer to any of the core Mockup patterns for examples.
+
+2.0.12 (2015-09-20)
+-------------------
+
+- Update manifest to include required files.
+  [esteele]
+
+2.0.11 (2015-09-20)
+-------------------
+
+- Update manifest to include required json files.
+  [esteele]
+
+
+2.0.10 (2015-09-20)
+-------------------
 
 - Fix buttons positions on resource registry (closes `886`).
   [rodfersou]
@@ -15,6 +41,10 @@ Changelog
 - Pass more i18n labels to the PickADate pattern
   [ichim-david]
 
+
+2.0.9 (2015-09-11)
+------------------
+
 - Use hash to keep autotoc position settings
   [vangheem]
 
@@ -24,16 +54,6 @@ Changelog
 - Fix scrolling when closing a modal within a modal
   [ebrehault]
 
-- Remove mockup-core as a dependency.
-  [jcbrand, goibhniu]
-
-**NOTE**:
-    `mockup-patterns-base` has been deprecated.
-    Individual patterns now need to be updated to use `pat-base` instead
-    of `mockup-patterns-base` and also explicitly set `parser` to `'mockup'`
-    in the `Base.extend` call.
-    Refer to any of the core Mockup patterns for examples.
-
 
 2.0.8 (2015-09-08)
 ------------------
diff --git a/MANIFEST.in b/MANIFEST.in
index 6b3d06c..852a3c6 100644
--- a/MANIFEST.in
+++ b/MANIFEST.in
@@ -1,11 +1,26 @@
+include *.json
+include *.rst
+recursive-include mockup *.html
+recursive-include mockup *.js
+recursive-include mockup *.jshintrc
+recursive-include mockup *.json
+recursive-include mockup *.md
+recursive-include mockup *.zcml
 recursive-include mockup/js *
 recursive-include mockup/less *
 recursive-include mockup/lib *
 recursive-include mockup/patterns *
 recursive-include mockup/tests *
-prune mockup/docs
-prune mockup/build
-prune mockup/coverage
+prune .nix
 prune dist
 prune mockup/bower_components
+prune mockup/build
+prune mockup/coverage
+prune mockup/docs
+prune mockup/node_modules
+exclude .bowerrc
+exclude .travis.yml
+exclude Makefile
+exclude *.sh
+exclude Vagrantfile
 global-exclude *.pyc
\ No newline at end of file
diff --git a/mockup/patterns/moment/pattern.js b/mockup/patterns/moment/pattern.js
index 9d76661..8bf70c4 100644
--- a/mockup/patterns/moment/pattern.js
+++ b/mockup/patterns/moment/pattern.js
@@ -106,7 +106,7 @@ define([
       if (!date) {
         date = $.trim($el.html());
       }
-      moment.locale((new i18n()).currentLanguage);
+      moment.locale([(new i18n()).currentLanguage, 'en']);
       date = moment(date);
       if (!date.isValid()) {
         return;
diff --git a/mockup/patterns/recurrence/pattern.recurrence.less b/mockup/patterns/recurrence/pattern.recurrence.less
index 796bac2..233798c 100644
--- a/mockup/patterns/recurrence/pattern.recurrence.less
+++ b/mockup/patterns/recurrence/pattern.recurrence.less
@@ -1,3 +1,8 @@
 @import (inline) "@{bowerPath}/jquery.recurrenceinput.js/lib/jquery.tools.dateinput.css";
 @import (inline) "@{bowerPath}/jquery.recurrenceinput.js/lib/jquery.tools.overlay.css";
 @import (less) "@{bowerPath}/jquery.recurrenceinput.js/src/jquery.recurrenceinput.css";
+
+// This fixes the select overflow in FF
+div.riform #rirtemplate select {
+    width: auto;
+}
diff --git a/mockup/patterns/relateditems/pattern.relateditems.less b/mockup/patterns/relateditems/pattern.relateditems.less
index c126cc5..58b4386 100644
--- a/mockup/patterns/relateditems/pattern.relateditems.less
+++ b/mockup/patterns/relateditems/pattern.relateditems.less
@@ -38,7 +38,7 @@
   font-size: 12px;
   border: 1px solid #aaa;
   border-bottom-style: none;
-  z-index: 9999;
+  z-index: 999;
   position: relative;
   padding: 0 6px;
   color: #333;
@@ -84,7 +84,7 @@
     line-height: 15px;
     padding-top: 5px;
   }
-  
+
   .pattern-relateditems-result-path {
     display: block;
     color: #444;
diff --git a/package.json b/package.json
index 83ae17c..4aedcb6 100644
--- a/package.json
+++ b/package.json
@@ -1,6 +1,6 @@
 {
   "name": "mockup",
-  "version": "2.0.9",
+  "version": "2.0.13",
   "description": "A collection of client side patterns for faster and easier web development",
   "homepage": "http://plone.github.io/mockup",
   "devDependencies": {


Repository: mockup


Branch: refs/heads/master
Date: 2015-09-21T21:04:48-05:00
Author: Nathan Van Gheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/mockup/commit/f7687d5d6fa5bfd91f981e08b1ca2a60ea8a6482

Merge pull request #585 from plone/remove-mockup-core

Remove mockup-core

Files changed:
A mockup/js/grunt.js
A mockup/patterns/base/pattern.js
M CHANGES.rst
M bower.json
M mockup/GETTING_STARTED.md
M mockup/Gruntfile.js
M mockup/LEARN.md
M mockup/js/bundles/filemanager.js
M mockup/js/bundles/plone.js
M mockup/js/bundles/structure.js
M mockup/js/bundles/widgets.js
M mockup/js/config.js
M mockup/less/docs.less
M mockup/patterns/autotoc/pattern.js
M mockup/patterns/backdrop/pattern.js
M mockup/patterns/contentloader/pattern.js
M mockup/patterns/cookietrigger/pattern.js
M mockup/patterns/eventedit/pattern.js
M mockup/patterns/filemanager/pattern.js
M mockup/patterns/formautofocus/pattern.js
M mockup/patterns/formunloadalert/pattern.js
M mockup/patterns/inlinevalidation/pattern.js
M mockup/patterns/livesearch/pattern.js
M mockup/patterns/markspeciallinks/pattern.js
M mockup/patterns/modal/pattern.js
M mockup/patterns/moment/pattern.js
M mockup/patterns/passwordstrength/pattern.js
M mockup/patterns/pickadate/pattern.js
M mockup/patterns/preventdoublesubmit/pattern.js
M mockup/patterns/querystring/pattern.js
M mockup/patterns/recurrence/pattern.js
M mockup/patterns/relateditems/pattern.js
M mockup/patterns/resourceregistry/js/builder.js
M mockup/patterns/resourceregistry/pattern.js
M mockup/patterns/select2/pattern.js
M mockup/patterns/sortable/pattern.js
M mockup/patterns/structure/js/views/generic-popover.js
M mockup/patterns/structure/pattern.js
M mockup/patterns/textareamimetypeselector/pattern.js
M mockup/patterns/texteditor/pattern.js
M mockup/patterns/thememapper/pattern.js
M mockup/patterns/tinymce/js/links.js
M mockup/patterns/tinymce/pattern.js
M mockup/patterns/toggle/pattern.js
M mockup/patterns/tooltip/pattern.js
M mockup/patterns/tree/pattern.js
M mockup/patterns/upload/pattern.js
M mockup/tests/fakeserver.js
M mockup/tests/pattern-tinymce-test.js
M mockup/tests/pattern-toggle-test.js

diff --git a/CHANGES.rst b/CHANGES.rst
index 665adfb..7076c17 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -1,10 +1,18 @@
 Changelog
 =========
 
-2.0.13 (Unreleased)
+2.1.0 (Unreleased)
 -------------------
 
-- No changes yet.
+- Remove mockup-core as a dependency.
+  [jcbrand, goibhniu]
+
+**NOTE**:
+    `mockup-patterns-base` has been deprecated.
+    Individual patterns now need to be updated to use `pat-base` instead
+    of `mockup-patterns-base` and also explicitly set `parser` to `'mockup'`
+    in the `Base.extend` call.
+    Refer to any of the core Mockup patterns for examples.
 
 2.0.12 (2015-09-20)
 -------------------
diff --git a/bower.json b/bower.json
index aaa37a6..85ce8c8 100644
--- a/bower.json
+++ b/bower.json
@@ -9,18 +9,19 @@
     "console-polyfill": "0.1.2",
     "dropzone": "4.0.1",
     "es5-shim": "4.0.3",
+    "marked": "0.3.3",
     "jqtree": "0.22.0",
     "jquery": "1.11.3",
     "jquery-form": "3.46.0",
     "jquery.cookie": "1.4.1",
     "jquery.recurrenceinput.js": "v1.5.2",
-    "lodash": "2.4.1",
     "logging": "",
-    "mockup-core": "2.1.12",
     "moment": "2.10.3",
-    "patternslib": "2.0.9",
+    "patternslib": "https://github.com/Patternslib/Patterns.git#6872c52f00d9aca1b31d3e7ce8ef918f349da8e1",
     "pickadate": "3.5.6",
+    "react": "0.10.0",
     "requirejs-text": "2.0.12",
+    "selectivizr": "1.0.2",
     "select2": "3.5.1",
     "tinymce-builded": "4.2.5"
   },
@@ -32,6 +33,8 @@
     "bootstrap": "3.3.4",
     "jquery": "1.11.3",
     "select2": "3.5.1",
-    "patternslib": "2.0.9"
+    "moment": "2.10.3",
+    "patternslib": "master",
+    "parsleyjs": "1.2.4"
   }
 }
diff --git a/mockup/GETTING_STARTED.md b/mockup/GETTING_STARTED.md
index 2095cca..7bf4411 100644
--- a/mockup/GETTING_STARTED.md
+++ b/mockup/GETTING_STARTED.md
@@ -132,21 +132,6 @@ After that, access the served site in a webbrowser under the url:
     http://localhost:8000
 
 
-# Including a local mockup-core checkout for developing
-
-If you want to also hack on mockup-core together with mockup and not push the
-changes from mockup-core to github, you can include it from a local checkout.
-Just replace the mockup-core line in bower.json with:
-
-    "mockup-core": "file:///PATH/TO/mockup-core/.git/#BRANCHNAME"
-
-Please note, you have to commit the changes on mockup-core before running
-``make bootstrap``.
-
-Alternatively, on UNIX based systems, simply make a symlink from
-bower_components/mockup-core/ to your local mockup-core checkout.
-
-
 # Upgrade from pre-2.0 to 2.0 based Mockup patterns
 
 Since version 2.0, Mockup uses the Patternslib scanner and it's registry. This
@@ -159,7 +144,7 @@ require that some small changes be made to newly developed Mockup patterns:
 
         define([
             'jquery'
-            'mockup-patterns-base',
+            'pat-base',
             'pat-registry'
         ], function($, Base, registry) {
 
diff --git a/mockup/Gruntfile.js b/mockup/Gruntfile.js
index 8b5a421..cfdccd5 100644
--- a/mockup/Gruntfile.js
+++ b/mockup/Gruntfile.js
@@ -5,7 +5,7 @@ module.exports = function(grunt) {
 
   var fs = require('fs');
 
-  var MockupGrunt = require('./bower_components/mockup-core/js/grunt'),
+  var MockupGrunt = require('./js/grunt'),
       requirejsOptions = require('./js/config'),
       mockup = new MockupGrunt(requirejsOptions),
       docsExtraIncludes = [];
diff --git a/mockup/LEARN.md b/mockup/LEARN.md
index 1e33020..bfe71cb 100644
--- a/mockup/LEARN.md
+++ b/mockup/LEARN.md
@@ -58,12 +58,13 @@ The first step is to go to the *js/patterns* subdirectory and create a file call
 <pre>
 define([
   'jquery',
-  'mockup-patterns-base'
+  'pat-base'
 ], function ($, Base) {
   'use strict';
 
   var HelloWorld = Base.extend({
     name: 'helloworld',
+    trigger: '.pat-helloworld',
     init: function () {
       var $label = this.$el;
       $label.text('Hello, world!');
@@ -114,7 +115,7 @@ So, first open the file *js/config.js* and add the following line under the *pat
     baseUrl: './',
     paths: {
       &hellip;
-      'underscore': 'bower_components/lodash/dist/lodash.underscore',
+      'underscore': 'bower_components/underscore/underscore',
       'mockup-patterns-helloworld': 'js/patterns/hello' // <- right here!
   },
   &hellip;
@@ -616,7 +617,7 @@ $ mv jquery.foggy.min.js lib/
 
     define([
       'jquery',
-      'mockup-patterns-base',
+      'pat-base',
       'jquery.foggy'
     ], function ($, Base) {
       'use strict';
diff --git a/mockup/js/bundles/filemanager.js b/mockup/js/bundles/filemanager.js
index f568a84..28f8f14 100644
--- a/mockup/js/bundles/filemanager.js
+++ b/mockup/js/bundles/filemanager.js
@@ -1,7 +1,7 @@
 define([
   'jquery',
   'pat-registry',
-  'mockup-patterns-base',
+  'pat-base',
   'mockup-patterns-filemanager'
 ], function($, registry, Base) {
   'use strict';
diff --git a/mockup/js/bundles/plone.js b/mockup/js/bundles/plone.js
index 11f1438..65f4718 100644
--- a/mockup/js/bundles/plone.js
+++ b/mockup/js/bundles/plone.js
@@ -1,7 +1,7 @@
 define([
   'jquery',
   'pat-registry',
-  'mockup-patterns-base',
+  'pat-base',
 
   'mockup-patterns-select2',
   'mockup-patterns-pickadate',
diff --git a/mockup/js/bundles/structure.js b/mockup/js/bundles/structure.js
index 5adfc56..2a4be61 100644
--- a/mockup/js/bundles/structure.js
+++ b/mockup/js/bundles/structure.js
@@ -8,7 +8,7 @@ if (window.jQuery) {
 define([
   'jquery',
   'pat-registry',
-  'mockup-patterns-base',
+  'pat-base',
   'mockup-patterns-modal',
   'mockup-patterns-structure'
 ], function($, registry, Base, Modal, Structure) {
diff --git a/mockup/js/bundles/widgets.js b/mockup/js/bundles/widgets.js
index 93a5092..2fb36c9 100644
--- a/mockup/js/bundles/widgets.js
+++ b/mockup/js/bundles/widgets.js
@@ -1,7 +1,7 @@
 define([
   'jquery',
   'pat-registry',
-  'mockup-patterns-base',
+  'pat-base',
 
   'mockup-patterns-select2',
   'mockup-patterns-passwordstrength',
diff --git a/mockup/js/config.js b/mockup/js/config.js
index 9fde4c4..32dbcd0 100644
--- a/mockup/js/config.js
+++ b/mockup/js/config.js
@@ -53,17 +53,16 @@
       'mockup-bundles-structure': 'js/bundles/structure',
       'mockup-bundles-tiles': 'js/bundles/widgets',
       'mockup-bundles-widgets': 'js/bundles/widgets',
-      'mockup-docs': 'bower_components/mockup-core/js/docs/app',
-      'mockup-docs-navigation': 'bower_components/mockup-core/js/docs/navigation',
-      'mockup-docs-page': 'bower_components/mockup-core/js/docs/page',
-      'mockup-docs-pattern': 'bower_components/mockup-core/js/docs/pattern',
-      'mockup-docs-view': 'bower_components/mockup-core/js/docs/view',
+      'mockup-docs': 'js/docs/app',
+      'mockup-docs-navigation': 'js/docs/navigation',
+      'mockup-docs-page': 'js/docs/page',
+      'mockup-docs-pattern': 'js/docs/pattern',
+      'mockup-docs-view': 'js/docs/view',
       'mockup-fakeserver': 'tests/fakeserver',
       'mockup-i18n': 'js/i18n',
-      'mockup-parser': 'bower_components/mockup-core/js/parser',
       'mockup-patterns-autotoc': 'patterns/autotoc/pattern',
+      'mockup-patterns-base': 'patterns/base/pattern',
       'mockup-patterns-backdrop': 'patterns/backdrop/pattern',
-      'mockup-patterns-base': 'bower_components/mockup-core/js/pattern',
       'mockup-patterns-contentloader': 'patterns/contentloader/pattern',
       'mockup-patterns-cookietrigger': 'patterns/cookietrigger/pattern',
       'mockup-patterns-eventedit': 'patterns/eventedit/pattern',
@@ -113,12 +112,14 @@
       'text': 'bower_components/requirejs-text/text',
       'tinymce': 'bower_components/tinymce-builded/js/tinymce/tinymce',
       'tinymce-modern-theme': 'bower_components/tinymce-builded/js/tinymce/themes/modern/theme',
-      'underscore': 'bower_components/lodash/dist/lodash.underscore',
+      'underscore': 'bower_components/underscore/underscore',
 
       // Patternslib
       'pat-compat': 'bower_components/patternslib/src/core/compat',
       'pat-jquery-ext': 'bower_components/patternslib/src/core/jquery-ext',
       'pat-logger': 'bower_components/patternslib/src/core/logger',
+      'pat-base': 'bower_components/patternslib/src/core/base',
+      'pat-mockup-parser': 'bower_components/patternslib/src/core/mockup-parser',
       'pat-registry': 'bower_components/patternslib/src/core/registry',
       'pat-utils': 'bower_components/patternslib/src/core/utils',
       'logging': 'bower_components/logging/src/logging'
diff --git a/mockup/js/grunt.js b/mockup/js/grunt.js
new file mode 100644
index 0000000..0203207
--- /dev/null
+++ b/mockup/js/grunt.js
@@ -0,0 +1,434 @@
+/* global module:true, process:true */
+
+(function() {
+  'use strict';
+
+  var fs = require('fs'),
+      less = require('less'),
+      extend = require('extend'),
+      path = require('path'),
+      appDir = process.cwd(),
+      karmaConstants = require(appDir + '/node_modules/karma/lib/constants'),
+      MockupGrunt = function (requirejsOptions) { this.init(requirejsOptions); },
+      BROWSERS = process.env.BROWSERS;
+
+  if (BROWSERS) {
+    BROWSERS = BROWSERS.split(',');
+  } else {
+    BROWSERS = [ 'SL_Chrome', 'SL_Firefox' ];
+  }
+
+  MockupGrunt.prototype = {
+
+    sections: {
+      requirejs: {
+        registerBundle: function(name, customGruntConfig, bundleOptions, sections) {
+          this.gruntConfig.requirejs = this.gruntConfig.requirejs || {};
+          this.gruntConfig.requirejs[name] = this.gruntConfig.requirejs[name] || {};
+          this.gruntConfig.requirejs[name].options = this.gruntConfig.requirejs[name].options || {};
+
+          this.gruntConfig.requirejs[name].options = {
+            name: 'node_modules/requirejs/require.js',
+            include: ['mockup-bundles-' + name].concat(bundleOptions.extraInclude || []),
+            exclude: bundleOptions.exclude || [],
+            insertRequire: ['mockup-bundles-' + name],
+            out: bundleOptions.path + name + '.js'
+          };
+        }
+      },
+      uglify: {
+        registerBundle: function(name, customGruntConfig, bundleOptions, sections) {
+          this.gruntConfig.uglify = this.gruntConfig.uglify || {};
+          this.gruntConfig.uglify[name] = this.gruntConfig.uglify[name] || {};
+          this.gruntConfig.uglify[name].files = this.gruntConfig.uglify[name].files || {};
+          this.gruntConfig.uglify[name].options = {
+            mangle: false,
+            sourceMap: true,
+            sourceMapName: bundleOptions.path + name + '.min.js.map'
+          };
+          this.gruntConfig.uglify[name].files[bundleOptions.path + name + '.min.js'] = [
+            bundleOptions.path + name + '.js'
+          ];
+        }
+      },
+      less: {
+        registerBundle: function(name, customGruntConfig, bundleOptions, sections) {
+          var gruntConfig = this.gruntConfig;
+
+          gruntConfig.less = gruntConfig.less || {};
+          gruntConfig.less[name] = gruntConfig.less[name] || {};
+          gruntConfig.less[name].files = gruntConfig.less[name].files || {};
+          gruntConfig.less[name].files[bundleOptions.path + name + '.min.css'] = 'less/' + name + '.less';
+          gruntConfig.less[name].options = {
+            sourceMap: true,
+            sourceMapFilename: bundleOptions.path + name + '.min.css.map'
+          };
+
+          gruntConfig.watch = gruntConfig.watch || {};
+          gruntConfig.watch['less-' + name] = gruntConfig.watch['less-' + name] || {
+            files: [ 'less/' + name + '.less' ],
+            tasks: [ 'less:' + name ]
+          };
+
+          var parser = new(less.Parser)({ syncImport: true, paths: ['less'], filename: name + '.less' }),
+              bundleFile = fs.readFileSync('less/' + name + '.less', { encoding: 'utf-8' });
+
+          parser.parse(bundleFile, function() {
+            for(var file in parser.imports.files) {
+              gruntConfig.watch['less-' + name].files.push(file);
+            }
+          });
+        }
+      },
+      copy: {
+        registerBundle: function(name, customGruntConfig, bundleOptions, sections) {
+          this.gruntConfig.copy = this.gruntConfig.copy || {};
+          this.gruntConfig.copy[name] = this.gruntConfig.copy[name] || {};
+          this.gruntConfig.copy[name].files = this.gruntConfig.copy[name].files || [];
+          this.gruntConfig.copy[name].files = this.gruntConfig.copy[name].files.concat([
+            // BOOTSTRAP
+            { expand: true, cwd: 'bower_components/bootstrap/dist/fonts/', src: 'glyphicons-halflings-regular.*', dest: bundleOptions.path,
+              rename: function(dest, src) { return dest + name + '-bootstrap-' + src; }},
+            // TINYMCE
+            { expand: true, cwd: 'bower_components/tinymce-builded/js/tinymce/langs', src: '*', dest: bundleOptions.path + name + '-tinymce/langs'},
+            { expand: true, cwd: 'bower_components/tinymce-builded/js/tinymce/skins/lightgray/fonts/', src: 'tinymce*', dest: bundleOptions.path,
+              rename: function(dest, src) { return dest + name + '-tinymce-font-' + src; }},
+            { expand: true, cwd: 'bower_components/tinymce-builded/js/tinymce/skins/lightgray/img/', src: '*', dest: bundleOptions.path,
+              rename: function(dest, src) { return dest + name + '-tinymce-img-' + src; }},
+            { expand: true, cwd: 'bower_components/tinymce-builded/js/tinymce/skins/lightgray/', src: 'content.min.css', dest: bundleOptions.path,
+              rename: function(dest, src) { return dest + name + '-tinymce-' + src; }},
+            // JQTREE
+            { expand: true, cwd: 'bower_components/jqtree/', src: 'jqtree-circle.png', dest: bundleOptions.path,
+              rename: function(dest, src) { return dest + name + '-jqtree-' + src; }},
+            // SELECT2
+            { expand: true, cwd: 'bower_components/select2/', src: 'select2*.png', dest: bundleOptions.path,
+              rename: function(dest, src) { return dest + name + '-select2-' + src; }},
+            { expand: true, cwd: 'bower_components/select2/', src: 'select2*.gif', dest: bundleOptions.path,
+              rename: function(dest, src) { return dest + name + '-select2-' + src; }},
+          ]);
+        }
+      },
+      sed: {
+        registerBundle: function(name, customGruntConfig, bundleOptions, sections) {
+          this.gruntConfig.sed = this.gruntConfig.sed || {};
+          // source maps
+          this.gruntConfig.sed[name + '.min.css.map'] = {
+            path: bundleOptions.path + name + '.min.css',
+            pattern: 'sourceMappingURL=' + bundleOptions.path + name + '.min.css.map',
+            replacement: 'sourceMappingURL=' + bundleOptions.url + '.min.css.map',
+          };
+          this.gruntConfig.sed[name + '.min.js.map'] = {
+            path: bundleOptions.path + name + '.min.js',
+            pattern: 'sourceMappingURL=' + name + '.min.js.map',
+            replacement: 'sourceMappingURL=' + bundleOptions.url + '.min.js.map',
+          };
+          // pattern resources
+          // BOOTSTRAP
+          this.gruntConfig.sed[name + '-bootstrap-glyphicons'] = {
+            path: bundleOptions.path + name + '.min.css',
+            pattern: 'url\\(\'../bower_components/bootstrap/dist/fonts/glyphicons-halflings-regular',
+            replacement: 'url(\'' + bundleOptions.url + '-bootstrap-glyphicons-halflings-regular'
+          };
+          // TINYMCE
+          this.gruntConfig.sed[name + '-tinymce-fonts'] = {
+            path: bundleOptions.path + name + '.min.css',
+            pattern: 'url\\((\'?)fonts/tinymce',  // match urls with and without quotes
+            replacement: 'url($1' + bundleOptions.url + '-tinymce-font-tinymce'
+          };
+          this.gruntConfig.sed[name + '-tinymce-img-loader'] = {
+            path: bundleOptions.path + name + '.min.css',
+            pattern: 'url\\(\'?img/loader.gif\'?',  // match urls with and without quotes
+            replacement: 'url(\'' + bundleOptions.url + '-tinymce-img-loader.gif\''
+          };
+          this.gruntConfig.sed[name + '-tinymce-img-anchor'] = {
+            path: bundleOptions.path + name + '.min.css',
+            pattern: 'url\\(\'?img/anchor.gif\'?',
+            replacement: 'url(\'' + bundleOptions.url + '-tinymce-img-anchor.gif\''
+          };
+          this.gruntConfig.sed[name + '-tinymce-img-object'] = {
+            path: bundleOptions.path + name + '.min.css',
+            pattern: 'url\\(\'?img/object.gif\'?',
+            replacement: 'url(\'' + bundleOptions.url + '-tinymce-img-object.gif\''
+          };
+          // TINYMCE content.min
+          this.gruntConfig.sed[name + '-tinymce-content.min.css'] = {
+            // replace default content.min.css
+            path: bundleOptions.path,
+            recursive: true,
+            pattern: '../../../bower_components/tinymce-builded/js/tinymce/skins/lightgray/content.min.css',
+            replacement: bundleOptions.url + '-tinymce-content.min.css'
+          };
+          this.gruntConfig.sed[name + '-tinymce-fonts2'] = {
+            path: bundleOptions.path + name + '-tinymce-content.min.css',
+            pattern: 'url\\((\'?)fonts/tinymce',  // match urls with and without quotes
+            replacement: 'url($1' + bundleOptions.url + '-tinymce-font-tinymce'
+          };
+          this.gruntConfig.sed[name + '-tinymce-img-loader2'] = {
+            path: bundleOptions.path + name + '-tinymce-content.min.css',
+            pattern: 'url\\(\'?img/loader.gif\'?',
+            replacement: 'url(\'' + bundleOptions.url + '-tinymce-img-loader.gif\''
+          };
+          this.gruntConfig.sed[name + '-tinymce-img-anchor2'] = {
+            path: bundleOptions.path + name + '-tinymce-content.min.css',
+            pattern: 'url\\(\'?img/anchor.gif\'?',
+            replacement: 'url(\'' + bundleOptions.url + '-tinymce-img-anchor.gif\''
+          };
+          this.gruntConfig.sed[name + '-tinymce-img-object2'] = {
+            path: bundleOptions.path + name + '-tinymce-content.min.css',
+            pattern: 'url\\(\'?img/object.gif\'?',
+            replacement: 'url(\'' + bundleOptions.url + '-tinymce-img-object.gif\''
+          };
+          // SELECT2
+          this.gruntConfig.sed[name + '-select2-images'] = {
+            path: bundleOptions.path + name + '.min.css',
+            pattern: 'url\\(\'select2',
+            replacement: 'url(\'' + bundleOptions.url + '-select2-select2'
+          };
+          // JQTREE
+          this.gruntConfig.sed[name + '-jqtree-circle'] = {
+            path: bundleOptions.path + name + '.min.css',
+            pattern: 'url\\(jqtree-circle.png',
+            replacement: 'url(\'' + bundleOptions.url + '-jqtree-jqtree-circle.png\''
+          };
+        }
+      }
+
+    },
+    init: function(requirejsOptions) {
+      this.requirejsOptions = requirejsOptions;
+      this.patterns = [];
+      this.bundles = {};
+      this.gruntConfig = {};
+      this.files = [
+        /*
+        * include initial framework (mocha and requirejs) with html5
+        * shims/shams/polyfills
+        */
+        'bower_components/selectivizr/selectivizr.js',
+        'bower_components/es5-shim/es5-shim.js',
+        'bower_components/es5-shim/es5-sham.js',
+        'bower_components/console-polyfill/index.js',
+        'node_modules/mocha/mocha.js',
+        'node_modules/karma-mocha/lib/adapter.js',
+        'node_modules/requirejs/require.js',
+        'node_modules/karma-requirejs/lib/adapter.js',
+
+        /*
+        * include requirejs configuration
+        */
+        'js/config.js',
+
+        /*
+        * include karma requirejs configuration
+        */
+        'tests/config.js',
+      ];
+
+      /*
+      * provide (but not include) all scripts defined in requirejs's
+      * configuration
+      *
+      * also at the same time create a list of all patterns to be loaded with
+      * docs bundle
+      */
+      var path;
+      for (var key in this.requirejsOptions.paths) {
+        path = this.requirejsOptions.paths[key];
+        if (path.indexOf('.md') !== path.length - 3) {
+          this.files.push({ pattern: path + '.js', included: false });
+        }
+        if (key.indexOf('mockup-patterns-') === 0) {
+          this.patterns.push(key);
+        }
+      }
+
+      /*
+      * provide (but not include) all files in "tests/" and "js/" folder
+      * those files will be loaded by requirejs at later points
+      *
+      * TODO: simplify the pattern to include everything inside js/ and
+      * tests/ folders.
+      */
+      this.files = this.files.concat([
+        {pattern: 'tests/**/*', included: false},
+        {pattern: 'js/**/*', included: false},
+        {pattern: 'patterns/**/*', included: false}
+      ]);
+
+
+    },
+    registerBundle: function(name, customGruntConfig, bundleOptions, sections) {
+
+      extend(true, this.gruntConfig, customGruntConfig || {});
+
+      bundleOptions = extend(true, {
+        path: 'build/',
+        url: '++resource++plone.app.' + name,
+        insertExtraRequires: []
+      }, bundleOptions || {});
+
+      sections = sections || ['requirejs', 'uglify', 'less', 'copy', 'sed'];
+
+      for (var i = 0; i < sections.length; i = i + 1) {
+        if (this.sections[sections[i]]) {
+          this.sections[sections[i]].registerBundle.apply(
+            this,
+            [ name, customGruntConfig, bundleOptions, sections ]
+          );
+        }
+      }
+
+      var bundleTasks = [];
+      for (var j = 0; j < sections.length; j = j + 1) {
+        if (this.gruntConfig[sections[j]][name] !== {} && sections[j] !== 'sed') {
+          bundleTasks.push(sections[j] + ':' + name);
+        } else if (sections[j] === 'sed') {
+          for (var sedSection in this.gruntConfig.sed) {
+            if (this.gruntConfig.sed.hasOwnProperty(sedSection) && sedSection.indexOf(name) === 0) {
+              bundleTasks.push('sed:' + sedSection);
+            }
+          }
+        }
+      }
+      this.bundles[name] = bundleTasks;
+    },
+
+    initGrunt: function(grunt, customGruntConfig) {
+      extend(true, this.gruntConfig, customGruntConfig || {});
+
+      /*
+       * Register different test runners
+       */
+      var bundles = [];
+      for (var name in this.bundles) {
+        bundles.push('bundle-' + name);
+        grunt.registerTask('bundle-' + name, this.bundles[name]);
+      }
+      grunt.registerTask('test', [ 'jshint', 'karma:test' ]);
+      grunt.registerTask('test_once', [ 'jshint', 'karma:testOnce' ]);
+      grunt.registerTask('test_jenkins', [ 'jshint', 'karma:testJenkins' ]);
+      grunt.registerTask('test_dev', [ 'karma:testDev' ]);
+      grunt.registerTask('test_serve', [ 'karma:testServe' ]);
+      grunt.registerTask('test_ci', [ 'jshint', 'karma:testCI'].concat(bundles));
+
+      grunt.initConfig(extend(true, {
+        jshint: { options: { jshintrc: '.jshintrc' }, all: ['Gruntfile.js', 'js/**/*.js', 'tests/*.js'] },
+        karma: {
+          options: {
+            basePath: './',
+            frameworks: ['mocha', 'chai'],
+            files: this.files,
+            preprocessors: { 'js/**/*.js': 'coverage' },
+            reporters: ['dots', 'progress', 'coverage', 'spec'],
+            coverageReporter: { type : 'lcov', dir : 'coverage/' },
+            port: 9876,
+            colors: true,
+            // logLevel: karmaConstants.LOG_DEBUG,
+            logLevel: karmaConstants.LOG_INFO,
+            browserNoActivityTimeout: 200000,
+            autoWatch: true,
+            captureTimeout: 60000,
+            plugins: [
+              'karma-mocha',
+              'karma-chai',
+              'karma-coverage',
+              'karma-requirejs',
+              'karma-sauce-launcher',
+              'karma-chrome-launcher',
+              'karma-phantomjs-launcher',
+              'karma-junit-reporter',
+              'karma-spec-reporter'
+            ]
+          },
+          test: {
+            browsers: ['PhantomJS']
+          },
+          testOnce: {
+            singleRun: true,
+            browsers: ['PhantomJS']
+          },
+          testJenkins: {
+            autoWatch: false,
+            colors: false,
+            singleRun: true,
+            browsers: ['PhantomJS'],
+            reporters: ['junit'],
+            junitReporter: {
+              outputFile: 'test-results.xml'
+            },
+          },
+          testDev: {
+            browsers: ['Chrome'],
+            preprocessors: {},
+            reporters: ['dots', 'progress'],
+            plugins: [
+              'karma-mocha',
+              'karma-chai',
+              'karma-requirejs',
+              'karma-chrome-launcher'
+            ]
+          },
+          testServe: {
+            preprocessors: {},
+            reporters: ['dots', 'progress'],
+            plugins: [
+              'karma-mocha',
+              'karma-chai',
+              'karma-requirejs'
+            ]
+          },
+          testCI: {
+            singleRun: true,
+            port: 8080,
+            recordVideo: true,
+            reporters: ['junit', 'coverage', 'saucelabs'],
+            junitReporter: { outputFile: 'test-results.xml' },
+            sauceLabs: { testName: 'Mockup', startConnect: true },
+            browsers: BROWSERS,
+            customLaunchers: {
+              'SL_Chrome': { base: 'SauceLabs', browserName: 'chrome', platform: 'Windows 8.1', version: '38' },
+              'SL_Firefox': { base: 'SauceLabs', browserName: 'firefox', platform: 'Windows 8.1', version: '33' },
+              'SL_Opera': { base: 'SauceLabs', browserName: 'opera', platform: 'Windows 8.1', version: '25' },
+              'SL_Safari': { base: 'SauceLabs', browserName: 'safari', platform: 'Mac 10.9', version: '7.1' },
+              'SL_IE_8': { base: 'SauceLabs', browserName: 'internet explorer', platform: 'Windows 7', version: '8' },
+              'SL_IE_9': { base: 'SauceLabs', browserName: 'internet explorer', platform: 'Windows 7', version: '9' },
+              'SL_IE_10': { base: 'SauceLabs', browserName: 'internet explorer', platform: 'Windows 7', version: '10' },
+              'SL_IE_11': { base: 'SauceLabs', browserName: 'internet explorer', platform: 'Windows 8.1', version: '11' },
+              'SL_IPhone': { base: 'SauceLabs', browserName: 'iphone', platform: 'OS X 10.9', version: '7.1' },
+              'SL_IPad': { base: 'SauceLabs', browserName: 'ipad', platform: 'OS X 10.9', version: '7.1' },
+              'SL_Android': { base: 'SauceLabs', browserName: 'android', platform: 'Linux', version: '4.3' }
+            }
+          }
+        },
+        requirejs: {
+          options: this.requirejsOptions
+        },
+        less: {
+          options: {
+            compress: true,
+            cleancss: false,
+            ieCompat: true,
+            paths: ['less']
+          }
+        },
+        sed: {
+          'bootstrap': {
+            path: 'node_modules/lcov-result-merger/index.js',
+            pattern: 'throw new Error\\(\'Unknown Prefix ',
+            replacement: '//throw// new Error(\'Unknown Prefix '
+          }
+        }
+      }, this.gruntConfig));
+
+      grunt.loadNpmTasks('grunt-contrib-copy');
+      grunt.loadNpmTasks('grunt-contrib-jshint');
+      grunt.loadNpmTasks('grunt-contrib-less');
+      grunt.loadNpmTasks('grunt-contrib-requirejs');
+      grunt.loadNpmTasks('grunt-contrib-uglify');
+      grunt.loadNpmTasks('grunt-contrib-watch');
+      grunt.loadNpmTasks('grunt-karma');
+      grunt.loadNpmTasks('grunt-sed');
+    }
+  };
+  module.exports = MockupGrunt;
+})();
diff --git a/mockup/less/docs.less b/mockup/less/docs.less
index 88b6f50..3725c90 100644
--- a/mockup/less/docs.less
+++ b/mockup/less/docs.less
@@ -25,4 +25,302 @@
 @import "../patterns/livesearch/pattern.livesearch.less";
 @import "../patterns/recurrence/pattern.recurrence.less";
 
-@import "@{bowerPath}/mockup-core/less/docs.less";
+@import "@{bowerPath}/bootstrap/less/variables.less";
+@import "@{bowerPath}/bootstrap/less/bootstrap.less";
+
+@mockupColor1: #0083BE;
+@mockupColor2: #026B99;
+@mockupColor3: #A1D2E7;
+
+body {
+  position: relative;
+  padding-top: 50px;
+}
+
+.mockup-header {
+  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.15);
+  background-color: @mockupColor1;
+  border-color: @mockupColor2;
+  box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1);
+
+  .navbar-header {
+    .navbar-toggle {
+      border: 0;
+
+      &:hover, &:focus {
+        background-color: #FFF;
+
+        .icon-bar {
+          background-color: @mockupColor1;
+        }
+      }
+    }
+  }
+
+  .navbar-brand {
+    color: #FFF;
+
+    &:focus {
+      outline: none;
+    }
+  }
+  .navbar-left {
+    margin-bottom: 0;
+  }
+  .navbar-right {
+    margin-top: 0;
+  }
+  .navbar-collapse {
+    border-color: @mockupColor2;
+  }
+  .navbar-nav > li > a {
+    color: @mockupColor3;
+    text-align: left;
+  }
+  .navbar-nav > li.active > a,
+  .navbar-nav > li.active > a:hover,
+  .navbar-nav > li.active > a:focus {
+    background-color: @mockupColor2;
+    outline: none;
+  }
+}
+
+.mockup-content {
+
+  .page-header {
+    margin: 0;
+    color: @mockupColor3;
+    background-color: @mockupColor1;
+    text-align: center;
+    padding: 30px 0 40px 0;
+
+    h1 {
+      color: #FFF;
+    }
+    p {
+      .lead();
+      margin: 0;
+      font-size: @font-size-base * 1.2;
+    }
+  }
+
+  .mockup-autotoc {
+    margin-top: 30px;
+    margin-bottom: 30px;
+    padding-top: 10px;
+    padding-bottom: 10px;
+    text-shadow: 0 1px 0 #FFF;
+    background-color: #F5F5F5;
+    border: 1px solid #CCCCCC;
+    border-radius: 0.3em;
+    ul ul {
+      display: none;
+    }
+    ul li.active > a {
+      font-weight: bold;
+    }
+    a {
+      color: #333333;
+      font-size: @font-size-base;
+      padding-top: 0.3em;
+      padding-bottom: 0.3em;
+    }
+  }
+
+  .mockup-patterns {
+    margin: 1em 0 0 0;
+
+    .mockup-pattern-tile {
+      color: #333;
+      text-align: center;
+      text-decoration: none;
+      margin: 0 0 1em 0;
+      padding: 0.5em;
+      border: 1px solid #CCC;
+      display: block;
+      height: 135px;
+
+      &:focus {
+        outline: none;
+      }
+      &.active {
+        background-color: #F5F5F5;
+        border-bottom: none;
+        margin-bottom: 0;
+        z-index: 1000;
+      }
+    }
+
+    .mockup-pattern {
+      border: 1px solid #CCC;
+      background-color: #F5F5F5;
+      float: left;
+      width: 100%;
+      margin: -15px 0 1em 0;
+      padding: 1em;
+    }
+
+    .mockup-pattern-documentation {
+      padding: 1em;
+      background-color: #FFF;
+    }
+  }
+}
+
+.mockup-footer {
+  border-radius: 0;
+  margin: 0;
+  padding: 0 0 0.5em 0;
+  border-top: 0;
+  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.15);
+  background-color: @mockupColor1;
+  border-color: @mockupColor2;
+  box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1);
+  color: @mockupColor3;
+
+  a {
+    color: #FFF;
+    border-style: dotted;
+    border-width: 0 0 1px 0;
+    border-color: #FFF;
+
+    &:hover {
+      text-decoration: none;
+    }
+  }
+  .github-btn {
+    border: 0;
+    margin: 0;
+  }
+  .mockup-credits {
+    margin: 1em 0;
+
+    p {
+      margin: 0;
+    }
+  }
+  .mockup-links {
+    list-style: none;
+    margin: 1em 0;
+    padding: 0;
+    li {
+      display: inline;
+      a {
+        margin: 0 1em;
+      }
+    }
+  }
+}
+
+.page-index {
+
+  color: @mockupColor3;
+  background-color: @mockupColor1;
+  text-align: center;
+
+  .page-header {
+    border: 0;
+    padding: 30px;
+
+    h1 {
+      font-size: @font-size-base * 3.6;
+      line-height: 1;
+    }
+  }
+
+  .page-content {
+    padding: 30px;
+    a {
+      color:  #FFF;
+      display: inline-block;
+      border: 1px solid @mockupColor3;
+      padding: 0.5em 1em;
+      margin: 30px;
+      font-size: 18px;
+      border-radius: 0.2em;
+      text-decoration: none;
+
+      &:hover, &focus {
+        color: @mockupColor1;
+        border-color: #FFF;
+        background-color: #FFF;
+      }
+    }
+  }
+}
+  
+@media (min-width: @screen-sm-min) {
+
+  .mockup-header {
+    .navbar-header {
+      margin-right: 15px;
+    }
+  }
+
+  .mockup-content .page-header {
+    text-align: left;
+
+    h1 {
+      font-size: @font-size-base * 4.4;
+    }
+    p {
+      font-size: @font-size-base * 1.6;
+    }
+  }
+
+  .mockup-footer {
+    .mockup-github {
+      text-align: center;
+    }
+    .mockup-links {
+      text-align: right;
+      margin-top: 2.5em;
+
+      li a {
+        margin-right: 0;
+      }
+    }
+  }
+
+  .page-index {
+    text-align: left;
+
+    .page-header {
+      padding: 140px 0 0 0;
+
+      h1 {
+        font-size: @font-size-base * 7.1;
+      }
+      p {
+        font-size: @font-size-base * 2.5;
+      }
+    }
+
+    .page-content {
+      padding: 30px 0px 140px 0;
+
+      a {
+        font-size: @font-size-base * 1.8;
+        margin: 0;
+      }
+    }
+  }
+}
+
+@media (min-width: @screen-md-min) {
+
+  .mockup-content .mockup-autotoc {
+    ul ul {
+      display: block;
+      li > a {
+        padding-left: 2em;
+      }
+    }
+  }
+}
+
+@media (min-width: @screen-lg-min) {
+
+  .mockup-content .mockup-autotoc {
+  }
+}
diff --git a/mockup/patterns/autotoc/pattern.js b/mockup/patterns/autotoc/pattern.js
index 6b240cd..9997f8d 100644
--- a/mockup/patterns/autotoc/pattern.js
+++ b/mockup/patterns/autotoc/pattern.js
@@ -68,16 +68,16 @@
  *
  */
 
-
 define([
   'jquery',
-  'mockup-patterns-base'
+  'pat-base'
 ], function($, Base) {
   'use strict';
 
   var AutoTOC = Base.extend({
     name: 'autotoc',
     trigger: '.pat-autotoc',
+    parser: 'mockup',
     defaults: {
       section: 'section',
       levels: 'h1,h2,h3',
diff --git a/mockup/patterns/backdrop/pattern.js b/mockup/patterns/backdrop/pattern.js
index ede1246..de75788 100644
--- a/mockup/patterns/backdrop/pattern.js
+++ b/mockup/patterns/backdrop/pattern.js
@@ -18,13 +18,14 @@
 
 define([
   'jquery',
-  'mockup-patterns-base'
+  'pat-base'
 ], function($, Base) {
   'use strict';
 
   var Backdrop = Base.extend({
     name: 'backdrop',
     trigger: '.pat-backdrop',
+    parser: 'mockup',
     defaults: {
       zIndex: null,
       opacity: 0.8,
diff --git a/mockup/patterns/base/pattern.js b/mockup/patterns/base/pattern.js
new file mode 100644
index 0000000..7e02b1c
--- /dev/null
+++ b/mockup/patterns/base/pattern.js
@@ -0,0 +1,31 @@
+/* Mockup shim of the Patternslib Base Pattern
+ */
+
+define([
+  'jquery',
+  'pat-base',
+], function($, Base) {
+  'use strict';
+
+  var MockupBase = function MockupBaseWrapper() {
+    return Base.apply(this, arguments);
+  };
+  for (var key in Base) {
+    if (Base.hasOwnProperty(key)) {
+      MockupBase[key] = Base[key];
+    }
+  }
+  MockupBase.prototype = Base.prototype;
+  MockupBase.prototype.constructor = MockupBase;
+
+  MockupBase.extend = function() {
+    console.log(
+      "Usage of the mockup-patterns-base pattern is deprecated and it will eventually be removed."+
+      "Instead, use pat-base and explicitly set parser to 'mockup' when calling extend.");
+    var child = Base.extend.apply(this, arguments);
+    child.prototype.parser = 'mockup';
+    return child;
+  };
+
+  return MockupBase;
+});
diff --git a/mockup/patterns/contentloader/pattern.js b/mockup/patterns/contentloader/pattern.js
index 10670fd..a2fbecf 100644
--- a/mockup/patterns/contentloader/pattern.js
+++ b/mockup/patterns/contentloader/pattern.js
@@ -27,7 +27,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base',
+  'pat-base',
   'pat-logger',
   'pat-registry',
   'mockup-utils',
@@ -39,6 +39,7 @@ define([
   var ContentLoader = Base.extend({
     name: 'contentloader',
     trigger: '.pat-contentloader',
+    parser: 'mockup',
     defaults: {
       url: null,
       content: null,
@@ -89,7 +90,7 @@ define([
               data = data[0];
             }
             try{
-              $el = $(_.template(that.options.template, data));
+              $el = $(_.template(that.options.template)(data));
             }catch(e){
               // log this
               log.warn('error rendering template. pat-contentloader will not work');
diff --git a/mockup/patterns/cookietrigger/pattern.js b/mockup/patterns/cookietrigger/pattern.js
index 20669f8..ef78aa7 100644
--- a/mockup/patterns/cookietrigger/pattern.js
+++ b/mockup/patterns/cookietrigger/pattern.js
@@ -14,13 +14,14 @@
 
 define([
   'jquery',
-  'mockup-patterns-base'
+  'pat-base'
 ], function ($, Base) {
   'use strict';
 
   var CookieTrigger = Base.extend({
     name: 'cookietrigger',
     trigger: '.pat-cookietrigger',
+    parser: 'mockup',
 
     isCookiesEnabled: function() {
       /* Test whether cookies are enabled by attempting to set a cookie
diff --git a/mockup/patterns/eventedit/pattern.js b/mockup/patterns/eventedit/pattern.js
index 01dedef..4b20b11 100644
--- a/mockup/patterns/eventedit/pattern.js
+++ b/mockup/patterns/eventedit/pattern.js
@@ -71,7 +71,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base',
+  'pat-base',
   'mockup-patterns-pickadate',
 ], function ($, Base, pickadate) {
   'use strict';
@@ -79,6 +79,7 @@ define([
   var EventEdit = Base.extend({
     name: 'eventedit',
     trigger: '.pat-eventedit',
+    parser: 'mockup',
     defaults: {
       errorClass: 'error'
     },
diff --git a/mockup/patterns/filemanager/pattern.js b/mockup/patterns/filemanager/pattern.js
index 51a3a53..77a1acc 100644
--- a/mockup/patterns/filemanager/pattern.js
+++ b/mockup/patterns/filemanager/pattern.js
@@ -33,7 +33,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base',
+  'pat-base',
   'underscore',
   'backbone',
   'mockup-ui-url/views/base',
@@ -60,6 +60,7 @@ define([
   var FileManager = Base.extend({
     name: 'filemanager',
     trigger: '.pat-filemanager',
+    parser: 'mockup',
     template: _.template(AppTemplate),
     tabItemTemplate: _.template(
       '<li class="active" data-path="<%= path %>">' +
diff --git a/mockup/patterns/formautofocus/pattern.js b/mockup/patterns/formautofocus/pattern.js
index 310a238..4475ef3 100644
--- a/mockup/patterns/formautofocus/pattern.js
+++ b/mockup/patterns/formautofocus/pattern.js
@@ -15,13 +15,14 @@
 
 define([
   'jquery',
-  'mockup-patterns-base'
+  'pat-base'
 ], function($, Base, undefined) {
   'use strict';
 
   var FormAutoFocus = Base.extend({
     name: 'formautofocus',
     trigger: '.pat-formautofocus',
+    parser: 'mockup',
     defaults: {
       condition: 'div.error',
       target: 'div.error :input:not(.formTabs):visible:first',
diff --git a/mockup/patterns/formunloadalert/pattern.js b/mockup/patterns/formunloadalert/pattern.js
index 11e7427..6e691bc 100644
--- a/mockup/patterns/formunloadalert/pattern.js
+++ b/mockup/patterns/formunloadalert/pattern.js
@@ -29,7 +29,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base',
+  'pat-base',
   'translate'
 ], function ($, Base, _t) {
   'use strict';
@@ -37,6 +37,7 @@ define([
   var FormUnloadAlert = Base.extend({
     name: 'formunloadalert',
     trigger: '.pat-formunloadalert',
+    parser: 'mockup',
     _changed : false,       // Stores a listing of raised changes by their key
     _suppressed : false,     // whether or not warning should be suppressed
     defaults: {
diff --git a/mockup/patterns/inlinevalidation/pattern.js b/mockup/patterns/inlinevalidation/pattern.js
index 182ba32..11b14db 100644
--- a/mockup/patterns/inlinevalidation/pattern.js
+++ b/mockup/patterns/inlinevalidation/pattern.js
@@ -20,13 +20,14 @@
 
 define([
   'jquery',
-  'mockup-patterns-base'
+  'pat-base'
 ], function ($, Base) {
   'use strict';
 
   var InlineValidation = Base.extend({
     name: 'inlinevalidation',
     trigger: '.pat-inlinevalidation',
+    parser: 'mockup',
 
     render_error: function ($field, errmsg) {
        var $errbox = $('div.fieldErrorBox', $field);
diff --git a/mockup/patterns/livesearch/pattern.js b/mockup/patterns/livesearch/pattern.js
index 6cfbfdd..be4ccd4 100644
--- a/mockup/patterns/livesearch/pattern.js
+++ b/mockup/patterns/livesearch/pattern.js
@@ -24,7 +24,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base',
+  'pat-base',
   'underscore',
   'translate'
 ], function ($, Base, _, _t){
@@ -33,6 +33,7 @@ define([
   var Livesearch = Base.extend({
     name: 'livesearch',
     trigger: '.pat-livesearch',
+    parser: 'mockup',
     timeout: null,
     active: false,
     results: null,
diff --git a/mockup/patterns/markspeciallinks/pattern.js b/mockup/patterns/markspeciallinks/pattern.js
index 25475e4..6a0217f 100644
--- a/mockup/patterns/markspeciallinks/pattern.js
+++ b/mockup/patterns/markspeciallinks/pattern.js
@@ -79,7 +79,7 @@
  */
 
 define([
-  'mockup-patterns-base',
+  'pat-base',
   'jquery'
 ], function (Base, $) {
   'use strict';
@@ -87,6 +87,7 @@ define([
   var MarkSpecialLinks = Base.extend({
     name: 'markspeciallinks',
     trigger: '.pat-markspeciallinks',
+    parser: 'mockup',
     defaults: {
       external_links_open_new_window: false,
       mark_special_links: true
diff --git a/mockup/patterns/modal/pattern.js b/mockup/patterns/modal/pattern.js
index 5b4e6fb..3f7c4a0 100644
--- a/mockup/patterns/modal/pattern.js
+++ b/mockup/patterns/modal/pattern.js
@@ -69,7 +69,7 @@
 define([
   'jquery',
   'underscore',
-  'mockup-patterns-base',
+  'pat-base',
   'mockup-patterns-backdrop',
   'pat-registry',
   'mockup-router',
@@ -82,6 +82,7 @@ define([
   var Modal = Base.extend({
     name: 'plone-modal',
     trigger: '.pat-plone-modal',
+    parser: 'mockup',
     createModal: null,
     $model: null,
     defaults: {
@@ -412,7 +413,7 @@ define([
         }
 
         // Render html
-        self.$modal = $(_.template(self.options.templateOptions.template, tplObject));
+        self.$modal = $(_.template(self.options.templateOptions.template)(tplObject));
         self.$modalDialog = $('> .' + self.options.templateOptions.classDialog, self.$modal);
         self.$modalContent = $('> .' + self.options.templateOptions.classModal, self.$modalDialog);
 
diff --git a/mockup/patterns/moment/pattern.js b/mockup/patterns/moment/pattern.js
index 9ad4390..8bf70c4 100644
--- a/mockup/patterns/moment/pattern.js
+++ b/mockup/patterns/moment/pattern.js
@@ -83,7 +83,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base',
+  'pat-base',
   'moment',
   'mockup-i18n'
 ], function($, Base, moment, i18n) {
@@ -92,6 +92,7 @@ define([
   var Moment = Base.extend({
     name: 'moment',
     trigger: '.pat-moment',
+    parser: 'mockup',
     defaults: {
       // selector of elements to format dates for
       selector: null,
diff --git a/mockup/patterns/passwordstrength/pattern.js b/mockup/patterns/passwordstrength/pattern.js
index 2682bd1..c48f102 100644
--- a/mockup/patterns/passwordstrength/pattern.js
+++ b/mockup/patterns/passwordstrength/pattern.js
@@ -26,7 +26,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base'
+  'pat-base'
 ], function($, Base) {
   'use strict';
   function loadScript(src) {
@@ -55,6 +55,7 @@ define([
   var PasswordStrength = Base.extend({
     name: 'passwordstrength',
     trigger: '.pat-passwordstrength',
+    parser: 'mockup',
     defaults: {
         zxcvbn: '//cdnjs.cloudflare.com/ajax/libs/zxcvbn/1.0/zxcvbn.js'
     },
diff --git a/mockup/patterns/pickadate/pattern.js b/mockup/patterns/pickadate/pattern.js
index e9fbd6a..5b05114 100644
--- a/mockup/patterns/pickadate/pattern.js
+++ b/mockup/patterns/pickadate/pattern.js
@@ -84,7 +84,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base',
+  'pat-base',
   'picker',
   'picker.date',
   'picker.time',
@@ -96,6 +96,7 @@ define([
   var PickADate = Base.extend({
     name: 'pickadate',
     trigger: '.pat-pickadate',
+    parser: 'mockup',
     defaults: {
       separator: ' ',
       date: {
@@ -111,8 +112,7 @@ define([
         labelMonthSelect: _t('Select a month'),
         labelYearSelect: _t('Select a year')
       },
-      time: {
-      },
+      time: {},
       timezone: null,
       classWrapperName: 'pattern-pickadate-wrapper',
       classSeparatorName: 'pattern-pickadate-separator',
diff --git a/mockup/patterns/preventdoublesubmit/pattern.js b/mockup/patterns/preventdoublesubmit/pattern.js
index 167ad7b..2598177 100644
--- a/mockup/patterns/preventdoublesubmit/pattern.js
+++ b/mockup/patterns/preventdoublesubmit/pattern.js
@@ -22,7 +22,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base',
+  'pat-base',
   'translate'
 ], function($, Base, _t) {
   'use strict';
@@ -30,6 +30,7 @@ define([
   var PreventDoubleSubmit = Base.extend({
     name: 'preventdoublesubmit',
     trigger: '.pat-preventdoublesubmit',
+    parser: 'mockup',
     defaults: {
       message : _t('You already clicked the submit button. ' +
                 'Do you really want to submit this form again?'),
diff --git a/mockup/patterns/querystring/pattern.js b/mockup/patterns/querystring/pattern.js
index 9c27c5e..1feffcb 100644
--- a/mockup/patterns/querystring/pattern.js
+++ b/mockup/patterns/querystring/pattern.js
@@ -41,7 +41,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base',
+  'pat-base',
   'mockup-patterns-select2',
   'mockup-patterns-pickadate',
   'select2',
@@ -433,6 +433,7 @@ define([
   var QueryString = Base.extend({
     name: 'querystring',
     trigger: '.pat-querystring',
+    parser: 'mockup',
     defaults: {
       indexes: [],
       classWrapperName: 'querystring-wrapper',
diff --git a/mockup/patterns/recurrence/pattern.js b/mockup/patterns/recurrence/pattern.js
index b77d1d7..6992dbb 100644
--- a/mockup/patterns/recurrence/pattern.js
+++ b/mockup/patterns/recurrence/pattern.js
@@ -19,7 +19,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base',
+  'pat-base',
   'jquery.recurrenceinput'
 ], function($, Base) {
   'use strict';
@@ -27,6 +27,7 @@ define([
   var Recurrence = Base.extend({
     name: 'recurrence',
     trigger: '.pat-recurrence',
+    parser: 'mockup',
     defaults: {
       // just passed onto the widget
       language: 'en',
diff --git a/mockup/patterns/relateditems/pattern.js b/mockup/patterns/relateditems/pattern.js
index 28061ac..021444d 100644
--- a/mockup/patterns/relateditems/pattern.js
+++ b/mockup/patterns/relateditems/pattern.js
@@ -71,7 +71,7 @@
 define([
   'jquery',
   'underscore',
-  'mockup-patterns-base',
+  'pat-base',
   'mockup-patterns-select2',
   'mockup-utils',
   'mockup-patterns-tree',
@@ -82,6 +82,7 @@ define([
   var RelatedItems = Base.extend({
     name: 'relateditems',
     trigger: '.pat-relateditems',
+    parser: 'mockup',
     browsing: false,
     currentPath: null,
     defaults: {
@@ -169,7 +170,7 @@ define([
       // let's give all the options possible to the template generation
       var options = $.extend(true, {}, self.options, item);
       options._item = item;
-      return _.template(template, options);
+      return _.template(template)(options);
     },
     activateBrowsing: function() {
       var self = this;
diff --git a/mockup/patterns/resourceregistry/js/builder.js b/mockup/patterns/resourceregistry/js/builder.js
index 65331db..022964d 100644
--- a/mockup/patterns/resourceregistry/js/builder.js
+++ b/mockup/patterns/resourceregistry/js/builder.js
@@ -28,7 +28,7 @@ define([
         '<ul class="list-group hidden"></ul>' +
         '<button class="plone-btn plone-btn-default cancel hidden cancel-build"><%- _t("Close") %></button>' +
         '<button class="plone-btn plone-btn-primary build"><%- _t("Build it") %></button>' +
-      '</div>', $.extend({ _t: _t }, bundleListItem.options)),
+      '</div>')($.extend({ _t: _t }, bundleListItem.options)),
       content: null,
       width: 500,
       buttons: '.plone-btn'
diff --git a/mockup/patterns/resourceregistry/pattern.js b/mockup/patterns/resourceregistry/pattern.js
index 4d2f293..53b1ce5 100644
--- a/mockup/patterns/resourceregistry/pattern.js
+++ b/mockup/patterns/resourceregistry/pattern.js
@@ -88,7 +88,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base',
+  'pat-base',
   'underscore',
   'mockup-ui-url/views/base',
   'mockup-utils',
@@ -101,7 +101,6 @@ define([
             OverridesView,RegistryView, PatternOptionsView, _t) {
   'use strict';
 
-
   var TabView = BaseView.extend({
     tagName: 'div',
     activeTab: 'registry',
@@ -222,6 +221,7 @@ define([
   var ResourceRegistry = Base.extend({
     name: 'resourceregistry',
     trigger: '.pat-resourceregistry',
+    parser: 'mockup',
     defaults: {
       bundles: {},
       resources: {},
diff --git a/mockup/patterns/select2/pattern.js b/mockup/patterns/select2/pattern.js
index 70fd5ef..ef143ff 100644
--- a/mockup/patterns/select2/pattern.js
+++ b/mockup/patterns/select2/pattern.js
@@ -63,7 +63,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base',
+  'pat-base',
   'select2',
   'jquery.event.drag',
   'jquery.event.drop'
@@ -73,6 +73,7 @@ define([
   var Select2 = Base.extend({
     name: 'select2',
     trigger: '.pat-select2',
+    parser: 'mockup',
     defaults: {
       separator: ','
     },
diff --git a/mockup/patterns/sortable/pattern.js b/mockup/patterns/sortable/pattern.js
index bacf5a2..cecf964 100644
--- a/mockup/patterns/sortable/pattern.js
+++ b/mockup/patterns/sortable/pattern.js
@@ -46,7 +46,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base',
+  'pat-base',
   'jquery.event.drag',
   'jquery.event.drop'
 ], function($, Base, drag, drop) {
@@ -55,6 +55,7 @@ define([
   var SortablePattern = Base.extend({
     name: 'sortable',
     trigger: '.pat-sortable',
+    parser: 'mockup',
     defaults: {
       selector: 'li',
       dragClass: 'item-dragging',
diff --git a/mockup/patterns/structure/js/views/generic-popover.js b/mockup/patterns/structure/js/views/generic-popover.js
index a399348..2218d57 100644
--- a/mockup/patterns/structure/js/views/generic-popover.js
+++ b/mockup/patterns/structure/js/views/generic-popover.js
@@ -103,4 +103,4 @@ define([
   });
 
   return PropertiesView;
-});
\ No newline at end of file
+});
diff --git a/mockup/patterns/structure/pattern.js b/mockup/patterns/structure/pattern.js
index 5b80ba5..41c2df0 100644
--- a/mockup/patterns/structure/pattern.js
+++ b/mockup/patterns/structure/pattern.js
@@ -25,7 +25,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base',
+  'pat-base',
   'mockup-utils',
   'mockup-patterns-structure-url/js/views/app',
   'text!mockup-patterns-structure-url/templates/paging.xml',
@@ -39,6 +39,7 @@ define([
   var Structure = Base.extend({
     name: 'structure',
     trigger: '.pat-structure',
+    parser: 'mockup',
     defaults: {
       // for implementing history changes
       // Example: {base: 'http://mysite.com', appended: '/folder_contents'}
diff --git a/mockup/patterns/textareamimetypeselector/pattern.js b/mockup/patterns/textareamimetypeselector/pattern.js
index 391e61c..7d42d24 100644
--- a/mockup/patterns/textareamimetypeselector/pattern.js
+++ b/mockup/patterns/textareamimetypeselector/pattern.js
@@ -89,7 +89,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base',
+  'pat-base',
   'pat-registry',
   'mockup-patterns-tinymce'
 ], function ($, Base, registry, tinymce) {
@@ -98,6 +98,7 @@ define([
   var TextareaMimetypeSelector = Base.extend({
     name: 'textareamimetypeselector',
     trigger: '.pat-textareamimetypeselector',
+    parser: 'mockup',
     textarea: undefined,
     currentWidget: undefined,
     defaults: {
diff --git a/mockup/patterns/texteditor/pattern.js b/mockup/patterns/texteditor/pattern.js
index 010f5f7..283d1df 100644
--- a/mockup/patterns/texteditor/pattern.js
+++ b/mockup/patterns/texteditor/pattern.js
@@ -56,7 +56,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base',
+  'pat-base',
   'mockup-utils',
   'ace',
 ], function($, Base, utils) {
@@ -65,6 +65,7 @@ define([
   var AcePattern = Base.extend({
     name: 'texteditor',
     trigger: '.pat-texteditor',
+    parser: 'mockup',
     defaults: {
       theme: null,
       mode: 'text',
diff --git a/mockup/patterns/thememapper/pattern.js b/mockup/patterns/thememapper/pattern.js
index f2ed7bb..59e6ada 100644
--- a/mockup/patterns/thememapper/pattern.js
+++ b/mockup/patterns/thememapper/pattern.js
@@ -29,7 +29,7 @@
 
 define([
   'jquery',
-  'mockup-patterns-base',
+  'pat-base',
   'underscore',
   'translate',
   'text!mockup-patterns-thememapper-url/templates/inspector.xml',
@@ -263,6 +263,7 @@ define([
   var ThemeMapper = Base.extend({
     name: 'thememapper',
     trigger: '.pat-thememapper',
+    parser: 'mockup',
     defaults: {
       filemanagerConfig: {},
       themeUrl: null,
diff --git a/mockup/patterns/tinymce/js/links.js b/mockup/patterns/tinymce/js/links.js
index 138ac5f..82e8526 100644
--- a/mockup/patterns/tinymce/js/links.js
+++ b/mockup/patterns/tinymce/js/links.js
@@ -2,7 +2,7 @@ define([
   'jquery',
   'underscore',
   'pat-registry',
-  'mockup-patterns-base',
+  'pat-base',
   'mockup-patterns-relateditems',
   'mockup-patterns-modal',
   'tinymce',
diff --git a/mockup/patterns/tinymce/pattern.js b/mockup/patterns/tinymce/pattern.js
index 010565b..29d37b7 100644
--- a/mockup/patterns/tinymce/pattern.js
+++ b/mockup/patterns/tinymce/pattern.js
@@ -61,7 +61,7 @@
 define([
   'jquery',
   'underscore',
-  'mockup-patterns-base',
+  'pat-base',
   'mockup-patterns-relateditems',
   'mockup-patterns-modal',
   'tinymce',
@@ -123,6 +123,7 @@ define([
   var TinyMCE = Base.extend({
     name: 'tinymce',
     trigger: '.pat-tinymce',
+    parser: 'mockup',
     defaults: {
       upload: {
         uploadMultiple: false,
diff --git a/mockup/patterns/toggle/pattern.js b/mockup/patterns/toggle/pattern.js
index 212ce4f..de8bb87 100644
--- a/mockup/patterns/toggle/pattern.js
+++ b/mockup/patterns/toggle/pattern.js
@@ -121,13 +121,14 @@
 
 define([
   'jquery',
-  'mockup-patterns-base'
+  'pat-base'
 ], function($, Base, undefined) {
   'use strict';
 
   var Toggle = Base.extend({
     name: 'toggle',
     trigger: '.pat-toggle',
+    parser: 'mockup',
     defaults: {
       attribute: 'class',
       event: 'click',
diff --git a/mockup/patterns/tooltip/pattern.js b/mockup/patterns/tooltip/pattern.js
index 02b6438..6a5a69c 100644
--- a/mockup/patterns/tooltip/pattern.js
+++ b/mockup/patterns/tooltip/pattern.js
@@ -37,13 +37,14 @@
 
 define([
   'jquery',
-  'mockup-patterns-base'
+  'pat-base'
 ], function($, Base, undefined) {
   'use strict';
 
   var Tooltip = Base.extend({
     name: 'tooltip',
     trigger: '.pat-tooltip',
+    parser: 'mockup',
     defaults: {
       html: false
     },
diff --git a/mockup/patterns/tree/pattern.js b/mockup/patterns/tree/pattern.js
index cb310dd..d2d3509 100644
--- a/mockup/patterns/tree/pattern.js
+++ b/mockup/patterns/tree/pattern.js
@@ -53,7 +53,7 @@
 define([
   'jquery',
   'underscore',
-  'mockup-patterns-base',
+  'pat-base',
   'mockup-utils',
   'jqtree'
 ], function($, _, Base, utils) {
@@ -62,6 +62,7 @@ define([
   var Tree = Base.extend({
     name: 'tree',
     trigger: '.pat-tree',
+    parser: 'mockup',
     defaults: {
       dragAndDrop: false,
       autoOpen: false,
diff --git a/mockup/patterns/upload/pattern.js b/mockup/patterns/upload/pattern.js
index 1f28e51..0a8e4a4 100644
--- a/mockup/patterns/upload/pattern.js
+++ b/mockup/patterns/upload/pattern.js
@@ -42,7 +42,7 @@
 define([
   'jquery',
   'underscore',
-  'mockup-patterns-base',
+  'pat-base',
   'mockup-patterns-relateditems',
   'dropzone',
   'text!mockup-patterns-upload-url/templates/upload.xml',
@@ -58,6 +58,7 @@ define([
   var UploadPattern = Base.extend({
     name: 'upload',
     trigger: '.pat-upload',
+    parser: 'mockup',
     defaults: {
       showTitle: true,
       url: null, // XXX MUST provide url to submit to OR be in a form
@@ -110,7 +111,7 @@ define([
       self.currentPath = self.options.currentPath;
       self.currentFile = 0;
 
-      template = _.template(template, {_t: _t});
+      template = _.template(template)({_t: _t});
       self.$el.addClass(self.options.className);
       self.$el.append(template);
 
diff --git a/mockup/tests/fakeserver.js b/mockup/tests/fakeserver.js
index be4caa2..196fdf4 100644
--- a/mockup/tests/fakeserver.js
+++ b/mockup/tests/fakeserver.js
@@ -673,7 +673,7 @@ define([
       data = {
         paths: {
           'autotoc': 'patterns/autotoc/pattern',
-          'mockup-patterns-base': 'bower_components/mockup-core/js/pattern',
+          'pat-base': 'bower_components/patternslib/src/core/base',
           'jquery': 'bower_components/jquery/dist/jquery',
           'pat-registry': 'bower_components/patternslib/src/core/registry'
         },
diff --git a/mockup/tests/pattern-tinymce-test.js b/mockup/tests/pattern-tinymce-test.js
index e2da9da..e2554b3 100644
--- a/mockup/tests/pattern-tinymce-test.js
+++ b/mockup/tests/pattern-tinymce-test.js
@@ -82,6 +82,7 @@ define([
       ).appendTo('body');
       registry.scan($el);
       expect(tinymce.get(0).getContent()).to.be.equal('<p>foobar</p>');
+      tinymce.get(0).remove();
     });
 
     it('loads buttons for plugins', function() {
@@ -93,6 +94,7 @@ define([
       ).appendTo('body');
       registry.scan($el);
       expect(tinymce.get(0).buttons).to.have.keys('plonelink', 'ploneimage');
+      tinymce.get(0).remove();
     });
 
     it('on form submit, save data to form', function() {
@@ -412,8 +414,8 @@ define([
       var $form = $container.find('form');
       $container.trigger('submit');
       expect($el.val()).to.be.equal(changed_txt);
+      tinymce.get(0).remove();
     });
 
   });
-
 });
diff --git a/mockup/tests/pattern-toggle-test.js b/mockup/tests/pattern-toggle-test.js
index 054ccdc..ef0b50b 100644
--- a/mockup/tests/pattern-toggle-test.js
+++ b/mockup/tests/pattern-toggle-test.js
@@ -2,8 +2,10 @@ define([
   'expect',
   'jquery',
   'pat-registry',
-  'mockup-patterns-toggle'
-], function(expect, $, registry, Toggle) {
+  'pat-logger',
+  'mockup-patterns-toggle',
+  'sinon',
+], function(expect, $, registry, logger, Toggle, sinon) {
   'use strict';
 
   window.mocha.setup('bdd');
@@ -273,11 +275,12 @@ define([
         '   <a href="patterns.html">Click here to go somewhere else</a>' +
         ' </div>' +
         '</div>');
-      try {
-        registry.scan($el);
-      } catch (err) {
-        expect(err.message).to.equal('No target found for "#notarget".');
-      }
+      var log = logger.getLogger("pat.toggle");
+      sinon.spy(log, 'error');
+      registry.scan($el);
+      expect(log.error.calledOnce).to.be(true);
+      expect(log.error.calledWith("Failed while initializing 'toggle' pattern.")).to.be(true);
+      log.error.restore();
     });
   });
 


