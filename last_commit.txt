Repository: plone.app.multilingual


Branch: refs/heads/master
Date: 2015-09-14T12:15:02+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.app.multilingual/commit/dd0773d41579c00f225fdc38448d343441774696

Fix @@relocate-content

Files changed:
M CHANGES.rst
M src/plone/app/multilingual/browser/migrator.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 6959895..ffe3841 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,7 +4,8 @@ Changelog
 3.0.8 (unreleased)
 ------------------
 
-- Nothing changed yet.
+- Fix @@relocate-content.
+  [pbauer]
 
 
 3.0.7 (2015-09-12)
diff --git a/src/plone/app/multilingual/browser/migrator.py b/src/plone/app/multilingual/browser/migrator.py
index 2463f05..16fb9eb 100644
--- a/src/plone/app/multilingual/browser/migrator.py
+++ b/src/plone/app/multilingual/browser/migrator.py
@@ -155,9 +155,8 @@ def searchNearestTranslatedParent(self, content):
 
     def __call__(self):
         """ Note: Steps names don't correspond with the control panel ones """
-        self.blacklist = [
-            x.strip() for x in
-            self.request.form.get('blacklist[]') if x.strip() != '']
+        blacklist = self.request.form.get('blacklist', '').split()
+        self.blacklist = [x.strip() for x in blacklist if x.strip() != '']
         self.results = self.step1andstep2()
         self.results += self.step3()
         return self.template()


