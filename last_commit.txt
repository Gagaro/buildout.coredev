Repository: plone.browserlayer


Branch: refs/heads/master
Date: 2015-10-08T11:03:44+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.browserlayer/commit/d6a49d4adbb26feaa5174db3a6dc9bf5b76583eb

Minor cleanup in order to follow plone code style conventions.

Files changed:
M CHANGES.rst
M plone/__init__.py
M plone/browserlayer/exportimport.py
M plone/browserlayer/interfaces.py
M plone/browserlayer/layer.py
M plone/browserlayer/testing.py
M plone/browserlayer/tests/__init__.py
M plone/browserlayer/tests/interfaces.py
M plone/browserlayer/tests/test_doctest.py
M plone/browserlayer/utils.py
M setup.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 8d276a5..17db064 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,7 +4,8 @@ Changelog
 2.1.6 (unreleased)
 ------------------
 
-- Nothing changed yet.
+- Minor cleanup in order to follow plone code style conventions.
+  [jensens]
 
 
 2.1.5 (2015-04-29)
diff --git a/plone/__init__.py b/plone/__init__.py
index f48ad10..68c04af 100644
--- a/plone/__init__.py
+++ b/plone/__init__.py
@@ -1,6 +1,2 @@
-# See http://peak.telecommunity.com/DevCenter/setuptools#namespace-packages
-try:
-    __import__('pkg_resources').declare_namespace(__name__)
-except ImportError:
-    from pkgutil import extend_path
-    __path__ = extend_path(__path__, __name__)
+# -*- coding: utf-8 -*-
+__import__('pkg_resources').declare_namespace(__name__)
diff --git a/plone/browserlayer/exportimport.py b/plone/browserlayer/exportimport.py
index b96adb2..5df80d2 100644
--- a/plone/browserlayer/exportimport.py
+++ b/plone/browserlayer/exportimport.py
@@ -1,32 +1,28 @@
-from zope.interface import implements
-
-from zope.component import adapts
-from zope.component import getSiteManager
-from zope.component import queryMultiAdapter
-
-from zope.component.interfaces import IComponentRegistry
-
+# -*- coding: utf-8 -*-
 from plone.browserlayer.interfaces import ILocalBrowserLayerType
 from plone.browserlayer.utils import register_layer
 from plone.browserlayer.utils import unregister_layer
-
 from Products.GenericSetup.interfaces import IBody
 from Products.GenericSetup.interfaces import ISetupEnviron
-
-from Products.GenericSetup.utils import XMLAdapterBase
 from Products.GenericSetup.utils import _getDottedName
 from Products.GenericSetup.utils import _resolveDottedName
+from Products.GenericSetup.utils import XMLAdapterBase
+from zope.component import adapter
+from zope.component import getSiteManager
+from zope.component import queryMultiAdapter
+from zope.component.interfaces import IComponentRegistry
+from zope.interface import implementer
 
 
 def dummyGetId():
     return ''
 
 
+@implementer(IBody)
+@adapter(IComponentRegistry, ISetupEnviron)
 class BrowserLayerXMLAdapter(XMLAdapterBase):
     """Im- and exporter for local browser layers
     """
-    implements(IBody)
-    adapts(IComponentRegistry, ISetupEnviron)
 
     name = 'browserlayer'
     _LOGGER_ID = 'browserlayer'
@@ -78,7 +74,7 @@ def _extractLayers(self):
         fragment = self._doc.createDocumentFragment()
 
         registrations = [r for r in self.context.registeredUtilities()
-                            if r.provided == ILocalBrowserLayerType]
+                         if r.provided == ILocalBrowserLayerType]
 
         registrations.sort()
 
diff --git a/plone/browserlayer/interfaces.py b/plone/browserlayer/interfaces.py
index 324af1d..ec62136 100644
--- a/plone/browserlayer/interfaces.py
+++ b/plone/browserlayer/interfaces.py
@@ -1,3 +1,4 @@
+# -*- coding: utf-8 -*-
 from zope.interface import Interface
 
 
diff --git a/plone/browserlayer/layer.py b/plone/browserlayer/layer.py
index 1e15677..29d8ff7 100644
--- a/plone/browserlayer/layer.py
+++ b/plone/browserlayer/layer.py
@@ -1,7 +1,9 @@
-from zope.interface import Interface
-from zope.interface import directlyProvidedBy, directlyProvides
-from zope.component import getAllUtilitiesRegisteredFor
+# -*- coding: utf-8 -*-
 from plone.browserlayer.interfaces import ILocalBrowserLayerType
+from zope.component import getAllUtilitiesRegisteredFor
+from zope.interface import directlyProvidedBy
+from zope.interface import directlyProvides
+from zope.interface import Interface
 
 
 def mark_layer(site, event):
diff --git a/plone/browserlayer/testing.py b/plone/browserlayer/testing.py
index 4297987..9b5aa1e 100644
--- a/plone/browserlayer/testing.py
+++ b/plone/browserlayer/testing.py
@@ -1,5 +1,4 @@
 # -*- coding: utf-8 -*-
-
 from plone.app.testing import PloneSandboxLayer
 from plone.app.testing.layers import FunctionalTesting
 
@@ -18,4 +17,5 @@ def setUpZope(self, app, configurationContext):
 
 PLONEBROWSERLAYER_FUNCTIONAL_TESTING = FunctionalTesting(
     bases=(PLONEBROWSERLAYER_FIXTURE,),
-    name="PloneBrowserlayer:Functional")
+    name="PloneBrowserlayer:Functional"
+)
diff --git a/plone/browserlayer/tests/__init__.py b/plone/browserlayer/tests/__init__.py
index e69de29..40a96af 100644
--- a/plone/browserlayer/tests/__init__.py
+++ b/plone/browserlayer/tests/__init__.py
@@ -0,0 +1 @@
+# -*- coding: utf-8 -*-
diff --git a/plone/browserlayer/tests/interfaces.py b/plone/browserlayer/tests/interfaces.py
index e24d34c..d1a326e 100644
--- a/plone/browserlayer/tests/interfaces.py
+++ b/plone/browserlayer/tests/interfaces.py
@@ -1,3 +1,4 @@
+# -*- coding: utf-8 -*-
 from zope.interface import Interface
 
 
diff --git a/plone/browserlayer/tests/test_doctest.py b/plone/browserlayer/tests/test_doctest.py
index 7d2f4aa..52a0540 100644
--- a/plone/browserlayer/tests/test_doctest.py
+++ b/plone/browserlayer/tests/test_doctest.py
@@ -1,14 +1,21 @@
-import unittest
-import doctest
-
+# -*- coding: utf-8 -*-
 from plone.browserlayer.testing import PLONEBROWSERLAYER_FUNCTIONAL_TESTING
-
 from plone.testing import layered
+import doctest
+import unittest
 
 
 def test_suite():
-    return unittest.TestSuite(
-        [layered(doctest.DocFileSuite('README.rst', package='plone.browserlayer',
-         optionflags=doctest.ELLIPSIS | doctest.REPORT_ONLY_FIRST_FAILURE),
-         layer=PLONEBROWSERLAYER_FUNCTIONAL_TESTING)]
-    )
+    return unittest.TestSuite([
+        layered(
+            doctest.DocFileSuite(
+                'README.rst',
+                package='plone.browserlayer',
+                optionflags=(
+                    doctest.ELLIPSIS |
+                    doctest.REPORT_ONLY_FIRST_FAILURE
+                ),
+            ),
+            layer=PLONEBROWSERLAYER_FUNCTIONAL_TESTING
+        )
+    ])
diff --git a/plone/browserlayer/utils.py b/plone/browserlayer/utils.py
index becebb9..1b4d112 100644
--- a/plone/browserlayer/utils.py
+++ b/plone/browserlayer/utils.py
@@ -1,10 +1,9 @@
-from zope.interface import alsoProvides
-
-from zope.component import queryUtility
-from zope.component import getSiteManager
-from zope.component import getAllUtilitiesRegisteredFor
-
+# -*- coding: utf-8 -*-
 from plone.browserlayer.interfaces import ILocalBrowserLayerType
+from zope.component import getAllUtilitiesRegisteredFor
+from zope.component import getSiteManager
+from zope.component import queryUtility
+from zope.interface import alsoProvides
 
 
 def register_layer(layer, name, site_manager=None):
diff --git a/setup.py b/setup.py
index f2cb415..8f26680 100644
--- a/setup.py
+++ b/setup.py
@@ -1,41 +1,47 @@
-from setuptools import setup, find_packages
+# -*- coding: utf-8 -*-
+from setuptools import find_packages
+from setuptools import setup
 
 version = '2.1.6.dev0'
 
-setup(name='plone.browserlayer',
-      version=version,
-      description="Browser layer management for Zope 2 applications",
-      long_description=open("README.rst").read() + "\n" + \
-                       open("CHANGES.rst").read(),
-      classifiers=[
-          "Environment :: Web Environment",
-          "Framework :: Plone",
-          "Framework :: Zope2",
-          "License :: OSI Approved :: GNU General Public License (GPL)",
-          "Operating System :: OS Independent",
-          "Programming Language :: Python",
-      ],
-      keywords='plone browser layer',
-      author='Plone Foundation',
-      author_email='plone-developers@lists.sourceforge.net',
-      url='http://pypi.python.org/pypi/plone.browserlayer',
-      license='GPL version 2',
-      packages=find_packages(exclude=['ez_setup']),
-      namespace_packages=['plone'],
-      include_package_data=True,
-      zip_safe=False,
-      extras_require=dict(
-          test=[
-             'plone.app.testing',
-          ]
-      ),
-      install_requires=[
-          'setuptools',
-          'zope.component',
-          'zope.interface',
-          'zope.traversing >= 3.9.0',
-          'Products.CMFCore',
-          'Products.GenericSetup>=1.4',
-          'Zope2',
-      ],
-      )
+setup(
+    name='plone.browserlayer',
+    version=version,
+    description="Browser layer management for Zope 2 applications",
+    long_description=(
+        open("README.rst").read() +
+        "\n" +
+        open("CHANGES.rst").read()
+    ),
+    classifiers=[
+        "Environment :: Web Environment",
+        "Framework :: Plone",
+        "Framework :: Zope2",
+        "License :: OSI Approved :: GNU General Public License (GPL)",
+        "Operating System :: OS Independent",
+        "Programming Language :: Python",
+    ],
+    keywords='plone browser layer',
+    author='Plone Foundation',
+    author_email='plone-developers@lists.sourceforge.net',
+    url='http://pypi.python.org/pypi/plone.browserlayer',
+    license='GPL version 2',
+    packages=find_packages(exclude=['ez_setup']),
+    namespace_packages=['plone'],
+    include_package_data=True,
+    zip_safe=False,
+    extras_require=dict(
+        test=[
+           'plone.app.testing',
+        ]
+    ),
+    install_requires=[
+        'setuptools',
+        'zope.component',
+        'zope.interface',
+        'zope.traversing >= 3.9.0',
+        'Products.CMFCore',
+        'Products.GenericSetup>=1.4',
+        'Zope2',
+    ],
+)


Repository: plone.browserlayer


Branch: refs/heads/master
Date: 2015-10-08T11:25:29+01:00
Author: Adam Forsythe-Cheasley (adamcheasley) <adam@netsight.co.uk>
Commit: https://github.com/plone/plone.browserlayer/commit/7df8bb189e23f0ced3949f4799ba43aca1e23860

Merge pull request #4 from plone/jensens-cleanup

Minor cleanup in order to follow plone code style conventions.

Files changed:
M CHANGES.rst
M plone/__init__.py
M plone/browserlayer/exportimport.py
M plone/browserlayer/interfaces.py
M plone/browserlayer/layer.py
M plone/browserlayer/testing.py
M plone/browserlayer/tests/__init__.py
M plone/browserlayer/tests/interfaces.py
M plone/browserlayer/tests/test_doctest.py
M plone/browserlayer/utils.py
M setup.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 8d276a5..17db064 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,7 +4,8 @@ Changelog
 2.1.6 (unreleased)
 ------------------
 
-- Nothing changed yet.
+- Minor cleanup in order to follow plone code style conventions.
+  [jensens]
 
 
 2.1.5 (2015-04-29)
diff --git a/plone/__init__.py b/plone/__init__.py
index f48ad10..68c04af 100644
--- a/plone/__init__.py
+++ b/plone/__init__.py
@@ -1,6 +1,2 @@
-# See http://peak.telecommunity.com/DevCenter/setuptools#namespace-packages
-try:
-    __import__('pkg_resources').declare_namespace(__name__)
-except ImportError:
-    from pkgutil import extend_path
-    __path__ = extend_path(__path__, __name__)
+# -*- coding: utf-8 -*-
+__import__('pkg_resources').declare_namespace(__name__)
diff --git a/plone/browserlayer/exportimport.py b/plone/browserlayer/exportimport.py
index b96adb2..5df80d2 100644
--- a/plone/browserlayer/exportimport.py
+++ b/plone/browserlayer/exportimport.py
@@ -1,32 +1,28 @@
-from zope.interface import implements
-
-from zope.component import adapts
-from zope.component import getSiteManager
-from zope.component import queryMultiAdapter
-
-from zope.component.interfaces import IComponentRegistry
-
+# -*- coding: utf-8 -*-
 from plone.browserlayer.interfaces import ILocalBrowserLayerType
 from plone.browserlayer.utils import register_layer
 from plone.browserlayer.utils import unregister_layer
-
 from Products.GenericSetup.interfaces import IBody
 from Products.GenericSetup.interfaces import ISetupEnviron
-
-from Products.GenericSetup.utils import XMLAdapterBase
 from Products.GenericSetup.utils import _getDottedName
 from Products.GenericSetup.utils import _resolveDottedName
+from Products.GenericSetup.utils import XMLAdapterBase
+from zope.component import adapter
+from zope.component import getSiteManager
+from zope.component import queryMultiAdapter
+from zope.component.interfaces import IComponentRegistry
+from zope.interface import implementer
 
 
 def dummyGetId():
     return ''
 
 
+@implementer(IBody)
+@adapter(IComponentRegistry, ISetupEnviron)
 class BrowserLayerXMLAdapter(XMLAdapterBase):
     """Im- and exporter for local browser layers
     """
-    implements(IBody)
-    adapts(IComponentRegistry, ISetupEnviron)
 
     name = 'browserlayer'
     _LOGGER_ID = 'browserlayer'
@@ -78,7 +74,7 @@ def _extractLayers(self):
         fragment = self._doc.createDocumentFragment()
 
         registrations = [r for r in self.context.registeredUtilities()
-                            if r.provided == ILocalBrowserLayerType]
+                         if r.provided == ILocalBrowserLayerType]
 
         registrations.sort()
 
diff --git a/plone/browserlayer/interfaces.py b/plone/browserlayer/interfaces.py
index 324af1d..ec62136 100644
--- a/plone/browserlayer/interfaces.py
+++ b/plone/browserlayer/interfaces.py
@@ -1,3 +1,4 @@
+# -*- coding: utf-8 -*-
 from zope.interface import Interface
 
 
diff --git a/plone/browserlayer/layer.py b/plone/browserlayer/layer.py
index 1e15677..29d8ff7 100644
--- a/plone/browserlayer/layer.py
+++ b/plone/browserlayer/layer.py
@@ -1,7 +1,9 @@
-from zope.interface import Interface
-from zope.interface import directlyProvidedBy, directlyProvides
-from zope.component import getAllUtilitiesRegisteredFor
+# -*- coding: utf-8 -*-
 from plone.browserlayer.interfaces import ILocalBrowserLayerType
+from zope.component import getAllUtilitiesRegisteredFor
+from zope.interface import directlyProvidedBy
+from zope.interface import directlyProvides
+from zope.interface import Interface
 
 
 def mark_layer(site, event):
diff --git a/plone/browserlayer/testing.py b/plone/browserlayer/testing.py
index 4297987..9b5aa1e 100644
--- a/plone/browserlayer/testing.py
+++ b/plone/browserlayer/testing.py
@@ -1,5 +1,4 @@
 # -*- coding: utf-8 -*-
-
 from plone.app.testing import PloneSandboxLayer
 from plone.app.testing.layers import FunctionalTesting
 
@@ -18,4 +17,5 @@ def setUpZope(self, app, configurationContext):
 
 PLONEBROWSERLAYER_FUNCTIONAL_TESTING = FunctionalTesting(
     bases=(PLONEBROWSERLAYER_FIXTURE,),
-    name="PloneBrowserlayer:Functional")
+    name="PloneBrowserlayer:Functional"
+)
diff --git a/plone/browserlayer/tests/__init__.py b/plone/browserlayer/tests/__init__.py
index e69de29..40a96af 100644
--- a/plone/browserlayer/tests/__init__.py
+++ b/plone/browserlayer/tests/__init__.py
@@ -0,0 +1 @@
+# -*- coding: utf-8 -*-
diff --git a/plone/browserlayer/tests/interfaces.py b/plone/browserlayer/tests/interfaces.py
index e24d34c..d1a326e 100644
--- a/plone/browserlayer/tests/interfaces.py
+++ b/plone/browserlayer/tests/interfaces.py
@@ -1,3 +1,4 @@
+# -*- coding: utf-8 -*-
 from zope.interface import Interface
 
 
diff --git a/plone/browserlayer/tests/test_doctest.py b/plone/browserlayer/tests/test_doctest.py
index 7d2f4aa..52a0540 100644
--- a/plone/browserlayer/tests/test_doctest.py
+++ b/plone/browserlayer/tests/test_doctest.py
@@ -1,14 +1,21 @@
-import unittest
-import doctest
-
+# -*- coding: utf-8 -*-
 from plone.browserlayer.testing import PLONEBROWSERLAYER_FUNCTIONAL_TESTING
-
 from plone.testing import layered
+import doctest
+import unittest
 
 
 def test_suite():
-    return unittest.TestSuite(
-        [layered(doctest.DocFileSuite('README.rst', package='plone.browserlayer',
-         optionflags=doctest.ELLIPSIS | doctest.REPORT_ONLY_FIRST_FAILURE),
-         layer=PLONEBROWSERLAYER_FUNCTIONAL_TESTING)]
-    )
+    return unittest.TestSuite([
+        layered(
+            doctest.DocFileSuite(
+                'README.rst',
+                package='plone.browserlayer',
+                optionflags=(
+                    doctest.ELLIPSIS |
+                    doctest.REPORT_ONLY_FIRST_FAILURE
+                ),
+            ),
+            layer=PLONEBROWSERLAYER_FUNCTIONAL_TESTING
+        )
+    ])
diff --git a/plone/browserlayer/utils.py b/plone/browserlayer/utils.py
index becebb9..1b4d112 100644
--- a/plone/browserlayer/utils.py
+++ b/plone/browserlayer/utils.py
@@ -1,10 +1,9 @@
-from zope.interface import alsoProvides
-
-from zope.component import queryUtility
-from zope.component import getSiteManager
-from zope.component import getAllUtilitiesRegisteredFor
-
+# -*- coding: utf-8 -*-
 from plone.browserlayer.interfaces import ILocalBrowserLayerType
+from zope.component import getAllUtilitiesRegisteredFor
+from zope.component import getSiteManager
+from zope.component import queryUtility
+from zope.interface import alsoProvides
 
 
 def register_layer(layer, name, site_manager=None):
diff --git a/setup.py b/setup.py
index f2cb415..8f26680 100644
--- a/setup.py
+++ b/setup.py
@@ -1,41 +1,47 @@
-from setuptools import setup, find_packages
+# -*- coding: utf-8 -*-
+from setuptools import find_packages
+from setuptools import setup
 
 version = '2.1.6.dev0'
 
-setup(name='plone.browserlayer',
-      version=version,
-      description="Browser layer management for Zope 2 applications",
-      long_description=open("README.rst").read() + "\n" + \
-                       open("CHANGES.rst").read(),
-      classifiers=[
-          "Environment :: Web Environment",
-          "Framework :: Plone",
-          "Framework :: Zope2",
-          "License :: OSI Approved :: GNU General Public License (GPL)",
-          "Operating System :: OS Independent",
-          "Programming Language :: Python",
-      ],
-      keywords='plone browser layer',
-      author='Plone Foundation',
-      author_email='plone-developers@lists.sourceforge.net',
-      url='http://pypi.python.org/pypi/plone.browserlayer',
-      license='GPL version 2',
-      packages=find_packages(exclude=['ez_setup']),
-      namespace_packages=['plone'],
-      include_package_data=True,
-      zip_safe=False,
-      extras_require=dict(
-          test=[
-             'plone.app.testing',
-          ]
-      ),
-      install_requires=[
-          'setuptools',
-          'zope.component',
-          'zope.interface',
-          'zope.traversing >= 3.9.0',
-          'Products.CMFCore',
-          'Products.GenericSetup>=1.4',
-          'Zope2',
-      ],
-      )
+setup(
+    name='plone.browserlayer',
+    version=version,
+    description="Browser layer management for Zope 2 applications",
+    long_description=(
+        open("README.rst").read() +
+        "\n" +
+        open("CHANGES.rst").read()
+    ),
+    classifiers=[
+        "Environment :: Web Environment",
+        "Framework :: Plone",
+        "Framework :: Zope2",
+        "License :: OSI Approved :: GNU General Public License (GPL)",
+        "Operating System :: OS Independent",
+        "Programming Language :: Python",
+    ],
+    keywords='plone browser layer',
+    author='Plone Foundation',
+    author_email='plone-developers@lists.sourceforge.net',
+    url='http://pypi.python.org/pypi/plone.browserlayer',
+    license='GPL version 2',
+    packages=find_packages(exclude=['ez_setup']),
+    namespace_packages=['plone'],
+    include_package_data=True,
+    zip_safe=False,
+    extras_require=dict(
+        test=[
+           'plone.app.testing',
+        ]
+    ),
+    install_requires=[
+        'setuptools',
+        'zope.component',
+        'zope.interface',
+        'zope.traversing >= 3.9.0',
+        'Products.CMFCore',
+        'Products.GenericSetup>=1.4',
+        'Zope2',
+    ],
+)


