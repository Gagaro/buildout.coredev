Repository: plone.app.relationfield


Branch: refs/heads/master
Date: 2015-07-02T11:15:04+02:00
Author: Eric BREHAULT (ebrehault) <ebrehault@gmail.com>
Commit: https://github.com/plone/plone.app.relationfield/commit/2ed8f83ad856685be3f844bb9277156789b683bb

fix tests as schemaeditor does not redirect anymore

Files changed:
M plone/app/relationfield/schemaeditor.txt

diff --git a/plone/app/relationfield/schemaeditor.txt b/plone/app/relationfield/schemaeditor.txt
index d045c32..6195ebb 100644
--- a/plone/app/relationfield/schemaeditor.txt
+++ b/plone/app/relationfield/schemaeditor.txt
@@ -40,9 +40,7 @@ Add a relation choice::
     >>> browser.getControl(name='form.widgets.factory:list').value = ['Relation Choice']
     >>> browser.getControl(name='form.buttons.add').click()
 
-    >>> browser.url
-    'http://nohost/plone/dexterity-types/test_type...'
-
+    >>> browser.open(type_url + '/@@fields')
     >>> browser.contents
     '...<div class="fieldLabel">...My Relation Choice...'
 
@@ -60,6 +58,7 @@ Specify a couple of portal types to target::
     >>> browser.getControl(name='form.widgets.portal_type:list').value = ['Event', 'Folder']
     >>> browser.getControl(name='form.buttons.save').click()
 
+    >>> browser.open(type_url + '/@@fields')
     >>> browser.getLink('Settings…').click()
     >>> browser.getControl(name='form.widgets.portal_type:list').value
     ['Event', 'Folder']
@@ -122,6 +121,7 @@ Add a relation list::
     >>> browser.url
     'http://nohost/plone/dexterity-types/test_type1...'
 
+    >>> browser.open(type_url + '/@@fields')
     >>> browser.contents
     '...<div class="fieldLabel">...My Relation List...'
 
@@ -139,6 +139,7 @@ Specify a couple of portal types to target::
     >>> browser.getControl(name='form.widgets.portal_type:list').value = ['Event', 'Folder']
     >>> browser.getControl(name='form.buttons.save').click()
 
+    >>> browser.open(type_url + '/@@fields')
     >>> browser.getLink('Settings…').click()
     >>> browser.getControl(name='form.widgets.portal_type:list').value
     ['Event', 'Folder']


Repository: plone.app.relationfield


Branch: refs/heads/master
Date: 2015-07-02T15:37:14+02:00
Author: Timo Stollenwerk (tisto) <tisto@plone.org>
Commit: https://github.com/plone/plone.app.relationfield/commit/b8918c4363bb9c6908acdbd33a5ef92c92c65b65

Merge pull request #13 from plone/ebr-fix-tests-for-schemaeditor-pr26

fix tests

Files changed:
M plone/app/relationfield/schemaeditor.txt

diff --git a/plone/app/relationfield/schemaeditor.txt b/plone/app/relationfield/schemaeditor.txt
index d045c32..6195ebb 100644
--- a/plone/app/relationfield/schemaeditor.txt
+++ b/plone/app/relationfield/schemaeditor.txt
@@ -40,9 +40,7 @@ Add a relation choice::
     >>> browser.getControl(name='form.widgets.factory:list').value = ['Relation Choice']
     >>> browser.getControl(name='form.buttons.add').click()
 
-    >>> browser.url
-    'http://nohost/plone/dexterity-types/test_type...'
-
+    >>> browser.open(type_url + '/@@fields')
     >>> browser.contents
     '...<div class="fieldLabel">...My Relation Choice...'
 
@@ -60,6 +58,7 @@ Specify a couple of portal types to target::
     >>> browser.getControl(name='form.widgets.portal_type:list').value = ['Event', 'Folder']
     >>> browser.getControl(name='form.buttons.save').click()
 
+    >>> browser.open(type_url + '/@@fields')
     >>> browser.getLink('Settings…').click()
     >>> browser.getControl(name='form.widgets.portal_type:list').value
     ['Event', 'Folder']
@@ -122,6 +121,7 @@ Add a relation list::
     >>> browser.url
     'http://nohost/plone/dexterity-types/test_type1...'
 
+    >>> browser.open(type_url + '/@@fields')
     >>> browser.contents
     '...<div class="fieldLabel">...My Relation List...'
 
@@ -139,6 +139,7 @@ Specify a couple of portal types to target::
     >>> browser.getControl(name='form.widgets.portal_type:list').value = ['Event', 'Folder']
     >>> browser.getControl(name='form.buttons.save').click()
 
+    >>> browser.open(type_url + '/@@fields')
     >>> browser.getLink('Settings…').click()
     >>> browser.getControl(name='form.widgets.portal_type:list').value
     ['Event', 'Folder']


