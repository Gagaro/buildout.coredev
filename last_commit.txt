Repository: plone.dexterity


Branch: refs/heads/master
Date: 2015-10-14T15:43:46+02:00
Author: Johannes Raggam (thet) <raggam-nl@adm.at>
Commit: https://github.com/plone/plone.dexterity/commit/03ccb8755cd6313ba0f1f512e902a381a37efedd

No longer rely on deprecated bobobase_modification_time from Persistence.Persistent.

Files changed:
M CHANGES.rst
M plone/dexterity/content.py

diff --git a/CHANGES.rst b/CHANGES.rst
index d9e201b..4d6a182 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -5,7 +5,9 @@ Changelog
 2.3.6 (unreleased)
 ------------------
 
-- Nothing changed yet.
+- No longer rely on deprecated ``bobobase_modification_time`` from
+  ``Persistence.Persistent``.
+  [thet]
 
 
 2.3.5 (2015-09-20)
diff --git a/plone/dexterity/content.py b/plone/dexterity/content.py
index feff70e..88c989f 100644
--- a/plone/dexterity/content.py
+++ b/plone/dexterity/content.py
@@ -545,7 +545,7 @@ def modified(self):
         date = self.modification_date
         if date is None:
             # Upgrade.
-            date = self.bobobase_modification_time()
+            date = DateTime(self._p_mtime)
             self.modification_date = date
         date = datify(date)
         return date


Repository: plone.dexterity


Branch: refs/heads/master
Date: 2015-10-15T12:37:45+03:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.dexterity/commit/99ae34cec268833c858c5acf5cf8332eec13568c

Merge pull request #42 from plone/thet-nobobomodification

Remove bobobase_modification_time

Files changed:
M CHANGES.rst
M plone/dexterity/content.py

diff --git a/CHANGES.rst b/CHANGES.rst
index d9e201b..4d6a182 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -5,7 +5,9 @@ Changelog
 2.3.6 (unreleased)
 ------------------
 
-- Nothing changed yet.
+- No longer rely on deprecated ``bobobase_modification_time`` from
+  ``Persistence.Persistent``.
+  [thet]
 
 
 2.3.5 (2015-09-20)
diff --git a/plone/dexterity/content.py b/plone/dexterity/content.py
index feff70e..88c989f 100644
--- a/plone/dexterity/content.py
+++ b/plone/dexterity/content.py
@@ -545,7 +545,7 @@ def modified(self):
         date = self.modification_date
         if date is None:
             # Upgrade.
-            date = self.bobobase_modification_time()
+            date = DateTime(self._p_mtime)
             self.modification_date = date
         date = datify(date)
         return date


