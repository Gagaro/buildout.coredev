Repository: plone.app.vocabularies


Branch: refs/heads/master
Date: 2015-07-29T11:32:46+02:00
Author: Gagaro (Gagaro) <gagaro42@gmail.com>
Commit: https://github.com/plone/plone.app.vocabularies/commit/ab75b3842fe754a5b51829683b132c89a2b52a50

fix: use unicode for plone.app.vocabularies.SyndicatableFeedItems

Files changed:
M CHANGES.rst
M plone/app/vocabularies/syndication.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 0a0d597..003b12c 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,8 +4,8 @@ Changelog
 2.1.19 (unreleased)
 -------------------
 
-- Nothing changed yet.
-
+- Fixed SyndicatableFeedItems to allow unicode characters in objects titles.
+  [Gagaro]
 
 2.1.18 (2015-06-05)
 -------------------
diff --git a/plone/app/vocabularies/syndication.py b/plone/app/vocabularies/syndication.py
index 1fe6f36..999b46a 100644
--- a/plone/app/vocabularies/syndication.py
+++ b/plone/app/vocabularies/syndication.py
@@ -56,8 +56,8 @@ def __call__(self, context):
         items = []
         for brain in catalog(**query):
             uid = brain.UID
-            title = '%s(%s)' % (brain.Title,
-                                brain.getPath()[len(site_path) + 1:])
+            title = u'%s(%s)' % (brain.Title.decode('utf8'),
+                                 brain.getPath()[len(site_path) + 1:])
             items.append(SimpleTerm(uid, uid, title))
         return SimpleVocabulary(items)
 


Repository: plone.app.vocabularies


Branch: refs/heads/master
Date: 2015-07-29T12:53:31+02:00
Author: Eric BREHAULT (ebrehault) <ebrehault@gmail.com>
Commit: https://github.com/plone/plone.app.vocabularies/commit/a48de492e503929fe512daf504ca8319f0e109b9

Merge pull request #17 from Gagaro/master

fix: use unicode for plone.app.vocabularies.SyndicatableFeedItems

Files changed:
M CHANGES.rst
M plone/app/vocabularies/syndication.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 0a0d597..003b12c 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,8 +4,8 @@ Changelog
 2.1.19 (unreleased)
 -------------------
 
-- Nothing changed yet.
-
+- Fixed SyndicatableFeedItems to allow unicode characters in objects titles.
+  [Gagaro]
 
 2.1.18 (2015-06-05)
 -------------------
diff --git a/plone/app/vocabularies/syndication.py b/plone/app/vocabularies/syndication.py
index 1fe6f36..999b46a 100644
--- a/plone/app/vocabularies/syndication.py
+++ b/plone/app/vocabularies/syndication.py
@@ -56,8 +56,8 @@ def __call__(self, context):
         items = []
         for brain in catalog(**query):
             uid = brain.UID
-            title = '%s(%s)' % (brain.Title,
-                                brain.getPath()[len(site_path) + 1:])
+            title = u'%s(%s)' % (brain.Title.decode('utf8'),
+                                 brain.getPath()[len(site_path) + 1:])
             items.append(SimpleTerm(uid, uid, title))
         return SimpleVocabulary(items)
 


