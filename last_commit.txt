Repository: plone.app.controlpanel
Branch: refs/heads/master
Date: 2015-01-22T19:42:00+01:00
Author: Kees Hink (khink) <keeshink@gmail.com>
Commit: https://github.com/plone/plone.app.controlpanel/commit/9e450992f4ffd582960a71b7c375e158b74a1e6c

Set query on collection in syndication test. Makes test pass with https://github.com/plone/Products.ATContentTypes/pull/11 again

Files changed:
M plone/app/controlpanel/tests/syndication.txt

diff --git a/plone/app/controlpanel/tests/syndication.txt b/plone/app/controlpanel/tests/syndication.txt
index 52a2020..0d16573 100644
--- a/plone/app/controlpanel/tests/syndication.txt
+++ b/plone/app/controlpanel/tests/syndication.txt
@@ -47,7 +47,12 @@ Create collection and check syndication settings button:
     >>> self.login('root')
     >>> self.browser.open(addTokenToUrl('http://nohost/plone/createObject?type_name=Collection', self.fake_request))
     >>> self.browser.getControl(name="title").value = 'test-collection'
+    >>> self.browser.getControl(name="query").value = '[{"i": "portal_type", "o": "plone.app.querystring.operation.selection.is", "v": ["News Item"]}, {"i": "review_state", "o": "plone.app.querystring.operation.selection.is", "v": ["published"]}]'
     >>> self.browser.getControl('Save').click()
 
+    >>> 'Please finish your search terms / criteria' in self.browser.contents
+    False
+    >>> 'Please correct the indicated errors.' in self.browser.contents
+    False
     >>> '/synPropertiesForm' in self.browser.contents
     True


