Repository: plone.app.contenttypes
Branch: refs/heads/master
Date: 2015-03-21T15:21:29+01:00
Author: Timo Stollenwerk (tisto) <tisto@plone.org>
Commit: https://github.com/plone/plone.app.contenttypes/commit/8fe267519d1e77126e74e6ea04857dc78b0f02b9

Make collection type criterion test run more reliable.

Files changed:
M plone/app/contenttypes/tests/robot/keywords.txt
M plone/app/contenttypes/tests/robot/test_collection_type_criterion.robot

diff --git a/plone/app/contenttypes/tests/robot/keywords.txt b/plone/app/contenttypes/tests/robot/keywords.txt
index 30f8d0e..85d8f18 100644
--- a/plone/app/contenttypes/tests/robot/keywords.txt
+++ b/plone/app/contenttypes/tests/robot/keywords.txt
@@ -20,31 +20,16 @@ a collection
   [Arguments]  ${title}
   [Return]  ${uid}
   ${uid} =  Create content  type=Collection  title=${title}
-# Go to  ${PLONE_URL}/++add++Collection
-# Wait until page contains  Add Collection
-# Input text  name=form.widgets.IDublinCore.title  ${title}
-# Click Button  Save
-# Wait until page contains  Item created
 
 a document
   [Arguments]  ${title}
   [Return]  ${uid}
   ${uid} =  Create content  type=Document  title=${title}
-# Go to  ${PLONE_URL}/++add++Document
-# Wait until page contains  Add Page
-# Input text  name=form.widgets.IDublinCore.title  ${title}
-# Click Button  Save
-# Wait until page contains  Item created
 
 a event
   [Arguments]  ${title}
   [Return]  ${uid}
   ${uid} =  Create content  type=Event  title=${title}
-# Go to  ${PLONE_URL}/++add++Event
-# Wait until page contains  Add Event
-# Input text  name=form.widgets.IDublinCore.title  ${title}
-# Click Button  Save
-# Wait until page contains  Item created
 
 a file
   [Arguments]  ${title}
@@ -59,11 +44,6 @@ a folder
   [Arguments]  ${title}
   [Return]  ${uid}
   ${uid} =  Create content  type=Folder  title=${title}
-# Go to  ${PLONE_URL}/++add++Folder
-# Wait until page contains  Add Folder
-# Input text  name=form.widgets.IDublinCore.title  ${title}
-# Click Button  Save
-# Wait until page contains  Item created
 
 a image
   [Arguments]  ${title}
@@ -78,18 +58,13 @@ a link
   [Arguments]  ${title}
   [Return]  ${uid}
   ${uid} =  Create content  type=Link  title=${title}
-# Go to  ${PLONE_URL}/++add++Link
-# Wait until page contains  Add Link
-# Input text  name=form.widgets.IDublinCore.title  ${title}
-# Click Button  Save
-# Wait until page contains  Item created
+
 
 a news item
   [Arguments]  ${title}
   Go to  ${PLONE_URL}/++add++News Item
   Wait until page contains  Add News Item
   Input text  name=form.widgets.IDublinCore.title  ${title}
-  fill in metadata
   Click Button  Save
   Wait until page contains  Item created
 
diff --git a/plone/app/contenttypes/tests/robot/test_collection_type_criterion.robot b/plone/app/contenttypes/tests/robot/test_collection_type_criterion.robot
index 2ac2c36..7485d4d 100644
--- a/plone/app/contenttypes/tests/robot/test_collection_type_criterion.robot
+++ b/plone/app/contenttypes/tests/robot/test_collection_type_criterion.robot
@@ -1,4 +1,4 @@
-*** Settings ***
+*** Settings *****************************************************************
 
 Resource  plone/app/robotframework/keywords.robot
 Resource  plone/app/contenttypes/tests/robot/keywords.txt
@@ -6,9 +6,8 @@ Resource  plone/app/contenttypes/tests/robot/keywords.txt
 Test Setup  Run keywords  Open test browser
 Test Teardown  Close all browsers
 
-*** Variables ***
 
-*** Test cases ***
+*** Test cases ***************************************************************
 
 Test Type Criterion
     Given I am logged in as site owner
@@ -20,12 +19,12 @@ Test Type Criterion
       And the collection should not contain  Test Document
 
 
-*** Keywords ***
+*** Keywords *****************************************************************
 
 I set the collection's type criterion to
     [Arguments]  ${criterion}
-    Go to  ${PLONE_URL}/my-collection
-    Click Edit
+    Go to  ${PLONE_URL}/my-collection/edit
+    Wait until page contains  Edit Collection
 
     I set the criteria index in row 1 to the option 'Type'
     I set the criteria operator in row 1 to the option 'Is'


