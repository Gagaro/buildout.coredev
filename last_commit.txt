Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2015-09-06T17:29:56-05:00
Author: vangheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/0444132543e19b1ed0260398cda8bc204214c4b9

also catch ComponentLookupError

Files changed:
M Products/CMFPlone/resources/exportimport/resourceregistry.py

diff --git a/Products/CMFPlone/resources/exportimport/resourceregistry.py b/Products/CMFPlone/resources/exportimport/resourceregistry.py
index 6848ca2..7bcb078 100644
--- a/Products/CMFPlone/resources/exportimport/resourceregistry.py
+++ b/Products/CMFPlone/resources/exportimport/resourceregistry.py
@@ -9,6 +9,7 @@
 from plone.i18n.normalizer.interfaces import IIDNormalizer
 from zope.component import queryMultiAdapter
 from zope.component import queryUtility
+from zope.component.interfaces import ComponentLookupError
 
 
 def importResRegistry(context, reg_id, reg_title, filename):
@@ -158,6 +159,6 @@ def _importNode(self, node):
             ].value = datetime.now()
             try:
                 cookWhenChangingSettings(self.context, legacy)
-            except AssertionError:
+            except (AssertionError, ComponentLookupError):
                 # zope.globalrequest might be setup, don't error out
                 pass
\ No newline at end of file


