Repository: Products.Archetypes
Branch: refs/heads/master
Date: 2015-05-12T15:17:48+02:00
Author: Eric BREHAULT (ebrehault) <ebrehault@gmail.com>
Commit: https://github.com/plone/Products.Archetypes/commit/f735f6ac474dc67a38259e623e2642ef5061dab1

enable autotoc pattern

Files changed:
M Products/Archetypes/skins/archetypes/edit_macros.pt

diff --git a/Products/Archetypes/skins/archetypes/edit_macros.pt b/Products/Archetypes/skins/archetypes/edit_macros.pt
index aaba556..c52500f 100644
--- a/Products/Archetypes/skins/archetypes/edit_macros.pt
+++ b/Products/Archetypes/skins/archetypes/edit_macros.pt
@@ -77,6 +77,7 @@
          tal:condition="not:isLocked"
          tal:define="portal_type portal_type|string:unknowntype">
       <form name="edit_form"
+            data-pat-autotoc="levels: legend; section: fieldset; className: autotabs"
             method="post"
             enctype="multipart/form-data"
             class="enableUnloadProtection enableAutoFocus atBaseEditForm"
@@ -84,7 +85,7 @@
             id=""
             tal:attributes="action python:context.absolute_url()+'/'+template.id;
                             id string:${portal_type}-base-edit;
-                            class python:test(path('allow_tabbing|nothing'), 'enableUnloadProtection enableAutoFocus enableFormTabbing enableUnlockProtection', 'enableUnloadProtection enableAutoFocus enableUnlockProtection');">
+                            class python:test(path('allow_tabbing|nothing'), 'enableUnloadProtection enableAutoFocus enableFormTabbing pat-autotoc enableUnlockProtection', 'enableUnloadProtection enableAutoFocus enableUnlockProtection');">
           <metal:block define-slot="extra_top" />
 
           <div tal:replace="structure provider:archetypes.edit.beforefieldsets" />


