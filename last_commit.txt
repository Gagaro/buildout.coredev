Repository: plone.app.multilingual


Branch: refs/heads/master
Date: 2015-09-14T18:03:31+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.app.multilingual/commit/e88b3e17b16c40d3d4a1ab798f8230f4f98cc5ad

fix translation-map

Files changed:
M CHANGES.rst
M src/plone/app/multilingual/browser/templates/mmap.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index c59e64b..169b249 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,7 +4,9 @@ Changelog
 3.0.10 (unreleased)
 -------------------
 
-- Nothing changed yet.
+- Fix translation-map.
+  Fixes https://github.com/plone/plone.app.multilingual/issues/175
+  [pbauer]
 
 
 3.0.9 (2015-09-14)
diff --git a/src/plone/app/multilingual/browser/templates/mmap.pt b/src/plone/app/multilingual/browser/templates/mmap.pt
index 98b62cf..cb6b077 100644
--- a/src/plone/app/multilingual/browser/templates/mmap.pt
+++ b/src/plone/app/multilingual/browser/templates/mmap.pt
@@ -8,95 +8,78 @@
 
 <body>
 
-<div metal:fill-slot="prefs_configlet_content">
+<metal:block metal:fill-slot="prefs_configlet_main">
 
   <script type="text/javascript" src="++resource++plone.app.multilingual.javascript/jit-yc.js"></script>
   <script type="text/javascript" src="++resource++plone.app.multilingual.javascript/mmap_helper.js"></script>
-
-
-<style>
-#pam_mmap_toolbar {
-  border: 1px solid #000;
-  padding: 20px;
-}
-
-#pam_mmap_language_toolbar {
-  width: 50%;
-}
-
-#pam_ajax_buttons {
-  width: 50%;
-  margin-bottom: 20px;
-}
-
-#data_translation {
-    background: none repeat scroll 0 0 white;
-    border: 1px solid #000000;
+  <style>
+  #pam_mmap_toolbar {
+    border: 1px solid #000;
     padding: 20px;
-    position: absolute;
-    right: 72px;
-    top: 200px;
-    width: 40%;
-}
-
-#pam_language_buttons button, #pam_ajax_buttons button {
-  border: 1px solid black;
-  border-radius: 0.5em;
-  -webkit-border-radius: 4px;
-  -moz-border-radius: 4px;
-  color: black;
-  background-color: #ccc;
-}
-
-#pam_language_buttons button.down, #pam_ajax_buttons button.down {
-  background-color: #777;
-  color: white;
-}
-
-
-</style>
-
-  <div id="region-content" class="documentEditable">
-
-    <div id="edit-bar" i18n:domain="plone.app.multilingual">
-        <ul class="contentViews" id="content-views">
-          <li>
-            <a href=""
-               tal:attributes="href string:${portal_url}/@@language-controlpanel"
-               i18n:translate="label_general">General</a>
-          </li>
-          <li class="selected">
-            <a href=""
-               tal:attributes="href string:${portal_url}/@@multilingual-map"
-               i18n:translate="label_translation_map">Translation Map</a>
-          </li>
-          <li>
-            <a href=""
-               tal:attributes="href string:${portal_url}/@@lp-migration"
-               i18n:translate="label_migration">Migration</a>
-          </li>
-        </ul>
-        <div class="contentActions">&nbsp;</div>
-    </div>
-
-    <div class="documentContent" id="content">
-      <a name="documentContent"></a>
+  }
+
+  #pam_mmap_language_toolbar {
+    width: 50%;
+  }
+
+  #pam_ajax_buttons {
+    width: 50%;
+    margin-bottom: 20px;
+  }
+
+  #data_translation {
+      background: none repeat scroll 0 0 white;
+      border: 1px solid #000000;
+      padding: 20px;
+      position: absolute;
+      right: 72px;
+      top: 200px;
+      width: 40%;
+  }
+
+  #pam_language_buttons button, #pam_ajax_buttons button {
+    border: 1px solid black;
+    border-radius: 0.5em;
+    -webkit-border-radius: 4px;
+    -moz-border-radius: 4px;
+    color: black;
+    background-color: #ccc;
+  }
+
+  #pam_language_buttons button.down, #pam_ajax_buttons button.down {
+    background-color: #777;
+    color: white;
+  }
+  </style>
+
+        <div i18n:domain="plone.app.multilingual">
+            <ul>
+              <li>
+                <a href=""
+                   tal:attributes="href string:${portal_url}/@@language-controlpanel"
+                   i18n:translate="label_general">General</a>
+              </li>
+              <li class="selected">
+                <a href=""
+                   tal:attributes="href string:${portal_url}/@@multilingual-map"
+                   i18n:translate="label_translation_map">Translation Map</a>
+              </li>
+              <li>
+                <a href=""
+                   tal:attributes="href string:${portal_url}/@@lp-migration"
+                   i18n:translate="label_migration">Migration</a>
+              </li>
+            </ul>
+        </div>
+
+        <h1 class="documentFirstHeading"
+            i18n:translate="heading_translation_map">plone.app.multilingual translation map</h1>
 
         <div metal:use-macro="context/global_statusmessage/macros/portal_message">
         Portal status message
         </div>
 
-        <div class="configlet">
-
-            <h1 class="documentFirstHeading"
-                i18n:translate="heading_translation_map">plone.app.multilingual translation map</h1>
-
-            <a href=""
-                class="link-parent"
-                tal:attributes="href string:${portal_url}/plone_control_panel"
-                i18n:translate="label_up_to_plone_setup">
-                    Up to Site Setup
-            </a>
+        <div id="content-core">
 
             <p i18n:translate="description_translation_map">
                 Translation map.
@@ -161,10 +144,10 @@
               </ul>
             </div>
           </div>
+
         </div>
-      </div>
-    </div>
-</div>
+
+</metal:block>
 
 </body>
 </html>


