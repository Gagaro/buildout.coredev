Repository: Products.CMFQuickInstallerTool


Branch: refs/heads/master
Date: 2015-08-17T16:08:23+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.CMFQuickInstallerTool/commit/1df33e2c239d51978136faca3d04adf0c91adfec

Fixed getting profiles registered explicitly for 'IPloneSiteRoot'.

This is instead of CMFCore 'ISiteRoot', which is the default when you
do not specify a 'for' attribute in your profile zcml registration.

Bug introduced in 3.0.10.  See for example
https://github.com/plone/plone.app.mosaic/issues/124

Files changed:
M CHANGES.rst
M Products/CMFQuickInstallerTool/QuickInstallerTool.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 58f40f0..d5b2a3b 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,7 +4,10 @@ Changelog
 3.0.11 (unreleased)
 -------------------
 
-- Nothing changed yet.
+- Fixed getting profiles registered explicitly for ``IPloneSiteRoot``
+  instead CMFCore ``ISiteRoot``.  Bug introduced in 3.0.10.  See for
+  example https://github.com/plone/plone.app.mosaic/issues/124
+  [maurits]
 
 
 3.0.10 (2015-07-29)
diff --git a/Products/CMFQuickInstallerTool/QuickInstallerTool.py b/Products/CMFQuickInstallerTool/QuickInstallerTool.py
index 96762a2..60944bf 100644
--- a/Products/CMFQuickInstallerTool/QuickInstallerTool.py
+++ b/Products/CMFQuickInstallerTool/QuickInstallerTool.py
@@ -34,9 +34,9 @@
 try:
     pkg_resources.get_distribution('Products.CMFPlone')
 except pkg_resources.DistributionNotFound:
-    from Products.CMFPlone.interfaces import IPloneSiteRoot as ISiteRoot
-else:
     from Products.CMFCore.interfaces import ISiteRoot
+else:
+    from Products.CMFPlone.interfaces import IPloneSiteRoot as ISiteRoot
 
 _ = MessageFactory("plone")
 


