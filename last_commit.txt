Repository: mockup
Branch: refs/heads/master
Date: 2015-04-30T11:54:37-05:00
Author: vangheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/mockup/commit/791cde54ce03c72f5a105879e4dc76576692d6af

Be able to provide default scale selection so users do not select
  original scale as often

Files changed:
M CHANGES.rst
M mockup/patterns/tinymce/js/links.js
M mockup/patterns/tinymce/pattern.js
M mockup/patterns/tinymce/templates/image.xml

diff --git a/CHANGES.rst b/CHANGES.rst
index b27e6b3..1c98447 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,6 +4,10 @@ Changelog
 2.0.3 (unreleased)
 ------------------
 
+- Be able to provide default scale selection so users do not select
+  original scale as often
+  [vangheem]
+
 - TinyMCE: bugfix, where a link had to be guessed because of missing data-
   attributes, use set instead of setRaw. Add tests.
   [frapell]
diff --git a/mockup/patterns/tinymce/js/links.js b/mockup/patterns/tinymce/js/links.js
index 3171e33..80cadd5 100644
--- a/mockup/patterns/tinymce/js/links.js
+++ b/mockup/patterns/tinymce/js/links.js
@@ -376,6 +376,7 @@ define([
 
     generateModalHtml: function() {
       return this.template({
+        options: this.options,
         upload: this.options.upload,
         text: this.options.text,
         insertHeading: this.options.text.insertHeading,
diff --git a/mockup/patterns/tinymce/pattern.js b/mockup/patterns/tinymce/pattern.js
index f8356c0..a438d24 100644
--- a/mockup/patterns/tinymce/pattern.js
+++ b/mockup/patterns/tinymce/pattern.js
@@ -16,6 +16,7 @@ toolbar: "undo redo | styleselect | bold italic | alignleft aligncenter alignrig
  *    prependToScalePart(string): Text to prepend to generated image scale url part. ('/imagescale/')
  *    appendToScalePart(string): Text to append to generated image scale url part. ('')
  *    linkAttribute(string): Ajax response data attribute to use for url. ('path')
+ *    defaultScale(string): Scale name to default to. ('Original')
  *
  * Documentation:
  *    # Default
@@ -150,6 +151,7 @@ define([
       prependToScalePart: '/imagescale/', // some value here is required to be able to parse scales back
       appendToScalePart: '',
       appendToOriginalScalePart: '',
+      defaultScale: 'large',
       scales: _t('Listing (16x16):listing,Icon (32x32):icon,Tile (64x64):tile,' +
               'Thumb (128x128):thumb,Mini (200x200):mini,Preview (400x400):preview,' +
               'Large (768x768):large'),
diff --git a/mockup/patterns/tinymce/templates/image.xml b/mockup/patterns/tinymce/templates/image.xml
index be5a307..7a0f3d1 100644
--- a/mockup/patterns/tinymce/templates/image.xml
+++ b/mockup/patterns/tinymce/templates/image.xml
@@ -19,7 +19,7 @@
             <select name="scale">
               <option value="">Original</option>
                 <% _.each(scales, function(scale){ %>
-                  <option value="<%- scale.part %>">
+                  <option value="<%- scale.part %>" <% if(scale.name === options.defaultScale){ %>selected<% } %> >
                     <%- scale.label %>
                   </option>
                 <% }); %>


