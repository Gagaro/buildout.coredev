Repository: plone.app.contenttypes
Branch: refs/heads/master
Date: 2015-04-07T15:02:22+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.app.contenttypes/commit/ff2b1bc3b8d5bf8a094512128a27a5f60711b5a0

fix test of album_view (was testing if doc1 appeared in navigation-portlet)

Files changed:
M plone/app/contenttypes/tests/test_folder.py

diff --git a/plone/app/contenttypes/tests/test_folder.py b/plone/app/contenttypes/tests/test_folder.py
index ac9537f..424fbbe 100644
--- a/plone/app/contenttypes/tests/test_folder.py
+++ b/plone/app/contenttypes/tests/test_folder.py
@@ -16,6 +16,7 @@
     PLONE_APP_CONTENTTYPES_INTEGRATION_TESTING,
     PLONE_APP_CONTENTTYPES_FUNCTIONAL_TESTING
 )
+from plone.app.contenttypes.tests.test_image import dummy_image
 
 from plone.app.testing import TEST_USER_ID, setRoles
 
@@ -145,6 +146,13 @@ def test_folder_tabular_view(self):
         self.assertTrue('Document 1' in self.browser.contents)
 
     def test_folder_album_view(self):
+        self.folder.invokeFactory('Image', id='image1', title='Image 1')
+        img1 = self.folder['image1']
+        img1.image = dummy_image()
+        import transaction
+        transaction.commit()
         self.browser.open(self.folder_url + '/album_view')
         self.assertTrue('My Folder' in self.browser.contents)
-        self.assertTrue('Document 1' in self.browser.contents)
+        self.assertIn(
+            '<img src="http://nohost/plone/folder/image1/@@images',
+            self.browser.contents)


