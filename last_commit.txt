Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2015-09-14T11:02:48-05:00
Author: vangheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/7a955edb5f26b5c1990fba1d9323c3c5e935c648

just add a min attribute to the integer fields instead

Files changed:
M Products/CMFPlone/interfaces/controlpanel.py
M Products/CMFPlone/interfaces/syndication.py
D Products/CMFPlone/validators.py

diff --git a/Products/CMFPlone/interfaces/controlpanel.py b/Products/CMFPlone/interfaces/controlpanel.py
index c5811e5..bc0286f 100644
--- a/Products/CMFPlone/interfaces/controlpanel.py
+++ b/Products/CMFPlone/interfaces/controlpanel.py
@@ -3,7 +3,6 @@
 
 from Products.CMFPlone import PloneMessageFactory as _  # NOQA
 from Products.CMFPlone.utils import validate_json
-from Products.CMFPlone.validators import positiveNumber
 from basetool import IPloneBaseTool
 from plone.supermodel import model
 from zope import schema
@@ -777,7 +776,7 @@ class IMaintenanceSchema(Interface):
             u"will be kept. Recommended value is 7 days."
         ),
         default=7,
-        constraint=positiveNumber,
+        min=0,
         required=True
     )
 
diff --git a/Products/CMFPlone/interfaces/syndication.py b/Products/CMFPlone/interfaces/syndication.py
index dcb18e4..1490719 100644
--- a/Products/CMFPlone/interfaces/syndication.py
+++ b/Products/CMFPlone/interfaces/syndication.py
@@ -1,7 +1,6 @@
 from zope.interface import Interface
 from zope import schema
 from Products.CMFPlone import PloneMessageFactory as _
-from Products.CMFPlone.validators import positiveNumber
 
 
 class ISyndicatable(Interface):
@@ -176,7 +175,7 @@ class ISiteSyndicationSettings(Interface):
                 default=u'Maximum items'),
         description=_(u'help_syndication_max_items',
                       default=u'Maximum number of items that will be syndicated.'),
-        constraint=positiveNumber,
+        min=1,
         default=15)
 
     allowed_feed_types = schema.Tuple(
diff --git a/Products/CMFPlone/validators.py b/Products/CMFPlone/validators.py
deleted file mode 100644
index 062ad7f..0000000
--- a/Products/CMFPlone/validators.py
+++ /dev/null
@@ -1,12 +0,0 @@
-from zope.interface import Invalid
-
-
-def positiveNumber(val):
-    if not isinstance(val, int):
-        try:
-            val = int(val)
-        except:
-            raise Invalid("Not a valid integer value")
-    if val < 0:
-        raise Invalid("Must enter a positive number")
-    return True
\ No newline at end of file


