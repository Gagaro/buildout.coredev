Repository: mockup


Branch: refs/heads/master
Date: 2015-08-11T08:01:27-05:00
Author: vangheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/mockup/commit/413a1bdc71feaf1c1231d30fa3187fbcec865865

add action value to form when using disableAjaxFormSubmit option on modal

Files changed:
M CHANGES.rst
M mockup/patterns/modal/pattern.js

diff --git a/CHANGES.rst b/CHANGES.rst
index 76ee583..3b788cd 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -3,6 +3,10 @@ Changelog
 
 2.1.0 (unreleased)
 ------------------
+
+- add action value to form when using disableAjaxFormSubmit option on modal
+  [vangheem]
+
 - add "Save As" option in less builder
   [obct537]
 
diff --git a/mockup/patterns/modal/pattern.js b/mockup/patterns/modal/pattern.js
index 3afe9f6..a7b644f 100644
--- a/mockup/patterns/modal/pattern.js
+++ b/mockup/patterns/modal/pattern.js
@@ -245,6 +245,9 @@ define([
         }
 
         if(options.disableAjaxFormSubmit){
+          if($action.attr('name') && $action.attr('value')){
+            $form.append($('<input type="hidden" name="' + $action.attr('name') + '" value="' + $action.attr('value') + '" />'));
+          }
           $form.trigger('submit');
           return;
         }


