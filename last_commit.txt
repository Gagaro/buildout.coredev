Repository: plone.app.dexterity
Branch: refs/heads/master
Date: 2015-06-02T16:51:16+02:00
Author: Eric BREHAULT (ebrehault) <ebrehault@gmail.com>
Commit: https://github.com/plone/plone.app.dexterity/commit/e99fdba2d20c6b7036dd1e8b946bf3c8faa93f19

ignore protected fields when testing addability

Files changed:
M plone/app/dexterity/tests/editing.txt

diff --git a/plone/app/dexterity/tests/editing.txt b/plone/app/dexterity/tests/editing.txt
index 2b0941a..751fd19 100644
--- a/plone/app/dexterity/tests/editing.txt
+++ b/plone/app/dexterity/tests/editing.txt
@@ -104,6 +104,8 @@ and saved.
   >>> schema = plonista.lookupSchema()
   >>> for name, factory in sorted(component.getUtilitiesFor(
   ...     interfaces.IFieldFactory)):
+  ...     if hasattr(factory, 'protected') and factory.protected(None):
+  ...         continue
   ...     browser.open(schemaeditor_url)
   ...     browser.getLink('Add new field').click()
   ...     browser.getControl('Title').value = name


Repository: plone.app.dexterity
Branch: refs/heads/master
Date: 2015-06-03T10:33:54+02:00
Author: Eric BREHAULT (ebrehault) <ebrehault@gmail.com>
Commit: https://github.com/plone/plone.app.dexterity/commit/3842a99fc550f1ab72a147b0caf9085d1613dc45

Merge pull request #165 from plone/ebr-ignore-protected-fields-in-test

no broken test (see http://jenkins.plone.org/job/pull-request/209/), I merge

Files changed:
M plone/app/dexterity/tests/editing.txt

diff --git a/plone/app/dexterity/tests/editing.txt b/plone/app/dexterity/tests/editing.txt
index 2b0941a..751fd19 100644
--- a/plone/app/dexterity/tests/editing.txt
+++ b/plone/app/dexterity/tests/editing.txt
@@ -104,6 +104,8 @@ and saved.
   >>> schema = plonista.lookupSchema()
   >>> for name, factory in sorted(component.getUtilitiesFor(
   ...     interfaces.IFieldFactory)):
+  ...     if hasattr(factory, 'protected') and factory.protected(None):
+  ...         continue
   ...     browser.open(schemaeditor_url)
   ...     browser.getLink('Add new field').click()
   ...     browser.getControl('Title').value = name


