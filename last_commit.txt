Repository: plone.portlet.collection


Branch: refs/heads/master
Date: 2015-09-17T18:51:20+02:00
Author: esteele (esteele) <eric@esteele.net>
Commit: https://github.com/plone/plone.portlet.collection/commit/f008aca65a72ddb5d7fba86302de2898656c6866

Use registry lookup for types_use_view_action_in_listings

Files changed:
M CHANGES.rst
M plone/portlet/collection/collection.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index ded20c0..c84e2aa 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,7 +4,8 @@ Changelog
 3.0.5 (unreleased)
 ------------------
 
-- Nothing changed yet.
+- Use registry lookup for types_use_view_action_in_listings
+  [esteele]
 
 
 3.0.4 (2015-09-07)
diff --git a/plone/portlet/collection/collection.pt b/plone/portlet/collection/collection.pt
index bc42e2f..e28de26 100644
--- a/plone/portlet/collection/collection.pt
+++ b/plone/portlet/collection/collection.pt
@@ -3,7 +3,7 @@
     tal:define="collection_url view/collection_url;
                 plone_view context/@@plone;
                 toLocalizedTime nocall:plone_view/toLocalizedTime;
-                viewActions here/portal_properties/site_properties/typesUseViewActionInListings|python:();"
+                viewActions python:context.portal_registry.get('plone.types_view_action_in_listings', []);"
     tal:attributes="class string:portlet portletCollection ${view/css_class}"><header class="portletHeader">
         <span class="portletTopLeft"></span>
         <a tal:attributes="href collection_url" tal:omit-tag="not:view/data/show_more">


Repository: plone.portlet.collection


Branch: refs/heads/master
Date: 2015-09-18T09:53:02+02:00
Author: esteele (esteele) <eric@esteele.net>
Commit: https://github.com/plone/plone.portlet.collection/commit/55aacdd27eb6b776abc1463fe17ceaae8a62df1d

Fix registry id

Files changed:
M plone/portlet/collection/collection.pt

diff --git a/plone/portlet/collection/collection.pt b/plone/portlet/collection/collection.pt
index e28de26..16eeb51 100644
--- a/plone/portlet/collection/collection.pt
+++ b/plone/portlet/collection/collection.pt
@@ -3,7 +3,7 @@
     tal:define="collection_url view/collection_url;
                 plone_view context/@@plone;
                 toLocalizedTime nocall:plone_view/toLocalizedTime;
-                viewActions python:context.portal_registry.get('plone.types_view_action_in_listings', []);"
+                viewActions python:context.portal_registry.get('plone.types_use_view_action_in_listings', []);"
     tal:attributes="class string:portlet portletCollection ${view/css_class}"><header class="portletHeader">
         <span class="portletTopLeft"></span>
         <a tal:attributes="href collection_url" tal:omit-tag="not:view/data/show_more">


Repository: plone.portlet.collection


Branch: refs/heads/master
Date: 2015-09-20T17:29:27+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.portlet.collection/commit/ed93dbf8961dca89b1b19a54d96962804c6b0357

Merge pull request #9 from plone/portal-properties-cleanup

Portal properties cleanup

Files changed:
M CHANGES.rst
M plone/portlet/collection/collection.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index ded20c0..c84e2aa 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,7 +4,8 @@ Changelog
 3.0.5 (unreleased)
 ------------------
 
-- Nothing changed yet.
+- Use registry lookup for types_use_view_action_in_listings
+  [esteele]
 
 
 3.0.4 (2015-09-07)
diff --git a/plone/portlet/collection/collection.pt b/plone/portlet/collection/collection.pt
index bc42e2f..16eeb51 100644
--- a/plone/portlet/collection/collection.pt
+++ b/plone/portlet/collection/collection.pt
@@ -3,7 +3,7 @@
     tal:define="collection_url view/collection_url;
                 plone_view context/@@plone;
                 toLocalizedTime nocall:plone_view/toLocalizedTime;
-                viewActions here/portal_properties/site_properties/typesUseViewActionInListings|python:();"
+                viewActions python:context.portal_registry.get('plone.types_use_view_action_in_listings', []);"
     tal:attributes="class string:portlet portletCollection ${view/css_class}"><header class="portletHeader">
         <span class="portletTopLeft"></span>
         <a tal:attributes="href collection_url" tal:omit-tag="not:view/data/show_more">


