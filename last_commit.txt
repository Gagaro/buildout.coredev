Repository: plone.app.contenttypes


Branch: refs/heads/master
Date: 2015-11-23T16:54:24+01:00
Author: Franz Gerhard Reinisch (fgrcon) <franz@fgrcon.net>
Commit: https://github.com/plone/plone.app.contenttypes/commit/3dc257d503d9b9f763dca8f68b7d48db18bf9a7a

fixed aquisition error in indexers.py for getIcon

Files changed:
M plone/app/contenttypes/indexers.py

diff --git a/plone/app/contenttypes/indexers.py b/plone/app/contenttypes/indexers.py
index 2c31a79..8621daa 100644
--- a/plone/app/contenttypes/indexers.py
+++ b/plone/app/contenttypes/indexers.py
@@ -151,6 +151,6 @@ def getIcon(obj):
     when obj is an image or has a lead image
     or has an image field with name 'image': true else false
     '''
-    if obj.image:
+    if obj.aq_base.image:
         return True
     return False


Repository: plone.app.contenttypes


Branch: refs/heads/master
Date: 2015-11-23T18:00:46+01:00
Author: Franz Gerhard Reinisch (fgrcon) <franz@fgrcon.net>
Commit: https://github.com/plone/plone.app.contenttypes/commit/976d9f5326b40f1da878da8ad8055d35211402b2

Merge pull request #301 from plone/fgrcon-fix-aquisitionerror

fixed aquisition error in indexers.py for getIcon

Files changed:
M plone/app/contenttypes/indexers.py

diff --git a/plone/app/contenttypes/indexers.py b/plone/app/contenttypes/indexers.py
index 2c31a79..8621daa 100644
--- a/plone/app/contenttypes/indexers.py
+++ b/plone/app/contenttypes/indexers.py
@@ -151,6 +151,6 @@ def getIcon(obj):
     when obj is an image or has a lead image
     or has an image field with name 'image': true else false
     '''
-    if obj.image:
+    if obj.aq_base.image:
         return True
     return False


