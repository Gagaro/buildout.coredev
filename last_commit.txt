Repository: plone.dexterity


Branch: refs/heads/master
Date: 2015-09-19T21:31:52-07:00
Author: Alec Mitchell (alecpm) <alecpm@gmail.com>
Commit: https://github.com/plone/plone.dexterity/commit/def46397784df6ccd6e59c528502f9ad950a6e65

Add missing changelog entry and fix request variable setting to allow plone.app.dexterity tests to work.

Files changed:
M CHANGES.rst
M plone/dexterity/browser/add.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 0b59243..69d0bad 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -5,7 +5,9 @@ Changelog
 2.3.5 (unreleased)
 ------------------
 
-- Nothing changed yet.
+- Don't check type constraints in AddForm.update() if request provides
+  IDeferSecurityChecks.
+  [alecm]
 
 
 2.3.4 (2015-08-14)
diff --git a/plone/dexterity/browser/add.py b/plone/dexterity/browser/add.py
index 5909fa5..20e2fc7 100644
--- a/plone/dexterity/browser/add.py
+++ b/plone/dexterity/browser/add.py
@@ -40,7 +40,7 @@ def __init__(self, context, request, ti=None):
         if ti is not None:
             self.ti = ti
             self.portal_type = ti.getId()
-        self.request['disable_border'] = True
+        self.request.form['disable_border'] = True
 
     @property
     def additionalSchemata(self):


