Repository: Products.CMFPlone
Branch: refs/heads/master
Date: 2015-01-09T12:16:41+01:00
Author: Ramon Navarro Bosch () <ramon@iMac-de-Ramon.local>
Commit: https://github.com/plone/Products.CMFPlone/commit/50eaef21456ec9108ed66d0498c2c6520573497d

In case tinymce_content_css is not defined on the theme

Files changed:
M Products/CMFPlone/patterns/tinymce.py

diff --git a/Products/CMFPlone/patterns/tinymce.py b/Products/CMFPlone/patterns/tinymce.py
index ee72fdc..84e9fd9 100644
--- a/Products/CMFPlone/patterns/tinymce.py
+++ b/Products/CMFPlone/patterns/tinymce.py
@@ -55,7 +55,7 @@ def __call__(self):
         # Check if theme has a custom content css
         theme = getCurrentTheme()
         themeObj = getTheme(theme)
-        if themeObj and themeObj.tinymce_content_css:
+        if themeObj and hasattr(themeObj, 'tinymce_content_css') and themeObj.tinymce_content_css:
             content_css = self.config['portal_url'] + themeObj.tinymce_content_css
         else:
             content_css = self.settings.content_css


