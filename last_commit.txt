Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2015-09-04T19:26:59-04:00
Author: esteele (esteele) <eric@esteele.net>
Commit: https://github.com/plone/plone.app.upgrade/commit/8cf80c660d498a129a90e8e158abcb63a0632f2a

Remove plone_forms skins folder.

Files changed:
A plone/app/upgrade/v50/profiles/to_rc1/skins.xml
M CHANGES.rst
M plone/app/upgrade/v50/betas.py
M plone/app/upgrade/v50/configure.zcml
M plone/app/upgrade/v50/profiles.zcml

diff --git a/CHANGES.rst b/CHANGES.rst
index d25d85f..f7b6138 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,7 +4,8 @@ Changelog
 1.3.14 (unreleased)
 -------------------
 
-- Nothing changed yet.
+- Remove plone_forms skins folder for 5.0 rc1
+  [esteele]
 
 
 1.3.13 (2015-08-23)
diff --git a/plone/app/upgrade/v50/betas.py b/plone/app/upgrade/v50/betas.py
index 424949d..204e423 100644
--- a/plone/app/upgrade/v50/betas.py
+++ b/plone/app/upgrade/v50/betas.py
@@ -277,3 +277,8 @@ def to50beta4(context):
 def upgrade_querystring(context):
     # Latest profile version at time of writing is 10 (unreleased).
     context.upgradeProfile('plone.app.querystring:default')
+
+
+def to50rc1(context):
+    """5.0beta4 -> 5.0rc1"""
+    loadMigrationProfile(context, 'profile-plone.app.upgrade.v50:to50rc1')
diff --git a/plone/app/upgrade/v50/configure.zcml b/plone/app/upgrade/v50/configure.zcml
index eeda428..dcc12fa 100644
--- a/plone/app/upgrade/v50/configure.zcml
+++ b/plone/app/upgrade/v50/configure.zcml
@@ -161,4 +161,16 @@
 
     </gs:upgradeSteps>
 
+    <gs:upgradeSteps
+        source="5007"
+        destination="5008"
+        profile="Products.CMFPlone:plone">
+
+       <gs:upgradeStep
+           title="Run to50rc1 upgrade profile"
+           description=""
+           handler=".betas.to50rc1"
+           />
+
+    </gs:upgradeSteps>
 </configure>
diff --git a/plone/app/upgrade/v50/profiles.zcml b/plone/app/upgrade/v50/profiles.zcml
index 0fd0372..515fc49 100644
--- a/plone/app/upgrade/v50/profiles.zcml
+++ b/plone/app/upgrade/v50/profiles.zcml
@@ -56,4 +56,14 @@
       for="Products.CMFPlone.interfaces.IMigratingPloneSiteRoot"
       provides="Products.GenericSetup.interfaces.EXTENSION"
       />
+
+  <genericsetup:registerProfile
+      name="to50rc1"
+      title="Upgrade profile for Plone 5007 to Plone 5.0rc1"
+      description=""
+      directory="profiles/to_rc1"
+      for="Products.CMFPlone.interfaces.IMigratingPloneSiteRoot"
+      provides="Products.GenericSetup.interfaces.EXTENSION"
+      />
+
 </configure>
diff --git a/plone/app/upgrade/v50/profiles/to_rc1/skins.xml b/plone/app/upgrade/v50/profiles/to_rc1/skins.xml
new file mode 100644
index 0000000..26d6a83
--- /dev/null
+++ b/plone/app/upgrade/v50/profiles/to_rc1/skins.xml
@@ -0,0 +1,7 @@
+<?xml version="1.0"?>
+<object name="portal_skins">
+ <object name="plone_forms" remove="True"/>
+  <skin-path name="*">
+  	<layer name="plone_forms" remove="True"/>
+ </skin-path>
+</object>


