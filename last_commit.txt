Repository: plone.app.content
Branch: refs/heads/master
Date: 2015-01-22T11:51:15+01:00
Author: Timo Stollenwerk () <contact@timostollenwerk.net>
Commit: https://github.com/plone/plone.app.content/commit/9e85bfcb314aaf0357e9282c1d72524a00f2c097

Use the functional test layer for functional tests. Using the integration test layer for functional tests leads to test isolation problems. This fixes the test isolation problems between plone.app.content and plone.app.contentlisting.

Files changed:
M plone/app/content/tests/test_actions.py
M plone/app/content/tests/test_selectdefaultpage.py

diff --git a/plone/app/content/tests/test_actions.py b/plone/app/content/tests/test_actions.py
index 1401d39..135bc86 100644
--- a/plone/app/content/tests/test_actions.py
+++ b/plone/app/content/tests/test_actions.py
@@ -1,6 +1,6 @@
 # -*- coding: utf-8 -*-
-from plone.app.content.testing import PLONE_APP_CONTENT_AT_INTEGRATION_TESTING
-from plone.app.content.testing import PLONE_APP_CONTENT_DX_INTEGRATION_TESTING
+from plone.app.content.testing import PLONE_APP_CONTENT_AT_FUNCTIONAL_TESTING
+from plone.app.content.testing import PLONE_APP_CONTENT_DX_FUNCTIONAL_TESTING
 from plone.app.testing import TEST_USER_ID
 from plone.app.testing import TEST_USER_NAME
 from plone.app.testing import login
@@ -19,7 +19,7 @@
 
 class ActionsDXTestCase(unittest.TestCase):
 
-    layer = PLONE_APP_CONTENT_DX_INTEGRATION_TESTING
+    layer = PLONE_APP_CONTENT_DX_FUNCTIONAL_TESTING
 
     def setUp(self):
         self.portal = self.layer['portal']
@@ -256,4 +256,4 @@ def test_object_copy_and_paste_multiple_times(self):
 
 class ActionsATTestCase(ActionsDXTestCase):
 
-    layer = PLONE_APP_CONTENT_AT_INTEGRATION_TESTING
+    layer = PLONE_APP_CONTENT_AT_FUNCTIONAL_TESTING
diff --git a/plone/app/content/tests/test_selectdefaultpage.py b/plone/app/content/tests/test_selectdefaultpage.py
index ac465f2..4286d15 100644
--- a/plone/app/content/tests/test_selectdefaultpage.py
+++ b/plone/app/content/tests/test_selectdefaultpage.py
@@ -1,6 +1,6 @@
 # -*- coding: utf-8 -*-
-from plone.app.content.testing import PLONE_APP_CONTENT_AT_INTEGRATION_TESTING
-from plone.app.content.testing import PLONE_APP_CONTENT_DX_INTEGRATION_TESTING
+from plone.app.content.testing import PLONE_APP_CONTENT_AT_FUNCTIONAL_TESTING
+from plone.app.content.testing import PLONE_APP_CONTENT_DX_FUNCTIONAL_TESTING
 from plone.app.testing import TEST_USER_ID
 from plone.app.testing import setRoles
 from plone.testing.z2 import Browser
@@ -18,7 +18,7 @@
 
 class SelectDefaultPageDXTestCase(unittest.TestCase):
 
-    layer = PLONE_APP_CONTENT_DX_INTEGRATION_TESTING
+    layer = PLONE_APP_CONTENT_DX_FUNCTIONAL_TESTING
 
     def setUp(self):
         self.portal = self.layer['portal']
@@ -111,4 +111,4 @@ def test_default_page_action_save(self):
 
 class SelectDefaultPageATTestCase(SelectDefaultPageDXTestCase):
 
-    layer = PLONE_APP_CONTENT_AT_INTEGRATION_TESTING
+    layer = PLONE_APP_CONTENT_AT_FUNCTIONAL_TESTING


