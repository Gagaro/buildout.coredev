Repository: mockup


Branch: refs/heads/master
Date: 2015-07-07T16:36:58-05:00
Author: vangheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/mockup/commit/38446fb4360bbdc0b6ae4177501cf61f7d0b3019

rename "columns" and "selected" structure popover classes to "attribute-columns"
  and "selected-items" to prevent the possibility of clashing with other css
  as they are common class names.

Files changed:
M CHANGES.rst
M mockup/patterns/structure/js/views/app.js
M mockup/patterns/structure/js/views/columns.js
M mockup/patterns/structure/js/views/selectionwell.js
M mockup/patterns/structure/less/pattern.structure.less

diff --git a/CHANGES.rst b/CHANGES.rst
index 6babce0..eceabee 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,6 +4,11 @@ Changelog
 2.0.5 (unreleased)
 ------------------
 
+- rename "columns" and "selected" structure popover classes to "attribute-columns"
+  and "selected-items" to prevent the possibility of clashing with other css
+  as they are common class names.
+  [vangheem]
+
 - Update structure pattern to have buttons be more generic and extensible
   [vangheem]
 
diff --git a/mockup/patterns/structure/js/views/app.js b/mockup/patterns/structure/js/views/app.js
index 182fd71..ffc35a8 100644
--- a/mockup/patterns/structure/js/views/app.js
+++ b/mockup/patterns/structure/js/views/app.js
@@ -103,11 +103,11 @@ define([
 
       self.wellView = new SelectionWellView({
         collection: self.selectedCollection,
-        triggerView: self.toolbar.get('selected'),
+        triggerView: self.toolbar.get('selected-items'),
         app: self
       });
 
-      self.toolbar.get('selected').disable();
+      self.toolbar.get('selected-items').disable();
       self.buttons.disable();
 
       var timeout = 0;
@@ -193,10 +193,10 @@ define([
     updateButtons: function(){
       var self = this;
       if (self.selectedCollection.length) {
-        self.toolbar.get('selected').enable();
+        self.toolbar.get('selected-items').enable();
         self.buttons.enable();
       } else {
-        this.toolbar.get('selected').disable();
+        this.toolbar.get('selected-items').disable();
         self.buttons.disable();
       }
 
@@ -308,7 +308,7 @@ define([
       var items = [];
 
       var columnsBtn = new ButtonView({
-        id: 'columns',
+        id: 'attribute-columns',
         tooltip: 'Configure displayed columns',
         icon: 'th'
       });
@@ -321,7 +321,7 @@ define([
 
       items.push(new SelectionButtonView({
         title: 'Selected',
-        id: 'selected',
+        id: 'selected-items',
         collection: this.selectedCollection
       }));
 
diff --git a/mockup/patterns/structure/js/views/columns.js b/mockup/patterns/structure/js/views/columns.js
index 3dcb844..15cc422 100644
--- a/mockup/patterns/structure/js/views/columns.js
+++ b/mockup/patterns/structure/js/views/columns.js
@@ -8,7 +8,7 @@ define([
   'use strict';
 
   var ColumnsView = PopoverView.extend({
-    className: 'popover columns',
+    className: 'popover attribute-columns',
     title: _.template('Columns'),
     content: _.template(
       '<label><%- _t("Select columns to show, drag and drop to reorder") %></label>' +
diff --git a/mockup/patterns/structure/js/views/selectionwell.js b/mockup/patterns/structure/js/views/selectionwell.js
index f5d1db7..9f1a53e 100644
--- a/mockup/patterns/structure/js/views/selectionwell.js
+++ b/mockup/patterns/structure/js/views/selectionwell.js
@@ -8,7 +8,7 @@ define([
   'use strict';
 
   var WellView = PopoverView.extend({
-    className: 'popover selected',
+    className: 'popover selected-items',
     title: _.template('<input type="text" class="filter" placeholder="Filter" />' +
                       '<a href="#" class=" remove-all">' +
                         '<span class="glyphicon glyphicon-remove-circle"></span> <%- _t("remove all") %></a>'),
diff --git a/mockup/patterns/structure/less/pattern.structure.less b/mockup/patterns/structure/less/pattern.structure.less
index 996f673..00b0d96 100644
--- a/mockup/patterns/structure/less/pattern.structure.less
+++ b/mockup/patterns/structure/less/pattern.structure.less
@@ -111,7 +111,7 @@
         min-height: inherit;
         margin-bottom: 5px;
 
-        .btn-group, #selected{
+        .btn-group{
             margin-left: 5px;
         }
     }
@@ -160,12 +160,12 @@
 
     /* button overrides to make it look
        more streamlined */
-    #btn-columns{
+    #btn-attribute-columns{
         border-top-right-radius: 0;
         border-bottom-right-radius: 0;
         border-right: 0;
     }
-    #btn-selected, #btn-rearrange, #btn-upload{
+    #btn-selected-items, #btn-rearrange, #btn-upload{
         border-radius: 0;
         border-right: 0;
     }
@@ -190,10 +190,10 @@
         }
     }
     @media all and (max-width: 620px) {
-        #btn-columns{
+        #btn-attribute-columns{
             display:none;
         }
-        #btn-selected{
+        #btn-selected-items{
             border-top-left-radius: 3px;
             border-bottom-left-radius: 3px;
             border-left: 1px solid #cccccc;
@@ -264,7 +264,7 @@
     }
 }
 
-.popover.selected {
+.popover.selected-items {
     .items {
         max-height: 300px;
         overflow-y: auto;
@@ -320,7 +320,7 @@
     }
 }
 
-.popover.columns{
+.popover.attribute-columns{
     ul{
         list-style: none;
         margin: 0;


Repository: mockup


Branch: refs/heads/master
Date: 2015-07-07T16:44:43-05:00
Author: vangheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/mockup/commit/c78d6549e80ee3526f1474631f8202f613511d06

fix tests

Files changed:
M mockup/patterns/filemanager/pattern.js
M mockup/tests/pattern-structure-test.js

diff --git a/mockup/patterns/filemanager/pattern.js b/mockup/patterns/filemanager/pattern.js
index 7ccdbbe..f6773e2 100644
--- a/mockup/patterns/filemanager/pattern.js
+++ b/mockup/patterns/filemanager/pattern.js
@@ -500,9 +500,8 @@ define([
           //This forces ace to redraw if the container has changed size
           self.ace.editor.resize();
           self.ace.editor.$blockScrolling = Infinity;
+          self.ace.editor.focus();
         }
-
-        self.ace.editor.focus();
     },
     setUploadUrl: function(path) {
       var self = this;
diff --git a/mockup/tests/pattern-structure-test.js b/mockup/tests/pattern-structure-test.js
index e113678..59318b8 100644
--- a/mockup/tests/pattern-structure-test.js
+++ b/mockup/tests/pattern-structure-test.js
@@ -148,7 +148,7 @@ define([
       cb[0].checked = true;
       cb.trigger('change');
       this.clock.tick(500);
-      expect(this.$el.find('#btn-selected').html()).to.contain('1');
+      expect(this.$el.find('#btn-selected-items').html()).to.contain('1');
     });
 
     it('remove item from selection well', function() {
@@ -158,7 +158,7 @@ define([
       $item1[0].checked = true;
       $item1.trigger('change');
       this.$el.find('.items.popover-content a.remove').trigger('click').trigger('change');
-      expect(this.$el.find('#btn-selected').html()).to.contain('0');
+      expect(this.$el.find('#btn-selected-items').html()).to.contain('0');
     });
 
     it('remove all from selection well', function() {
@@ -172,10 +172,10 @@ define([
       $item2[0].checked = true;
       $item2.trigger('change');
       this.clock.tick(1000);
-      expect(this.$el.find('#btn-selected').html()).to.contain('2');
-      this.$el.find('.popover.selected a.remove-all').trigger('click');
+      expect(this.$el.find('#btn-selected-items').html()).to.contain('2');
+      this.$el.find('.popover.selected-items a.remove-all').trigger('click');
       this.clock.tick(1000);
-      expect(this.$el.find('#btn-selected').html()).to.contain('0');
+      expect(this.$el.find('#btn-selected-items').html()).to.contain('0');
     });
 
     it('paging', function() {
@@ -235,7 +235,7 @@ define([
       $item[0].checked = true;
       $item.trigger('change');
       this.clock.tick(1000);
-      expect(this.$el.find('#btn-selected').html()).to.contain('16');
+      expect(this.$el.find('#btn-selected-items').html()).to.contain('16');
 
     });
 
@@ -247,10 +247,10 @@ define([
       var $item = this.$el.find('table th .select-all');
       $item[0].checked = true;
       $item.trigger('change');
-      expect(this.$el.find('#btn-selected').html()).to.contain('16');
+      expect(this.$el.find('#btn-selected-items').html()).to.contain('16');
       $item[0].checked = false;
       $item.trigger('change');
-      expect(this.$el.find('#btn-selected').html()).to.contain('0');
+      expect(this.$el.find('#btn-selected-items').html()).to.contain('0');
     });
 
     it('test current folder buttons do not show on root', function() {
@@ -281,7 +281,7 @@ define([
       $checkbox[0].checked = true;
       $checkbox.trigger('change');
       this.clock.tick(1000);
-      expect(this.$el.find('#btn-selected').html()).to.contain('1');
+      expect(this.$el.find('#btn-selected-items').html()).to.contain('1');
     });
 
   });


Repository: mockup


Branch: refs/heads/master
Date: 2015-07-07T16:50:47-05:00
Author: Sam Schwartz (obct537) <schwas45@uwosh.edu>
Commit: https://github.com/plone/mockup/commit/f8095fa1916782c5d73374b55248efe8cc19e8a6

Merge pull request #514 from plone/rename-structure-classes

Rename structure popover classes

Files changed:
M CHANGES.rst
M mockup/patterns/filemanager/pattern.js
M mockup/patterns/structure/js/views/app.js
M mockup/patterns/structure/js/views/columns.js
M mockup/patterns/structure/js/views/selectionwell.js
M mockup/patterns/structure/less/pattern.structure.less
M mockup/tests/pattern-structure-test.js

diff --git a/CHANGES.rst b/CHANGES.rst
index 6babce0..eceabee 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,6 +4,11 @@ Changelog
 2.0.5 (unreleased)
 ------------------
 
+- rename "columns" and "selected" structure popover classes to "attribute-columns"
+  and "selected-items" to prevent the possibility of clashing with other css
+  as they are common class names.
+  [vangheem]
+
 - Update structure pattern to have buttons be more generic and extensible
   [vangheem]
 
diff --git a/mockup/patterns/filemanager/pattern.js b/mockup/patterns/filemanager/pattern.js
index 7ccdbbe..f6773e2 100644
--- a/mockup/patterns/filemanager/pattern.js
+++ b/mockup/patterns/filemanager/pattern.js
@@ -500,9 +500,8 @@ define([
           //This forces ace to redraw if the container has changed size
           self.ace.editor.resize();
           self.ace.editor.$blockScrolling = Infinity;
+          self.ace.editor.focus();
         }
-
-        self.ace.editor.focus();
     },
     setUploadUrl: function(path) {
       var self = this;
diff --git a/mockup/patterns/structure/js/views/app.js b/mockup/patterns/structure/js/views/app.js
index 182fd71..ffc35a8 100644
--- a/mockup/patterns/structure/js/views/app.js
+++ b/mockup/patterns/structure/js/views/app.js
@@ -103,11 +103,11 @@ define([
 
       self.wellView = new SelectionWellView({
         collection: self.selectedCollection,
-        triggerView: self.toolbar.get('selected'),
+        triggerView: self.toolbar.get('selected-items'),
         app: self
       });
 
-      self.toolbar.get('selected').disable();
+      self.toolbar.get('selected-items').disable();
       self.buttons.disable();
 
       var timeout = 0;
@@ -193,10 +193,10 @@ define([
     updateButtons: function(){
       var self = this;
       if (self.selectedCollection.length) {
-        self.toolbar.get('selected').enable();
+        self.toolbar.get('selected-items').enable();
         self.buttons.enable();
       } else {
-        this.toolbar.get('selected').disable();
+        this.toolbar.get('selected-items').disable();
         self.buttons.disable();
       }
 
@@ -308,7 +308,7 @@ define([
       var items = [];
 
       var columnsBtn = new ButtonView({
-        id: 'columns',
+        id: 'attribute-columns',
         tooltip: 'Configure displayed columns',
         icon: 'th'
       });
@@ -321,7 +321,7 @@ define([
 
       items.push(new SelectionButtonView({
         title: 'Selected',
-        id: 'selected',
+        id: 'selected-items',
         collection: this.selectedCollection
       }));
 
diff --git a/mockup/patterns/structure/js/views/columns.js b/mockup/patterns/structure/js/views/columns.js
index 3dcb844..15cc422 100644
--- a/mockup/patterns/structure/js/views/columns.js
+++ b/mockup/patterns/structure/js/views/columns.js
@@ -8,7 +8,7 @@ define([
   'use strict';
 
   var ColumnsView = PopoverView.extend({
-    className: 'popover columns',
+    className: 'popover attribute-columns',
     title: _.template('Columns'),
     content: _.template(
       '<label><%- _t("Select columns to show, drag and drop to reorder") %></label>' +
diff --git a/mockup/patterns/structure/js/views/selectionwell.js b/mockup/patterns/structure/js/views/selectionwell.js
index f5d1db7..9f1a53e 100644
--- a/mockup/patterns/structure/js/views/selectionwell.js
+++ b/mockup/patterns/structure/js/views/selectionwell.js
@@ -8,7 +8,7 @@ define([
   'use strict';
 
   var WellView = PopoverView.extend({
-    className: 'popover selected',
+    className: 'popover selected-items',
     title: _.template('<input type="text" class="filter" placeholder="Filter" />' +
                       '<a href="#" class=" remove-all">' +
                         '<span class="glyphicon glyphicon-remove-circle"></span> <%- _t("remove all") %></a>'),
diff --git a/mockup/patterns/structure/less/pattern.structure.less b/mockup/patterns/structure/less/pattern.structure.less
index 996f673..00b0d96 100644
--- a/mockup/patterns/structure/less/pattern.structure.less
+++ b/mockup/patterns/structure/less/pattern.structure.less
@@ -111,7 +111,7 @@
         min-height: inherit;
         margin-bottom: 5px;
 
-        .btn-group, #selected{
+        .btn-group{
             margin-left: 5px;
         }
     }
@@ -160,12 +160,12 @@
 
     /* button overrides to make it look
        more streamlined */
-    #btn-columns{
+    #btn-attribute-columns{
         border-top-right-radius: 0;
         border-bottom-right-radius: 0;
         border-right: 0;
     }
-    #btn-selected, #btn-rearrange, #btn-upload{
+    #btn-selected-items, #btn-rearrange, #btn-upload{
         border-radius: 0;
         border-right: 0;
     }
@@ -190,10 +190,10 @@
         }
     }
     @media all and (max-width: 620px) {
-        #btn-columns{
+        #btn-attribute-columns{
             display:none;
         }
-        #btn-selected{
+        #btn-selected-items{
             border-top-left-radius: 3px;
             border-bottom-left-radius: 3px;
             border-left: 1px solid #cccccc;
@@ -264,7 +264,7 @@
     }
 }
 
-.popover.selected {
+.popover.selected-items {
     .items {
         max-height: 300px;
         overflow-y: auto;
@@ -320,7 +320,7 @@
     }
 }
 
-.popover.columns{
+.popover.attribute-columns{
     ul{
         list-style: none;
         margin: 0;
diff --git a/mockup/tests/pattern-structure-test.js b/mockup/tests/pattern-structure-test.js
index e113678..59318b8 100644
--- a/mockup/tests/pattern-structure-test.js
+++ b/mockup/tests/pattern-structure-test.js
@@ -148,7 +148,7 @@ define([
       cb[0].checked = true;
       cb.trigger('change');
       this.clock.tick(500);
-      expect(this.$el.find('#btn-selected').html()).to.contain('1');
+      expect(this.$el.find('#btn-selected-items').html()).to.contain('1');
     });
 
     it('remove item from selection well', function() {
@@ -158,7 +158,7 @@ define([
       $item1[0].checked = true;
       $item1.trigger('change');
       this.$el.find('.items.popover-content a.remove').trigger('click').trigger('change');
-      expect(this.$el.find('#btn-selected').html()).to.contain('0');
+      expect(this.$el.find('#btn-selected-items').html()).to.contain('0');
     });
 
     it('remove all from selection well', function() {
@@ -172,10 +172,10 @@ define([
       $item2[0].checked = true;
       $item2.trigger('change');
       this.clock.tick(1000);
-      expect(this.$el.find('#btn-selected').html()).to.contain('2');
-      this.$el.find('.popover.selected a.remove-all').trigger('click');
+      expect(this.$el.find('#btn-selected-items').html()).to.contain('2');
+      this.$el.find('.popover.selected-items a.remove-all').trigger('click');
       this.clock.tick(1000);
-      expect(this.$el.find('#btn-selected').html()).to.contain('0');
+      expect(this.$el.find('#btn-selected-items').html()).to.contain('0');
     });
 
     it('paging', function() {
@@ -235,7 +235,7 @@ define([
       $item[0].checked = true;
       $item.trigger('change');
       this.clock.tick(1000);
-      expect(this.$el.find('#btn-selected').html()).to.contain('16');
+      expect(this.$el.find('#btn-selected-items').html()).to.contain('16');
 
     });
 
@@ -247,10 +247,10 @@ define([
       var $item = this.$el.find('table th .select-all');
       $item[0].checked = true;
       $item.trigger('change');
-      expect(this.$el.find('#btn-selected').html()).to.contain('16');
+      expect(this.$el.find('#btn-selected-items').html()).to.contain('16');
       $item[0].checked = false;
       $item.trigger('change');
-      expect(this.$el.find('#btn-selected').html()).to.contain('0');
+      expect(this.$el.find('#btn-selected-items').html()).to.contain('0');
     });
 
     it('test current folder buttons do not show on root', function() {
@@ -281,7 +281,7 @@ define([
       $checkbox[0].checked = true;
       $checkbox.trigger('change');
       this.clock.tick(1000);
-      expect(this.$el.find('#btn-selected').html()).to.contain('1');
+      expect(this.$el.find('#btn-selected-items').html()).to.contain('1');
     });
 
   });


