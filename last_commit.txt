Repository: Products.CMFPlone
Branch: refs/heads/master
Date: 2015-04-07T12:22:46+02:00
Author: Timo Stollenwerk (tisto) <tisto@plone.org>
Commit: https://github.com/plone/Products.CMFPlone/commit/9cce4be4ae0ec509f5e6096b1b3299f3dc5bb121

Include controlpanel docs in the test runner; add docs for language control panel.

Files changed:
A Products/CMFPlone/controlpanel/tests/test_doctests.py
M Products/CMFPlone/controlpanel/README.rst

diff --git a/Products/CMFPlone/controlpanel/README.rst b/Products/CMFPlone/controlpanel/README.rst
index 718c1dd..c9ba74d 100644
--- a/Products/CMFPlone/controlpanel/README.rst
+++ b/Products/CMFPlone/controlpanel/README.rst
@@ -30,9 +30,7 @@ Now the enable_livesearch should disabled::
   >>> search_settings.enable_livesearch
   False
 
-For more informations about how to access and manipulate Plone registry eintries, look at
-the `plone.registry documentation
-<https://github.com/plone/plone.registry/blob/master/plone/registry/registry.rst>`_:
+For more informations about how to access and manipulate Plone registry entries, have a look at the `plone.registry documentation <https://github.com/plone/plone.registry/blob/master/plone/registry/registry.rst>`_:
 
 
 Editing Control Panel
@@ -62,6 +60,52 @@ Editing Control Panel
   >>> editing_settings.lock_on_ttw_edit = False
 
 
+Language Control Panel
+----------------------
+
+  >>> from Products.CMFPlone.interfaces import ILanguageSchema
+  >>> language_settings = registry.forInterface(ILanguageSchema, prefix='plone')
+
+  >>> language_settings.default_language
+  'en'
+
+  >>> language_settings.available_languages
+  ['en']
+
+  >>> language_settings.use_combined_language_codes
+  False
+
+  >>> language_settings.display_flags
+  False
+
+  >>> language_settings.always_show_selector
+  False
+
+  >>> language_settings.use_content_negotiation
+  False
+
+  >>> language_settings.use_path_negotiation
+  False
+
+  >>> language_settings.use_cookie_negotiation
+  False
+
+  >>> language_settings.authenticated_users_only
+  False
+
+  >>> language_settings.set_cookie_always
+  False
+
+  >>> language_settings.use_subdomain_negotiation
+  False
+
+  >>> language_settings.use_cctld_negotiation
+  False
+
+  >>> language_settings.use_request_negotiation
+  False
+
+
 Maintenance Control Panel
 -------------------------
 
@@ -151,7 +195,7 @@ Overview Control Panel
 
 
 Markup Control Panel
-------------------------
+--------------------
 
   >>> from Products.CMFPlone.interfaces import IMarkupSchema
   >>> markup_settings = registry.forInterface(IMarkupSchema, prefix='plone')
@@ -161,7 +205,7 @@ Markup Control Panel
 
 
 User and Groups Control Panel
-------------------
+------------------------------
 
   >>> from Products.CMFPlone.interfaces import IUserGroupsSettingsSchema
   >>> usergroups_settings = registry.forInterface(IUserGroupsSettingsSchema, prefix='plone')
diff --git a/Products/CMFPlone/controlpanel/tests/test_doctests.py b/Products/CMFPlone/controlpanel/tests/test_doctests.py
new file mode 100644
index 0000000..a48df3a
--- /dev/null
+++ b/Products/CMFPlone/controlpanel/tests/test_doctests.py
@@ -0,0 +1,20 @@
+# -*- coding: utf-8 -*-
+from Products.CMFPlone.testing import PRODUCTS_CMFPLONE_FUNCTIONAL_TESTING
+from plone.testing import layered
+import doctest
+import unittest
+
+
+tests = ('../README.rst',)
+
+
+def test_suite():
+    return unittest.TestSuite(
+        [
+            layered(
+                doctest.DocFileSuite(f, optionflags=doctest.ELLIPSIS),
+                layer=PRODUCTS_CMFPLONE_FUNCTIONAL_TESTING
+            )
+            for f in tests
+        ]
+    )


