Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2015-09-13T12:11:55+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/Products.CMFPlone/commit/e5738436aecd6333a1952d32c3eac3cd40865599

Allow creation of multiple plone-site in @@plone-overview. Fix #838

Files changed:
M Products/CMFPlone/browser/templates/plone-overview.pt

diff --git a/Products/CMFPlone/browser/templates/plone-overview.pt b/Products/CMFPlone/browser/templates/plone-overview.pt
index fe072e4..ef57644 100644
--- a/Products/CMFPlone/browser/templates/plone-overview.pt
+++ b/Products/CMFPlone/browser/templates/plone-overview.pt
@@ -106,20 +106,24 @@
                     </ul>
                 </tal:many>
             </tal:block>
-            <li tal:condition="not:sites">
-                <span i18n:translate="">
+            <li>
+                <span i18n:translate="" tal:condition="not:sites">
                     Your Plone site has not been added yet:
                 </span>
+                <span i18n:translate="" tal:condition="sites">
+                    You can add another Plone site:
+                </span>
                 <form id="add-plone-site"
                       method="get"
                       action="#"
+                      tal:define="site_number python: '' if not sites else len(sites) + 1"
                       tal:attributes="action string:${context/absolute_url}/@@plone-addsite">
-                    <input type="hidden" name="site_id" value="Plone" />
+                    <input type="hidden" name="site_id" value="Plone${site_number}" />
                     <input type="submit"
                            i18n:attributes="value;"
                            value="Create a new Plone site" />
                     <a class="discreet"
-                       tal:attributes="href string:${context/absolute_url}/@@plone-addsite?site_id=Plone&advanced=1"
+                       tal:attributes="href string:${context/absolute_url}/@@plone-addsite?site_id=Plone${site_number}&advanced=1"
                        >Advanced</a>
                 </form>
             </li>


