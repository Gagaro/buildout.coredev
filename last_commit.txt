Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2015-09-24T15:51:13+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.app.upgrade/commit/d4d7fe0805fd5f81e2259a3202ca906741b721b4

Fix migration of typesUseViewActionInListings to registry.

Files changed:
M CHANGES.rst
M plone/app/upgrade/v50/betas.py

diff --git a/CHANGES.rst b/CHANGES.rst
index d088348..8747bba 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,6 +4,9 @@ Changelog
 1.3.18 (unreleased)
 -------------------
 
+- Fix migration of typesUseViewActionInListings to registry.
+  [pbauer]
+
 - Fix incorrect interate import.
   [alecm]
 
diff --git a/plone/app/upgrade/v50/betas.py b/plone/app/upgrade/v50/betas.py
index 8f5708f..c0dbd3a 100644
--- a/plone/app/upgrade/v50/betas.py
+++ b/plone/app/upgrade/v50/betas.py
@@ -564,7 +564,7 @@ def _migrate_list(original_id, new_id=None):
             registry['plone.%s' % new_id] = value
             site_properties._delProperty(original_id)
 
-    _migrate_list('typesLinkToFolderContentsInFC',
+    _migrate_list('typesUseViewActionInListings',
                   'types_use_view_action_in_listings')
     _migrate_list('default_page')
     _migrate_list('parentMetaTypesNotToQuery', 'parent_types_not_to_query')


