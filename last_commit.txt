Repository: plone.app.layout


Branch: refs/heads/master
Date: 2015-08-04T13:33:20-05:00
Author: vangheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/plone.app.layout/commit/e65e89059ed484ee50634a4cabd8d9c28f5992bd

If toolbar logo is empty, use default

Files changed:
M CHANGES.rst
M plone/app/layout/viewlets/toolbar.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 32efbd0..64c5fe1 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,6 +4,9 @@ Changelog
 2.5.10 (unreleased)
 -------------------
 
+- If toolbar logo is empty, use default
+  [vangheem]
+
 - Move getDefaultPage, isDefaultPage, IDefaultPage and DefaultPage view to
   Products.CMFPlone in order to avoid circular imports between both packages.
   Moved test for it as well. Placed deferred deprecated imports for all old
diff --git a/plone/app/layout/viewlets/toolbar.py b/plone/app/layout/viewlets/toolbar.py
index d8be2df..cbda321 100644
--- a/plone/app/layout/viewlets/toolbar.py
+++ b/plone/app/layout/viewlets/toolbar.py
@@ -35,6 +35,8 @@ def get_toolbar_logo(self):
             logo = settings.toolbar_logo
         except AttributeError:
             logo = '/++plone++static/plone-toolbarlogo.svg'
+        if not logo:
+            logo = '/++plone++static/plone-toolbarlogo.svg'
         return portal_url + logo
 
     def show_switcher(self):


