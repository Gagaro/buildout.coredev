Repository: plone.app.jquerytools
Branch: refs/heads/master
Date: 2015-03-27T23:40:10+01:00
Author: Johannes Raggam (thet) <raggam-nl@adm.at>
Commit: https://github.com/plone/plone.app.jquerytools/commit/c2ebd5d19731c1797d3392491961eec54c588765

Move jQueryTools tooltip into separate file, so that it can be selectively disabled.

Files changed:
A plone/app/jquerytools/browser/jquery.tools.tooltip.js
A plone/app/jquerytools/browser/jquery.tools.tooltip.min.js
A plone/app/jquerytools/browser/jquery.tools.tooltip.plugins.js
A plone/app/jquerytools/browser/jquery.tools.tooltip.plugins.min.js
M CHANGES.rst
M Gruntfile.js
M plone/app/jquerytools/browser/jquery.form.js
M plone/app/jquerytools/browser/jquery.tools.js
M plone/app/jquerytools/browser/jquery.tools.min.js
M plone/app/jquerytools/browser/jquery.tools.plugins.js
M plone/app/jquerytools/browser/jquery.tools.plugins.min.js
M plone/app/jquerytools/configure.zcml
M plone/app/jquerytools/profiles/default/jsregistry.xml
M plone/app/jquerytools/profiles/default/metadata.xml
M plone/app/jquerytools/profiles/development/jsregistry.xml
M plone/app/jquerytools/upgrades/__init__.py
M plone/app/jquerytools/upgrades/configure.zcml
M setup.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 3bb3023..1b465e1 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -1,9 +1,13 @@
 Changelog
 =========
 
-1.6.3 (unreleased)
+1.7.0 (unreleased)
 ------------------
 
+- Move jQueryTools tooltip into separate file, so that it can be selectively
+  disabled.
+  [thet]
+
 - Disable unminified development javascript in default profile.
   [thet]
 
diff --git a/Gruntfile.js b/Gruntfile.js
index 1326c01..914196a 100644
--- a/Gruntfile.js
+++ b/Gruntfile.js
@@ -29,7 +29,6 @@ module.exports = function (grunt) {
                     'repo-jquerytools/src/tabs/tabs.js',
                     'repo-jquerytools/src/toolbox/toolbox.history.js',
                     'repo-jquerytools/src/toolbox/toolbox.expose.js',
-                    'repo-jquerytools/src/tooltip/tooltip.js',
                 ],
                 dest: 'plone/app/jquerytools/browser/jquery.tools.js'
             },
@@ -41,10 +40,21 @@ module.exports = function (grunt) {
                     'repo-jquerytools/src/tabs/tabs.slideshow.js',
                     'repo-jquerytools/src/toolbox/toolbox.flashembed.js',
                     'repo-jquerytools/src/toolbox/toolbox.mousewheel.js',
+                ],
+                dest: 'plone/app/jquerytools/browser/jquery.tools.plugins.js'
+            },
+            jquerytools_tooltip: {
+                src: [
+                    'repo-jquerytools/src/tooltip/tooltip.js',
+                ],
+                dest: 'plone/app/jquerytools/browser/jquery.tools.tooltip.js'
+            },
+            jquerytools_tooltip_plugins: {
+                src: [
                     'repo-jquerytools/src/tooltip/tooltip.dynamic.js',
                     'repo-jquerytools/src/tooltip/tooltip.slide.js',
                 ],
-                dest: 'plone/app/jquerytools/browser/jquery.tools.plugins.js'
+                dest: 'plone/app/jquerytools/browser/jquery.tools.tooltip.plugins.js'
             },
             jquerytools_dateinput: {
                 src: [
@@ -79,6 +89,8 @@ module.exports = function (grunt) {
             jquery_form: {
                 files: {
                     'plone/app/jquerytools/browser/jquery.form.min.js': ['plone/app/jquerytools/browser/jquery.form.js', ],
+                    'plone/app/jquerytools/browser/jquery.tools.tooltip.min.js': ['plone/app/jquerytools/browser/jquery.tools.tooltip.js', ],
+                    'plone/app/jquerytools/browser/jquery.tools.tooltip.plugins.min.js': ['plone/app/jquerytools/browser/jquery.tools.tooltip.plugins.js', ],
                     'plone/app/jquerytools/browser/jquery.tools.dateinput.min.js': ['plone/app/jquerytools/browser/jquery.tools.dateinput.js', ],
                     'plone/app/jquerytools/browser/jquery.tools.min.js': ['plone/app/jquerytools/browser/jquery.tools.js', ],
                     'plone/app/jquerytools/browser/jquery.tools.rangeinput.min.js': ['plone/app/jquerytools/browser/jquery.tools.rangeinput.js', ],
diff --git a/plone/app/jquerytools/browser/jquery.form.js b/plone/app/jquerytools/browser/jquery.form.js
index 91b5a73..591ad6f 100644
--- a/plone/app/jquerytools/browser/jquery.form.js
+++ b/plone/app/jquerytools/browser/jquery.form.js
@@ -10,7 +10,20 @@
  */
 /*global ActiveXObject */
 
+// AMD support
+(function (factory) {
+    "use strict";
+    if (typeof define === 'function' && define.amd) {
+        // using AMD; register as anon module
+        define(['jquery'], factory);
+    } else {
+        // no AMD; invoke directly
+        factory( (typeof(jQuery) != 'undefined') ? jQuery : window.Zepto );
+    }
+}
 
+(function($) {
+"use strict";
 
 /*
     Usage Note:
@@ -1261,4 +1274,4 @@ function log() {
     }
 }
 
-
+}));
diff --git a/plone/app/jquerytools/browser/jquery.tools.js b/plone/app/jquerytools/browser/jquery.tools.js
index 89dce6a..10cd014 100644
--- a/plone/app/jquerytools/browser/jquery.tools.js
+++ b/plone/app/jquerytools/browser/jquery.tools.js
@@ -1323,364 +1323,3 @@
 
 
 })(jQuery);
-
-
-/**
- * @license 
- * jQuery Tools @VERSION Tooltip - UI essentials
- * 
- * NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.
- * 
- * http://flowplayer.org/tools/tooltip/
- *
- * Since: November 2008
- * Date: @DATE 
- */
-(function($) { 	
-	// static constructs
-	$.tools = $.tools || {version: '@VERSION'};
-	
-	$.tools.tooltip = {
-		
-		conf: { 
-			
-			// default effect variables
-			effect: 'toggle',			
-			fadeOutSpeed: "fast",
-			predelay: 0,
-			delay: 30,
-			opacity: 1,			
-			tip: 0,
-            fadeIE: false, // enables fade effect in IE
-			
-			// 'top', 'bottom', 'right', 'left', 'center'
-			position: ['top', 'center'], 
-			offset: [0, 0],
-			relative: false,
-			cancelDefault: true,
-			
-			// type to event mapping 
-			events: {
-				def: 			"mouseenter,mouseleave",
-				input: 		"focus,blur",
-				widget:		"focus mouseenter,blur mouseleave",
-				tooltip:		"mouseenter,mouseleave"
-			},
-			
-			// 1.2
-			layout: '<div/>',
-			tipClass: 'tooltip'
-		},
-		
-		addEffect: function(name, loadFn, hideFn) {
-			effects[name] = [loadFn, hideFn];	
-		} 
-	};
-	
-	
-	var effects = { 
-		toggle: [ 
-			function(done) { 
-				var conf = this.getConf(), tip = this.getTip(), o = conf.opacity;
-				if (o < 1) { tip.css({opacity: o}); }
-				tip.show();
-				done.call();
-			},
-			
-			function(done) { 
-				this.getTip().hide();
-				done.call();
-			} 
-		],
-		
-		fade: [
-			function(done) {
-				var conf = this.getConf();
-				if (!/msie/.test(navigator.userAgent.toLowerCase()) || conf.fadeIE) {
-					this.getTip().fadeTo(conf.fadeInSpeed, conf.opacity, done);
-				}
-				else {
-					this.getTip().show();
-					done();
-				}
-			},
-			function(done) {
-				var conf = this.getConf();
-				if (!/msie/.test(navigator.userAgent.toLowerCase()) || conf.fadeIE) {
-					this.getTip().fadeOut(conf.fadeOutSpeed, done);
-				}
-				else {
-					this.getTip().hide();
-					done();
-				}
-			}
-		]		
-	};   
-
-		
-	/* calculate tip position relative to the trigger */  	
-	function getPosition(trigger, tip, conf) {	
-
-		
-		// get origin top/left position 
-		var top = conf.relative ? trigger.position().top : trigger.offset().top, 
-			 left = conf.relative ? trigger.position().left : trigger.offset().left,
-			 pos = conf.position[0];
-
-		top  -= tip.outerHeight() - conf.offset[0];
-		left += trigger.outerWidth() + conf.offset[1];
-		
-		// iPad position fix
-		if (/iPad/i.test(navigator.userAgent)) {
-			top -= $(window).scrollTop();
-		}
-		
-		// adjust Y		
-		var height = tip.outerHeight() + trigger.outerHeight();
-		if (pos == 'center') 	{ top += height / 2; }
-		if (pos == 'bottom') 	{ top += height; }
-		
-		
-		// adjust X
-		pos = conf.position[1]; 	
-		var width = tip.outerWidth() + trigger.outerWidth();
-		if (pos == 'center') 	{ left -= width / 2; }
-		if (pos == 'left')   	{ left -= width; }	 
-		
-		return {top: top, left: left};
-	}		
-
-	
-	
-	function Tooltip(trigger, conf) {
-
-		var self = this, 
-			 fire = trigger.add(self),
-			 tip,
-			 timer = 0,
-			 pretimer = 0, 
-			 title = trigger.attr("title"),
-			 tipAttr = trigger.attr("data-tooltip"),
-			 effect = effects[conf.effect],
-			 shown,
-				 
-			 // get show/hide configuration
-			 isInput = trigger.is(":input"), 
-			 isWidget = isInput && trigger.is(":checkbox, :radio, select, :button, :submit"),			
-			 type = trigger.attr("type"),
-			 evt = conf.events[type] || conf.events[isInput ? (isWidget ? 'widget' : 'input') : 'def']; 
-		
-		
-		// check that configuration is sane
-		if (!effect) { throw "Nonexistent effect \"" + conf.effect + "\""; }					
-		
-		evt = evt.split(/,\s*/); 
-		if (evt.length != 2) { throw "Tooltip: bad events configuration for " + type; } 
-		
-		
-		// trigger --> show  
-		trigger.on(evt[0], function(e) {
-
-			clearTimeout(timer);
-			if (conf.predelay) {
-				pretimer = setTimeout(function() { self.show(e); }, conf.predelay);	
-				
-			} else {
-				self.show(e);	
-			}
-			
-		// trigger --> hide
-		}).on(evt[1], function(e)  {
-			clearTimeout(pretimer);
-			if (conf.delay)  {
-				timer = setTimeout(function() { self.hide(e); }, conf.delay);	
-				
-			} else {
-				self.hide(e);		
-			}
-			
-		}); 
-		
-		
-		// remove default title
-		if (title && conf.cancelDefault) { 
-			trigger.removeAttr("title");
-			trigger.data("title", title);			
-		}		
-		
-		$.extend(self, {
-				
-			show: function(e) {  
-
-				// tip not initialized yet
-				if (!tip) {
-					
-					// data-tooltip 
-					if (tipAttr) {
-						tip = $(tipAttr);
-
-					// single tip element for all
-					} else if (conf.tip) { 
-						tip = $(conf.tip).eq(0);
-						
-					// autogenerated tooltip
-					} else if (title) { 
-						tip = $(conf.layout).addClass(conf.tipClass).appendTo(document.body)
-							.hide().append(title);
-
-					// manual tooltip
-					} else {	
-						tip = trigger.find('.' + conf.tipClass);
-						if (!tip.length) { tip = trigger.next(); }
-						if (!tip.length) { tip = trigger.parent().next(); } 	 
-					}
-					
-					if (!tip.length) { throw "Cannot find tooltip for " + trigger;	}
-				} 
-			 	
-			 	if (self.isShown()) { return self; }  
-				
-			 	// stop previous animation
-			 	tip.stop(true, true); 			 	
-			 	
-				// get position
-				var pos = getPosition(trigger, tip, conf);			
-		
-				// restore title for single tooltip element
-				if (conf.tip) {
-					tip.html(trigger.data("title"));
-				}
-
-				// onBeforeShow
-				e = $.Event();
-				e.type = "onBeforeShow";
-				fire.trigger(e, [pos]);				
-				if (e.isDefaultPrevented()) { return self; }
-		
-				
-				// onBeforeShow may have altered the configuration
-				pos = getPosition(trigger, tip, conf);
-				
-				// set position
-				tip.css({position:'absolute', top: pos.top, left: pos.left});					
-				
-				shown = true;
-				
-				// invoke effect 
-				effect[0].call(self, function() {
-					e.type = "onShow";
-					shown = 'full';
-					fire.trigger(e);		 
-				});					
-
-	 	
-				// tooltip events       
-				var event = conf.events.tooltip.split(/,\s*/);
-
-				if (!tip.data("__set")) {
-					
-					tip.off(event[0]).on(event[0], function() { 
-						clearTimeout(timer);
-						clearTimeout(pretimer);
-					});
-					
-					if (event[1] && !trigger.is("input:not(:checkbox, :radio), textarea")) { 					
-						tip.off(event[1]).on(event[1], function(e) {
-	
-							// being moved to the trigger element
-							if (e.relatedTarget != trigger[0]) {
-								trigger.trigger(evt[1].split(" ")[0]);
-							}
-						}); 
-					} 
-					
-					// bind agein for if same tip element
-					if (!conf.tip) tip.data("__set", true);
-				}
-				
-				return self;
-			},
-			
-			hide: function(e) {
-
-				if (!tip || !self.isShown()) { return self; }
-			
-				// onBeforeHide
-				e = $.Event();
-				e.type = "onBeforeHide";
-				fire.trigger(e);				
-				if (e.isDefaultPrevented()) { return; }
-	
-				shown = false;
-				
-				effects[conf.effect][1].call(self, function() {
-					e.type = "onHide";
-					fire.trigger(e);		 
-				});
-				
-				return self;
-			},
-			
-			isShown: function(fully) {
-				return fully ? shown == 'full' : shown;	
-			},
-				
-			getConf: function() {
-				return conf;	
-			},
-				
-			getTip: function() {
-				return tip;	
-			},
-			
-			getTrigger: function() {
-				return trigger;	
-			}		
-
-		});		
-
-		// callbacks	
-		$.each("onHide,onBeforeShow,onShow,onBeforeHide".split(","), function(i, name) {
-				
-			// configuration
-			if ($.isFunction(conf[name])) { 
-				$(self).on(name, conf[name]); 
-			}
-
-			// API
-			self[name] = function(fn) {
-				if (fn) { $(self).on(name, fn); }
-				return self;
-			};
-		});
-		
-	}
-		
-	
-	// jQuery plugin implementation
-	$.fn.tooltip = function(conf) {
-		
-		// return existing instance
-		var api = this.data("tooltip");
-		if (api) { return api; }
-
-		conf = $.extend(true, {}, $.tools.tooltip.conf, conf);
-		
-		// position can also be given as string
-		if (typeof conf.position == 'string') {
-			conf.position = conf.position.split(/,?\s/);	
-		}
-		
-		// install tooltip for each entry in jQuery object
-		this.each(function() {
-			api = new Tooltip($(this), conf); 
-			$(this).data("tooltip", api); 
-		});
-		
-		return conf.api ? api: this;		 
-	};
-		
-}) (jQuery);
-
-		
-
diff --git a/plone/app/jquerytools/browser/jquery.tools.min.js b/plone/app/jquerytools/browser/jquery.tools.min.js
index 4d2e5c5..b1d3242 100644
--- a/plone/app/jquerytools/browser/jquery.tools.min.js
+++ b/plone/app/jquerytools/browser/jquery.tools.min.js
@@ -1 +1 @@
-!function($){function Overlay(trigger,conf){var closers,overlay,opened,self=this,fire=trigger.add(self),w=$(window),maskConf=$.tools.expose&&(conf.mask||conf.expose),uid=Math.random().toString().slice(10);maskConf&&("string"==typeof maskConf&&(maskConf={color:maskConf}),maskConf.closeOnClick=maskConf.closeOnEsc=!1);var jq=conf.target||trigger.attr("rel");if(overlay=jq?$(jq):null||trigger,!overlay.length)throw"Could not find Overlay: "+jq;trigger&&-1==trigger.index(overlay)&&trigger.click(function(e){return self.load(e),e.preventDefault()}),$.extend(self,{load:function(e){if(self.isOpened())return self;var eff=effects[conf.effect];if(!eff)throw'Overlay: cannot find effect : "'+conf.effect+'"';if(conf.oneInstance&&$.each(instances,function(){this.close(e)}),e=e||$.Event(),e.type="onBeforeLoad",fire.trigger(e),e.isDefaultPrevented())return self;opened=!0,maskConf&&$(overlay).expose(maskConf);var top=conf.top,left=conf.left,oWidth=overlay.outerWidth(!0),oHeight=overlay.outerHeight(!0);return"string"==typeof top&&(top="center"==top?Math.max((w.height()-oHeight)/2,0):parseInt(top,10)/100*w.height()),"center"==left&&(left=Math.max((w.width()-oWidth)/2,0)),eff[0].call(self,{top:top,left:left},function(){opened&&(e.type="onLoad",fire.trigger(e))}),maskConf&&conf.closeOnClick&&$.mask.getMask().one("click",self.close),conf.closeOnClick&&$(document).on("click."+uid,function(e){$(e.target).parents(overlay).length||self.close(e)}),conf.closeOnEsc&&$(document).on("keydown."+uid,function(e){27==e.keyCode&&self.close(e)}),self},close:function(e){return self.isOpened()?(e=e||$.Event(),e.type="onBeforeClose",fire.trigger(e),e.isDefaultPrevented()?void 0:(opened=!1,effects[conf.effect][1].call(self,function(){e.type="onClose",fire.trigger(e)}),$(document).off("click."+uid+" keydown."+uid),maskConf&&$.mask.close(),self)):self},getOverlay:function(){return overlay},getTrigger:function(){return trigger},getClosers:function(){return closers},isOpened:function(){return opened},getConf:function(){return conf}}),$.each("onBeforeLoad,onStart,onLoad,onBeforeClose,onClose".split(","),function(i,name){$.isFunction(conf[name])&&$(self).on(name,conf[name]),self[name]=function(fn){return fn&&$(self).on(name,fn),self}}),closers=overlay.find(conf.close||".close"),closers.length||conf.close||(closers=$('<a class="close"></a>'),overlay.prepend(closers)),closers.click(function(e){self.close(e)}),conf.load&&self.load()}$.tools=$.tools||{version:"@VERSION"},$.tools.overlay={addEffect:function(name,loadFn,closeFn){effects[name]=[loadFn,closeFn]},conf:{close:null,closeOnClick:!0,closeOnEsc:!0,closeSpeed:"fast",effect:"default",fixed:!/msie/.test(navigator.userAgent.toLowerCase())||navigator.appVersion>6,left:"center",load:!1,mask:null,oneInstance:!0,speed:"normal",target:null,top:"10%"}};var instances=[],effects={};$.tools.overlay.addEffect("default",function(pos,onLoad){var conf=this.getConf(),w=$(window);conf.fixed||(pos.top+=w.scrollTop(),pos.left+=w.scrollLeft()),pos.position=conf.fixed?"fixed":"absolute",this.getOverlay().css(pos).fadeIn(conf.speed,onLoad)},function(onClose){this.getOverlay().fadeOut(this.getConf().closeSpeed,onClose)}),$.fn.overlay=function(conf){var el=this.data("overlay");return el?el:($.isFunction(conf)&&(conf={onBeforeLoad:conf}),conf=$.extend(!0,{},$.tools.overlay.conf,conf),this.each(function(){el=new Overlay($(this),conf),instances.push(el),$(this).data("overlay",el)}),conf.api?el:this)}}(jQuery),function($){function find(root,query){var el=$(query);return el.length<2?el:root.parent().find(query)}function Scrollable(root,conf){var self=this,fire=root.add(self),itemWrap=root.children(),index=0,vertical=conf.vertical;if(current||(current=self),itemWrap.length>1&&(itemWrap=$(conf.items,root)),conf.size>1&&(conf.circular=!1),$.extend(self,{getConf:function(){return conf},getIndex:function(){return index},getSize:function(){return self.getItems().size()},getNaviButtons:function(){return prev.add(next)},getRoot:function(){return root},getItemWrap:function(){return itemWrap},getItems:function(){return itemWrap.find(conf.item).not("."+conf.clonedClass)},move:function(offset,time){return self.seekTo(index+offset,time)},next:function(time){return self.move(conf.size,time)},prev:function(time){return self.move(-conf.size,time)},begin:function(time){return self.seekTo(0,time)},end:function(time){return self.seekTo(self.getSize()-1,time)},focus:function(){return current=self,self},addItem:function(item){return item=$(item),conf.circular?(itemWrap.children().last().before(item),itemWrap.children().first().replaceWith(item.clone().addClass(conf.clonedClass))):(itemWrap.append(item),next.removeClass("disabled")),fire.trigger("onAddItem",[item]),self},seekTo:function(i,time,fn){if(i.jquery||(i*=1),conf.circular&&0===i&&-1==index&&0!==time)return self;if(!conf.circular&&0>i||i>self.getSize()||-1>i)return self;var item=i;i.jquery?i=self.getItems().index(i):item=self.getItems().eq(i);var e=$.Event("onBeforeSeek");if(!fn&&(fire.trigger(e,[i,time]),e.isDefaultPrevented()||!item.length))return self;var props=vertical?{top:-item.position().top}:{left:-item.position().left};return index=i,current=self,void 0===time&&(time=conf.speed),itemWrap.animate(props,time,conf.easing,fn||function(){fire.trigger("onSeek",[i])}),self}}),$.each(["onBeforeSeek","onSeek","onAddItem"],function(i,name){$.isFunction(conf[name])&&$(self).on(name,conf[name]),self[name]=function(fn){return fn&&$(self).on(name,fn),self}}),conf.circular){var cloned1=self.getItems().slice(-1).clone().prependTo(itemWrap),cloned2=self.getItems().eq(1).clone().appendTo(itemWrap);cloned1.add(cloned2).addClass(conf.clonedClass),self.onBeforeSeek(function(e,i,time){return e.isDefaultPrevented()?void 0:-1==i?(self.seekTo(cloned1,time,function(){self.end(0)}),e.preventDefault()):void(i==self.getSize()&&self.seekTo(cloned2,time,function(){self.begin(0)}))});var hidden_parents=root.parents().add(root).filter(function(){return"none"===$(this).css("display")?!0:void 0});hidden_parents.length?(hidden_parents.show(),self.seekTo(0,0,function(){}),hidden_parents.hide()):self.seekTo(0,0,function(){})}var prev=find(root,conf.prev).click(function(e){e.stopPropagation(),self.prev()}),next=find(root,conf.next).click(function(e){e.stopPropagation(),self.next()});if(conf.circular||(self.onBeforeSeek(function(e,i){setTimeout(function(){e.isDefaultPrevented()||(prev.toggleClass(conf.disabledClass,0>=i),next.toggleClass(conf.disabledClass,i>=self.getSize()-1))},1)}),conf.initialIndex||prev.addClass(conf.disabledClass)),self.getSize()<2&&prev.add(next).addClass(conf.disabledClass),conf.mousewheel&&$.fn.mousewheel&&root.mousewheel(function(e,delta){return conf.mousewheel?(self.move(0>delta?1:-1,conf.wheelSpeed||50),!1):void 0}),conf.touch){var touch={};itemWrap[0].ontouchstart=function(e){var t=e.touches[0];touch.x=t.clientX,touch.y=t.clientY},itemWrap[0].ontouchmove=function(e){if(1==e.touches.length&&!itemWrap.is(":animated")){var t=e.touches[0],deltaX=touch.x-t.clientX,deltaY=touch.y-t.clientY;self[vertical&&deltaY>0||!vertical&&deltaX>0?"next":"prev"](),e.preventDefault()}}}conf.keyboard&&$(document).on("keydown.scrollable",function(evt){if(!(!conf.keyboard||evt.altKey||evt.ctrlKey||evt.metaKey||$(evt.target).is(":input")||"static"!=conf.keyboard&&current!=self)){var key=evt.keyCode;return!vertical||38!=key&&40!=key?vertical||37!=key&&39!=key?void 0:(self.move(37==key?-1:1),evt.preventDefault()):(self.move(38==key?-1:1),evt.preventDefault())}}),conf.initialIndex&&self.seekTo(conf.initialIndex,0,function(){})}$.tools=$.tools||{version:"@VERSION"},$.tools.scrollable={conf:{activeClass:"active",circular:!1,clonedClass:"cloned",disabledClass:"disabled",easing:"swing",initialIndex:0,item:"> *",items:".items",keyboard:!0,mousewheel:!1,next:".next",prev:".prev",size:1,speed:400,vertical:!1,touch:!0,wheelSpeed:0}};var current;$.fn.scrollable=function(conf){var el=this.data("scrollable");return el?el:(conf=$.extend({},$.tools.scrollable.conf,conf),this.each(function(){el=new Scrollable($(this),conf),$(this).data("scrollable",el)}),conf.api?el:this)}}(jQuery),function($){function Tabs(root,paneSelector,conf){var current,self=this,trigger=root.add(this),tabs=root.find(conf.tabs),panes=paneSelector.jquery?paneSelector:root.children(paneSelector);tabs.length||(tabs=root.children()),panes.length||(panes=root.parent().find(paneSelector)),panes.length||(panes=$(paneSelector)),$.extend(this,{click:function(i,e){var tab=tabs.eq(i),firstRender=!root.data("tabs");if("string"==typeof i&&i.replace("#","")&&(tab=tabs.filter('[href*="'+i.replace("#","")+'"]'),i=Math.max(tabs.index(tab),0)),conf.rotate){var last=tabs.length-1;if(0>i)return self.click(last,e);if(i>last)return self.click(0,e)}if(!tab.length){if(current>=0)return self;i=conf.initialIndex,tab=tabs.eq(i)}if(i===current)return self;if(e=e||$.Event(),e.type="onBeforeClick",trigger.trigger(e,[i]),!e.isDefaultPrevented()){var effect=firstRender?conf.initialEffect&&conf.effect||"default":conf.effect;return effects[effect].call(self,i,function(){current=i,e.type="onClick",trigger.trigger(e,[i])}),tabs.removeClass(conf.current),tab.addClass(conf.current),self}},getConf:function(){return conf},getTabs:function(){return tabs},getPanes:function(){return panes},getCurrentPane:function(){return panes.eq(current)},getCurrentTab:function(){return tabs.eq(current)},getIndex:function(){return current},next:function(){return self.click(current+1)},prev:function(){return self.click(current-1)},destroy:function(){return tabs.off(conf.event).removeClass(conf.current),panes.find('a[href^="#"]').off("click.T"),self}}),$.each("onBeforeClick,onClick".split(","),function(i,name){$.isFunction(conf[name])&&$(self).on(name,conf[name]),self[name]=function(fn){return fn&&$(self).on(name,fn),self}}),conf.history&&$.fn.history&&($.tools.history.init(tabs),conf.event="history"),tabs.each(function(i){$(this).on(conf.event,function(e){return self.click(i,e),e.preventDefault()})}),panes.find('a[href^="#"]').on("click.T",function(e){self.click($(this).attr("href"),e)}),location.hash&&"a"==conf.tabs&&root.find('[href="'+location.hash+'"]').length?self.click(location.hash):(0===conf.initialIndex||conf.initialIndex>0)&&self.click(conf.initialIndex)}$.tools=$.tools||{version:"@VERSION"},$.tools.tabs={conf:{tabs:"a",current:"current",onBeforeClick:null,onClick:null,effect:"default",initialEffect:!1,initialIndex:0,event:"click",rotate:!1,slideUpSpeed:400,slideDownSpeed:400,history:!1},addEffect:function(name,fn){effects[name]=fn}};var animating,w,effects={"default":function(i,done){this.getPanes().hide().eq(i).show(),done.call()},fade:function(i,done){var conf=this.getConf(),speed=conf.fadeOutSpeed,panes=this.getPanes();speed?panes.fadeOut(speed):panes.hide(),panes.eq(i).fadeIn(conf.fadeInSpeed,done)},slide:function(i,done){var conf=this.getConf();this.getPanes().slideUp(conf.slideUpSpeed),this.getPanes().eq(i).slideDown(conf.slideDownSpeed,done)},ajax:function(i,done){this.getPanes().eq(0).load(this.getTabs().eq(i).attr("href"),done)}};$.tools.tabs.addEffect("horizontal",function(i,done){if(!animating){var nextPane=this.getPanes().eq(i),currentPane=this.getCurrentPane();w||(w=this.getPanes().eq(0).width()),animating=!0,nextPane.show(),currentPane.animate({width:0},{step:function(now){nextPane.css("width",w-now)},complete:function(){$(this).hide(),done.call(),animating=!1}}),currentPane.length||(done.call(),animating=!1)}}),$.fn.tabs=function(paneSelector,conf){var el=this.data("tabs");return el&&(el.destroy(),this.removeData("tabs")),$.isFunction(conf)&&(conf={onBeforeClick:conf}),conf=$.extend({},$.tools.tabs.conf,conf),this.each(function(){el=new Tabs($(this),paneSelector,conf),$(this).data("tabs",el)}),conf.api?el:this}}(jQuery),function($){function setIframeLocation(h){if(h){var doc=iframe.contentWindow.document;doc.open().close(),doc.location.hash=h}}var hash,iframe,links,inited;$.tools=$.tools||{version:"@VERSION"},$.tools.history={init:function(els){inited||($.browser.msie&&$.browser.version<"8"?iframe||(iframe=$("<iframe/>").attr("src","javascript:false;").hide().get(0),$("body").append(iframe),setInterval(function(){var idoc=iframe.contentWindow.document,h=idoc.location.hash;hash!==h&&$(window).trigger("hash",h)},100),setIframeLocation(location.hash||"#")):setInterval(function(){var h=location.hash;h!==hash&&$(window).trigger("hash",h)},100),links=links?links.add(els):els,els.click(function(e){var href=$(this).attr("href");return iframe&&setIframeLocation(href),"#"!=href.slice(0,1)?(location.href="#"+href,e.preventDefault()):void 0}),inited=!0)}},$(window).on("hash",function(e,h){h?links.filter(function(){var href=$(this).attr("href");return href==h||href==h.replace("#","")}).trigger("history",[h]):links.eq(0).trigger("history",[h]),hash=h}),$.fn.history=function(fn){return $.tools.history.init(this),this.on("history",fn)}}(jQuery),function($){function viewport(){if(/msie/.test(navigator.userAgent.toLowerCase())){var d=$(document).height(),w=$(window).height();return[window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,20>d-w?w:d]}return[$(document).width(),$(document).height()]}function call(fn){return fn?fn.call($.mask):void 0}$.tools=$.tools||{version:"@VERSION"};var tool;tool=$.tools.expose={conf:{maskId:"exposeMask",loadSpeed:"slow",closeSpeed:"fast",closeOnClick:!0,closeOnEsc:!0,zIndex:9998,opacity:.8,startOpacity:0,color:"#fff",onLoad:null,onClose:null}};var mask,exposed,loaded,config,overlayIndex;$.mask={load:function(conf,els){if(loaded)return this;"string"==typeof conf&&(conf={color:conf}),conf=conf||config,config=conf=$.extend($.extend({},tool.conf),conf),mask=$("#"+conf.maskId),mask.length||(mask=$("<div/>").attr("id",conf.maskId),$("body").append(mask));var size=viewport();return mask.css({position:"absolute",top:0,left:0,width:size[0],height:size[1],display:"none",opacity:conf.startOpacity,zIndex:conf.zIndex}),conf.color&&mask.css("backgroundColor",conf.color),call(conf.onBeforeLoad)===!1?this:(conf.closeOnEsc&&$(document).on("keydown.mask",function(e){27==e.keyCode&&$.mask.close(e)}),conf.closeOnClick&&mask.on("click.mask",function(e){$.mask.close(e)}),$(window).on("resize.mask",function(){$.mask.fit()}),els&&els.length&&(overlayIndex=els.eq(0).css("zIndex"),$.each(els,function(){var el=$(this);/relative|absolute|fixed/i.test(el.css("position"))||el.css("position","relative")}),exposed=els.css({zIndex:Math.max(conf.zIndex+1,"auto"==overlayIndex?0:overlayIndex)})),mask.css({display:"block"}).fadeTo(conf.loadSpeed,conf.opacity,function(){$.mask.fit(),call(conf.onLoad),loaded="full"}),loaded=!0,this)},close:function(){if(loaded){if(call(config.onBeforeClose)===!1)return this;mask.fadeOut(config.closeSpeed,function(){exposed&&exposed.css({zIndex:overlayIndex}),loaded=!1,call(config.onClose)}),$(document).off("keydown.mask"),mask.off("click.mask"),$(window).off("resize.mask")}return this},fit:function(){if(loaded){var size=viewport();mask.css({width:size[0],height:size[1]})}},getMask:function(){return mask},isLoaded:function(fully){return fully?"full"==loaded:loaded},getConf:function(){return config},getExposed:function(){return exposed}},$.fn.mask=function(conf){return $.mask.load(conf),this},$.fn.expose=function(conf){return $.mask.load(conf,this),this}}(jQuery),function($){function getPosition(trigger,tip,conf){var top=conf.relative?trigger.position().top:trigger.offset().top,left=conf.relative?trigger.position().left:trigger.offset().left,pos=conf.position[0];top-=tip.outerHeight()-conf.offset[0],left+=trigger.outerWidth()+conf.offset[1],/iPad/i.test(navigator.userAgent)&&(top-=$(window).scrollTop());var height=tip.outerHeight()+trigger.outerHeight();"center"==pos&&(top+=height/2),"bottom"==pos&&(top+=height),pos=conf.position[1];var width=tip.outerWidth()+trigger.outerWidth();return"center"==pos&&(left-=width/2),"left"==pos&&(left-=width),{top:top,left:left}}function Tooltip(trigger,conf){var tip,shown,self=this,fire=trigger.add(self),timer=0,pretimer=0,title=trigger.attr("title"),tipAttr=trigger.attr("data-tooltip"),effect=effects[conf.effect],isInput=trigger.is(":input"),isWidget=isInput&&trigger.is(":checkbox, :radio, select, :button, :submit"),type=trigger.attr("type"),evt=conf.events[type]||conf.events[isInput?isWidget?"widget":"input":"def"];if(!effect)throw'Nonexistent effect "'+conf.effect+'"';if(evt=evt.split(/,\s*/),2!=evt.length)throw"Tooltip: bad events configuration for "+type;trigger.on(evt[0],function(e){clearTimeout(timer),conf.predelay?pretimer=setTimeout(function(){self.show(e)},conf.predelay):self.show(e)}).on(evt[1],function(e){clearTimeout(pretimer),conf.delay?timer=setTimeout(function(){self.hide(e)},conf.delay):self.hide(e)}),title&&conf.cancelDefault&&(trigger.removeAttr("title"),trigger.data("title",title)),$.extend(self,{show:function(e){if(!tip&&(tipAttr?tip=$(tipAttr):conf.tip?tip=$(conf.tip).eq(0):title?tip=$(conf.layout).addClass(conf.tipClass).appendTo(document.body).hide().append(title):(tip=trigger.find("."+conf.tipClass),tip.length||(tip=trigger.next()),tip.length||(tip=trigger.parent().next())),!tip.length))throw"Cannot find tooltip for "+trigger;if(self.isShown())return self;tip.stop(!0,!0);var pos=getPosition(trigger,tip,conf);if(conf.tip&&tip.html(trigger.data("title")),e=$.Event(),e.type="onBeforeShow",fire.trigger(e,[pos]),e.isDefaultPrevented())return self;pos=getPosition(trigger,tip,conf),tip.css({position:"absolute",top:pos.top,left:pos.left}),shown=!0,effect[0].call(self,function(){e.type="onShow",shown="full",fire.trigger(e)});var event=conf.events.tooltip.split(/,\s*/);return tip.data("__set")||(tip.off(event[0]).on(event[0],function(){clearTimeout(timer),clearTimeout(pretimer)}),event[1]&&!trigger.is("input:not(:checkbox, :radio), textarea")&&tip.off(event[1]).on(event[1],function(e){e.relatedTarget!=trigger[0]&&trigger.trigger(evt[1].split(" ")[0])}),conf.tip||tip.data("__set",!0)),self},hide:function(e){return tip&&self.isShown()?(e=$.Event(),e.type="onBeforeHide",fire.trigger(e),e.isDefaultPrevented()?void 0:(shown=!1,effects[conf.effect][1].call(self,function(){e.type="onHide",fire.trigger(e)}),self)):self},isShown:function(fully){return fully?"full"==shown:shown},getConf:function(){return conf},getTip:function(){return tip},getTrigger:function(){return trigger}}),$.each("onHide,onBeforeShow,onShow,onBeforeHide".split(","),function(i,name){$.isFunction(conf[name])&&$(self).on(name,conf[name]),self[name]=function(fn){return fn&&$(self).on(name,fn),self}})}$.tools=$.tools||{version:"@VERSION"},$.tools.tooltip={conf:{effect:"toggle",fadeOutSpeed:"fast",predelay:0,delay:30,opacity:1,tip:0,fadeIE:!1,position:["top","center"],offset:[0,0],relative:!1,cancelDefault:!0,events:{def:"mouseenter,mouseleave",input:"focus,blur",widget:"focus mouseenter,blur mouseleave",tooltip:"mouseenter,mouseleave"},layout:"<div/>",tipClass:"tooltip"},addEffect:function(name,loadFn,hideFn){effects[name]=[loadFn,hideFn]}};var effects={toggle:[function(done){var conf=this.getConf(),tip=this.getTip(),o=conf.opacity;1>o&&tip.css({opacity:o}),tip.show(),done.call()},function(done){this.getTip().hide(),done.call()}],fade:[function(done){var conf=this.getConf();!/msie/.test(navigator.userAgent.toLowerCase())||conf.fadeIE?this.getTip().fadeTo(conf.fadeInSpeed,conf.opacity,done):(this.getTip().show(),done())},function(done){var conf=this.getConf();!/msie/.test(navigator.userAgent.toLowerCase())||conf.fadeIE?this.getTip().fadeOut(conf.fadeOutSpeed,done):(this.getTip().hide(),done())}]};$.fn.tooltip=function(conf){var api=this.data("tooltip");return api?api:(conf=$.extend(!0,{},$.tools.tooltip.conf,conf),"string"==typeof conf.position&&(conf.position=conf.position.split(/,?\s/)),this.each(function(){api=new Tooltip($(this),conf),$(this).data("tooltip",api)}),conf.api?api:this)}}(jQuery);
\ No newline at end of file
+!function($){function Overlay(trigger,conf){var closers,overlay,opened,self=this,fire=trigger.add(self),w=$(window),maskConf=$.tools.expose&&(conf.mask||conf.expose),uid=Math.random().toString().slice(10);maskConf&&("string"==typeof maskConf&&(maskConf={color:maskConf}),maskConf.closeOnClick=maskConf.closeOnEsc=!1);var jq=conf.target||trigger.attr("rel");if(overlay=jq?$(jq):null||trigger,!overlay.length)throw"Could not find Overlay: "+jq;trigger&&-1==trigger.index(overlay)&&trigger.click(function(e){return self.load(e),e.preventDefault()}),$.extend(self,{load:function(e){if(self.isOpened())return self;var eff=effects[conf.effect];if(!eff)throw'Overlay: cannot find effect : "'+conf.effect+'"';if(conf.oneInstance&&$.each(instances,function(){this.close(e)}),e=e||$.Event(),e.type="onBeforeLoad",fire.trigger(e),e.isDefaultPrevented())return self;opened=!0,maskConf&&$(overlay).expose(maskConf);var top=conf.top,left=conf.left,oWidth=overlay.outerWidth(!0),oHeight=overlay.outerHeight(!0);return"string"==typeof top&&(top="center"==top?Math.max((w.height()-oHeight)/2,0):parseInt(top,10)/100*w.height()),"center"==left&&(left=Math.max((w.width()-oWidth)/2,0)),eff[0].call(self,{top:top,left:left},function(){opened&&(e.type="onLoad",fire.trigger(e))}),maskConf&&conf.closeOnClick&&$.mask.getMask().one("click",self.close),conf.closeOnClick&&$(document).on("click."+uid,function(e){$(e.target).parents(overlay).length||self.close(e)}),conf.closeOnEsc&&$(document).on("keydown."+uid,function(e){27==e.keyCode&&self.close(e)}),self},close:function(e){return self.isOpened()?(e=e||$.Event(),e.type="onBeforeClose",fire.trigger(e),e.isDefaultPrevented()?void 0:(opened=!1,effects[conf.effect][1].call(self,function(){e.type="onClose",fire.trigger(e)}),$(document).off("click."+uid+" keydown."+uid),maskConf&&$.mask.close(),self)):self},getOverlay:function(){return overlay},getTrigger:function(){return trigger},getClosers:function(){return closers},isOpened:function(){return opened},getConf:function(){return conf}}),$.each("onBeforeLoad,onStart,onLoad,onBeforeClose,onClose".split(","),function(i,name){$.isFunction(conf[name])&&$(self).on(name,conf[name]),self[name]=function(fn){return fn&&$(self).on(name,fn),self}}),closers=overlay.find(conf.close||".close"),closers.length||conf.close||(closers=$('<a class="close"></a>'),overlay.prepend(closers)),closers.click(function(e){self.close(e)}),conf.load&&self.load()}$.tools=$.tools||{version:"@VERSION"},$.tools.overlay={addEffect:function(name,loadFn,closeFn){effects[name]=[loadFn,closeFn]},conf:{close:null,closeOnClick:!0,closeOnEsc:!0,closeSpeed:"fast",effect:"default",fixed:!/msie/.test(navigator.userAgent.toLowerCase())||navigator.appVersion>6,left:"center",load:!1,mask:null,oneInstance:!0,speed:"normal",target:null,top:"10%"}};var instances=[],effects={};$.tools.overlay.addEffect("default",function(pos,onLoad){var conf=this.getConf(),w=$(window);conf.fixed||(pos.top+=w.scrollTop(),pos.left+=w.scrollLeft()),pos.position=conf.fixed?"fixed":"absolute",this.getOverlay().css(pos).fadeIn(conf.speed,onLoad)},function(onClose){this.getOverlay().fadeOut(this.getConf().closeSpeed,onClose)}),$.fn.overlay=function(conf){var el=this.data("overlay");return el?el:($.isFunction(conf)&&(conf={onBeforeLoad:conf}),conf=$.extend(!0,{},$.tools.overlay.conf,conf),this.each(function(){el=new Overlay($(this),conf),instances.push(el),$(this).data("overlay",el)}),conf.api?el:this)}}(jQuery),function($){function find(root,query){var el=$(query);return el.length<2?el:root.parent().find(query)}function Scrollable(root,conf){var self=this,fire=root.add(self),itemWrap=root.children(),index=0,vertical=conf.vertical;if(current||(current=self),itemWrap.length>1&&(itemWrap=$(conf.items,root)),conf.size>1&&(conf.circular=!1),$.extend(self,{getConf:function(){return conf},getIndex:function(){return index},getSize:function(){return self.getItems().size()},getNaviButtons:function(){return prev.add(next)},getRoot:function(){return root},getItemWrap:function(){return itemWrap},getItems:function(){return itemWrap.find(conf.item).not("."+conf.clonedClass)},move:function(offset,time){return self.seekTo(index+offset,time)},next:function(time){return self.move(conf.size,time)},prev:function(time){return self.move(-conf.size,time)},begin:function(time){return self.seekTo(0,time)},end:function(time){return self.seekTo(self.getSize()-1,time)},focus:function(){return current=self,self},addItem:function(item){return item=$(item),conf.circular?(itemWrap.children().last().before(item),itemWrap.children().first().replaceWith(item.clone().addClass(conf.clonedClass))):(itemWrap.append(item),next.removeClass("disabled")),fire.trigger("onAddItem",[item]),self},seekTo:function(i,time,fn){if(i.jquery||(i*=1),conf.circular&&0===i&&-1==index&&0!==time)return self;if(!conf.circular&&0>i||i>self.getSize()||-1>i)return self;var item=i;i.jquery?i=self.getItems().index(i):item=self.getItems().eq(i);var e=$.Event("onBeforeSeek");if(!fn&&(fire.trigger(e,[i,time]),e.isDefaultPrevented()||!item.length))return self;var props=vertical?{top:-item.position().top}:{left:-item.position().left};return index=i,current=self,void 0===time&&(time=conf.speed),itemWrap.animate(props,time,conf.easing,fn||function(){fire.trigger("onSeek",[i])}),self}}),$.each(["onBeforeSeek","onSeek","onAddItem"],function(i,name){$.isFunction(conf[name])&&$(self).on(name,conf[name]),self[name]=function(fn){return fn&&$(self).on(name,fn),self}}),conf.circular){var cloned1=self.getItems().slice(-1).clone().prependTo(itemWrap),cloned2=self.getItems().eq(1).clone().appendTo(itemWrap);cloned1.add(cloned2).addClass(conf.clonedClass),self.onBeforeSeek(function(e,i,time){return e.isDefaultPrevented()?void 0:-1==i?(self.seekTo(cloned1,time,function(){self.end(0)}),e.preventDefault()):void(i==self.getSize()&&self.seekTo(cloned2,time,function(){self.begin(0)}))});var hidden_parents=root.parents().add(root).filter(function(){return"none"===$(this).css("display")?!0:void 0});hidden_parents.length?(hidden_parents.show(),self.seekTo(0,0,function(){}),hidden_parents.hide()):self.seekTo(0,0,function(){})}var prev=find(root,conf.prev).click(function(e){e.stopPropagation(),self.prev()}),next=find(root,conf.next).click(function(e){e.stopPropagation(),self.next()});if(conf.circular||(self.onBeforeSeek(function(e,i){setTimeout(function(){e.isDefaultPrevented()||(prev.toggleClass(conf.disabledClass,0>=i),next.toggleClass(conf.disabledClass,i>=self.getSize()-1))},1)}),conf.initialIndex||prev.addClass(conf.disabledClass)),self.getSize()<2&&prev.add(next).addClass(conf.disabledClass),conf.mousewheel&&$.fn.mousewheel&&root.mousewheel(function(e,delta){return conf.mousewheel?(self.move(0>delta?1:-1,conf.wheelSpeed||50),!1):void 0}),conf.touch){var touch={};itemWrap[0].ontouchstart=function(e){var t=e.touches[0];touch.x=t.clientX,touch.y=t.clientY},itemWrap[0].ontouchmove=function(e){if(1==e.touches.length&&!itemWrap.is(":animated")){var t=e.touches[0],deltaX=touch.x-t.clientX,deltaY=touch.y-t.clientY;self[vertical&&deltaY>0||!vertical&&deltaX>0?"next":"prev"](),e.preventDefault()}}}conf.keyboard&&$(document).on("keydown.scrollable",function(evt){if(!(!conf.keyboard||evt.altKey||evt.ctrlKey||evt.metaKey||$(evt.target).is(":input")||"static"!=conf.keyboard&&current!=self)){var key=evt.keyCode;return!vertical||38!=key&&40!=key?vertical||37!=key&&39!=key?void 0:(self.move(37==key?-1:1),evt.preventDefault()):(self.move(38==key?-1:1),evt.preventDefault())}}),conf.initialIndex&&self.seekTo(conf.initialIndex,0,function(){})}$.tools=$.tools||{version:"@VERSION"},$.tools.scrollable={conf:{activeClass:"active",circular:!1,clonedClass:"cloned",disabledClass:"disabled",easing:"swing",initialIndex:0,item:"> *",items:".items",keyboard:!0,mousewheel:!1,next:".next",prev:".prev",size:1,speed:400,vertical:!1,touch:!0,wheelSpeed:0}};var current;$.fn.scrollable=function(conf){var el=this.data("scrollable");return el?el:(conf=$.extend({},$.tools.scrollable.conf,conf),this.each(function(){el=new Scrollable($(this),conf),$(this).data("scrollable",el)}),conf.api?el:this)}}(jQuery),function($){function Tabs(root,paneSelector,conf){var current,self=this,trigger=root.add(this),tabs=root.find(conf.tabs),panes=paneSelector.jquery?paneSelector:root.children(paneSelector);tabs.length||(tabs=root.children()),panes.length||(panes=root.parent().find(paneSelector)),panes.length||(panes=$(paneSelector)),$.extend(this,{click:function(i,e){var tab=tabs.eq(i),firstRender=!root.data("tabs");if("string"==typeof i&&i.replace("#","")&&(tab=tabs.filter('[href*="'+i.replace("#","")+'"]'),i=Math.max(tabs.index(tab),0)),conf.rotate){var last=tabs.length-1;if(0>i)return self.click(last,e);if(i>last)return self.click(0,e)}if(!tab.length){if(current>=0)return self;i=conf.initialIndex,tab=tabs.eq(i)}if(i===current)return self;if(e=e||$.Event(),e.type="onBeforeClick",trigger.trigger(e,[i]),!e.isDefaultPrevented()){var effect=firstRender?conf.initialEffect&&conf.effect||"default":conf.effect;return effects[effect].call(self,i,function(){current=i,e.type="onClick",trigger.trigger(e,[i])}),tabs.removeClass(conf.current),tab.addClass(conf.current),self}},getConf:function(){return conf},getTabs:function(){return tabs},getPanes:function(){return panes},getCurrentPane:function(){return panes.eq(current)},getCurrentTab:function(){return tabs.eq(current)},getIndex:function(){return current},next:function(){return self.click(current+1)},prev:function(){return self.click(current-1)},destroy:function(){return tabs.off(conf.event).removeClass(conf.current),panes.find('a[href^="#"]').off("click.T"),self}}),$.each("onBeforeClick,onClick".split(","),function(i,name){$.isFunction(conf[name])&&$(self).on(name,conf[name]),self[name]=function(fn){return fn&&$(self).on(name,fn),self}}),conf.history&&$.fn.history&&($.tools.history.init(tabs),conf.event="history"),tabs.each(function(i){$(this).on(conf.event,function(e){return self.click(i,e),e.preventDefault()})}),panes.find('a[href^="#"]').on("click.T",function(e){self.click($(this).attr("href"),e)}),location.hash&&"a"==conf.tabs&&root.find('[href="'+location.hash+'"]').length?self.click(location.hash):(0===conf.initialIndex||conf.initialIndex>0)&&self.click(conf.initialIndex)}$.tools=$.tools||{version:"@VERSION"},$.tools.tabs={conf:{tabs:"a",current:"current",onBeforeClick:null,onClick:null,effect:"default",initialEffect:!1,initialIndex:0,event:"click",rotate:!1,slideUpSpeed:400,slideDownSpeed:400,history:!1},addEffect:function(name,fn){effects[name]=fn}};var animating,w,effects={"default":function(i,done){this.getPanes().hide().eq(i).show(),done.call()},fade:function(i,done){var conf=this.getConf(),speed=conf.fadeOutSpeed,panes=this.getPanes();speed?panes.fadeOut(speed):panes.hide(),panes.eq(i).fadeIn(conf.fadeInSpeed,done)},slide:function(i,done){var conf=this.getConf();this.getPanes().slideUp(conf.slideUpSpeed),this.getPanes().eq(i).slideDown(conf.slideDownSpeed,done)},ajax:function(i,done){this.getPanes().eq(0).load(this.getTabs().eq(i).attr("href"),done)}};$.tools.tabs.addEffect("horizontal",function(i,done){if(!animating){var nextPane=this.getPanes().eq(i),currentPane=this.getCurrentPane();w||(w=this.getPanes().eq(0).width()),animating=!0,nextPane.show(),currentPane.animate({width:0},{step:function(now){nextPane.css("width",w-now)},complete:function(){$(this).hide(),done.call(),animating=!1}}),currentPane.length||(done.call(),animating=!1)}}),$.fn.tabs=function(paneSelector,conf){var el=this.data("tabs");return el&&(el.destroy(),this.removeData("tabs")),$.isFunction(conf)&&(conf={onBeforeClick:conf}),conf=$.extend({},$.tools.tabs.conf,conf),this.each(function(){el=new Tabs($(this),paneSelector,conf),$(this).data("tabs",el)}),conf.api?el:this}}(jQuery),function($){function setIframeLocation(h){if(h){var doc=iframe.contentWindow.document;doc.open().close(),doc.location.hash=h}}var hash,iframe,links,inited;$.tools=$.tools||{version:"@VERSION"},$.tools.history={init:function(els){inited||($.browser.msie&&$.browser.version<"8"?iframe||(iframe=$("<iframe/>").attr("src","javascript:false;").hide().get(0),$("body").append(iframe),setInterval(function(){var idoc=iframe.contentWindow.document,h=idoc.location.hash;hash!==h&&$(window).trigger("hash",h)},100),setIframeLocation(location.hash||"#")):setInterval(function(){var h=location.hash;h!==hash&&$(window).trigger("hash",h)},100),links=links?links.add(els):els,els.click(function(e){var href=$(this).attr("href");return iframe&&setIframeLocation(href),"#"!=href.slice(0,1)?(location.href="#"+href,e.preventDefault()):void 0}),inited=!0)}},$(window).on("hash",function(e,h){h?links.filter(function(){var href=$(this).attr("href");return href==h||href==h.replace("#","")}).trigger("history",[h]):links.eq(0).trigger("history",[h]),hash=h}),$.fn.history=function(fn){return $.tools.history.init(this),this.on("history",fn)}}(jQuery),function($){function viewport(){if(/msie/.test(navigator.userAgent.toLowerCase())){var d=$(document).height(),w=$(window).height();return[window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,20>d-w?w:d]}return[$(document).width(),$(document).height()]}function call(fn){return fn?fn.call($.mask):void 0}$.tools=$.tools||{version:"@VERSION"};var tool;tool=$.tools.expose={conf:{maskId:"exposeMask",loadSpeed:"slow",closeSpeed:"fast",closeOnClick:!0,closeOnEsc:!0,zIndex:9998,opacity:.8,startOpacity:0,color:"#fff",onLoad:null,onClose:null}};var mask,exposed,loaded,config,overlayIndex;$.mask={load:function(conf,els){if(loaded)return this;"string"==typeof conf&&(conf={color:conf}),conf=conf||config,config=conf=$.extend($.extend({},tool.conf),conf),mask=$("#"+conf.maskId),mask.length||(mask=$("<div/>").attr("id",conf.maskId),$("body").append(mask));var size=viewport();return mask.css({position:"absolute",top:0,left:0,width:size[0],height:size[1],display:"none",opacity:conf.startOpacity,zIndex:conf.zIndex}),conf.color&&mask.css("backgroundColor",conf.color),call(conf.onBeforeLoad)===!1?this:(conf.closeOnEsc&&$(document).on("keydown.mask",function(e){27==e.keyCode&&$.mask.close(e)}),conf.closeOnClick&&mask.on("click.mask",function(e){$.mask.close(e)}),$(window).on("resize.mask",function(){$.mask.fit()}),els&&els.length&&(overlayIndex=els.eq(0).css("zIndex"),$.each(els,function(){var el=$(this);/relative|absolute|fixed/i.test(el.css("position"))||el.css("position","relative")}),exposed=els.css({zIndex:Math.max(conf.zIndex+1,"auto"==overlayIndex?0:overlayIndex)})),mask.css({display:"block"}).fadeTo(conf.loadSpeed,conf.opacity,function(){$.mask.fit(),call(conf.onLoad),loaded="full"}),loaded=!0,this)},close:function(){if(loaded){if(call(config.onBeforeClose)===!1)return this;mask.fadeOut(config.closeSpeed,function(){exposed&&exposed.css({zIndex:overlayIndex}),loaded=!1,call(config.onClose)}),$(document).off("keydown.mask"),mask.off("click.mask"),$(window).off("resize.mask")}return this},fit:function(){if(loaded){var size=viewport();mask.css({width:size[0],height:size[1]})}},getMask:function(){return mask},isLoaded:function(fully){return fully?"full"==loaded:loaded},getConf:function(){return config},getExposed:function(){return exposed}},$.fn.mask=function(conf){return $.mask.load(conf),this},$.fn.expose=function(conf){return $.mask.load(conf,this),this}}(jQuery);
\ No newline at end of file
diff --git a/plone/app/jquerytools/browser/jquery.tools.plugins.js b/plone/app/jquerytools/browser/jquery.tools.plugins.js
index 180818a..3bd7df9 100644
--- a/plone/app/jquerytools/browser/jquery.tools.plugins.js
+++ b/plone/app/jquerytools/browser/jquery.tools.plugins.js
@@ -953,239 +953,3 @@
 	
 })(jQuery); 
 
-
-
-/**
- * @license 
- * jQuery Tools @VERSION / Tooltip Dynamic Positioning
- * 
- * NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.
- * 
- * http://flowplayer.org/tools/tooltip/dynamic.html
- *
- * Since: July 2009
- * Date: @DATE 
- */
-(function($) { 
-
-	// version number
-	var t = $.tools.tooltip;
-	
-	t.dynamic = {
-		conf: {
-			classNames: "top right bottom left"
-		}
-	};
-		
-	/* 
-	 * See if element is on the viewport. Returns an boolean array specifying which
-	 * edges are hidden. Edges are in following order:
-	 * 
-	 * [top, right, bottom, left]
-	 * 
-	 * For example following return value means that top and right edges are hidden
-	 * 
-	 * [true, true, false, false]
-	 * 
-	 */
-	function getCropping(el) {
-		
-		var w = $(window); 
-		var right = w.width() + w.scrollLeft();
-		var bottom = w.height() + w.scrollTop();		
-		
-		return [
-			el.offset().top <= w.scrollTop(), 						// top
-			right <= el.offset().left + el.width(),				// right
-			bottom <= el.offset().top + el.height(),			// bottom
-			w.scrollLeft() >= el.offset().left 					// left
-		]; 
-	}
-	
-	/*
-		Returns true if all edges of an element are on viewport. false if not
-		
-		@param crop the cropping array returned by getCropping function
-	 */
-	function isVisible(crop) {
-		var i = crop.length;
-		while (i--) {
-			if (crop[i]) { return false; }	
-		}
-		return true;
-	}
-	
-	// dynamic plugin
-	$.fn.dynamic = function(conf) {
-		
-		if (typeof conf == 'number') { conf = {speed: conf}; }
-		
-		conf = $.extend({}, t.dynamic.conf, conf);
-		
-		var confOrigin = $.extend(true,{},conf),
-		    cls = conf.classNames.split(/\s/), 
-		    orig, ret;
-	
-		this.each(function() {		
-				
-			var api = $(this).tooltip().onBeforeShow(function(e, pos) {				
-
-				// get nessessary variables
-				var tip = this.getTip(), tipConf = this.getConf();  
-
-				/*
-					We store the original configuration and use it to restore back to the original state.
-				*/					
-				if (!orig) {
-					orig = [
-						tipConf.position[0], 
-						tipConf.position[1], 
-						tipConf.offset[0], 
-						tipConf.offset[1], 
-						$.extend({}, tipConf)
-					];
-				}
-				
-				/*
-					display tip in it's default position and by setting visibility to hidden.
-					this way we can check whether it will be on the viewport
-				*/
-				$.extend(tipConf, orig[4]);
-				tipConf.position = [orig[0], orig[1]];
-				tipConf.offset = [orig[2], orig[3]];
-
-				tip.css({
-					visibility: 'hidden',
-					position: 'absolute',
-					top: pos.top,
-					left: pos.left 
-				}).show(); 
-				
-				var conf = $.extend(true,{},confOrigin),
-				
-				    // now let's see for hidden edges
-				    crop = getCropping(tip);		
-								
-				// possibly alter the configuration
-				if (!isVisible(crop)) {
-					
-					// change the position and add class
-					if (crop[2]) { $.extend(tipConf, conf.top);		tipConf.position[0] = 'top'; 		tip.addClass(cls[0]); }
-					if (crop[3]) { $.extend(tipConf, conf.right);	tipConf.position[1] = 'right'; 	tip.addClass(cls[1]); }					
-					if (crop[0]) { $.extend(tipConf, conf.bottom); 	tipConf.position[0] = 'bottom';	tip.addClass(cls[2]); } 
-					if (crop[1]) { $.extend(tipConf, conf.left);		tipConf.position[1] = 'left'; 	tip.addClass(cls[3]); }					
-					
-					// vertical offset
-					if (crop[0] || crop[2]) { tipConf.offset[0] *= -1; }
-					
-					// horizontal offset
-					if (crop[1] || crop[3]) { tipConf.offset[1] *= -1; }
-				}  
-				
-				tip.css({visibility: 'visible'}).hide();
-		
-			});
-			
-			// restore positioning as soon as possible
-			api.onBeforeShow(function() {
-				var c = this.getConf(), tip = this.getTip();		 
-				setTimeout(function() { 
-					c.position = [orig[0], orig[1]];
-					c.offset = [orig[2], orig[3]];
-				}, 0);
-			});
-			
-			// remove custom class names and restore original effect
-			api.onHide(function() {
-				var tip = this.getTip(); 
-				tip.removeClass(conf.classNames);
-			});
-				
-			ret = api;
-			
-		});
-		
-		return conf.api ? ret : this;
-	};	
-	
-}) (jQuery);
-
-
-/**
- * @license 
- * jQuery Tools @VERSION / Tooltip Slide Effect
- * 
- * NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.
- * 
- * http://flowplayer.org/tools/tooltip/slide.html
- *
- * Since: September 2009
- * Date: @DATE 
- */
-(function($) { 
-
-	// version number
-	var t = $.tools.tooltip;
-		
-	// extend global configuragion with effect specific defaults
-	$.extend(t.conf, { 
-		direction: 'up', // down, left, right 
-		bounce: false,
-		slideOffset: 10,
-		slideInSpeed: 200,
-		slideOutSpeed: 200, 
-		slideFade: !/msie/.test(navigator.userAgent.toLowerCase())
-	});			
-	
-	// directions for slide effect
-	var dirs = {
-		up: ['-', 'top'],
-		down: ['+', 'top'],
-		left: ['-', 'left'],
-		right: ['+', 'left']
-	};
-	
-	/* default effect: "slide"  */
-	t.addEffect("slide", 
-		
-		// show effect
-		function(done) { 
-
-			// variables
-			var conf = this.getConf(), 
-				 tip = this.getTip(),
-				 params = conf.slideFade ? {opacity: conf.opacity} : {}, 
-				 dir = dirs[conf.direction] || dirs.up;
-
-			// direction			
-			params[dir[1]] = dir[0] +'='+ conf.slideOffset;
-			
-			// perform animation
-			if (conf.slideFade) { tip.css({opacity:0}); }
-			tip.show().animate(params, conf.slideInSpeed, done); 
-		}, 
-		
-		// hide effect
-		function(done) {
-			
-			// variables
-			var conf = this.getConf(), 
-				 offset = conf.slideOffset,
-				 params = conf.slideFade ? {opacity: 0} : {}, 
-				 dir = dirs[conf.direction] || dirs.up;
-			
-			// direction
-			var sign = "" + dir[0];
-			if (conf.bounce) { sign = sign == '+' ? '-' : '+'; }			
-			params[dir[1]] = sign +'='+ offset;			
-			
-			// perform animation
-			this.getTip().animate(params, conf.slideOutSpeed, function()  {
-				$(this).hide();
-				done.call();		
-			});
-		}
-	);  
-	
-})(jQuery);	
-		
diff --git a/plone/app/jquerytools/browser/jquery.tools.plugins.min.js b/plone/app/jquerytools/browser/jquery.tools.plugins.min.js
index ac04a23..fb297fb 100644
--- a/plone/app/jquerytools/browser/jquery.tools.plugins.min.js
+++ b/plone/app/jquerytools/browser/jquery.tools.plugins.min.js
@@ -1 +1 @@
-!function($){function getPosition(el){var p=el.offset();return{top:p.top+el.height()/2,left:p.left+el.width()/2}}var t=$.tools.overlay,w=$(window);$.extend(t.conf,{start:{top:null,left:null},fadeInSpeed:"fast",zIndex:9999});var loadEffect=function(pos,onLoad){var overlay=this.getOverlay(),conf=this.getConf(),trigger=this.getTrigger(),self=this,oWidth=overlay.outerWidth(!0),img=overlay.data("img"),position=conf.fixed?"fixed":"absolute";if(!img){var bg=overlay.css("backgroundImage");if(!bg)throw"background-image CSS property not set for overlay";bg=bg.slice(bg.indexOf("(")+1,bg.indexOf(")")).replace(/\"/g,""),overlay.css("backgroundImage","none"),img=$('<img src="'+bg+'"/>'),img.css({border:0,display:"none"}).width(oWidth),$("body").append(img),overlay.data("img",img)}var itop=conf.start.top||Math.round(w.height()/2),ileft=conf.start.left||Math.round(w.width()/2);if(trigger){var p=getPosition(trigger);itop=p.top,ileft=p.left}conf.fixed?(itop-=w.scrollTop(),ileft-=w.scrollLeft()):(pos.top+=w.scrollTop(),pos.left+=w.scrollLeft()),img.css({position:"absolute",top:itop,left:ileft,width:0,zIndex:conf.zIndex}).show(),pos.position=position,overlay.css(pos),img.animate({top:pos.top,left:pos.left,width:oWidth},conf.speed,function(){overlay.css("zIndex",conf.zIndex+1).fadeIn(conf.fadeInSpeed,function(){self.isOpened()&&!$(this).index(overlay)?onLoad.call():overlay.hide()})}).css("position",position)},closeEffect=function(onClose){var overlay=this.getOverlay().hide(),conf=this.getConf(),trigger=this.getTrigger(),img=overlay.data("img"),css={top:conf.start.top,left:conf.start.left,width:0};trigger&&$.extend(css,getPosition(trigger)),conf.fixed&&img.css({position:"absolute"}).animate({top:"+="+w.scrollTop(),left:"+="+w.scrollLeft()},0),img.animate(css,conf.closeSpeed,onClose)};t.addEffect("apple",loadEffect,closeEffect)}(jQuery),function($){var t=$.tools.scrollable;t.autoscroll={conf:{autoplay:!0,interval:3e3,autopause:!0}},$.fn.autoscroll=function(conf){"number"==typeof conf&&(conf={interval:conf});var ret,opts=$.extend({},t.autoscroll.conf,conf);return this.each(function(){function scroll(){timer&&clearTimeout(timer),timer=setTimeout(function(){api.next()},opts.interval)}var timer,api=$(this).data("scrollable"),root=api.getRoot(),stopped=!1;api&&(ret=api),api.play=function(){timer||(stopped=!1,root.on("onSeek",scroll),scroll())},api.pause=function(){timer=clearTimeout(timer),root.off("onSeek",scroll)},api.resume=function(){stopped||api.play()},api.stop=function(){stopped=!0,api.pause()},opts.autopause&&root.add(api.getNaviButtons()).hover(api.pause,api.resume),opts.autoplay&&api.play()}),opts.api?ret:this}}(jQuery),function($){function find(root,query){var el=$(query);return el.length<2?el:root.parent().find(query)}var t=$.tools.scrollable;t.navigator={conf:{navi:".navi",naviItem:null,activeClass:"active",indexed:!1,idPrefix:null,history:!1}},$.fn.navigator=function(conf){"string"==typeof conf&&(conf={navi:conf}),conf=$.extend({},t.navigator.conf,conf);var ret;return this.each(function(){function doClick(el,i,e){api.seekTo(i),e.preventDefault(),hashed&&history.pushState({i:i},"")}function els(){return navi.find(conf.naviItem||"> *")}function addItem(i){var item=$("<"+(conf.naviItem||"a")+"/>").click(function(e){doClick($(this),i,e)});return 0===i&&item.addClass(cls),conf.indexed&&item.text(i+1),conf.idPrefix&&item.attr("id",conf.idPrefix+i),item.appendTo(navi)}var api=$(this).data("scrollable"),navi=conf.navi.jquery?conf.navi:find(api.getRoot(),conf.navi),buttons=api.getNaviButtons(),cls=conf.activeClass,hashed=conf.history&&!!history.pushState,size=api.getConf().size;api&&(ret=api),api.getNaviButtons=function(){return buttons.add(navi)},hashed&&(history.pushState({i:0},""),$(window).on("popstate",function(evt){var s=evt.originalEvent.state;s&&api.seekTo(s.i)})),els().length?els().each(function(i){$(this).click(function(e){doClick($(this),i,e)})}):$.each(api.getItems(),function(i){i%size==0&&addItem(i)}),api.onBeforeSeek(function(e,index){setTimeout(function(){if(!e.isDefaultPrevented()){var i=index/size,el=els().eq(i);el.length&&els().removeClass(cls).eq(i).addClass(cls)}},1)}),api.onAddItem(function(e,item){var i=api.getItems().index(item);i%size==0&&addItem(i)})}),conf.api?ret:this}}(jQuery),function($){function Slideshow(root,conf){function find(query){var el=$(query);return el.length<2?el:root.parent().find(query)}function next(){timer&&clearTimeout(timer),timer=setTimeout(function(){tabs.next()},conf.interval)}var timer,self=this,fire=root.add(this),tabs=root.data("tabs"),stopped=!0,nextButton=find(conf.next).click(function(){tabs.next()}),prevButton=find(conf.prev).click(function(){tabs.prev()});if($.extend(self,{getTabs:function(){return tabs},getConf:function(){return conf},play:function(){if(timer)return self;var e=$.Event("onBeforePlay");return fire.trigger(e),e.isDefaultPrevented()?self:(stopped=!1,fire.trigger("onPlay"),fire.on("onClick",next),next(),self)},pause:function(){if(!timer)return self;var e=$.Event("onBeforePause");return fire.trigger(e),e.isDefaultPrevented()?self:(timer=clearTimeout(timer),fire.trigger("onPause"),fire.off("onClick",next),self)},resume:function(){stopped||self.play()},stop:function(){self.pause(),stopped=!0}}),$.each("onBeforePlay,onPlay,onBeforePause,onPause".split(","),function(i,name){$.isFunction(conf[name])&&$(self).on(name,conf[name]),self[name]=function(fn){return $(self).on(name,fn)}}),conf.autopause&&tabs.getTabs().add(nextButton).add(prevButton).add(tabs.getPanes()).hover(self.pause,self.resume),conf.autoplay&&self.play(),conf.clickable&&tabs.getPanes().click(function(){tabs.next()}),!tabs.getConf().rotate){var disabled=conf.disabledClass;tabs.getIndex()||prevButton.addClass(disabled),tabs.onBeforeClick(function(e,i){prevButton.toggleClass(disabled,!i),nextButton.toggleClass(disabled,i==tabs.getTabs().length-1)})}}var tool;tool=$.tools.tabs.slideshow={conf:{next:".forward",prev:".backward",disabledClass:"disabled",autoplay:!1,autopause:!0,interval:3e3,clickable:!0,api:!1}},$.fn.slideshow=function(conf){var el=this.data("slideshow");return el?el:(conf=$.extend({},tool.conf,conf),this.each(function(){el=new Slideshow($(this),conf),$(this).data("slideshow",el)}),conf.api?el:this)}}(jQuery),function(){function extend(to,from){if(from)for(var key in from)from.hasOwnProperty(key)&&(to[key]=from[key]);return to}function map(arr,func){var newArr=[];for(var i in arr)arr.hasOwnProperty(i)&&(newArr[i]=func(arr[i]));return newArr}function Flash(root,opts,conf){if(f.isSupported(opts.version))root.innerHTML=f.getHTML(opts,conf);else if(opts.expressInstall&&f.isSupported([6,65]))root.innerHTML=f.getHTML(extend(opts,{src:opts.expressInstall}),{MMredirectURL:location.href,MMplayerType:"PlugIn",MMdoctitle:document.title});else if(root.innerHTML.replace(/\s/g,"")||(root.innerHTML="<h2>Flash version "+opts.version+" or greater is required</h2><h3>"+(VERSION[0]>0?"Your version is "+VERSION:"You have no flash plugin installed")+"</h3>"+("A"==root.tagName?"<p>Click here to download latest version</p>":"<p>Download latest version from <a href='"+URL+"'>here</a></p>"),"A"==root.tagName&&(root.onclick=function(){location.href=URL})),opts.onFail){var ret=opts.onFail.call(this);"string"==typeof ret&&(root.innerHTML=ret)}IE&&(window[opts.id]=document.getElementById(opts.id)),extend(this,{getRoot:function(){return root},getOptions:function(){return opts},getConf:function(){return conf},getApi:function(){return root.firstChild}})}var IE=document.all,URL="http://www.adobe.com/go/getflashplayer",JQUERY="function"==typeof jQuery,RE=/(\d+)[^\d]+(\d+)[^\d]*(\d*)/,GLOBAL_OPTS={width:"100%",height:"100%",id:"_"+(""+Math.random()).slice(9),allowfullscreen:!0,allowscriptaccess:"always",quality:"high",version:[3,0],onFail:null,expressInstall:null,w3c:!1,cachebusting:!1};window.attachEvent&&window.attachEvent("onbeforeunload",function(){__flash_unloadHandler=function(){},__flash_savedUnloadHandler=function(){}}),window.flashembed=function(root,opts,conf){return"string"==typeof root&&(root=document.getElementById(root.replace("#",""))),root?("string"==typeof opts&&(opts={src:opts}),new Flash(root,extend(extend({},GLOBAL_OPTS),opts),conf)):void 0};var f=extend(window.flashembed,{conf:GLOBAL_OPTS,getVersion:function(){var fo,ver;try{ver=navigator.plugins["Shockwave Flash"].description.slice(16)}catch(e){try{fo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),ver=fo&&fo.GetVariable("$version")}catch(err){try{fo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),ver=fo&&fo.GetVariable("$version")}catch(err2){}}}return ver=RE.exec(ver),ver?[ver[1],ver[3]]:[0,0]},asString:function(obj){if(null===obj||void 0===obj)return null;var type=typeof obj;switch("object"==type&&obj.push&&(type="array"),type){case"string":return obj=obj.replace(new RegExp('(["\\\\])',"g"),"\\$1"),obj=obj.replace(/^\s?(\d+\.?\d*)%/,"$1pct"),'"'+obj+'"';case"array":return"["+map(obj,function(el){return f.asString(el)}).join(",")+"]";case"function":return'"function()"';case"object":var str=[];for(var prop in obj)obj.hasOwnProperty(prop)&&str.push('"'+prop+'":'+f.asString(obj[prop]));return"{"+str.join(",")+"}"}return String(obj).replace(/\s/g," ").replace(/\'/g,'"')},getHTML:function(opts,conf){opts=extend({},opts);var html='<object width="'+opts.width+'" height="'+opts.height+'" id="'+opts.id+'" name="'+opts.id+'"';opts.cachebusting&&(opts.src+=(-1!=opts.src.indexOf("?")?"&":"?")+Math.random()),html+=opts.w3c||!IE?' data="'+opts.src+'" type="application/x-shockwave-flash"':' classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"',html+=">",(opts.w3c||IE)&&(html+='<param name="movie" value="'+opts.src+'" />'),opts.width=opts.height=opts.id=opts.w3c=opts.src=null,opts.onFail=opts.version=opts.expressInstall=null;for(var key in opts)opts[key]&&(html+='<param name="'+key+'" value="'+opts[key]+'" />');var vars="";if(conf){for(var k in conf)if(conf[k]){var val=conf[k];vars+=k+"="+encodeURIComponent(/function|object/.test(typeof val)?f.asString(val):val)+"&"}vars=vars.slice(0,-1),html+='<param name="flashvars" value=\''+vars+"' />"}return html+="</object>"},isSupported:function(ver){return VERSION[0]>ver[0]||VERSION[0]==ver[0]&&VERSION[1]>=ver[1]}}),VERSION=f.getVersion();JQUERY&&(jQuery.tools=jQuery.tools||{version:"@VERSION"},jQuery.tools.flashembed={conf:GLOBAL_OPTS},jQuery.fn.flashembed=function(opts,conf){return this.each(function(){jQuery(this).data("flashembed",flashembed(this,opts,conf))})})}(),function($){function wheelHandler(event){switch(event.type){case"mousemove":return $.extend(event.data,{clientX:event.clientX,clientY:event.clientY,pageX:event.pageX,pageY:event.pageY});case"DOMMouseScroll":$.extend(event,event.data),event.delta=-event.detail/3;break;case"mousewheel":event.delta=event.wheelDelta/120}return event.type="wheel",$.event.handle.call(this,event,event.delta)}$.fn.mousewheel=function(fn){return this[fn?"on":"trigger"]("wheel",fn)},$.event.special.wheel={setup:function(){$.event.add(this,wheelEvents,wheelHandler,{})},teardown:function(){$.event.remove(this,wheelEvents,wheelHandler)}};var wheelEvents=$.browser.mozilla?"DOMMouseScroll"+($.browser.version<"1.9"?" mousemove":""):"mousewheel"}(jQuery),function($){function getCropping(el){var w=$(window),right=w.width()+w.scrollLeft(),bottom=w.height()+w.scrollTop();return[el.offset().top<=w.scrollTop(),right<=el.offset().left+el.width(),bottom<=el.offset().top+el.height(),w.scrollLeft()>=el.offset().left]}function isVisible(crop){for(var i=crop.length;i--;)if(crop[i])return!1;return!0}var t=$.tools.tooltip;t.dynamic={conf:{classNames:"top right bottom left"}},$.fn.dynamic=function(conf){"number"==typeof conf&&(conf={speed:conf}),conf=$.extend({},t.dynamic.conf,conf);var orig,ret,confOrigin=$.extend(!0,{},conf),cls=conf.classNames.split(/\s/);return this.each(function(){var api=$(this).tooltip().onBeforeShow(function(e,pos){var tip=this.getTip(),tipConf=this.getConf();orig||(orig=[tipConf.position[0],tipConf.position[1],tipConf.offset[0],tipConf.offset[1],$.extend({},tipConf)]),$.extend(tipConf,orig[4]),tipConf.position=[orig[0],orig[1]],tipConf.offset=[orig[2],orig[3]],tip.css({visibility:"hidden",position:"absolute",top:pos.top,left:pos.left}).show();var conf=$.extend(!0,{},confOrigin),crop=getCropping(tip);isVisible(crop)||(crop[2]&&($.extend(tipConf,conf.top),tipConf.position[0]="top",tip.addClass(cls[0])),crop[3]&&($.extend(tipConf,conf.right),tipConf.position[1]="right",tip.addClass(cls[1])),crop[0]&&($.extend(tipConf,conf.bottom),tipConf.position[0]="bottom",tip.addClass(cls[2])),crop[1]&&($.extend(tipConf,conf.left),tipConf.position[1]="left",tip.addClass(cls[3])),(crop[0]||crop[2])&&(tipConf.offset[0]*=-1),(crop[1]||crop[3])&&(tipConf.offset[1]*=-1)),tip.css({visibility:"visible"}).hide()});api.onBeforeShow(function(){{var c=this.getConf();this.getTip()}setTimeout(function(){c.position=[orig[0],orig[1]],c.offset=[orig[2],orig[3]]},0)}),api.onHide(function(){var tip=this.getTip();tip.removeClass(conf.classNames)}),ret=api}),conf.api?ret:this}}(jQuery),function($){var t=$.tools.tooltip;$.extend(t.conf,{direction:"up",bounce:!1,slideOffset:10,slideInSpeed:200,slideOutSpeed:200,slideFade:!/msie/.test(navigator.userAgent.toLowerCase())});var dirs={up:["-","top"],down:["+","top"],left:["-","left"],right:["+","left"]};t.addEffect("slide",function(done){var conf=this.getConf(),tip=this.getTip(),params=conf.slideFade?{opacity:conf.opacity}:{},dir=dirs[conf.direction]||dirs.up;params[dir[1]]=dir[0]+"="+conf.slideOffset,conf.slideFade&&tip.css({opacity:0}),tip.show().animate(params,conf.slideInSpeed,done)},function(done){var conf=this.getConf(),offset=conf.slideOffset,params=conf.slideFade?{opacity:0}:{},dir=dirs[conf.direction]||dirs.up,sign=""+dir[0];conf.bounce&&(sign="+"==sign?"-":"+"),params[dir[1]]=sign+"="+offset,this.getTip().animate(params,conf.slideOutSpeed,function(){$(this).hide(),done.call()})})}(jQuery);
\ No newline at end of file
+!function($){function getPosition(el){var p=el.offset();return{top:p.top+el.height()/2,left:p.left+el.width()/2}}var t=$.tools.overlay,w=$(window);$.extend(t.conf,{start:{top:null,left:null},fadeInSpeed:"fast",zIndex:9999});var loadEffect=function(pos,onLoad){var overlay=this.getOverlay(),conf=this.getConf(),trigger=this.getTrigger(),self=this,oWidth=overlay.outerWidth(!0),img=overlay.data("img"),position=conf.fixed?"fixed":"absolute";if(!img){var bg=overlay.css("backgroundImage");if(!bg)throw"background-image CSS property not set for overlay";bg=bg.slice(bg.indexOf("(")+1,bg.indexOf(")")).replace(/\"/g,""),overlay.css("backgroundImage","none"),img=$('<img src="'+bg+'"/>'),img.css({border:0,display:"none"}).width(oWidth),$("body").append(img),overlay.data("img",img)}var itop=conf.start.top||Math.round(w.height()/2),ileft=conf.start.left||Math.round(w.width()/2);if(trigger){var p=getPosition(trigger);itop=p.top,ileft=p.left}conf.fixed?(itop-=w.scrollTop(),ileft-=w.scrollLeft()):(pos.top+=w.scrollTop(),pos.left+=w.scrollLeft()),img.css({position:"absolute",top:itop,left:ileft,width:0,zIndex:conf.zIndex}).show(),pos.position=position,overlay.css(pos),img.animate({top:pos.top,left:pos.left,width:oWidth},conf.speed,function(){overlay.css("zIndex",conf.zIndex+1).fadeIn(conf.fadeInSpeed,function(){self.isOpened()&&!$(this).index(overlay)?onLoad.call():overlay.hide()})}).css("position",position)},closeEffect=function(onClose){var overlay=this.getOverlay().hide(),conf=this.getConf(),trigger=this.getTrigger(),img=overlay.data("img"),css={top:conf.start.top,left:conf.start.left,width:0};trigger&&$.extend(css,getPosition(trigger)),conf.fixed&&img.css({position:"absolute"}).animate({top:"+="+w.scrollTop(),left:"+="+w.scrollLeft()},0),img.animate(css,conf.closeSpeed,onClose)};t.addEffect("apple",loadEffect,closeEffect)}(jQuery),function($){var t=$.tools.scrollable;t.autoscroll={conf:{autoplay:!0,interval:3e3,autopause:!0}},$.fn.autoscroll=function(conf){"number"==typeof conf&&(conf={interval:conf});var ret,opts=$.extend({},t.autoscroll.conf,conf);return this.each(function(){function scroll(){timer&&clearTimeout(timer),timer=setTimeout(function(){api.next()},opts.interval)}var timer,api=$(this).data("scrollable"),root=api.getRoot(),stopped=!1;api&&(ret=api),api.play=function(){timer||(stopped=!1,root.on("onSeek",scroll),scroll())},api.pause=function(){timer=clearTimeout(timer),root.off("onSeek",scroll)},api.resume=function(){stopped||api.play()},api.stop=function(){stopped=!0,api.pause()},opts.autopause&&root.add(api.getNaviButtons()).hover(api.pause,api.resume),opts.autoplay&&api.play()}),opts.api?ret:this}}(jQuery),function($){function find(root,query){var el=$(query);return el.length<2?el:root.parent().find(query)}var t=$.tools.scrollable;t.navigator={conf:{navi:".navi",naviItem:null,activeClass:"active",indexed:!1,idPrefix:null,history:!1}},$.fn.navigator=function(conf){"string"==typeof conf&&(conf={navi:conf}),conf=$.extend({},t.navigator.conf,conf);var ret;return this.each(function(){function doClick(el,i,e){api.seekTo(i),e.preventDefault(),hashed&&history.pushState({i:i},"")}function els(){return navi.find(conf.naviItem||"> *")}function addItem(i){var item=$("<"+(conf.naviItem||"a")+"/>").click(function(e){doClick($(this),i,e)});return 0===i&&item.addClass(cls),conf.indexed&&item.text(i+1),conf.idPrefix&&item.attr("id",conf.idPrefix+i),item.appendTo(navi)}var api=$(this).data("scrollable"),navi=conf.navi.jquery?conf.navi:find(api.getRoot(),conf.navi),buttons=api.getNaviButtons(),cls=conf.activeClass,hashed=conf.history&&!!history.pushState,size=api.getConf().size;api&&(ret=api),api.getNaviButtons=function(){return buttons.add(navi)},hashed&&(history.pushState({i:0},""),$(window).on("popstate",function(evt){var s=evt.originalEvent.state;s&&api.seekTo(s.i)})),els().length?els().each(function(i){$(this).click(function(e){doClick($(this),i,e)})}):$.each(api.getItems(),function(i){i%size==0&&addItem(i)}),api.onBeforeSeek(function(e,index){setTimeout(function(){if(!e.isDefaultPrevented()){var i=index/size,el=els().eq(i);el.length&&els().removeClass(cls).eq(i).addClass(cls)}},1)}),api.onAddItem(function(e,item){var i=api.getItems().index(item);i%size==0&&addItem(i)})}),conf.api?ret:this}}(jQuery),function($){function Slideshow(root,conf){function find(query){var el=$(query);return el.length<2?el:root.parent().find(query)}function next(){timer&&clearTimeout(timer),timer=setTimeout(function(){tabs.next()},conf.interval)}var timer,self=this,fire=root.add(this),tabs=root.data("tabs"),stopped=!0,nextButton=find(conf.next).click(function(){tabs.next()}),prevButton=find(conf.prev).click(function(){tabs.prev()});if($.extend(self,{getTabs:function(){return tabs},getConf:function(){return conf},play:function(){if(timer)return self;var e=$.Event("onBeforePlay");return fire.trigger(e),e.isDefaultPrevented()?self:(stopped=!1,fire.trigger("onPlay"),fire.on("onClick",next),next(),self)},pause:function(){if(!timer)return self;var e=$.Event("onBeforePause");return fire.trigger(e),e.isDefaultPrevented()?self:(timer=clearTimeout(timer),fire.trigger("onPause"),fire.off("onClick",next),self)},resume:function(){stopped||self.play()},stop:function(){self.pause(),stopped=!0}}),$.each("onBeforePlay,onPlay,onBeforePause,onPause".split(","),function(i,name){$.isFunction(conf[name])&&$(self).on(name,conf[name]),self[name]=function(fn){return $(self).on(name,fn)}}),conf.autopause&&tabs.getTabs().add(nextButton).add(prevButton).add(tabs.getPanes()).hover(self.pause,self.resume),conf.autoplay&&self.play(),conf.clickable&&tabs.getPanes().click(function(){tabs.next()}),!tabs.getConf().rotate){var disabled=conf.disabledClass;tabs.getIndex()||prevButton.addClass(disabled),tabs.onBeforeClick(function(e,i){prevButton.toggleClass(disabled,!i),nextButton.toggleClass(disabled,i==tabs.getTabs().length-1)})}}var tool;tool=$.tools.tabs.slideshow={conf:{next:".forward",prev:".backward",disabledClass:"disabled",autoplay:!1,autopause:!0,interval:3e3,clickable:!0,api:!1}},$.fn.slideshow=function(conf){var el=this.data("slideshow");return el?el:(conf=$.extend({},tool.conf,conf),this.each(function(){el=new Slideshow($(this),conf),$(this).data("slideshow",el)}),conf.api?el:this)}}(jQuery),function(){function extend(to,from){if(from)for(var key in from)from.hasOwnProperty(key)&&(to[key]=from[key]);return to}function map(arr,func){var newArr=[];for(var i in arr)arr.hasOwnProperty(i)&&(newArr[i]=func(arr[i]));return newArr}function Flash(root,opts,conf){if(f.isSupported(opts.version))root.innerHTML=f.getHTML(opts,conf);else if(opts.expressInstall&&f.isSupported([6,65]))root.innerHTML=f.getHTML(extend(opts,{src:opts.expressInstall}),{MMredirectURL:location.href,MMplayerType:"PlugIn",MMdoctitle:document.title});else if(root.innerHTML.replace(/\s/g,"")||(root.innerHTML="<h2>Flash version "+opts.version+" or greater is required</h2><h3>"+(VERSION[0]>0?"Your version is "+VERSION:"You have no flash plugin installed")+"</h3>"+("A"==root.tagName?"<p>Click here to download latest version</p>":"<p>Download latest version from <a href='"+URL+"'>here</a></p>"),"A"==root.tagName&&(root.onclick=function(){location.href=URL})),opts.onFail){var ret=opts.onFail.call(this);"string"==typeof ret&&(root.innerHTML=ret)}IE&&(window[opts.id]=document.getElementById(opts.id)),extend(this,{getRoot:function(){return root},getOptions:function(){return opts},getConf:function(){return conf},getApi:function(){return root.firstChild}})}var IE=document.all,URL="http://www.adobe.com/go/getflashplayer",JQUERY="function"==typeof jQuery,RE=/(\d+)[^\d]+(\d+)[^\d]*(\d*)/,GLOBAL_OPTS={width:"100%",height:"100%",id:"_"+(""+Math.random()).slice(9),allowfullscreen:!0,allowscriptaccess:"always",quality:"high",version:[3,0],onFail:null,expressInstall:null,w3c:!1,cachebusting:!1};window.attachEvent&&window.attachEvent("onbeforeunload",function(){__flash_unloadHandler=function(){},__flash_savedUnloadHandler=function(){}}),window.flashembed=function(root,opts,conf){return"string"==typeof root&&(root=document.getElementById(root.replace("#",""))),root?("string"==typeof opts&&(opts={src:opts}),new Flash(root,extend(extend({},GLOBAL_OPTS),opts),conf)):void 0};var f=extend(window.flashembed,{conf:GLOBAL_OPTS,getVersion:function(){var fo,ver;try{ver=navigator.plugins["Shockwave Flash"].description.slice(16)}catch(e){try{fo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),ver=fo&&fo.GetVariable("$version")}catch(err){try{fo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),ver=fo&&fo.GetVariable("$version")}catch(err2){}}}return ver=RE.exec(ver),ver?[ver[1],ver[3]]:[0,0]},asString:function(obj){if(null===obj||void 0===obj)return null;var type=typeof obj;switch("object"==type&&obj.push&&(type="array"),type){case"string":return obj=obj.replace(new RegExp('(["\\\\])',"g"),"\\$1"),obj=obj.replace(/^\s?(\d+\.?\d*)%/,"$1pct"),'"'+obj+'"';case"array":return"["+map(obj,function(el){return f.asString(el)}).join(",")+"]";case"function":return'"function()"';case"object":var str=[];for(var prop in obj)obj.hasOwnProperty(prop)&&str.push('"'+prop+'":'+f.asString(obj[prop]));return"{"+str.join(",")+"}"}return String(obj).replace(/\s/g," ").replace(/\'/g,'"')},getHTML:function(opts,conf){opts=extend({},opts);var html='<object width="'+opts.width+'" height="'+opts.height+'" id="'+opts.id+'" name="'+opts.id+'"';opts.cachebusting&&(opts.src+=(-1!=opts.src.indexOf("?")?"&":"?")+Math.random()),html+=opts.w3c||!IE?' data="'+opts.src+'" type="application/x-shockwave-flash"':' classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"',html+=">",(opts.w3c||IE)&&(html+='<param name="movie" value="'+opts.src+'" />'),opts.width=opts.height=opts.id=opts.w3c=opts.src=null,opts.onFail=opts.version=opts.expressInstall=null;for(var key in opts)opts[key]&&(html+='<param name="'+key+'" value="'+opts[key]+'" />');var vars="";if(conf){for(var k in conf)if(conf[k]){var val=conf[k];vars+=k+"="+encodeURIComponent(/function|object/.test(typeof val)?f.asString(val):val)+"&"}vars=vars.slice(0,-1),html+='<param name="flashvars" value=\''+vars+"' />"}return html+="</object>"},isSupported:function(ver){return VERSION[0]>ver[0]||VERSION[0]==ver[0]&&VERSION[1]>=ver[1]}}),VERSION=f.getVersion();JQUERY&&(jQuery.tools=jQuery.tools||{version:"@VERSION"},jQuery.tools.flashembed={conf:GLOBAL_OPTS},jQuery.fn.flashembed=function(opts,conf){return this.each(function(){jQuery(this).data("flashembed",flashembed(this,opts,conf))})})}(),function($){function wheelHandler(event){switch(event.type){case"mousemove":return $.extend(event.data,{clientX:event.clientX,clientY:event.clientY,pageX:event.pageX,pageY:event.pageY});case"DOMMouseScroll":$.extend(event,event.data),event.delta=-event.detail/3;break;case"mousewheel":event.delta=event.wheelDelta/120}return event.type="wheel",$.event.handle.call(this,event,event.delta)}$.fn.mousewheel=function(fn){return this[fn?"on":"trigger"]("wheel",fn)},$.event.special.wheel={setup:function(){$.event.add(this,wheelEvents,wheelHandler,{})},teardown:function(){$.event.remove(this,wheelEvents,wheelHandler)}};var wheelEvents=$.browser.mozilla?"DOMMouseScroll"+($.browser.version<"1.9"?" mousemove":""):"mousewheel"}(jQuery);
\ No newline at end of file
diff --git a/plone/app/jquerytools/browser/jquery.tools.tooltip.js b/plone/app/jquerytools/browser/jquery.tools.tooltip.js
new file mode 100644
index 0000000..02aecb4
--- /dev/null
+++ b/plone/app/jquerytools/browser/jquery.tools.tooltip.js
@@ -0,0 +1,359 @@
+/**
+ * @license 
+ * jQuery Tools @VERSION Tooltip - UI essentials
+ * 
+ * NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.
+ * 
+ * http://flowplayer.org/tools/tooltip/
+ *
+ * Since: November 2008
+ * Date: @DATE 
+ */
+(function($) { 	
+	// static constructs
+	$.tools = $.tools || {version: '@VERSION'};
+	
+	$.tools.tooltip = {
+		
+		conf: { 
+			
+			// default effect variables
+			effect: 'toggle',			
+			fadeOutSpeed: "fast",
+			predelay: 0,
+			delay: 30,
+			opacity: 1,			
+			tip: 0,
+            fadeIE: false, // enables fade effect in IE
+			
+			// 'top', 'bottom', 'right', 'left', 'center'
+			position: ['top', 'center'], 
+			offset: [0, 0],
+			relative: false,
+			cancelDefault: true,
+			
+			// type to event mapping 
+			events: {
+				def: 			"mouseenter,mouseleave",
+				input: 		"focus,blur",
+				widget:		"focus mouseenter,blur mouseleave",
+				tooltip:		"mouseenter,mouseleave"
+			},
+			
+			// 1.2
+			layout: '<div/>',
+			tipClass: 'tooltip'
+		},
+		
+		addEffect: function(name, loadFn, hideFn) {
+			effects[name] = [loadFn, hideFn];	
+		} 
+	};
+	
+	
+	var effects = { 
+		toggle: [ 
+			function(done) { 
+				var conf = this.getConf(), tip = this.getTip(), o = conf.opacity;
+				if (o < 1) { tip.css({opacity: o}); }
+				tip.show();
+				done.call();
+			},
+			
+			function(done) { 
+				this.getTip().hide();
+				done.call();
+			} 
+		],
+		
+		fade: [
+			function(done) {
+				var conf = this.getConf();
+				if (!/msie/.test(navigator.userAgent.toLowerCase()) || conf.fadeIE) {
+					this.getTip().fadeTo(conf.fadeInSpeed, conf.opacity, done);
+				}
+				else {
+					this.getTip().show();
+					done();
+				}
+			},
+			function(done) {
+				var conf = this.getConf();
+				if (!/msie/.test(navigator.userAgent.toLowerCase()) || conf.fadeIE) {
+					this.getTip().fadeOut(conf.fadeOutSpeed, done);
+				}
+				else {
+					this.getTip().hide();
+					done();
+				}
+			}
+		]		
+	};   
+
+		
+	/* calculate tip position relative to the trigger */  	
+	function getPosition(trigger, tip, conf) {	
+
+		
+		// get origin top/left position 
+		var top = conf.relative ? trigger.position().top : trigger.offset().top, 
+			 left = conf.relative ? trigger.position().left : trigger.offset().left,
+			 pos = conf.position[0];
+
+		top  -= tip.outerHeight() - conf.offset[0];
+		left += trigger.outerWidth() + conf.offset[1];
+		
+		// iPad position fix
+		if (/iPad/i.test(navigator.userAgent)) {
+			top -= $(window).scrollTop();
+		}
+		
+		// adjust Y		
+		var height = tip.outerHeight() + trigger.outerHeight();
+		if (pos == 'center') 	{ top += height / 2; }
+		if (pos == 'bottom') 	{ top += height; }
+		
+		
+		// adjust X
+		pos = conf.position[1]; 	
+		var width = tip.outerWidth() + trigger.outerWidth();
+		if (pos == 'center') 	{ left -= width / 2; }
+		if (pos == 'left')   	{ left -= width; }	 
+		
+		return {top: top, left: left};
+	}		
+
+	
+	
+	function Tooltip(trigger, conf) {
+
+		var self = this, 
+			 fire = trigger.add(self),
+			 tip,
+			 timer = 0,
+			 pretimer = 0, 
+			 title = trigger.attr("title"),
+			 tipAttr = trigger.attr("data-tooltip"),
+			 effect = effects[conf.effect],
+			 shown,
+				 
+			 // get show/hide configuration
+			 isInput = trigger.is(":input"), 
+			 isWidget = isInput && trigger.is(":checkbox, :radio, select, :button, :submit"),			
+			 type = trigger.attr("type"),
+			 evt = conf.events[type] || conf.events[isInput ? (isWidget ? 'widget' : 'input') : 'def']; 
+		
+		
+		// check that configuration is sane
+		if (!effect) { throw "Nonexistent effect \"" + conf.effect + "\""; }					
+		
+		evt = evt.split(/,\s*/); 
+		if (evt.length != 2) { throw "Tooltip: bad events configuration for " + type; } 
+		
+		
+		// trigger --> show  
+		trigger.on(evt[0], function(e) {
+
+			clearTimeout(timer);
+			if (conf.predelay) {
+				pretimer = setTimeout(function() { self.show(e); }, conf.predelay);	
+				
+			} else {
+				self.show(e);	
+			}
+			
+		// trigger --> hide
+		}).on(evt[1], function(e)  {
+			clearTimeout(pretimer);
+			if (conf.delay)  {
+				timer = setTimeout(function() { self.hide(e); }, conf.delay);	
+				
+			} else {
+				self.hide(e);		
+			}
+			
+		}); 
+		
+		
+		// remove default title
+		if (title && conf.cancelDefault) { 
+			trigger.removeAttr("title");
+			trigger.data("title", title);			
+		}		
+		
+		$.extend(self, {
+				
+			show: function(e) {  
+
+				// tip not initialized yet
+				if (!tip) {
+					
+					// data-tooltip 
+					if (tipAttr) {
+						tip = $(tipAttr);
+
+					// single tip element for all
+					} else if (conf.tip) { 
+						tip = $(conf.tip).eq(0);
+						
+					// autogenerated tooltip
+					} else if (title) { 
+						tip = $(conf.layout).addClass(conf.tipClass).appendTo(document.body)
+							.hide().append(title);
+
+					// manual tooltip
+					} else {	
+						tip = trigger.find('.' + conf.tipClass);
+						if (!tip.length) { tip = trigger.next(); }
+						if (!tip.length) { tip = trigger.parent().next(); } 	 
+					}
+					
+					if (!tip.length) { throw "Cannot find tooltip for " + trigger;	}
+				} 
+			 	
+			 	if (self.isShown()) { return self; }  
+				
+			 	// stop previous animation
+			 	tip.stop(true, true); 			 	
+			 	
+				// get position
+				var pos = getPosition(trigger, tip, conf);			
+		
+				// restore title for single tooltip element
+				if (conf.tip) {
+					tip.html(trigger.data("title"));
+				}
+
+				// onBeforeShow
+				e = $.Event();
+				e.type = "onBeforeShow";
+				fire.trigger(e, [pos]);				
+				if (e.isDefaultPrevented()) { return self; }
+		
+				
+				// onBeforeShow may have altered the configuration
+				pos = getPosition(trigger, tip, conf);
+				
+				// set position
+				tip.css({position:'absolute', top: pos.top, left: pos.left});					
+				
+				shown = true;
+				
+				// invoke effect 
+				effect[0].call(self, function() {
+					e.type = "onShow";
+					shown = 'full';
+					fire.trigger(e);		 
+				});					
+
+	 	
+				// tooltip events       
+				var event = conf.events.tooltip.split(/,\s*/);
+
+				if (!tip.data("__set")) {
+					
+					tip.off(event[0]).on(event[0], function() { 
+						clearTimeout(timer);
+						clearTimeout(pretimer);
+					});
+					
+					if (event[1] && !trigger.is("input:not(:checkbox, :radio), textarea")) { 					
+						tip.off(event[1]).on(event[1], function(e) {
+	
+							// being moved to the trigger element
+							if (e.relatedTarget != trigger[0]) {
+								trigger.trigger(evt[1].split(" ")[0]);
+							}
+						}); 
+					} 
+					
+					// bind agein for if same tip element
+					if (!conf.tip) tip.data("__set", true);
+				}
+				
+				return self;
+			},
+			
+			hide: function(e) {
+
+				if (!tip || !self.isShown()) { return self; }
+			
+				// onBeforeHide
+				e = $.Event();
+				e.type = "onBeforeHide";
+				fire.trigger(e);				
+				if (e.isDefaultPrevented()) { return; }
+	
+				shown = false;
+				
+				effects[conf.effect][1].call(self, function() {
+					e.type = "onHide";
+					fire.trigger(e);		 
+				});
+				
+				return self;
+			},
+			
+			isShown: function(fully) {
+				return fully ? shown == 'full' : shown;	
+			},
+				
+			getConf: function() {
+				return conf;	
+			},
+				
+			getTip: function() {
+				return tip;	
+			},
+			
+			getTrigger: function() {
+				return trigger;	
+			}		
+
+		});		
+
+		// callbacks	
+		$.each("onHide,onBeforeShow,onShow,onBeforeHide".split(","), function(i, name) {
+				
+			// configuration
+			if ($.isFunction(conf[name])) { 
+				$(self).on(name, conf[name]); 
+			}
+
+			// API
+			self[name] = function(fn) {
+				if (fn) { $(self).on(name, fn); }
+				return self;
+			};
+		});
+		
+	}
+		
+	
+	// jQuery plugin implementation
+	$.fn.tooltip = function(conf) {
+		
+		// return existing instance
+		var api = this.data("tooltip");
+		if (api) { return api; }
+
+		conf = $.extend(true, {}, $.tools.tooltip.conf, conf);
+		
+		// position can also be given as string
+		if (typeof conf.position == 'string') {
+			conf.position = conf.position.split(/,?\s/);	
+		}
+		
+		// install tooltip for each entry in jQuery object
+		this.each(function() {
+			api = new Tooltip($(this), conf); 
+			$(this).data("tooltip", api); 
+		});
+		
+		return conf.api ? api: this;		 
+	};
+		
+}) (jQuery);
+
+		
+
diff --git a/plone/app/jquerytools/browser/jquery.tools.tooltip.min.js b/plone/app/jquerytools/browser/jquery.tools.tooltip.min.js
new file mode 100644
index 0000000..e933be2
--- /dev/null
+++ b/plone/app/jquerytools/browser/jquery.tools.tooltip.min.js
@@ -0,0 +1 @@
+!function($){function getPosition(trigger,tip,conf){var top=conf.relative?trigger.position().top:trigger.offset().top,left=conf.relative?trigger.position().left:trigger.offset().left,pos=conf.position[0];top-=tip.outerHeight()-conf.offset[0],left+=trigger.outerWidth()+conf.offset[1],/iPad/i.test(navigator.userAgent)&&(top-=$(window).scrollTop());var height=tip.outerHeight()+trigger.outerHeight();"center"==pos&&(top+=height/2),"bottom"==pos&&(top+=height),pos=conf.position[1];var width=tip.outerWidth()+trigger.outerWidth();return"center"==pos&&(left-=width/2),"left"==pos&&(left-=width),{top:top,left:left}}function Tooltip(trigger,conf){var tip,shown,self=this,fire=trigger.add(self),timer=0,pretimer=0,title=trigger.attr("title"),tipAttr=trigger.attr("data-tooltip"),effect=effects[conf.effect],isInput=trigger.is(":input"),isWidget=isInput&&trigger.is(":checkbox, :radio, select, :button, :submit"),type=trigger.attr("type"),evt=conf.events[type]||conf.events[isInput?isWidget?"widget":"input":"def"];if(!effect)throw'Nonexistent effect "'+conf.effect+'"';if(evt=evt.split(/,\s*/),2!=evt.length)throw"Tooltip: bad events configuration for "+type;trigger.on(evt[0],function(e){clearTimeout(timer),conf.predelay?pretimer=setTimeout(function(){self.show(e)},conf.predelay):self.show(e)}).on(evt[1],function(e){clearTimeout(pretimer),conf.delay?timer=setTimeout(function(){self.hide(e)},conf.delay):self.hide(e)}),title&&conf.cancelDefault&&(trigger.removeAttr("title"),trigger.data("title",title)),$.extend(self,{show:function(e){if(!tip&&(tipAttr?tip=$(tipAttr):conf.tip?tip=$(conf.tip).eq(0):title?tip=$(conf.layout).addClass(conf.tipClass).appendTo(document.body).hide().append(title):(tip=trigger.find("."+conf.tipClass),tip.length||(tip=trigger.next()),tip.length||(tip=trigger.parent().next())),!tip.length))throw"Cannot find tooltip for "+trigger;if(self.isShown())return self;tip.stop(!0,!0);var pos=getPosition(trigger,tip,conf);if(conf.tip&&tip.html(trigger.data("title")),e=$.Event(),e.type="onBeforeShow",fire.trigger(e,[pos]),e.isDefaultPrevented())return self;pos=getPosition(trigger,tip,conf),tip.css({position:"absolute",top:pos.top,left:pos.left}),shown=!0,effect[0].call(self,function(){e.type="onShow",shown="full",fire.trigger(e)});var event=conf.events.tooltip.split(/,\s*/);return tip.data("__set")||(tip.off(event[0]).on(event[0],function(){clearTimeout(timer),clearTimeout(pretimer)}),event[1]&&!trigger.is("input:not(:checkbox, :radio), textarea")&&tip.off(event[1]).on(event[1],function(e){e.relatedTarget!=trigger[0]&&trigger.trigger(evt[1].split(" ")[0])}),conf.tip||tip.data("__set",!0)),self},hide:function(e){return tip&&self.isShown()?(e=$.Event(),e.type="onBeforeHide",fire.trigger(e),e.isDefaultPrevented()?void 0:(shown=!1,effects[conf.effect][1].call(self,function(){e.type="onHide",fire.trigger(e)}),self)):self},isShown:function(fully){return fully?"full"==shown:shown},getConf:function(){return conf},getTip:function(){return tip},getTrigger:function(){return trigger}}),$.each("onHide,onBeforeShow,onShow,onBeforeHide".split(","),function(i,name){$.isFunction(conf[name])&&$(self).on(name,conf[name]),self[name]=function(fn){return fn&&$(self).on(name,fn),self}})}$.tools=$.tools||{version:"@VERSION"},$.tools.tooltip={conf:{effect:"toggle",fadeOutSpeed:"fast",predelay:0,delay:30,opacity:1,tip:0,fadeIE:!1,position:["top","center"],offset:[0,0],relative:!1,cancelDefault:!0,events:{def:"mouseenter,mouseleave",input:"focus,blur",widget:"focus mouseenter,blur mouseleave",tooltip:"mouseenter,mouseleave"},layout:"<div/>",tipClass:"tooltip"},addEffect:function(name,loadFn,hideFn){effects[name]=[loadFn,hideFn]}};var effects={toggle:[function(done){var conf=this.getConf(),tip=this.getTip(),o=conf.opacity;1>o&&tip.css({opacity:o}),tip.show(),done.call()},function(done){this.getTip().hide(),done.call()}],fade:[function(done){var conf=this.getConf();!/msie/.test(navigator.userAgent.toLowerCase())||conf.fadeIE?this.getTip().fadeTo(conf.fadeInSpeed,conf.opacity,done):(this.getTip().show(),done())},function(done){var conf=this.getConf();!/msie/.test(navigator.userAgent.toLowerCase())||conf.fadeIE?this.getTip().fadeOut(conf.fadeOutSpeed,done):(this.getTip().hide(),done())}]};$.fn.tooltip=function(conf){var api=this.data("tooltip");return api?api:(conf=$.extend(!0,{},$.tools.tooltip.conf,conf),"string"==typeof conf.position&&(conf.position=conf.position.split(/,?\s/)),this.each(function(){api=new Tooltip($(this),conf),$(this).data("tooltip",api)}),conf.api?api:this)}}(jQuery);
\ No newline at end of file
diff --git a/plone/app/jquerytools/browser/jquery.tools.tooltip.plugins.js b/plone/app/jquerytools/browser/jquery.tools.tooltip.plugins.js
new file mode 100644
index 0000000..ab5feeb
--- /dev/null
+++ b/plone/app/jquerytools/browser/jquery.tools.tooltip.plugins.js
@@ -0,0 +1,234 @@
+/**
+ * @license 
+ * jQuery Tools @VERSION / Tooltip Dynamic Positioning
+ * 
+ * NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.
+ * 
+ * http://flowplayer.org/tools/tooltip/dynamic.html
+ *
+ * Since: July 2009
+ * Date: @DATE 
+ */
+(function($) { 
+
+	// version number
+	var t = $.tools.tooltip;
+	
+	t.dynamic = {
+		conf: {
+			classNames: "top right bottom left"
+		}
+	};
+		
+	/* 
+	 * See if element is on the viewport. Returns an boolean array specifying which
+	 * edges are hidden. Edges are in following order:
+	 * 
+	 * [top, right, bottom, left]
+	 * 
+	 * For example following return value means that top and right edges are hidden
+	 * 
+	 * [true, true, false, false]
+	 * 
+	 */
+	function getCropping(el) {
+		
+		var w = $(window); 
+		var right = w.width() + w.scrollLeft();
+		var bottom = w.height() + w.scrollTop();		
+		
+		return [
+			el.offset().top <= w.scrollTop(), 						// top
+			right <= el.offset().left + el.width(),				// right
+			bottom <= el.offset().top + el.height(),			// bottom
+			w.scrollLeft() >= el.offset().left 					// left
+		]; 
+	}
+	
+	/*
+		Returns true if all edges of an element are on viewport. false if not
+		
+		@param crop the cropping array returned by getCropping function
+	 */
+	function isVisible(crop) {
+		var i = crop.length;
+		while (i--) {
+			if (crop[i]) { return false; }	
+		}
+		return true;
+	}
+	
+	// dynamic plugin
+	$.fn.dynamic = function(conf) {
+		
+		if (typeof conf == 'number') { conf = {speed: conf}; }
+		
+		conf = $.extend({}, t.dynamic.conf, conf);
+		
+		var confOrigin = $.extend(true,{},conf),
+		    cls = conf.classNames.split(/\s/), 
+		    orig, ret;
+	
+		this.each(function() {		
+				
+			var api = $(this).tooltip().onBeforeShow(function(e, pos) {				
+
+				// get nessessary variables
+				var tip = this.getTip(), tipConf = this.getConf();  
+
+				/*
+					We store the original configuration and use it to restore back to the original state.
+				*/					
+				if (!orig) {
+					orig = [
+						tipConf.position[0], 
+						tipConf.position[1], 
+						tipConf.offset[0], 
+						tipConf.offset[1], 
+						$.extend({}, tipConf)
+					];
+				}
+				
+				/*
+					display tip in it's default position and by setting visibility to hidden.
+					this way we can check whether it will be on the viewport
+				*/
+				$.extend(tipConf, orig[4]);
+				tipConf.position = [orig[0], orig[1]];
+				tipConf.offset = [orig[2], orig[3]];
+
+				tip.css({
+					visibility: 'hidden',
+					position: 'absolute',
+					top: pos.top,
+					left: pos.left 
+				}).show(); 
+				
+				var conf = $.extend(true,{},confOrigin),
+				
+				    // now let's see for hidden edges
+				    crop = getCropping(tip);		
+								
+				// possibly alter the configuration
+				if (!isVisible(crop)) {
+					
+					// change the position and add class
+					if (crop[2]) { $.extend(tipConf, conf.top);		tipConf.position[0] = 'top'; 		tip.addClass(cls[0]); }
+					if (crop[3]) { $.extend(tipConf, conf.right);	tipConf.position[1] = 'right'; 	tip.addClass(cls[1]); }					
+					if (crop[0]) { $.extend(tipConf, conf.bottom); 	tipConf.position[0] = 'bottom';	tip.addClass(cls[2]); } 
+					if (crop[1]) { $.extend(tipConf, conf.left);		tipConf.position[1] = 'left'; 	tip.addClass(cls[3]); }					
+					
+					// vertical offset
+					if (crop[0] || crop[2]) { tipConf.offset[0] *= -1; }
+					
+					// horizontal offset
+					if (crop[1] || crop[3]) { tipConf.offset[1] *= -1; }
+				}  
+				
+				tip.css({visibility: 'visible'}).hide();
+		
+			});
+			
+			// restore positioning as soon as possible
+			api.onBeforeShow(function() {
+				var c = this.getConf(), tip = this.getTip();		 
+				setTimeout(function() { 
+					c.position = [orig[0], orig[1]];
+					c.offset = [orig[2], orig[3]];
+				}, 0);
+			});
+			
+			// remove custom class names and restore original effect
+			api.onHide(function() {
+				var tip = this.getTip(); 
+				tip.removeClass(conf.classNames);
+			});
+				
+			ret = api;
+			
+		});
+		
+		return conf.api ? ret : this;
+	};	
+	
+}) (jQuery);
+
+
+/**
+ * @license 
+ * jQuery Tools @VERSION / Tooltip Slide Effect
+ * 
+ * NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.
+ * 
+ * http://flowplayer.org/tools/tooltip/slide.html
+ *
+ * Since: September 2009
+ * Date: @DATE 
+ */
+(function($) { 
+
+	// version number
+	var t = $.tools.tooltip;
+		
+	// extend global configuragion with effect specific defaults
+	$.extend(t.conf, { 
+		direction: 'up', // down, left, right 
+		bounce: false,
+		slideOffset: 10,
+		slideInSpeed: 200,
+		slideOutSpeed: 200, 
+		slideFade: !/msie/.test(navigator.userAgent.toLowerCase())
+	});			
+	
+	// directions for slide effect
+	var dirs = {
+		up: ['-', 'top'],
+		down: ['+', 'top'],
+		left: ['-', 'left'],
+		right: ['+', 'left']
+	};
+	
+	/* default effect: "slide"  */
+	t.addEffect("slide", 
+		
+		// show effect
+		function(done) { 
+
+			// variables
+			var conf = this.getConf(), 
+				 tip = this.getTip(),
+				 params = conf.slideFade ? {opacity: conf.opacity} : {}, 
+				 dir = dirs[conf.direction] || dirs.up;
+
+			// direction			
+			params[dir[1]] = dir[0] +'='+ conf.slideOffset;
+			
+			// perform animation
+			if (conf.slideFade) { tip.css({opacity:0}); }
+			tip.show().animate(params, conf.slideInSpeed, done); 
+		}, 
+		
+		// hide effect
+		function(done) {
+			
+			// variables
+			var conf = this.getConf(), 
+				 offset = conf.slideOffset,
+				 params = conf.slideFade ? {opacity: 0} : {}, 
+				 dir = dirs[conf.direction] || dirs.up;
+			
+			// direction
+			var sign = "" + dir[0];
+			if (conf.bounce) { sign = sign == '+' ? '-' : '+'; }			
+			params[dir[1]] = sign +'='+ offset;			
+			
+			// perform animation
+			this.getTip().animate(params, conf.slideOutSpeed, function()  {
+				$(this).hide();
+				done.call();		
+			});
+		}
+	);  
+	
+})(jQuery);	
+		
diff --git a/plone/app/jquerytools/browser/jquery.tools.tooltip.plugins.min.js b/plone/app/jquerytools/browser/jquery.tools.tooltip.plugins.min.js
new file mode 100644
index 0000000..607c200
--- /dev/null
+++ b/plone/app/jquerytools/browser/jquery.tools.tooltip.plugins.min.js
@@ -0,0 +1 @@
+!function($){function getCropping(el){var w=$(window),right=w.width()+w.scrollLeft(),bottom=w.height()+w.scrollTop();return[el.offset().top<=w.scrollTop(),right<=el.offset().left+el.width(),bottom<=el.offset().top+el.height(),w.scrollLeft()>=el.offset().left]}function isVisible(crop){for(var i=crop.length;i--;)if(crop[i])return!1;return!0}var t=$.tools.tooltip;t.dynamic={conf:{classNames:"top right bottom left"}},$.fn.dynamic=function(conf){"number"==typeof conf&&(conf={speed:conf}),conf=$.extend({},t.dynamic.conf,conf);var orig,ret,confOrigin=$.extend(!0,{},conf),cls=conf.classNames.split(/\s/);return this.each(function(){var api=$(this).tooltip().onBeforeShow(function(e,pos){var tip=this.getTip(),tipConf=this.getConf();orig||(orig=[tipConf.position[0],tipConf.position[1],tipConf.offset[0],tipConf.offset[1],$.extend({},tipConf)]),$.extend(tipConf,orig[4]),tipConf.position=[orig[0],orig[1]],tipConf.offset=[orig[2],orig[3]],tip.css({visibility:"hidden",position:"absolute",top:pos.top,left:pos.left}).show();var conf=$.extend(!0,{},confOrigin),crop=getCropping(tip);isVisible(crop)||(crop[2]&&($.extend(tipConf,conf.top),tipConf.position[0]="top",tip.addClass(cls[0])),crop[3]&&($.extend(tipConf,conf.right),tipConf.position[1]="right",tip.addClass(cls[1])),crop[0]&&($.extend(tipConf,conf.bottom),tipConf.position[0]="bottom",tip.addClass(cls[2])),crop[1]&&($.extend(tipConf,conf.left),tipConf.position[1]="left",tip.addClass(cls[3])),(crop[0]||crop[2])&&(tipConf.offset[0]*=-1),(crop[1]||crop[3])&&(tipConf.offset[1]*=-1)),tip.css({visibility:"visible"}).hide()});api.onBeforeShow(function(){{var c=this.getConf();this.getTip()}setTimeout(function(){c.position=[orig[0],orig[1]],c.offset=[orig[2],orig[3]]},0)}),api.onHide(function(){var tip=this.getTip();tip.removeClass(conf.classNames)}),ret=api}),conf.api?ret:this}}(jQuery),function($){var t=$.tools.tooltip;$.extend(t.conf,{direction:"up",bounce:!1,slideOffset:10,slideInSpeed:200,slideOutSpeed:200,slideFade:!/msie/.test(navigator.userAgent.toLowerCase())});var dirs={up:["-","top"],down:["+","top"],left:["-","left"],right:["+","left"]};t.addEffect("slide",function(done){var conf=this.getConf(),tip=this.getTip(),params=conf.slideFade?{opacity:conf.opacity}:{},dir=dirs[conf.direction]||dirs.up;params[dir[1]]=dir[0]+"="+conf.slideOffset,conf.slideFade&&tip.css({opacity:0}),tip.show().animate(params,conf.slideInSpeed,done)},function(done){var conf=this.getConf(),offset=conf.slideOffset,params=conf.slideFade?{opacity:0}:{},dir=dirs[conf.direction]||dirs.up,sign=""+dir[0];conf.bounce&&(sign="+"==sign?"-":"+"),params[dir[1]]=sign+"="+offset,this.getTip().animate(params,conf.slideOutSpeed,function(){$(this).hide(),done.call()})})}(jQuery);
\ No newline at end of file
diff --git a/plone/app/jquerytools/configure.zcml b/plone/app/jquerytools/configure.zcml
index c114404..002329c 100644
--- a/plone/app/jquerytools/configure.zcml
+++ b/plone/app/jquerytools/configure.zcml
@@ -28,6 +28,14 @@
         name="plone.app.jquerytools.validator.js"
         file="browser/jquery.tools.validator.min.js"
         />
+    <resource
+        name="plone.app.jquerytools.tooltip.js"
+        file="browser/jquery.tools.tooltip.min.js"
+        />
+    <resource
+        name="plone.app.jquerytools.tooltip.plugins.js"
+        file="browser/jquery.tools.tooltip.plugins.min.js"
+        />
 
     <!-- unminified resources -->
     <resource
@@ -54,6 +62,14 @@
         name="plone.app.jquerytools.validator.unmin.js"
         file="browser/jquery.tools.validator.js"
         />
+    <resource
+        name="plone.app.jquerytools.tooltip.unmin.js"
+        file="browser/jquery.tools.tooltip.js"
+        />
+    <resource
+        name="plone.app.jquerytools.tooltip.plugins.unmin.js"
+        file="browser/jquery.tools.tooltip.plugins.js"
+        />
 
     <!-- other resources -->
     <resource
diff --git a/plone/app/jquerytools/profiles/default/jsregistry.xml b/plone/app/jquerytools/profiles/default/jsregistry.xml
index 24fcfd0..0b293d9 100644
--- a/plone/app/jquerytools/profiles/default/jsregistry.xml
+++ b/plone/app/jquerytools/profiles/default/jsregistry.xml
@@ -2,11 +2,13 @@
 <object name="portal_javascripts">
 
   <javascript enabled="False" id="++resource++plone.app.jquerytools.unmin.js" />
-  <javascript enabled="False" id="++resource++plone.app.jquerytools.unmin.form.js" />
-  <javascript enabled="False" id="++resource++plone.app.jquerytools.unmin.dateinput.js" />
-  <javascript enabled="False" id="++resource++plone.app.jquerytools.unmin.rangeinput.js" />
-  <javascript enabled="False" id="++resource++plone.app.jquerytools.unmin.validator.js" />
-  <javascript enabled="False" id="++resource++plone.app.jquerytools.unmin.plugins.js" />
+  <javascript enabled="False" id="++resource++plone.app.jquerytools.form.unmin.js" />
+  <javascript enabled="False" id="++resource++plone.app.jquerytools.dateinput.unmin.js" />
+  <javascript enabled="False" id="++resource++plone.app.jquerytools.rangeinput.unmin.js" />
+  <javascript enabled="False" id="++resource++plone.app.jquerytools.validator.unmin.js" />
+  <javascript enabled="False" id="++resource++plone.app.jquerytools.plugins.unmin.js" />
+  <javascript enabled="False" id="++resource++plone.app.jquerytools.tooltip.unmin.js" />
+  <javascript enabled="False" id="++resource++plone.app.jquerytools.tooltip.plugins.unmin.js" />
 
   <javascript
       cacheable="True"
@@ -85,4 +87,26 @@
       insert-after="++resource++plone.app.jquerytools.validator.js"
       />
 
+  <javascript
+      cacheable="True"
+      compression="none"
+      cookable="True"
+      enabled="True"
+      expression=""
+      id="++resource++plone.app.jquerytools.tooltip.js"
+      inline="False"
+      insert-after="++resource++plone.app.jquerytools.plugins.js"
+      />
+
+  <javascript
+      cacheable="True"
+      compression="none"
+      cookable="True"
+      enabled="False"
+      expression=""
+      id="++resource++plone.app.jquerytools.tooltip.plugins.js"
+      inline="False"
+      insert-after="++resource++plone.app.jquerytools.tooltip.js"
+      />
+
 </object>
diff --git a/plone/app/jquerytools/profiles/default/metadata.xml b/plone/app/jquerytools/profiles/default/metadata.xml
index bc4f20f..a44cc34 100644
--- a/plone/app/jquerytools/profiles/default/metadata.xml
+++ b/plone/app/jquerytools/profiles/default/metadata.xml
@@ -1,4 +1,4 @@
 <?xml version="1.0"?>
 <metadata>
-  <version>2.0</version>
+  <version>3</version>
 </metadata>
diff --git a/plone/app/jquerytools/profiles/development/jsregistry.xml b/plone/app/jquerytools/profiles/development/jsregistry.xml
index 3c77f8c..e79b99e 100644
--- a/plone/app/jquerytools/profiles/development/jsregistry.xml
+++ b/plone/app/jquerytools/profiles/development/jsregistry.xml
@@ -7,6 +7,8 @@
   <javascript enabled="False" id="++resource++plone.app.jquerytools.rangeinput.js" />
   <javascript enabled="False" id="++resource++plone.app.jquerytools.validator.js" />
   <javascript enabled="False" id="++resource++plone.app.jquerytools.plugins.js" />
+  <javascript enabled="False" id="++resource++plone.app.jquerytools.tooltip.js" />
+  <javascript enabled="False" id="++resource++plone.app.jquerytools.tooltip.plugins.js" />
 
   <javascript
       cacheable="True"
@@ -74,4 +76,26 @@
       insert-after="++resource++plone.app.jquerytools.plugins.js"
       />
 
+  <javascript
+      cacheable="True"
+      compression="none"
+      cookable="True"
+      enabled="True"
+      expression=""
+      id="++resource++plone.app.jquerytools.tooltip.unmin.js"
+      inline="False"
+      insert-after="++resource++plone.app.jquerytools.plugins.js"
+      />
+
+  <javascript
+      cacheable="True"
+      compression="none"
+      cookable="True"
+      enabled="False"
+      expression=""
+      id="++resource++plone.app.jquerytools.tooltip.plugins.unmin.js"
+      inline="False"
+      insert-after="++resource++plone.app.jquerytools.js"
+      />
+
 </object>
diff --git a/plone/app/jquerytools/upgrades/__init__.py b/plone/app/jquerytools/upgrades/__init__.py
index 6fc8207..98ff7bf 100644
--- a/plone/app/jquerytools/upgrades/__init__.py
+++ b/plone/app/jquerytools/upgrades/__init__.py
@@ -13,3 +13,16 @@ def upgrade1to2(context):
         'profile-plone.app.jquerytools:default',
         'jquerytools-various',
         purge_old=False)
+
+
+def common_upgrade(context):
+    """ Common upgrade for newer jquerytools versions - import javascript
+    registry and cook resources.
+    """
+    import pdb; pdb.set_trace()
+    setup = getToolByName(context, "portal_setup")
+    setup.runImportStepFromProfile(
+        'profile-plone.app.jquerytools:default',
+        'jsregistry')
+    tool = getToolByName(context, 'portal_javascripts')
+    tool.cookResources()
diff --git a/plone/app/jquerytools/upgrades/configure.zcml b/plone/app/jquerytools/upgrades/configure.zcml
index 6b0ef96..cdb8855 100644
--- a/plone/app/jquerytools/upgrades/configure.zcml
+++ b/plone/app/jquerytools/upgrades/configure.zcml
@@ -22,6 +22,15 @@
       profile="plone.app.jquerytools:default"
       />
 
+  <genericsetup:upgradeStep
+      source="2"
+      destination="3"
+      title="Add separate tooltip resources"
+      description=""
+      handler=".common_upgrade"
+      profile="plone.app.jquerytools:default"
+      />
+
   <!-- steps on Plone upgrade -->
   
   <!-- disable overlays.css when upgrading from Plone 3 to 4 -->
diff --git a/setup.py b/setup.py
index 707f2b7..3dba8d8 100644
--- a/setup.py
+++ b/setup.py
@@ -1,6 +1,6 @@
 from setuptools import setup, find_packages
 
-version = '1.6.3.dev0'
+version = '1.7.0.dev0'
 
 setup(
     name='plone.app.jquerytools',


Repository: plone.app.jquerytools
Branch: refs/heads/master
Date: 2015-03-27T23:44:52+01:00
Author: Johannes Raggam (thet) <raggam-nl@adm.at>
Commit: https://github.com/plone/plone.app.jquerytools/commit/8c91a78ae908adc43b0e2150633137d609ca879f

Remove the development profile. Unminified resources are still provided. If you need them, include them in your own profile.

Files changed:
M CHANGES.rst
M plone/app/jquerytools/configure.zcml
M plone/app/jquerytools/profiles/default/jsregistry.xml
D plone/app/jquerytools/profiles/development/jsregistry.xml
D plone/app/jquerytools/profiles/development/metadata.xml

diff --git a/CHANGES.rst b/CHANGES.rst
index 1b465e1..d829afc 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,12 +4,14 @@ Changelog
 1.7.0 (unreleased)
 ------------------
 
+- Remove the development profile. Unminified resources are still provided. If
+  you need them, include them in your own profile.
+  [thet]
+
 - Move jQueryTools tooltip into separate file, so that it can be selectively
   disabled.
   [thet]
 
-- Disable unminified development javascript in default profile.
-  [thet]
 
 1.6.2 (2014-11-04)
 ------------------
diff --git a/plone/app/jquerytools/configure.zcml b/plone/app/jquerytools/configure.zcml
index 002329c..bda3072 100644
--- a/plone/app/jquerytools/configure.zcml
+++ b/plone/app/jquerytools/configure.zcml
@@ -110,14 +110,6 @@
         provides="Products.GenericSetup.interfaces.EXTENSION"
         for="Products.CMFCore.interfaces.ISiteRoot"
         />
-    <genericsetup:registerProfile
-        name="development"
-        title="Plone JQuery Tools Development Integration"
-        directory="profiles/development"
-        description="Profile for Plone's JQuery Tools resources for development (unminified)."
-        provides="Products.GenericSetup.interfaces.EXTENSION"
-        for="Products.CMFCore.interfaces.ISiteRoot"
-        />
 
     <!-- custom steps for installation profile -->
     <genericsetup:importStep
diff --git a/plone/app/jquerytools/profiles/default/jsregistry.xml b/plone/app/jquerytools/profiles/default/jsregistry.xml
index 0b293d9..ffdcbf6 100644
--- a/plone/app/jquerytools/profiles/default/jsregistry.xml
+++ b/plone/app/jquerytools/profiles/default/jsregistry.xml
@@ -1,15 +1,6 @@
 <?xml version="1.0"?>
 <object name="portal_javascripts">
 
-  <javascript enabled="False" id="++resource++plone.app.jquerytools.unmin.js" />
-  <javascript enabled="False" id="++resource++plone.app.jquerytools.form.unmin.js" />
-  <javascript enabled="False" id="++resource++plone.app.jquerytools.dateinput.unmin.js" />
-  <javascript enabled="False" id="++resource++plone.app.jquerytools.rangeinput.unmin.js" />
-  <javascript enabled="False" id="++resource++plone.app.jquerytools.validator.unmin.js" />
-  <javascript enabled="False" id="++resource++plone.app.jquerytools.plugins.unmin.js" />
-  <javascript enabled="False" id="++resource++plone.app.jquerytools.tooltip.unmin.js" />
-  <javascript enabled="False" id="++resource++plone.app.jquerytools.tooltip.plugins.unmin.js" />
-
   <javascript
       cacheable="True"
       compression="none"
@@ -109,4 +100,12 @@
       insert-after="++resource++plone.app.jquerytools.tooltip.js"
       />
 
+  <!-- upgrade -->
+  <javascript remove="True" id="++resource++plone.app.jquerytools.unmin.js" />
+  <javascript remove="True" id="++resource++plone.app.jquerytools.form.unmin.js" />
+  <javascript remove="True" id="++resource++plone.app.jquerytools.dateinput.unmin.js" />
+  <javascript remove="True" id="++resource++plone.app.jquerytools.rangeinput.unmin.js" />
+  <javascript remove="True" id="++resource++plone.app.jquerytools.validator.unmin.js" />
+  <javascript remove="True" id="++resource++plone.app.jquerytools.plugins.unmin.js" />
+
 </object>
diff --git a/plone/app/jquerytools/profiles/development/jsregistry.xml b/plone/app/jquerytools/profiles/development/jsregistry.xml
deleted file mode 100644
index e79b99e..0000000
--- a/plone/app/jquerytools/profiles/development/jsregistry.xml
+++ /dev/null
@@ -1,101 +0,0 @@
-<?xml version="1.0"?>
-<object name="portal_javascripts">
-
-  <javascript enabled="False" id="++resource++plone.app.jquerytools.js" />
-  <javascript enabled="False" id="++resource++plone.app.jquerytools.form.js" />
-  <javascript enabled="False" id="++resource++plone.app.jquerytools.dateinput.js" />
-  <javascript enabled="False" id="++resource++plone.app.jquerytools.rangeinput.js" />
-  <javascript enabled="False" id="++resource++plone.app.jquerytools.validator.js" />
-  <javascript enabled="False" id="++resource++plone.app.jquerytools.plugins.js" />
-  <javascript enabled="False" id="++resource++plone.app.jquerytools.tooltip.js" />
-  <javascript enabled="False" id="++resource++plone.app.jquerytools.tooltip.plugins.js" />
-
-  <javascript
-      cacheable="True"
-      compression="safe"
-      cookable="True"
-      enabled="True"
-      expression=""
-      id="++resource++plone.app.jquerytools.unmin.js"
-      inline="False"
-      insert-after="++resource++plone.app.jquerytools.js"
-      />
-
-  <javascript
-      cacheable="True"
-      compression="safe"
-      cookable="True"
-      enabled="True"
-      expression=""
-      id="++resource++plone.app.jquerytools.form.unmin.js"
-      inline="False"
-      insert-after="++resource++plone.app.jquerytools.form.js"
-      />
-
-  <javascript
-      cacheable="True"
-      compression="safe"
-      cookable="True"
-      enabled="False"
-      expression=""
-      id="++resource++plone.app.jquerytools.dateinput.unmin.js"
-      inline="False"
-      insert-after="++resource++plone.app.jquerytools.dateinput.js"
-      />
-
-  <javascript
-      cacheable="True"
-      compression="safe"
-      cookable="True"
-      enabled="False"
-      expression=""
-      id="++resource++plone.app.jquerytools.rangeinput.unmin.js"
-      inline="False"
-      insert-after="++resource++plone.app.jquerytools.rangeinput.js"
-      />
-
-  <javascript
-      cacheable="True"
-      compression="safe"
-      cookable="True"
-      enabled="False"
-      expression=""
-      id="++resource++plone.app.jquerytools.validator.unmin.js"
-      inline="False"
-      insert-after="++resource++plone.app.jquerytools.validator.js"
-      />
-
-  <javascript
-      cacheable="True"
-      compression="safe"
-      cookable="True"
-      enabled="False"
-      expression=""
-      id="++resource++plone.app.jquerytools.plugins.unmin.js"
-      inline="False"
-      insert-after="++resource++plone.app.jquerytools.plugins.js"
-      />
-
-  <javascript
-      cacheable="True"
-      compression="none"
-      cookable="True"
-      enabled="True"
-      expression=""
-      id="++resource++plone.app.jquerytools.tooltip.unmin.js"
-      inline="False"
-      insert-after="++resource++plone.app.jquerytools.plugins.js"
-      />
-
-  <javascript
-      cacheable="True"
-      compression="none"
-      cookable="True"
-      enabled="False"
-      expression=""
-      id="++resource++plone.app.jquerytools.tooltip.plugins.unmin.js"
-      inline="False"
-      insert-after="++resource++plone.app.jquerytools.js"
-      />
-
-</object>
diff --git a/plone/app/jquerytools/profiles/development/metadata.xml b/plone/app/jquerytools/profiles/development/metadata.xml
deleted file mode 100644
index cf4492a..0000000
--- a/plone/app/jquerytools/profiles/development/metadata.xml
+++ /dev/null
@@ -1,4 +0,0 @@
-<?xml version="1.0"?>
-<metadata>
-  <version>1</version>
-</metadata>


