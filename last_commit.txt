Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2015-09-15T14:23:54+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.upgrade/commit/816ab61c424294091b58f0bee48991e374973a3c

Tests: moved non Plone 4.3 import into code.

Otherwise the tests fail on Plone 4.

Files changed:
M plone/app/upgrade/v50/tests.py

diff --git a/plone/app/upgrade/v50/tests.py b/plone/app/upgrade/v50/tests.py
index 3eea0ac..77c3417 100644
--- a/plone/app/upgrade/v50/tests.py
+++ b/plone/app/upgrade/v50/tests.py
@@ -1,5 +1,4 @@
 from Products.CMFCore.utils import getToolByName
-from Products.CMFPlone.interfaces import ISecuritySchema
 from plone.app.upgrade.tests.base import MigrationTest
 from plone.app.upgrade.v50.testing import REAL_UPGRADE_FUNCTIONAL
 from plone.app.viewletmanager.interfaces import IViewletSettingsStorage
@@ -45,6 +44,7 @@ def test_upgrade_with_email_login(self):
         # If email as login is enabled, we want to use lowercase login
         # names, even when that login name is not an email address.
         registry = getUtility(IRegistry)
+        from Products.CMFPlone.interfaces import ISecuritySchema
         security_settings = registry.forInterface(ISecuritySchema,
                                                   prefix="plone")
         security_settings.use_email_as_login = True


Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2015-09-15T14:25:52+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.upgrade/commit/ca2d8407eb18b9cc62154e89b879e142281bd5e4

Removed nopep8 warning that has absolutely no effect at all.

It is pyflakes that complains about a not used import.
So just use it.

Files changed:
M plone/app/upgrade/v50/tests.py

diff --git a/plone/app/upgrade/v50/tests.py b/plone/app/upgrade/v50/tests.py
index 77c3417..3fd73aa 100644
--- a/plone/app/upgrade/v50/tests.py
+++ b/plone/app/upgrade/v50/tests.py
@@ -13,7 +13,8 @@
 import unittest
 
 try:
-    from Products.CMFPlone.factory import _IMREALLYPLONE5  # nopep8
+    from Products.CMFPlone.factory import _IMREALLYPLONE5
+    _IMREALLYPLONE5  # pyflakes
 except ImportError:
     PLONE_5 = False
 else:


