Repository: mockup


Branch: refs/heads/master
Date: 2015-07-17T09:26:42-04:00
Author: Brayton Osgood (braytonosg) <braytonosgood@gmail.com>
Commit: https://github.com/plone/mockup/commit/64f60a5015e2f5a8d173f5c583d8305458632646

add optional setTitle option to pat-moment, put timestamp in element title

Files changed:
M CHANGES.rst
M mockup/patterns/moment/pattern.js
M mockup/tests/pattern-moment-test.js

diff --git a/CHANGES.rst b/CHANGES.rst
index 0b1e5f9..c7a8366 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,6 +4,9 @@ Changelog
 2.0.5 (unreleased)
 ------------------
 
+- add optional setTitle option to pat-moment, put timestamp in element title
+  [braytonosg]
+
 - fix pickadate default timezone to work even if the default isn't the
   last timezone in the list
   [braytonosg]
diff --git a/mockup/patterns/moment/pattern.js b/mockup/patterns/moment/pattern.js
index d0184bd..9eb2a6e 100644
--- a/mockup/patterns/moment/pattern.js
+++ b/mockup/patterns/moment/pattern.js
@@ -3,6 +3,7 @@
  * Options:
  *    selector(string): selector to use to look for dates to format (null)
  *    format(string): Format to use to render date. Also available is "relative" and "calendar" formats. (MMMM Do YYYY, h:mm:ss a)
+ *    setTitle(boolean): set the title attribute to display the full date and time on hover (false)
  *
  * Documentation:
  *
@@ -95,7 +96,8 @@ define([
       // selector of elements to format dates for
       selector: null,
       // also available options are relative, calendar
-      format: 'MMMM Do YYYY, h:mm:ss a'
+      format: 'MMMM Do YYYY, h:mm:ss a',
+      setTitle: false
     },
     convert: function($el) {
       var self = this;
@@ -108,6 +110,9 @@ define([
       if (!date.isValid()) {
         return;
       }
+      if (self.options.setTitle) {
+        $el.attr('title', date.format('MMMM Do YYYY, h:mm:ss a'));
+      }
       if (self.options.format === 'relative') {
         date = date.fromNow();
       }else if (self.options.format === 'calendar') {
diff --git a/mockup/tests/pattern-moment-test.js b/mockup/tests/pattern-moment-test.js
index 8b49c60..75b6081 100644
--- a/mockup/tests/pattern-moment-test.js
+++ b/mockup/tests/pattern-moment-test.js
@@ -43,6 +43,16 @@ define([
       registry.scan($el);
       expect($el.find('div').html()).to.equal('');
     });
+    it('test setTitle true', function() {
+      var $el = $('<div class="pat-moment" data-pat-moment="format:relative;setTitle:true">2012-10-02 14:30</div>');
+      registry.scan($el);
+      expect($el.attr('title')).to.equal('October 2nd 2012, 2:30:00 pm');
+    });
+    it('test setTitle default (false)', function() {
+      var $el = $('<div class="pat-moment" data-pat-moment="format:relative">2012-10-02 14:30</div>');
+      registry.scan($el);
+      expect($el.attr('title')).to.equal(undefined);
+    });
 
   });
 });


Repository: mockup


Branch: refs/heads/master
Date: 2015-07-17T15:29:12+02:00
Author: Nathan Van Gheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/mockup/commit/af3a58aacf55f29af21888cff79a3a88477526e0

Merge pull request #535 from braytonosg/setTitle_option_pat_moment

add optional setTitle option to pat-moment, put timestamp in element â€¦

Files changed:
M CHANGES.rst
M mockup/patterns/moment/pattern.js
M mockup/tests/pattern-moment-test.js

diff --git a/CHANGES.rst b/CHANGES.rst
index 0b1e5f9..c7a8366 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,6 +4,9 @@ Changelog
 2.0.5 (unreleased)
 ------------------
 
+- add optional setTitle option to pat-moment, put timestamp in element title
+  [braytonosg]
+
 - fix pickadate default timezone to work even if the default isn't the
   last timezone in the list
   [braytonosg]
diff --git a/mockup/patterns/moment/pattern.js b/mockup/patterns/moment/pattern.js
index d0184bd..9eb2a6e 100644
--- a/mockup/patterns/moment/pattern.js
+++ b/mockup/patterns/moment/pattern.js
@@ -3,6 +3,7 @@
  * Options:
  *    selector(string): selector to use to look for dates to format (null)
  *    format(string): Format to use to render date. Also available is "relative" and "calendar" formats. (MMMM Do YYYY, h:mm:ss a)
+ *    setTitle(boolean): set the title attribute to display the full date and time on hover (false)
  *
  * Documentation:
  *
@@ -95,7 +96,8 @@ define([
       // selector of elements to format dates for
       selector: null,
       // also available options are relative, calendar
-      format: 'MMMM Do YYYY, h:mm:ss a'
+      format: 'MMMM Do YYYY, h:mm:ss a',
+      setTitle: false
     },
     convert: function($el) {
       var self = this;
@@ -108,6 +110,9 @@ define([
       if (!date.isValid()) {
         return;
       }
+      if (self.options.setTitle) {
+        $el.attr('title', date.format('MMMM Do YYYY, h:mm:ss a'));
+      }
       if (self.options.format === 'relative') {
         date = date.fromNow();
       }else if (self.options.format === 'calendar') {
diff --git a/mockup/tests/pattern-moment-test.js b/mockup/tests/pattern-moment-test.js
index 8b49c60..75b6081 100644
--- a/mockup/tests/pattern-moment-test.js
+++ b/mockup/tests/pattern-moment-test.js
@@ -43,6 +43,16 @@ define([
       registry.scan($el);
       expect($el.find('div').html()).to.equal('');
     });
+    it('test setTitle true', function() {
+      var $el = $('<div class="pat-moment" data-pat-moment="format:relative;setTitle:true">2012-10-02 14:30</div>');
+      registry.scan($el);
+      expect($el.attr('title')).to.equal('October 2nd 2012, 2:30:00 pm');
+    });
+    it('test setTitle default (false)', function() {
+      var $el = $('<div class="pat-moment" data-pat-moment="format:relative">2012-10-02 14:30</div>');
+      registry.scan($el);
+      expect($el.attr('title')).to.equal(undefined);
+    });
 
   });
 });


