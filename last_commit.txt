Repository: plone.app.i18n
Branch: refs/heads/master
Date: 2015-03-22T12:27:37+01:00
Author: Ramon Navarro Bosch (bloodbare) <ramon.nb@gmail.com>
Commit: https://github.com/plone/plone.app.i18n/commit/a8901dc209c82f9aa7d871d3f93b237e5acf8961

Language switch adaptation

Files changed:
M plone/app/i18n/locales/browser/selector.py

diff --git a/plone/app/i18n/locales/browser/selector.py b/plone/app/i18n/locales/browser/selector.py
index b1c3042..dc5d09c 100644
--- a/plone/app/i18n/locales/browser/selector.py
+++ b/plone/app/i18n/locales/browser/selector.py
@@ -27,13 +27,11 @@ class LanguageSelector(BrowserView):
       ...
       ...     def __init__(self, **kw):
       ...         self.__dict__.update(kw)
+      ...         self.showFlags = True
       ...
       ...     def getSupportedLanguages(self):
       ...         return self.supported_langs
       ...
-      ...     def showFlags(self):
-      ...         return True
-      ...
       ...     def getAvailableLanguageInformation(self):
       ...         return dict(en={'selected' : True}, de={'selected' : False},
       ...                     nl={'selected' : True}, ar={'selected': True})
@@ -112,7 +110,7 @@ def languages(self):
         if self.tool is None:
             return []
 
-        bound = self.tool.getLanguageBindings()
+        bound = self.tool.getLanguageBindings(self.request)
         current = bound[0]
 
         def merge(lang, info):
@@ -141,5 +139,5 @@ def index(info):
     def showFlags(self):
         """Do we use flags?."""
         if self.tool is not None:
-            return self.tool.showFlags()
+            return self.tool.showFlags
         return False


