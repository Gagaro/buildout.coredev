Repository: Products.CMFPlone
Branch: refs/heads/master
Date: 2015-04-28T18:53:28+02:00
Author: Tom Gross (tomgross) <itconsense@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/7f4a9711f544ac9c2f2f043a4f1c945f6f066165

we only support `utf-8` at the moment
(see http://sourceforge.net/p/plone/mailman/message/29678307/)

Files changed:
M CHANGES.rst
M Products/CMFPlone/controlpanel/bbb/mail.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 382d49d..b00f3a2 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -48,6 +48,8 @@ Changelog
   the first element.
   [sneridagh]
 
+- We only support `utf-8` site-encoding at the moment
+  [tomgross]
 
 5.0b1.post1 (2015-03-27)
 ------------------------
diff --git a/Products/CMFPlone/controlpanel/bbb/mail.py b/Products/CMFPlone/controlpanel/bbb/mail.py
index 7670364..03e4c43 100644
--- a/Products/CMFPlone/controlpanel/bbb/mail.py
+++ b/Products/CMFPlone/controlpanel/bbb/mail.py
@@ -1,5 +1,4 @@
 from Products.CMFCore.interfaces import ISiteRoot
-from Products.CMFCore.utils import getToolByName
 from Products.CMFPlone.interfaces import IPloneSiteRoot
 from Products.CMFPlone.interfaces.controlpanel import IMailSchema
 from Products.CMFPlone.interfaces.controlpanel import IMailSchema
@@ -20,8 +19,7 @@ def __init__(self, context):
         self.context = context
         self.portal = getSite()
         registry = getUtility(IRegistry)
-        pprop = getToolByName(self.portal, 'portal_properties')
-        self.encoding = pprop.site_properties.default_charset
+        self.encoding = 'utf-8'
         self.mail_settings = registry.forInterface(
             IMailSchema, prefix="plone")
 


Repository: Products.CMFPlone
Branch: refs/heads/master
Date: 2015-04-29T21:51:50+02:00
Author: Timo Stollenwerk (tisto) <tisto@plone.org>
Commit: https://github.com/plone/Products.CMFPlone/commit/ba04e5b014ddf5f2babab7bf76ea45a8883a97a9

Merge pull request #459 from plone/tomgross-defaultcharset

we only support `utf-8` at the moment

Files changed:
M CHANGES.rst
M Products/CMFPlone/controlpanel/bbb/mail.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 382d49d..b00f3a2 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -48,6 +48,8 @@ Changelog
   the first element.
   [sneridagh]
 
+- We only support `utf-8` site-encoding at the moment
+  [tomgross]
 
 5.0b1.post1 (2015-03-27)
 ------------------------
diff --git a/Products/CMFPlone/controlpanel/bbb/mail.py b/Products/CMFPlone/controlpanel/bbb/mail.py
index 7670364..03e4c43 100644
--- a/Products/CMFPlone/controlpanel/bbb/mail.py
+++ b/Products/CMFPlone/controlpanel/bbb/mail.py
@@ -1,5 +1,4 @@
 from Products.CMFCore.interfaces import ISiteRoot
-from Products.CMFCore.utils import getToolByName
 from Products.CMFPlone.interfaces import IPloneSiteRoot
 from Products.CMFPlone.interfaces.controlpanel import IMailSchema
 from Products.CMFPlone.interfaces.controlpanel import IMailSchema
@@ -20,8 +19,7 @@ def __init__(self, context):
         self.context = context
         self.portal = getSite()
         registry = getUtility(IRegistry)
-        pprop = getToolByName(self.portal, 'portal_properties')
-        self.encoding = pprop.site_properties.default_charset
+        self.encoding = 'utf-8'
         self.mail_settings = registry.forInterface(
             IMailSchema, prefix="plone")
 


