Repository: plone.app.theming


Branch: refs/heads/master
Date: 2015-09-19T12:12:52+02:00
Author: Thomas Massmann (tmassman) <thomas.massmann@it-spir.it>
Commit: https://github.com/plone/plone.app.theming/commit/f304f25ce9afac21591e1a86c2d59a5fb718a5b7

Show active theme at the top of the theme list.

Files changed:
M src/plone/app/theming/browser/controlpanel.py

diff --git a/src/plone/app/theming/browser/controlpanel.py b/src/plone/app/theming/browser/controlpanel.py
index 2918e37..7253f98 100644
--- a/src/plone/app/theming/browser/controlpanel.py
+++ b/src/plone/app/theming/browser/controlpanel.py
@@ -427,6 +427,7 @@ def themeList(self):
         portalUrl = getToolByName(self.context, 'portal_url')()
 
         complete = [];
+        active_theme = None
 
         for theme in self.availableThemes:
             if theme.__name__ == TEMPLATE_THEME:
@@ -451,7 +452,7 @@ def themeList(self):
                     theme.preview,
                 )
 
-            themes.append({
+            theme_data = {
                 'name': theme.__name__,
                 'title': theme.title,
                 'description': theme.description,
@@ -459,11 +460,17 @@ def themeList(self):
                 'editable': theme.__name__ in zodbNames,
                 'preview': "{0}/{1}".format(portalUrl, previewUrl),
                 'selected': theme.__name__ == self.selectedTheme,
-            })
+            }
+            if theme.__name__ == self.selectedTheme:
+                active_theme = theme_data
+            else:
+                themes.append(theme_data)
 
             complete.append(theme.__name__)
 
         themes.sort(key=lambda x: x['title'])
+        if active_theme:
+            themes.insert(0, active_theme)
 
         return themes
 


Repository: plone.app.theming


Branch: refs/heads/master
Date: 2015-09-19T09:08:31-05:00
Author: Nathan Van Gheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/plone.app.theming/commit/82fe41acf257888b56aa214d73a2476ba43879c5

Merge pull request #82 from plone/tmassman-theme-order

Show active theme at the top of the theme list.

Files changed:
M src/plone/app/theming/browser/controlpanel.py

diff --git a/src/plone/app/theming/browser/controlpanel.py b/src/plone/app/theming/browser/controlpanel.py
index 2918e37..7253f98 100644
--- a/src/plone/app/theming/browser/controlpanel.py
+++ b/src/plone/app/theming/browser/controlpanel.py
@@ -427,6 +427,7 @@ def themeList(self):
         portalUrl = getToolByName(self.context, 'portal_url')()
 
         complete = [];
+        active_theme = None
 
         for theme in self.availableThemes:
             if theme.__name__ == TEMPLATE_THEME:
@@ -451,7 +452,7 @@ def themeList(self):
                     theme.preview,
                 )
 
-            themes.append({
+            theme_data = {
                 'name': theme.__name__,
                 'title': theme.title,
                 'description': theme.description,
@@ -459,11 +460,17 @@ def themeList(self):
                 'editable': theme.__name__ in zodbNames,
                 'preview': "{0}/{1}".format(portalUrl, previewUrl),
                 'selected': theme.__name__ == self.selectedTheme,
-            })
+            }
+            if theme.__name__ == self.selectedTheme:
+                active_theme = theme_data
+            else:
+                themes.append(theme_data)
 
             complete.append(theme.__name__)
 
         themes.sort(key=lambda x: x['title'])
+        if active_theme:
+            themes.insert(0, active_theme)
 
         return themes
 


