Repository: Products.PlonePAS


Branch: refs/heads/master
Date: 2015-09-20T12:41:42+02:00
Author: esteele (esteele) <eric@esteele.net>
Commit: https://github.com/plone/Products.PlonePAS/commit/f1960d8af659053149ce0dfeaf124d8a06489842

No longer test for non-utf-8 charsets.

Files changed:
M CHANGES.rst
M src/Products/PlonePAS/tests/test_membershiptool.py

diff --git a/CHANGES.rst b/CHANGES.rst
index a258985..89c9cc3 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,8 +4,8 @@ Changelog
 5.0.4 (unreleased)
 ------------------
 
-- Nothing changed yet.
-
+- Remove tests for non-utf-8 encodings.
+  [esteele]
 
 5.0.3 (2015-07-18)
 ------------------
diff --git a/src/Products/PlonePAS/tests/test_membershiptool.py b/src/Products/PlonePAS/tests/test_membershiptool.py
index 42b3b98..1a61eef 100644
--- a/src/Products/PlonePAS/tests/test_membershiptool.py
+++ b/src/Products/PlonePAS/tests/test_membershiptool.py
@@ -6,7 +6,6 @@
 from Acquisition import aq_parent
 from DateTime import DateTime
 from OFS.Image import Image
-from Products.CMFCore.interfaces import IPropertiesTool
 from Products.CMFCore.tests.base.testcase import WarningInterceptor
 from Products.CMFCore.utils import getToolByName
 from Products.PlonePAS.browser.member import PASMemberView
@@ -24,7 +23,6 @@
 from plone.app.testing import TEST_USER_NAME
 from plone.app.testing import TEST_USER_PASSWORD
 from zExceptions import BadRequest
-from zope.component import getUtility
 import os
 
 
@@ -852,11 +850,6 @@ def testSearchByRequestObj(self):
         self.assertEqual(len(search(
             REQUEST=dict(name=u'jürgen'))), 1)
 
-        ptool = getUtility(IPropertiesTool)
-        ptool._setProperty('default_charset', 'iso8859-1')
-        self.assertEqual(len(search(
-            REQUEST=dict(name=u'jürgen'.encode('iso8859-1')))), 1)
-
     def beforeTearDown(self):
         self._free_warning_output()
 


