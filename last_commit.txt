Repository: plone.app.contenttypes


Branch: refs/heads/master
Date: 2015-09-20T00:57:54+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.app.contenttypes/commit/5388887828573d09738560409fed7b5c6acbefd8

Do not raise an exception for items where @@full_view_item throws an
exception. Instead hide the object.

Files changed:
M CHANGES.rst
M plone/app/contenttypes/browser/templates/full_view.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index 11a98b5..a4201ec 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,6 +4,10 @@ Changelog
 1.2.3 (unreleased)
 ------------------
 
+- Do not raise an exception for items where @@full_view_item throws an
+  exception. Instead hide the object.
+  [pbauer]
+
 - Do not raise errors when IPrimaryFieldInfo(obj) fails (e.g. when the
   Schema-Cache is gone).
   Fixes https://github.com/plone/Products.CMFPlone/issues/839
diff --git a/plone/app/contenttypes/browser/templates/full_view.pt b/plone/app/contenttypes/browser/templates/full_view.pt
index 2366c33..07cf017 100644
--- a/plone/app/contenttypes/browser/templates/full_view.pt
+++ b/plone/app/contenttypes/browser/templates/full_view.pt
@@ -14,7 +14,7 @@
     <metal:entries fill-slot="entries">
       <metal:block use-macro="context/@@listing_view/macros/entries">
         <metal:entry fill-slot="entry">
-          <div tal:define="obj item/getObject;" tal:replace="structure obj/@@full_view_item" />
+          <div tal:define="obj item/getObject;" tal:replace="structure obj/@@full_view_item | nothing" />
         </metal:entry>
       </metal:block>
     </metal:entries>


