Repository: Products.CMFPlone
Branch: refs/heads/master
Date: 2015-04-07T07:17:16-04:00
Author: David Glick (davisagli) <david@glicksoftware.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/865c8dbf8a1a5e05426b10a9a8b7525c80de74cf

Revert "Revert "fix jquery error with collective.js.jqueryui in Plone 5""

This reverts commit 853b5eb3b6869a5e2654b432732f6b6af1c7ece5.

Conflicts:
	CHANGES.rst

Files changed:
M CHANGES.rst
M Products/CMFPlone/browser/templates/main_template.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index 11a74e5..8c62eb5 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -8,7 +8,10 @@ Changelog
 5.0b2 (unreleased)
 ------------------
 
-- Nothing changed yet.
+- Move `plone.htmlhead.links` viewlet manager after `plone.scripts`,
+  because the former is sometimes used to include scripts that depend on
+  the latter.
+  [davisagli]
 
 
 5.0b1.post1 (2015-03-27)
diff --git a/Products/CMFPlone/browser/templates/main_template.pt b/Products/CMFPlone/browser/templates/main_template.pt
index fd6d4cd..6c953ee 100644
--- a/Products/CMFPlone/browser/templates/main_template.pt
+++ b/Products/CMFPlone/browser/templates/main_template.pt
@@ -26,7 +26,6 @@
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 
     <div tal:replace="structure provider:plone.htmlhead" />
-    <link tal:replace="structure provider:plone.htmlhead.links" />
 
     <tal:comment replace="nothing">
         Various slots where you can insert elements in the header from a template.
@@ -38,6 +37,7 @@
     <div tal:replace="structure provider:plone.scripts" />
     <metal:javascriptslot define-slot="javascript_head_slot" />
 
+    <link tal:replace="structure provider:plone.htmlhead.links" />
     <meta name="generator" content="Plone - http://plone.org" />
 
   </head>


