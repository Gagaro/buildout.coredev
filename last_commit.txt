Repository: mockup
Branch: refs/heads/master
Date: 2015-05-20T12:20:14-05:00
Author: Sam Schwartz (obct537) <obct537@gmail.com>
Commit: https://github.com/plone/mockup/commit/e8ebd0111b7d0bba37e8e38841723cff73847c6b

Added fullscreen capability to thememapper, fixed ace editor resizing issue

Files changed:
M mockup/patterns/filemanager/pattern.js
M mockup/patterns/thememapper/pattern.js
M mockup/patterns/thememapper/pattern.thememapper.less

diff --git a/mockup/patterns/filemanager/pattern.js b/mockup/patterns/filemanager/pattern.js
index ad3d4ab..cd8e1ed 100644
--- a/mockup/patterns/filemanager/pattern.js
+++ b/mockup/patterns/filemanager/pattern.js
@@ -224,6 +224,8 @@ define([
       self.$tree = self.$('.tree');
       self.$nav = self.$('nav');
       self.$tabs = $('ul.nav', self.$nav);
+      self.$editorContainer = $('.nav-and-editor');
+
       self.options.treeConfig.onLoad = function() {
         // on loading initial data, activate first node if available
         var node = self.$tree.tree('getNodeById', 1);
@@ -237,6 +239,10 @@ define([
         self.openFile(e);
       });
       self.$editor = self.$('.editor');
+
+      $(window).on('resize', function() {
+        self.resizeEditor();
+      });
     },
     openFile: function(event) {
       var self = this;
@@ -390,8 +396,12 @@ define([
         //Contains both the tabs, and editor window
         var container = tabBox.parent().parent();
         var h = container.innerHeight();
+
         h -= tabBox.outerHeight();
 
+        //+2 for the editor borders
+        h -= 2;
+
         //accounts for the borders/margin
         self.$editor.height(h);
 
diff --git a/mockup/patterns/thememapper/pattern.js b/mockup/patterns/thememapper/pattern.js
index e7c1c83..fc2b7ba 100644
--- a/mockup/patterns/thememapper/pattern.js
+++ b/mockup/patterns/thememapper/pattern.js
@@ -435,6 +435,7 @@ define([
     helpButton: null,
     hidden: true,
     fileManager: null,
+    editor: null,
     mockupInspector: null,
     unthemedInspector: null,
     $fileManager: null,
@@ -513,7 +514,25 @@ define([
         tooltip: 'rule building wizard',
         context: 'default'
       });
+      self.fullscreenButton = new ButtonView({
+        id: 'fullscreenEditor',
+        title: 'Fullscreen',
+        tooltip: 'view the editor in fullscreen',
+        context: 'default'
+      });
+      self.fullscreenButton.on('button:click', function() {
+        var btn = $('<a href="#">'+
+            '<span class="btn btn-danger closeeditor">Close Fullscreen</span>'+
+            '</a>').prependTo($('.tree'));
+
+        $(btn).click(function() {
+          $('.container').removeClass('fullscreen').trigger('resize');
+          $(btn).remove();
+        });
 
+        //resize tells the editor window to resize as well.
+        $('.container').addClass('fullscreen').trigger('resize');
+      });
       self.previewThemeButton = new ButtonView({
         id: 'previewtheme',
         title: 'Preview theme',
@@ -539,6 +558,7 @@ define([
           self.showInspectorsButton,
           self.buildRuleButton,
           self.previewThemeButton,
+          self.fullscreenButton,
           self.helpButton
         ],
         id: 'mapper'
diff --git a/mockup/patterns/thememapper/pattern.thememapper.less b/mockup/patterns/thememapper/pattern.thememapper.less
index 221039f..8322959 100644
--- a/mockup/patterns/thememapper/pattern.thememapper.less
+++ b/mockup/patterns/thememapper/pattern.thememapper.less
@@ -106,6 +106,35 @@
 
     }
 
+    .container.fullscreen {
+
+        position: fixed;
+        top: 0;
+        left: 0;
+        z-index: 99999999;
+        width: 100%;
+        height: 100%;
+        margin: 0;
+        background-color: white;
+
+        .tree {
+            height: 97%;
+            width: 15%;
+            border: none;
+        }
+
+        .nav-and-editor {
+            width: 83%;
+            height: 97%;
+            border: none;
+        }
+
+        .closeeditor {
+            margin-bottom: 10px;
+            font-size: x-small;
+        }
+    }
+
     .tree {
         font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif;
         border-color: #ddd;


Repository: mockup
Branch: refs/heads/master
Date: 2015-05-20T14:14:52-05:00
Author: Sam Schwartz (obct537) <obct537@gmail.com>
Commit: https://github.com/plone/mockup/commit/aa6a54d0edb40b1ea0f55a48ddaec47e9cacadb2

Fixed issue preventing ace from resizing properly on fullscreen

Files changed:
M mockup/patterns/filemanager/pattern.js

diff --git a/mockup/patterns/filemanager/pattern.js b/mockup/patterns/filemanager/pattern.js
index cd8e1ed..3779213 100644
--- a/mockup/patterns/filemanager/pattern.js
+++ b/mockup/patterns/filemanager/pattern.js
@@ -224,8 +224,6 @@ define([
       self.$tree = self.$('.tree');
       self.$nav = self.$('nav');
       self.$tabs = $('ul.nav', self.$nav);
-      self.$editorContainer = $('.nav-and-editor');
-
       self.options.treeConfig.onLoad = function() {
         // on loading initial data, activate first node if available
         var node = self.$tree.tree('getNodeById', 1);
@@ -391,12 +389,12 @@ define([
 
     resizeEditor: function() {
         var self = this;
+
         var tabBox = self.$tabs.parent();
 
         //Contains both the tabs, and editor window
         var container = tabBox.parent().parent();
         var h = container.innerHeight();
-
         h -= tabBox.outerHeight();
 
         //+2 for the editor borders
@@ -404,11 +402,12 @@ define([
 
         //accounts for the borders/margin
         self.$editor.height(h);
-
         var w = container.innerWidth();
         w -= (container.outerWidth(true) - container.innerWidth());
 
         self.$editor.width(w);
+        //This forces ace to redraw if the container has changed size
+        self.ace.editor.resize();
     }
   });
 


Repository: mockup
Branch: refs/heads/master
Date: 2015-05-20T14:54:54-05:00
Author: Sam Schwartz (obct537) <obct537@gmail.com>
Commit: https://github.com/plone/mockup/commit/f1ff4bd8e56cbd309a16b35e89db70a320a80db0

Changed deprecated setting

Files changed:
M mockup/patterns/filemanager/pattern.js

diff --git a/mockup/patterns/filemanager/pattern.js b/mockup/patterns/filemanager/pattern.js
index 3779213..fda6b47 100644
--- a/mockup/patterns/filemanager/pattern.js
+++ b/mockup/patterns/filemanager/pattern.js
@@ -408,6 +408,7 @@ define([
         self.$editor.width(w);
         //This forces ace to redraw if the container has changed size
         self.ace.editor.resize();
+        self.ace.editor.$blockScrolling = Infinity;
     }
   });
 


Repository: mockup
Branch: refs/heads/master
Date: 2015-05-20T15:00:21-05:00
Author: Sam Schwartz (obct537) <obct537@gmail.com>
Commit: https://github.com/plone/mockup/commit/b1cf534ef7c473fad4b00b524b4d19e7ef257c30

removed useless editor property

Files changed:
M mockup/patterns/thememapper/pattern.js

diff --git a/mockup/patterns/thememapper/pattern.js b/mockup/patterns/thememapper/pattern.js
index fc2b7ba..2837fe5 100644
--- a/mockup/patterns/thememapper/pattern.js
+++ b/mockup/patterns/thememapper/pattern.js
@@ -435,7 +435,6 @@ define([
     helpButton: null,
     hidden: true,
     fileManager: null,
-    editor: null,
     mockupInspector: null,
     unthemedInspector: null,
     $fileManager: null,
@@ -529,7 +528,6 @@ define([
           $('.container').removeClass('fullscreen').trigger('resize');
           $(btn).remove();
         });
-
         //resize tells the editor window to resize as well.
         $('.container').addClass('fullscreen').trigger('resize');
       });


Repository: mockup
Branch: refs/heads/master
Date: 2015-05-20T15:05:31-05:00
Author: Nathan Van Gheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/mockup/commit/f5c7fd2490e3f9929aa2c2d030ca83e852bf3960

Merge pull request #498 from plone/thememapper_fullscreen

Thememapper fullscreen

Files changed:
M mockup/patterns/filemanager/pattern.js
M mockup/patterns/thememapper/pattern.js
M mockup/patterns/thememapper/pattern.thememapper.less

diff --git a/mockup/patterns/filemanager/pattern.js b/mockup/patterns/filemanager/pattern.js
index ad3d4ab..fda6b47 100644
--- a/mockup/patterns/filemanager/pattern.js
+++ b/mockup/patterns/filemanager/pattern.js
@@ -237,6 +237,10 @@ define([
         self.openFile(e);
       });
       self.$editor = self.$('.editor');
+
+      $(window).on('resize', function() {
+        self.resizeEditor();
+      });
     },
     openFile: function(event) {
       var self = this;
@@ -385,6 +389,7 @@ define([
 
     resizeEditor: function() {
         var self = this;
+
         var tabBox = self.$tabs.parent();
 
         //Contains both the tabs, and editor window
@@ -392,13 +397,18 @@ define([
         var h = container.innerHeight();
         h -= tabBox.outerHeight();
 
+        //+2 for the editor borders
+        h -= 2;
+
         //accounts for the borders/margin
         self.$editor.height(h);
-
         var w = container.innerWidth();
         w -= (container.outerWidth(true) - container.innerWidth());
 
         self.$editor.width(w);
+        //This forces ace to redraw if the container has changed size
+        self.ace.editor.resize();
+        self.ace.editor.$blockScrolling = Infinity;
     }
   });
 
diff --git a/mockup/patterns/thememapper/pattern.js b/mockup/patterns/thememapper/pattern.js
index e7c1c83..2837fe5 100644
--- a/mockup/patterns/thememapper/pattern.js
+++ b/mockup/patterns/thememapper/pattern.js
@@ -513,7 +513,24 @@ define([
         tooltip: 'rule building wizard',
         context: 'default'
       });
-
+      self.fullscreenButton = new ButtonView({
+        id: 'fullscreenEditor',
+        title: 'Fullscreen',
+        tooltip: 'view the editor in fullscreen',
+        context: 'default'
+      });
+      self.fullscreenButton.on('button:click', function() {
+        var btn = $('<a href="#">'+
+            '<span class="btn btn-danger closeeditor">Close Fullscreen</span>'+
+            '</a>').prependTo($('.tree'));
+
+        $(btn).click(function() {
+          $('.container').removeClass('fullscreen').trigger('resize');
+          $(btn).remove();
+        });
+        //resize tells the editor window to resize as well.
+        $('.container').addClass('fullscreen').trigger('resize');
+      });
       self.previewThemeButton = new ButtonView({
         id: 'previewtheme',
         title: 'Preview theme',
@@ -539,6 +556,7 @@ define([
           self.showInspectorsButton,
           self.buildRuleButton,
           self.previewThemeButton,
+          self.fullscreenButton,
           self.helpButton
         ],
         id: 'mapper'
diff --git a/mockup/patterns/thememapper/pattern.thememapper.less b/mockup/patterns/thememapper/pattern.thememapper.less
index 221039f..8322959 100644
--- a/mockup/patterns/thememapper/pattern.thememapper.less
+++ b/mockup/patterns/thememapper/pattern.thememapper.less
@@ -106,6 +106,35 @@
 
     }
 
+    .container.fullscreen {
+
+        position: fixed;
+        top: 0;
+        left: 0;
+        z-index: 99999999;
+        width: 100%;
+        height: 100%;
+        margin: 0;
+        background-color: white;
+
+        .tree {
+            height: 97%;
+            width: 15%;
+            border: none;
+        }
+
+        .nav-and-editor {
+            width: 83%;
+            height: 97%;
+            border: none;
+        }
+
+        .closeeditor {
+            margin-bottom: 10px;
+            font-size: x-small;
+        }
+    }
+
     .tree {
         font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif;
         border-color: #ddd;


