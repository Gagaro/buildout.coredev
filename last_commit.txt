Repository: plone.app.contenttypes
Branch: refs/heads/master
Date: 2014-11-27T14:41:14+01:00
Author: Johannes Raggam (thet) <raggam-nl@adm.at>
Commit: https://github.com/plone/plone.app.contenttypes/commit/456e87dbafd26c91c1de3ef7675d9074eec6e2e3

migration package needs schemaextender. test for it in zcml conditional

Files changed:
M plone/app/contenttypes/upgrades.zcml

diff --git a/plone/app/contenttypes/upgrades.zcml b/plone/app/contenttypes/upgrades.zcml
index 53803c1..1f964e7 100644
--- a/plone/app/contenttypes/upgrades.zcml
+++ b/plone/app/contenttypes/upgrades.zcml
@@ -23,6 +23,7 @@
 
   <!-- We still need Archetypes to use Products.contentmigrator -->
   <configure zcml:condition="installed Products.Archetypes">
+  <configure zcml:condition="installed archetypes.schemaextender">
   <genericsetup:upgradeStep
       source="1001"
       destination="1100"
@@ -32,6 +33,7 @@
       handler=".migration.dxmigration.migrate_to_pa_event"
       />
   </configure>
+  </configure>
 
   <genericsetup:upgradeStep
       source="1100"


