Repository: plone.api


Branch: refs/heads/master
Date: 2015-09-28T14:39:49+02:00
Author: Timo Stollenwerk (tisto) <tisto@plone.org>
Commit: https://github.com/plone/plone.api/commit/225dbc3c85a4bae124822baa3e1cb6c022b44f67

Back to development: 1.4.8

Files changed:
M docs/CHANGES.rst
M src/plone/api/tests/test_portal.py

diff --git a/docs/CHANGES.rst b/docs/CHANGES.rst
index 17fc141..fa7e7a6 100644
--- a/docs/CHANGES.rst
+++ b/docs/CHANGES.rst
@@ -4,7 +4,8 @@ Changelog
 1.4.8 (unreleased)
 ------------------
 
-- Nothing changed yet.
+- Fixed Plone 5 version comparison in tests.
+  [maurits]
 
 
 1.4.7 (2015-09-27)
diff --git a/src/plone/api/tests/test_portal.py b/src/plone/api/tests/test_portal.py
index 1e1b6f3..55e7d5f 100644
--- a/src/plone/api/tests/test_portal.py
+++ b/src/plone/api/tests/test_portal.py
@@ -8,6 +8,7 @@
 from datetime import date
 from datetime import datetime
 from email import message_from_string
+from pkg_resources import parse_version
 from plone.api import content
 from plone.api import env
 from plone.api import portal
@@ -23,7 +24,7 @@
 import mock
 import unittest
 
-HAS_PLONE5 = env.plone_version() >= '5.0b2'
+HAS_PLONE5 = parse_version(env.plone_version()) >= parse_version('5.0b2')
 
 
 class TestPloneApiPortal(unittest.TestCase):


