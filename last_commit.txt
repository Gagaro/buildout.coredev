Repository: plone.tiles
Branch: refs/heads/master
Date: 2015-05-20T21:10:36+03:00
Author: Asko Soukka (datakurre) <asko.soukka@iki.fi>
Commit: https://github.com/plone/plone.tiles/commit/0cf6e874de916d611835ae66ee7bd50252c74f2c

Revert explicit drafting support, because solved in p.a.tiles instead

Files changed:
M CHANGELOG.rst
M plone/tiles/tile.py

diff --git a/CHANGELOG.rst b/CHANGELOG.rst
index ca40be4..3091c82 100644
--- a/CHANGELOG.rst
+++ b/CHANGELOG.rst
@@ -6,9 +6,6 @@ Changelog
 
 - Add support for encoding dictionary fields into tile URL
   [datakurre]
-- Fix issue where tile preview during drafting did not use drafting tile data
-  for the preview
-  [datakurre]
 - Fix issue where saving or deleting transient tile data mutated the current request
   [datakurre]
 - Fix issue where non-ascii characters in tile data raised UnicodeEncode/DecodeErrors
diff --git a/plone/tiles/tile.py b/plone/tiles/tile.py
index cdd13f1..b6cea78 100644
--- a/plone/tiles/tile.py
+++ b/plone/tiles/tile.py
@@ -7,12 +7,6 @@
 from zope.publisher.browser import BrowserView
 from zope.traversing.browser.absoluteurl import absoluteURL
 
-try:
-    from plone.app.drafts.interfaces import ICurrentDraftManagement
-    PLONE_APP_DRAFTS = True
-except ImportError:
-    PLONE_APP_DRAFTS = False
-
 
 class Tile(BrowserView):
     """Basic implementation of a transient tile. Subclasses should override
@@ -94,10 +88,6 @@ def __call__(self, *args, **kwargs):
     @property
     def data(self):
         if self.__cachedData is None:
-            # Support drafting tile data context
-            if PLONE_APP_DRAFTS:
-                ICurrentDraftManagement(self.request).mark()
-            # Get tile data from manager
             reader = ITileDataManager(self)
             self.__cachedData = reader.get()
         return self.__cachedData


