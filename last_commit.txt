Repository: plone.app.discussion


Branch: refs/heads/master
Date: 2015-09-13T15:38:46+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.app.discussion/commit/b7f81fc3fe595ea0ec727c6c121598e6f4e86b6b

Move anonymous_email_enabled after anonymous_comments in controlpanel

Files changed:
M CHANGES.rst
M plone/app/discussion/browser/javascripts/controlpanel.js
M plone/app/discussion/interfaces.py

diff --git a/CHANGES.rst b/CHANGES.rst
index e2fc97a..9cb0837 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,7 +4,8 @@ Changelog
 2.4.6 (unreleased)
 ------------------
 
-- Nothing changed yet.
+- Move anonymous_email_enabled after anonymous_comments in controlpanel.
+  [pbauer]
 
 
 2.4.5 (2015-09-11)
diff --git a/plone/app/discussion/browser/javascripts/controlpanel.js b/plone/app/discussion/browser/javascripts/controlpanel.js
index da479f8..9ff0992 100644
--- a/plone/app/discussion/browser/javascripts/controlpanel.js
+++ b/plone/app/discussion/browser/javascripts/controlpanel.js
@@ -49,6 +49,7 @@ require([  // jshint ignore:line
         if (globally_enabled === true) {
             $.enableSettings([
                 $('#formfield-form-widgets-anonymous_comments'),
+                $('#formfield-form-widgets-anonymous_email_enabled'),
                 $('#formfield-form-widgets-moderation_enabled'),
                 $('#formfield-form-widgets-edit_comment_enabled'),
                 $('#formfield-form-widgets-delete_own_comment_enabled'),
@@ -63,6 +64,7 @@ require([  // jshint ignore:line
         else {
             $.disableSettings([
                 $('#formfield-form-widgets-anonymous_comments'),
+                $('#formfield-form-widgets-anonymous_email_enabled'),
                 $('#formfield-form-widgets-moderation_enabled'),
                 $('#formfield-form-widgets-edit_comment_enabled'),
                 $('#formfield-form-widgets-delete_own_comment_enabled'),
diff --git a/plone/app/discussion/interfaces.py b/plone/app/discussion/interfaces.py
index 2d15935..13662f5 100644
--- a/plone/app/discussion/interfaces.py
+++ b/plone/app/discussion/interfaces.py
@@ -222,6 +222,17 @@ class IDiscussionSettings(Interface):
         default=False,
     )
 
+    anonymous_email_enabled = schema.Bool(
+        title=_(u"label_anonymous_email_enabled",
+                default=u"Enable anonymous email field"),
+        description=_(
+            u"help_anonymous_email_enabled",
+            default=u"If selected, anonymous user will have to "
+                    u"give their email."),
+        required=False,
+        default=False
+    )
+
     moderation_enabled = schema.Bool(
         title=_(
             u"label_moderation_enabled",
@@ -344,16 +355,6 @@ class IDiscussionSettings(Interface):
         default=False
     )
 
-    anonymous_email_enabled = schema.Bool(
-        title=_(u"label_anonymous_email_enabled",
-                default=u"Enable anonymous email field"),
-        description=_(
-            u"help_anonymous_email_enabled",
-            default=u"If selected, anonymous user will have to "
-                    u"give their email."),
-        required=False,
-        default=False)
-
 
 class IDiscussionLayer(Interface):
     """Request marker installed via browserlayer.xml.


