Repository: mockup


Branch: refs/heads/master
Date: 2015-07-16T15:56:41+02:00
Author: vangheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/mockup/commit/9b4bd08f9b9b99825bea8033681d6c284f524703

remove add menu from structure as we will rely on toolbar add menu
  for this functionality

Files changed:
M CHANGES.rst
M mockup/patterns/structure/js/views/app.js
M mockup/patterns/structure/less/pattern.structure.less

diff --git a/CHANGES.rst b/CHANGES.rst
index 5f86a31..faaa645 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,6 +4,10 @@ Changelog
 2.0.5 (unreleased)
 ------------------
 
+- remove add menu from structure as we will rely on toolbar add menu
+  for this functionality
+  [vangheem]
+
 - give stronger warning with rearrange feature, specially on root
   [vangheem]
 
diff --git a/mockup/patterns/structure/js/views/app.js b/mockup/patterns/structure/js/views/app.js
index d155d9f..f450672 100644
--- a/mockup/patterns/structure/js/views/app.js
+++ b/mockup/patterns/structure/js/views/app.js
@@ -12,7 +12,6 @@ define([
   'mockup-patterns-structure-url/js/views/rearrange',
   'mockup-patterns-structure-url/js/views/selectionbutton',
   'mockup-patterns-structure-url/js/views/paging',
-  'mockup-patterns-structure-url/js/views/addmenu',
   'mockup-patterns-structure-url/js/views/columns',
   'mockup-patterns-structure-url/js/views/textfilter',
   'mockup-patterns-structure-url/js/views/upload',
@@ -25,7 +24,7 @@ define([
 ], function($, _, Backbone, Toolbar, ButtonGroup, ButtonView, BaseView,
             TableView, SelectionWellView,
             GenericPopover, RearrangeView, SelectionButtonView,
-            PagingView, AddMenu, ColumnsView, TextFilterView, UploadView,
+            PagingView, ColumnsView, TextFilterView, UploadView,
             ResultCollection, SelectedCollection, utils, _t, logger) {
   'use strict';
 
@@ -352,13 +351,6 @@ define([
         });
         items.push(uploadButton);
       }
-      if (self.options.contextInfoUrl) {
-        // only add menu if set
-        items.push(new AddMenu({
-          contextInfoUrl: self.options.contextInfoUrl,
-          app: self
-        }));
-      }
 
       var buttons = [];
       _.each(self.options.buttons, function(buttonOptions) {
diff --git a/mockup/patterns/structure/less/pattern.structure.less b/mockup/patterns/structure/less/pattern.structure.less
index 2bf6b4f..229fd76 100644
--- a/mockup/patterns/structure/less/pattern.structure.less
+++ b/mockup/patterns/structure/less/pattern.structure.less
@@ -165,16 +165,14 @@
         border-bottom-right-radius: 0;
         border-right: 0;
     }
-    #btn-selected-items, #btn-rearrange, #btn-upload{
+    #btn-selected-items, #btn-rearrange{
         border-radius: 0;
         border-right: 0;
     }
-    .btn-group.addnew{
+    #btn-upload{
         margin-left: 0;
-        .btn{
-            border-top-left-radius: 0;
-            border-bottom-left-radius: 0;
-        }
+        border-top-left-radius: 0;
+        border-bottom-left-radius: 0;
     }
 
     @media all and (max-width: 1200px) {


Repository: mockup


Branch: refs/heads/master
Date: 2015-07-16T16:10:51+02:00
Author: Nathan Van Gheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/mockup/commit/80b20749ae1aaf07777e755469374304a7c7620a

Merge pull request #531 from plone/remove-add-menu-structure

remove add menu from structure as we will rely on toolbar add menu

Files changed:
M CHANGES.rst
M mockup/patterns/structure/js/views/app.js
M mockup/patterns/structure/less/pattern.structure.less

diff --git a/CHANGES.rst b/CHANGES.rst
index 5f86a31..faaa645 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,6 +4,10 @@ Changelog
 2.0.5 (unreleased)
 ------------------
 
+- remove add menu from structure as we will rely on toolbar add menu
+  for this functionality
+  [vangheem]
+
 - give stronger warning with rearrange feature, specially on root
   [vangheem]
 
diff --git a/mockup/patterns/structure/js/views/app.js b/mockup/patterns/structure/js/views/app.js
index d155d9f..f450672 100644
--- a/mockup/patterns/structure/js/views/app.js
+++ b/mockup/patterns/structure/js/views/app.js
@@ -12,7 +12,6 @@ define([
   'mockup-patterns-structure-url/js/views/rearrange',
   'mockup-patterns-structure-url/js/views/selectionbutton',
   'mockup-patterns-structure-url/js/views/paging',
-  'mockup-patterns-structure-url/js/views/addmenu',
   'mockup-patterns-structure-url/js/views/columns',
   'mockup-patterns-structure-url/js/views/textfilter',
   'mockup-patterns-structure-url/js/views/upload',
@@ -25,7 +24,7 @@ define([
 ], function($, _, Backbone, Toolbar, ButtonGroup, ButtonView, BaseView,
             TableView, SelectionWellView,
             GenericPopover, RearrangeView, SelectionButtonView,
-            PagingView, AddMenu, ColumnsView, TextFilterView, UploadView,
+            PagingView, ColumnsView, TextFilterView, UploadView,
             ResultCollection, SelectedCollection, utils, _t, logger) {
   'use strict';
 
@@ -352,13 +351,6 @@ define([
         });
         items.push(uploadButton);
       }
-      if (self.options.contextInfoUrl) {
-        // only add menu if set
-        items.push(new AddMenu({
-          contextInfoUrl: self.options.contextInfoUrl,
-          app: self
-        }));
-      }
 
       var buttons = [];
       _.each(self.options.buttons, function(buttonOptions) {
diff --git a/mockup/patterns/structure/less/pattern.structure.less b/mockup/patterns/structure/less/pattern.structure.less
index 2bf6b4f..229fd76 100644
--- a/mockup/patterns/structure/less/pattern.structure.less
+++ b/mockup/patterns/structure/less/pattern.structure.less
@@ -165,16 +165,14 @@
         border-bottom-right-radius: 0;
         border-right: 0;
     }
-    #btn-selected-items, #btn-rearrange, #btn-upload{
+    #btn-selected-items, #btn-rearrange{
         border-radius: 0;
         border-right: 0;
     }
-    .btn-group.addnew{
+    #btn-upload{
         margin-left: 0;
-        .btn{
-            border-top-left-radius: 0;
-            border-bottom-left-radius: 0;
-        }
+        border-top-left-radius: 0;
+        border-bottom-left-radius: 0;
     }
 
     @media all and (max-width: 1200px) {


