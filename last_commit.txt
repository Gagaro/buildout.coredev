Repository: plone.app.theming
Branch: refs/heads/master
Date: 2015-05-13T12:01:36+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.theming/commit/4215d3d7906a2d0c0eab8db7bae68645f56d2087

Fix RestructuredText representation on PyPI.

Do this by bringing back a few example lines in the manifest.

Files changed:
M docs/CHANGES.rst
M src/plone/app/theming/browser/resources/userguide.rst

diff --git a/docs/CHANGES.rst b/docs/CHANGES.rst
index 793dfa9..4518e85 100644
--- a/docs/CHANGES.rst
+++ b/docs/CHANGES.rst
@@ -4,7 +4,9 @@ Changelog
 1.2.5 (unreleased)
 ------------------
 
-- Nothing changed yet.
+- Fix RestructuredText representation on PyPI by bringing back a few
+  example lines in the manifest.
+  [maurits]
 
 
 1.2.4 (2015-05-12)
diff --git a/src/plone/app/theming/browser/resources/userguide.rst b/src/plone/app/theming/browser/resources/userguide.rst
index 659349e..dff0a3f 100644
--- a/src/plone/app/theming/browser/resources/userguide.rst
+++ b/src/plone/app/theming/browser/resources/userguide.rst
@@ -463,16 +463,23 @@ rules
     or relative path).
 
 prefix
-    To change the absolute path prefix (see *Advanced settings*), use::
+    To change the absolute path prefix (see *Advanced settings*),
+    use::
+
+      prefix = /some/prefix
 
 doctype
     To employ a ``DOCTYPE`` in the themed content other than ``XHTML 1.0
     Transitional``, add e.g.::
 
+      doctype = <!DOCTYPE html>
+
 preview
     To provide a user-friendly preview of your theme in the *Theming* control panel.
     Here, ``preview.png`` is an image file relative to the location of the
-    ``manifest.cfg`` file.
+    ``manifest.cfg`` file::
+
+      preview = preview.png
 
 enabled-bundles
     Bundles that will automatically be enabled when a theme is activated


Repository: plone.app.theming
Branch: refs/heads/master
Date: 2015-05-13T12:02:58+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.theming/commit/ca3777703fe05dbe1b6a2f19724e92c82acf519e

Move docs/CHANGES.rst next to setup.py.

We have this in all or most packages.

Files changed:
A CHANGES.rst
M setup.py
D docs/CHANGES.rst

diff --git a/CHANGES.rst b/CHANGES.rst
new file mode 100644
index 0000000..4518e85
--- /dev/null
+++ b/CHANGES.rst
@@ -0,0 +1,354 @@
+Changelog
+=========
+
+1.2.5 (unreleased)
+------------------
+
+- Fix RestructuredText representation on PyPI by bringing back a few
+  example lines in the manifest.
+  [maurits]
+
+
+1.2.4 (2015-05-12)
+------------------
+
+- Add setting for tinymce automatically detected styles
+  [vangheem]
+
+1.2.3 (2015-05-04)
+------------------
+
+- make control panel usable again. Fixed problem where skins
+  control panel is no longer present.
+  [vangheem]
+
+- unified different getTheme functions.
+  [jensens]
+
+- pep8ified, housekeeping, cleanup
+  [jensens]
+
+- Specify i18n:domain in controlpanel.pt.
+  [vincentfretin]
+
+- pat-modal pattern has been renamed to pat-plone-modal
+  [jcbrand]
+
+- Fix load pluginSettings for the enabled theme before calling plugins for
+  onEnabled and call onEnabled plugins with correct parameters
+  [datakurre]
+
+
+1.2.2 (2015-03-22)
+------------------
+
+- Patch the ZMI only for available ZMI pages.
+  [thet]
+
+- Change deprecated import of ``zope.site.hooks.getSite`` to
+  ``zope.component.hooks.getSite``.
+  [thet]
+
+- Add an error log if the subrequest failed (probably a relative xi:include)
+  instead of silently returning None (and so having a xi:include returning
+  nothing).
+  [vincentfretin]
+
+- Fix transform to not affect the result when theming is disabled
+  [datakurre]
+
+- Integrate thememapper mockup pattern and fix theming control panel
+  to be more usable
+  [ebrehault]
+
+
+1.2.1 (2014-10-23)
+------------------
+
+- Remove DL's from portal message in templates.
+  https://github.com/plone/Products.CMFPlone/issues/153
+  [khink]
+
+- Fix "Insufficient Privileges" for "Site Administrators" on the control panel.
+  [@rpatterson]
+
+- Add IThemeAppliedEvent
+  [vangheem]
+
+- Put themes in a separate zcml file to be able to exclude them
+  [laulaz]
+
+- #14107 bot requests like /widget/oauth_login/info.txt causes
+  problems finding correct context with plone.app.theming
+  [anthonygerrard]
+
+- Added support for ++theme++ to traverse to the contents of the
+  current activated theme.
+  [bosim]
+
+
+1.2.0 (2014-03-02)
+------------------
+
+- Disable theming for manage_shutdown view.
+  [davisagli]
+
+- Fix reference to theme error template
+  [afrepues]
+
+- Add "Test Styles" button in control panel to expose, test_rendering template.
+  [runyaga]
+
+1.1.1 (2013-05-23)
+------------------
+
+- Fixed i18n issues.
+  [thomasdesvenain]
+
+- Fixed i18n issues.
+  [jianaijun]
+
+- This fixed UnicodeDecodeError when Theme Title is Non-ASCII
+  in the manifest.cfg file.
+  [jianaijun]
+
+
+1.1 (2013-04-06)
+----------------
+
+- Fixed i18n issues.
+  [vincentfretin]
+
+- Make the template theme do what it claims to do: copy styles as
+  well as scripts.
+  [smcmahon]
+
+- Change the label and description for the example theme to supply useful
+  information.
+  [smcmahon]
+
+- Upgrades from 1.0 get the combined "Theming" control panel that was added in
+  1.1a1.
+  [danjacka]
+
+
+1.1b2 (2013-01-01)
+------------------
+
+- Ensure host blacklist utilises SERVER_URL to correctly determine hostname
+  for sites hosted as sub-folders at any depth.
+  [davidjb]
+
+- Add test about plone.app.theming / plone.app.caching integration when
+  using GZIP compression for anonymous
+  (see ticket `12038 <https://dev.plone.org/ticket/12038>`_). [ebrehault]
+
+
+1.1b1 (2012-10-16)
+------------------
+
+- Add diazo.debug option, route all error_log output through
+  this so debugging can be displayed
+  [lentinj]
+
+- Make example Bootstrap-based theme use the HTML5 DOCTYPE.
+  [danjacka]
+
+- Demote ZMI patch log message to debug level.
+  [hannosch]
+
+- Upgrade to ACE 1.0 via plone.resourceeditor
+  [optilude]
+
+- Put quotes around jQuery attribute selector values to appease
+  jQuery 1.7.2.
+  [danjacka]
+
+1.1a2 (2012-08-30)
+------------------
+
+- Protect the control panel with a specific permission so it can be
+  delegated.
+  [davisagli]
+
+- Advise defining ajax_load as ``request.form.get('ajax_load')`` in
+  manifest.cfg.  For instance, the login_form has an hidden empty
+  ajax_load input, which would give an unthemed page after submitting
+  the form.
+  [maurits]
+
+- Change theme editor page templates to use main_template rather than
+  prefs_main_template to avoid inserting CSS and JavaScript too early
+  under plonetheme.classic.
+  [danjacka]
+
+1.1a1 (2012-08-08)
+------------------
+
+- Replace the stock "Themes" control panel with a renamed "Theming" control
+  panel, which incorporates the former's settings under its "Advanced" tab.
+  [optilude]
+
+- Add a full in-Plone theme authoring environment
+  [optilude, vangheem]
+
+- Update IBeforeTraverseEvent import to zope.traversing.
+  [hannosch]
+
+- On tab "Manage themes", change table header to
+  better describe what's actually listed.
+  [kleist]
+
+1.0 (2012-04-15)
+----------------
+
+* Prevent AttributeError when getRequest returns None.
+  [maurits]
+
+* Calculate subrequests against navigation root rather than portal.
+  [elro]
+
+* Supply closest context found for 404 pages.
+  [elro]
+
+* Lookup portal state with correct context.
+  [elro]
+
+1.0b9 - 2011-11-02
+------------------
+
+* Patch App.Management.Navigation to disable theming of ZMI pages.
+  [elro]
+
+1.0b8 - 2011-07-04
+------------------
+
+* Evaluate theme parameters regardless of whether there is a valid context or
+  not (e.g. when templating a 404 page).
+  [lentinj]
+
+1.0b7 - 2011-06-12
+------------------
+
+* Moved the *views* and *overrides* plugins out into a separate package
+  ``plone.app.themingplugins``. If you want to use those features, you need
+  to install that package in your buildout. Themes attempting to register
+  views or overrides in environments where ``plone.app.themingplugins`` is not
+  installed will install, but views and overrides will not take effect.
+  [optilude]
+
+1.0b6 - 2011-06-08
+------------------
+
+* Support for setting arbitrary Doctypes.
+  [elro]
+
+* Upgrade step to update plone.app.registry configuration.
+  [elro]
+
+* Fixed plugin initialization when applying a theme.
+  [maurits]
+
+* Query the resource directory using the 'currentTheme' name instead
+  of the Theme object (updating the control panel was broken).
+  [maurits]
+
+* Fix zip import (plugin initialization was broken.)
+  [elro]
+
+1.0b5 - 2011-05-29
+------------------
+
+* Make sure the control panel is never themed, by setting the X-Theme-Disabled
+  response header.
+  [optilude]
+
+* Add support for registering new views from Zope Page Templates and
+  overriding existing templates. See README for more details.
+  [optilude]
+
+1.0b4 - 2011-05-24
+------------------
+
+* Add support for ``X-Theme-Disabled`` response header.
+  [elro]
+
+* Make "Replace existing theme" checkbox default to off.
+  [elro]
+
+* Fix control panel to correctly display a newly uploaded theme.
+  [elro]
+
+* Fix zip import to work correctly when no manifest is supplied.
+  [elro]
+
+1.0b3 - 2011-05-23
+------------------
+
+* Show theme name along with title in control panel.
+  [elro]
+
+1.0b2 - 2011-05-16
+------------------
+
+* Encode internally resolved documents to support non-ascii characters
+  correctly.
+  [elro]
+
+* Fix control panel to use theme name not id.
+  [optilude]
+
+1.0b1 - 2011-04-22
+------------------
+
+* Wrap internal subrequests for css or js in style or script tags to
+  facilitate inline includes.
+  [elro]
+
+* Add ``theme.xml`` import step (see README).
+  [optilude]
+
+* Add support for ``[theme:parameters]`` section in ``manifest.cfg``, which
+  can be used to set parameters and the corresponding TALES expressions to
+  calculate them.
+  [optilude]
+
+* Add support for parameter expressions based on TALES expressions
+  [optilude]
+
+* Use plone.subrequest 1.6 features to work with IStreamIterator from
+  plone.resource.
+  [elro]
+
+* Depend on ``Products.CMFPlone`` instead of ``Plone``.
+  [elro]
+
+* Added support for uploading themes as Zip archives.
+  [optilude]
+
+* Added theme off switch: Add a query string parameter ``diazo.off=1`` to a
+  request whilst Zope is in development mode to turn off the theme.
+  [optilude]
+
+* Removed 'theme' and alternative themes support: Themes should be referenced
+  using the ``<theme />`` directive in the Diazo rules file.
+  [optilude]
+
+* Removed 'domains' support: This can be handled with the rules file syntax
+  by using the ``host`` parameter.
+  [optilude]
+
+* Removed 'notheme' support: This can be handled within the rules file syntax
+  by using the ``path`` parameter.
+  [optilude]
+
+* Added ``path`` and ``host`` as parameters to the Diazo rules file. These
+  can now be used as conditional expressions.
+  [optilude]
+
+* Removed dependency on XDV in favour of dependency on Diazo (which is the
+  new name for XDV).
+  [optilude]
+
+* Forked from collective.xdv 1.0rc11.
+  [optilude]
diff --git a/docs/CHANGES.rst b/docs/CHANGES.rst
deleted file mode 100644
index 4518e85..0000000
--- a/docs/CHANGES.rst
+++ /dev/null
@@ -1,354 +0,0 @@
-Changelog
-=========
-
-1.2.5 (unreleased)
-------------------
-
-- Fix RestructuredText representation on PyPI by bringing back a few
-  example lines in the manifest.
-  [maurits]
-
-
-1.2.4 (2015-05-12)
-------------------
-
-- Add setting for tinymce automatically detected styles
-  [vangheem]
-
-1.2.3 (2015-05-04)
-------------------
-
-- make control panel usable again. Fixed problem where skins
-  control panel is no longer present.
-  [vangheem]
-
-- unified different getTheme functions.
-  [jensens]
-
-- pep8ified, housekeeping, cleanup
-  [jensens]
-
-- Specify i18n:domain in controlpanel.pt.
-  [vincentfretin]
-
-- pat-modal pattern has been renamed to pat-plone-modal
-  [jcbrand]
-
-- Fix load pluginSettings for the enabled theme before calling plugins for
-  onEnabled and call onEnabled plugins with correct parameters
-  [datakurre]
-
-
-1.2.2 (2015-03-22)
-------------------
-
-- Patch the ZMI only for available ZMI pages.
-  [thet]
-
-- Change deprecated import of ``zope.site.hooks.getSite`` to
-  ``zope.component.hooks.getSite``.
-  [thet]
-
-- Add an error log if the subrequest failed (probably a relative xi:include)
-  instead of silently returning None (and so having a xi:include returning
-  nothing).
-  [vincentfretin]
-
-- Fix transform to not affect the result when theming is disabled
-  [datakurre]
-
-- Integrate thememapper mockup pattern and fix theming control panel
-  to be more usable
-  [ebrehault]
-
-
-1.2.1 (2014-10-23)
-------------------
-
-- Remove DL's from portal message in templates.
-  https://github.com/plone/Products.CMFPlone/issues/153
-  [khink]
-
-- Fix "Insufficient Privileges" for "Site Administrators" on the control panel.
-  [@rpatterson]
-
-- Add IThemeAppliedEvent
-  [vangheem]
-
-- Put themes in a separate zcml file to be able to exclude them
-  [laulaz]
-
-- #14107 bot requests like /widget/oauth_login/info.txt causes
-  problems finding correct context with plone.app.theming
-  [anthonygerrard]
-
-- Added support for ++theme++ to traverse to the contents of the
-  current activated theme.
-  [bosim]
-
-
-1.2.0 (2014-03-02)
-------------------
-
-- Disable theming for manage_shutdown view.
-  [davisagli]
-
-- Fix reference to theme error template
-  [afrepues]
-
-- Add "Test Styles" button in control panel to expose, test_rendering template.
-  [runyaga]
-
-1.1.1 (2013-05-23)
-------------------
-
-- Fixed i18n issues.
-  [thomasdesvenain]
-
-- Fixed i18n issues.
-  [jianaijun]
-
-- This fixed UnicodeDecodeError when Theme Title is Non-ASCII
-  in the manifest.cfg file.
-  [jianaijun]
-
-
-1.1 (2013-04-06)
-----------------
-
-- Fixed i18n issues.
-  [vincentfretin]
-
-- Make the template theme do what it claims to do: copy styles as
-  well as scripts.
-  [smcmahon]
-
-- Change the label and description for the example theme to supply useful
-  information.
-  [smcmahon]
-
-- Upgrades from 1.0 get the combined "Theming" control panel that was added in
-  1.1a1.
-  [danjacka]
-
-
-1.1b2 (2013-01-01)
-------------------
-
-- Ensure host blacklist utilises SERVER_URL to correctly determine hostname
-  for sites hosted as sub-folders at any depth.
-  [davidjb]
-
-- Add test about plone.app.theming / plone.app.caching integration when
-  using GZIP compression for anonymous
-  (see ticket `12038 <https://dev.plone.org/ticket/12038>`_). [ebrehault]
-
-
-1.1b1 (2012-10-16)
-------------------
-
-- Add diazo.debug option, route all error_log output through
-  this so debugging can be displayed
-  [lentinj]
-
-- Make example Bootstrap-based theme use the HTML5 DOCTYPE.
-  [danjacka]
-
-- Demote ZMI patch log message to debug level.
-  [hannosch]
-
-- Upgrade to ACE 1.0 via plone.resourceeditor
-  [optilude]
-
-- Put quotes around jQuery attribute selector values to appease
-  jQuery 1.7.2.
-  [danjacka]
-
-1.1a2 (2012-08-30)
-------------------
-
-- Protect the control panel with a specific permission so it can be
-  delegated.
-  [davisagli]
-
-- Advise defining ajax_load as ``request.form.get('ajax_load')`` in
-  manifest.cfg.  For instance, the login_form has an hidden empty
-  ajax_load input, which would give an unthemed page after submitting
-  the form.
-  [maurits]
-
-- Change theme editor page templates to use main_template rather than
-  prefs_main_template to avoid inserting CSS and JavaScript too early
-  under plonetheme.classic.
-  [danjacka]
-
-1.1a1 (2012-08-08)
-------------------
-
-- Replace the stock "Themes" control panel with a renamed "Theming" control
-  panel, which incorporates the former's settings under its "Advanced" tab.
-  [optilude]
-
-- Add a full in-Plone theme authoring environment
-  [optilude, vangheem]
-
-- Update IBeforeTraverseEvent import to zope.traversing.
-  [hannosch]
-
-- On tab "Manage themes", change table header to
-  better describe what's actually listed.
-  [kleist]
-
-1.0 (2012-04-15)
-----------------
-
-* Prevent AttributeError when getRequest returns None.
-  [maurits]
-
-* Calculate subrequests against navigation root rather than portal.
-  [elro]
-
-* Supply closest context found for 404 pages.
-  [elro]
-
-* Lookup portal state with correct context.
-  [elro]
-
-1.0b9 - 2011-11-02
-------------------
-
-* Patch App.Management.Navigation to disable theming of ZMI pages.
-  [elro]
-
-1.0b8 - 2011-07-04
-------------------
-
-* Evaluate theme parameters regardless of whether there is a valid context or
-  not (e.g. when templating a 404 page).
-  [lentinj]
-
-1.0b7 - 2011-06-12
-------------------
-
-* Moved the *views* and *overrides* plugins out into a separate package
-  ``plone.app.themingplugins``. If you want to use those features, you need
-  to install that package in your buildout. Themes attempting to register
-  views or overrides in environments where ``plone.app.themingplugins`` is not
-  installed will install, but views and overrides will not take effect.
-  [optilude]
-
-1.0b6 - 2011-06-08
-------------------
-
-* Support for setting arbitrary Doctypes.
-  [elro]
-
-* Upgrade step to update plone.app.registry configuration.
-  [elro]
-
-* Fixed plugin initialization when applying a theme.
-  [maurits]
-
-* Query the resource directory using the 'currentTheme' name instead
-  of the Theme object (updating the control panel was broken).
-  [maurits]
-
-* Fix zip import (plugin initialization was broken.)
-  [elro]
-
-1.0b5 - 2011-05-29
-------------------
-
-* Make sure the control panel is never themed, by setting the X-Theme-Disabled
-  response header.
-  [optilude]
-
-* Add support for registering new views from Zope Page Templates and
-  overriding existing templates. See README for more details.
-  [optilude]
-
-1.0b4 - 2011-05-24
-------------------
-
-* Add support for ``X-Theme-Disabled`` response header.
-  [elro]
-
-* Make "Replace existing theme" checkbox default to off.
-  [elro]
-
-* Fix control panel to correctly display a newly uploaded theme.
-  [elro]
-
-* Fix zip import to work correctly when no manifest is supplied.
-  [elro]
-
-1.0b3 - 2011-05-23
-------------------
-
-* Show theme name along with title in control panel.
-  [elro]
-
-1.0b2 - 2011-05-16
-------------------
-
-* Encode internally resolved documents to support non-ascii characters
-  correctly.
-  [elro]
-
-* Fix control panel to use theme name not id.
-  [optilude]
-
-1.0b1 - 2011-04-22
-------------------
-
-* Wrap internal subrequests for css or js in style or script tags to
-  facilitate inline includes.
-  [elro]
-
-* Add ``theme.xml`` import step (see README).
-  [optilude]
-
-* Add support for ``[theme:parameters]`` section in ``manifest.cfg``, which
-  can be used to set parameters and the corresponding TALES expressions to
-  calculate them.
-  [optilude]
-
-* Add support for parameter expressions based on TALES expressions
-  [optilude]
-
-* Use plone.subrequest 1.6 features to work with IStreamIterator from
-  plone.resource.
-  [elro]
-
-* Depend on ``Products.CMFPlone`` instead of ``Plone``.
-  [elro]
-
-* Added support for uploading themes as Zip archives.
-  [optilude]
-
-* Added theme off switch: Add a query string parameter ``diazo.off=1`` to a
-  request whilst Zope is in development mode to turn off the theme.
-  [optilude]
-
-* Removed 'theme' and alternative themes support: Themes should be referenced
-  using the ``<theme />`` directive in the Diazo rules file.
-  [optilude]
-
-* Removed 'domains' support: This can be handled with the rules file syntax
-  by using the ``host`` parameter.
-  [optilude]
-
-* Removed 'notheme' support: This can be handled within the rules file syntax
-  by using the ``path`` parameter.
-  [optilude]
-
-* Added ``path`` and ``host`` as parameters to the Diazo rules file. These
-  can now be used as conditional expressions.
-  [optilude]
-
-* Removed dependency on XDV in favour of dependency on Diazo (which is the
-  new name for XDV).
-  [optilude]
-
-* Forked from collective.xdv 1.0rc11.
-  [optilude]
diff --git a/setup.py b/setup.py
index 9937852..e6fb0c8 100644
--- a/setup.py
+++ b/setup.py
@@ -18,7 +18,7 @@
         "userguide.rst"
     )
 ).read()
-longdescription += open(os.path.join("docs", "CHANGES.rst")).read()
+longdescription += open("CHANGES.rst").read()
 
 setup(
     name='plone.app.theming',


