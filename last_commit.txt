Repository: plone.app.event
Branch: refs/heads/master
Date: 2015-01-29T19:33:53+01:00
Author: Johannes Raggam (thet) <raggam-nl@adm.at>
Commit: https://github.com/plone/plone.app.event/commit/b8c9a44ecc1f06f7623d1dbff7cac0c187ca63d4

IEventAccessor already returns start/end datetimes modified according to whole_day/open_end settings

Files changed:
M plone/app/event/dx/behaviors.py

diff --git a/plone/app/event/dx/behaviors.py b/plone/app/event/dx/behaviors.py
index 5e3cc09..bf98f91 100644
--- a/plone/app/event/dx/behaviors.py
+++ b/plone/app/event/dx/behaviors.py
@@ -305,23 +305,13 @@ class IEventContact(model.Schema):
 # Start indexer
 @indexer(IDXEvent)
 def start_indexer(obj):
-    acc = IEventBasic(obj)
-    start = acc.start
-    if acc.whole_day:
-        start = dt_start_of_day(start)
-    return start
+    return IEventAccessor(obj).start
 
 
 # End indexer
 @indexer(IDXEvent)
 def end_indexer(obj):
-    acc = IEventBasic(obj)
-    end = acc.end
-    if acc.open_end:
-        end = acc.start  # Open end events end on same day
-    if acc.open_end or acc.whole_day:
-        end = dt_end_of_day(end)
-    return end
+    return IEventAccessor(obj).end
 
 
 # Location indexer


