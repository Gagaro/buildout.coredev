Repository: plone.app.portlets


Branch: refs/heads/master
Date: 2015-11-22T22:11:02-06:00
Author: vangheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/plone.app.portlets/commit/34c899d197362f769127138d293cc72931bd72e5

Add authenticator token to group portlet links

Files changed:
M CHANGES.rst
M plone/app/portlets/browser/templates/manage-group-dashboard.pt
M plone/app/portlets/browser/templates/manage-group.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index 254c217..68ec494 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,6 +10,9 @@ New:
 
 Fixes:
 
+- Add authenticator token to group portlet links
+  [vangheem]
+
 - Fix links in RSS portlets when using special characters.
   [Gagaro]
 
diff --git a/plone/app/portlets/browser/templates/manage-group-dashboard.pt b/plone/app/portlets/browser/templates/manage-group-dashboard.pt
index b4c492d..e7bcba3 100644
--- a/plone/app/portlets/browser/templates/manage-group-dashboard.pt
+++ b/plone/app/portlets/browser/templates/manage-group-dashboard.pt
@@ -28,17 +28,17 @@
         Portal status message
     </div>
 
-    <div id="content-core">
+    <div id="content-core" tal:define="token context/@@authenticator/token">
       <div class="autotabs">        
         <nav class="autotoc-nav">
           <a href="${portal_url}/@@usergroup-groupmembership?groupname=${request/key}"
              i18n:translate="label_group_members">Group Members</a>
           <a href="${portal_url}/@@usergroup-groupdetails?groupname=${request/key}"
              i18n:translate="label_group_properties">Group Properties</a>
-          <a href="${portal_url}/@@manage-group-portlets?key=${request/key}"
+          <a href="${portal_url}/@@manage-group-portlets?key=${request/key}&_authenticator=${token}"
              i18n:translate="label_group_portlets">Group Portlets</a>
           <a class="active"
-             href="${portal_url}/@@manage-group-dashboard?key=${request/key}"
+             href="${portal_url}/@@manage-group-dashboard?key=${request/key}&_authenticator=${token}"
              i18n:translate="label_group_dashboard">Group Dashboard</a>
         </nav>
 
diff --git a/plone/app/portlets/browser/templates/manage-group.pt b/plone/app/portlets/browser/templates/manage-group.pt
index 74fe591..6abad3f 100644
--- a/plone/app/portlets/browser/templates/manage-group.pt
+++ b/plone/app/portlets/browser/templates/manage-group.pt
@@ -27,16 +27,16 @@
 <metal:b fill-slot="content-core">
   <metal:b metal:define-macro="props" tal:omit-tag="">
 
-    <div class="autotabs">        
+    <div class="autotabs" tal:define="token context/@@authenticator/token">        
       <nav class="autotoc-nav">
         <a href="${portal_url}/@@usergroup-groupmembership?groupname=${request/key}"
            i18n:translate="label_group_members">Group Members</a>
         <a href="${portal_url}/@@usergroup-groupdetails?groupname=${request/key}"
            i18n:translate="label_group_properties">Group Properties</a>
         <a class="active"
-           href="${portal_url}/@@manage-group-portlets?key=${request/key}"
+           href="${portal_url}/@@manage-group-portlets?key=${request/key}&_authenticator=${token}"
            i18n:translate="label_group_portlets">Group Portlets</a>
-        <a href="${portal_url}/@@manage-group-dashboard?key=${request/key}"
+        <a href="${portal_url}/@@manage-group-dashboard?key=${request/key}&_authenticator=${token}"
            i18n:translate="label_group_dashboard">Group Dashboard</a>
       </nav>
 


Repository: plone.app.portlets


Branch: refs/heads/master
Date: 2015-11-22T23:22:05-06:00
Author: Nathan Van Gheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/plone.app.portlets/commit/c8932980a72b39f728cf94bd65344b61526f6694

Merge pull request #62 from plone/add-authenticator-to-group-portlet-links

Add authenticator token to group portlet links

Files changed:
M CHANGES.rst
M plone/app/portlets/browser/templates/manage-group-dashboard.pt
M plone/app/portlets/browser/templates/manage-group.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index 254c217..68ec494 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,6 +10,9 @@ New:
 
 Fixes:
 
+- Add authenticator token to group portlet links
+  [vangheem]
+
 - Fix links in RSS portlets when using special characters.
   [Gagaro]
 
diff --git a/plone/app/portlets/browser/templates/manage-group-dashboard.pt b/plone/app/portlets/browser/templates/manage-group-dashboard.pt
index b4c492d..e7bcba3 100644
--- a/plone/app/portlets/browser/templates/manage-group-dashboard.pt
+++ b/plone/app/portlets/browser/templates/manage-group-dashboard.pt
@@ -28,17 +28,17 @@
         Portal status message
     </div>
 
-    <div id="content-core">
+    <div id="content-core" tal:define="token context/@@authenticator/token">
       <div class="autotabs">        
         <nav class="autotoc-nav">
           <a href="${portal_url}/@@usergroup-groupmembership?groupname=${request/key}"
              i18n:translate="label_group_members">Group Members</a>
           <a href="${portal_url}/@@usergroup-groupdetails?groupname=${request/key}"
              i18n:translate="label_group_properties">Group Properties</a>
-          <a href="${portal_url}/@@manage-group-portlets?key=${request/key}"
+          <a href="${portal_url}/@@manage-group-portlets?key=${request/key}&_authenticator=${token}"
              i18n:translate="label_group_portlets">Group Portlets</a>
           <a class="active"
-             href="${portal_url}/@@manage-group-dashboard?key=${request/key}"
+             href="${portal_url}/@@manage-group-dashboard?key=${request/key}&_authenticator=${token}"
              i18n:translate="label_group_dashboard">Group Dashboard</a>
         </nav>
 
diff --git a/plone/app/portlets/browser/templates/manage-group.pt b/plone/app/portlets/browser/templates/manage-group.pt
index 74fe591..6abad3f 100644
--- a/plone/app/portlets/browser/templates/manage-group.pt
+++ b/plone/app/portlets/browser/templates/manage-group.pt
@@ -27,16 +27,16 @@
 <metal:b fill-slot="content-core">
   <metal:b metal:define-macro="props" tal:omit-tag="">
 
-    <div class="autotabs">        
+    <div class="autotabs" tal:define="token context/@@authenticator/token">        
       <nav class="autotoc-nav">
         <a href="${portal_url}/@@usergroup-groupmembership?groupname=${request/key}"
            i18n:translate="label_group_members">Group Members</a>
         <a href="${portal_url}/@@usergroup-groupdetails?groupname=${request/key}"
            i18n:translate="label_group_properties">Group Properties</a>
         <a class="active"
-           href="${portal_url}/@@manage-group-portlets?key=${request/key}"
+           href="${portal_url}/@@manage-group-portlets?key=${request/key}&_authenticator=${token}"
            i18n:translate="label_group_portlets">Group Portlets</a>
-        <a href="${portal_url}/@@manage-group-dashboard?key=${request/key}"
+        <a href="${portal_url}/@@manage-group-dashboard?key=${request/key}&_authenticator=${token}"
            i18n:translate="label_group_dashboard">Group Dashboard</a>
       </nav>
 


