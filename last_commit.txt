Repository: plone.app.caching


Branch: refs/heads/master
Date: 2015-09-08T21:20:54-05:00
Author: vangheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/plone.app.caching/commit/711feee86e827b08d91e0609b1e9953d25cceff1

fix cache settings modal settings so they do not show content
  inline on save.

Files changed:
M CHANGES.rst
M plone/app/caching/browser/controlpanel.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index f94ecdd..d5e61bb 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,7 +4,9 @@ Changelog
 1.2.7 (unreleased)
 ------------------
 
-- Nothing changed yet.
+- fix cache settings modal settings so they do not show content
+  inline on save.
+  [vangheem]
 
 
 1.2.6 (2015-07-18)
diff --git a/plone/app/caching/browser/controlpanel.pt b/plone/app/caching/browser/controlpanel.pt
index 7d5a649..b0dd67d 100644
--- a/plone/app/caching/browser/controlpanel.pt
+++ b/plone/app/caching/browser/controlpanel.pt
@@ -597,7 +597,7 @@
                                                 </div>
                                                 <div style="white-space: nowrap" class="discreet rulesetParameterLink" tal:condition="operationInfo/hasOptions">
                                                     <a  class="editGlobalOperationParameters pat-plone-modal"
-                                                        data-pat-plone-modal='{"actionOptions": {"reloadWindowOnClose": false}}'
+                                                        data-pat-plone-modal='{"actionOptions": {"disableAjaxFormSubmit":true, "redirectOnResponse":true}}'
                                                         i18n:translate="link_view_edit"
                                                         tal:attributes="href string:${context/absolute_url}/@@${view/__name__}/edit-operation-global/${operationName}"
                                                         >View/edit</a>
@@ -606,13 +606,13 @@
                                                 <div style="white-space: nowrap" class="discreet rulesetParameterLink"  tal:condition="operationInfo/hasOptions">
                                                     <tal:block define="hasRulesetOptions python:view.hasRulesetOptions(operationInfo['type'], ruleType['name'])">
                                                         <a  class="editRulesetOperationParameters pat-plone-modal"
-                                                            data-pat-plone-modal='{"actionOptions": {"reloadWindowOnClose": false}}'
+                                                            data-pat-plone-modal='{"actionOptions": {"disableAjaxFormSubmit":true, "redirectOnResponse":true}}'
                                                             tal:condition="hasRulesetOptions"
                                                             i18n:translate="link_view_edit_clear"
                                                             tal:attributes="href string:${context/absolute_url}/@@${view/__name__}/edit-operation-ruleset/${operationName}/${ruleType/name}"
                                                             >View/edit/clear</a>
                                                         <a  class="editRulesetOperationParameters pat-plone-modal"
-                                                            data-pat-plone-modal='{"actionOptions": {"reloadWindowOnClose": false}}'
+                                                            data-pat-plone-modal='{"actionOptions": {"disableAjaxFormSubmit":true, "redirectOnResponse":true}}'
                                                             tal:condition="not:hasRulesetOptions"
                                                             i18n:translate="link_create"
                                                             tal:attributes="href string:${context/absolute_url}/@@${view/__name__}/edit-operation-ruleset/${operationName}/${ruleType/name}"


