Repository: mockup


Branch: refs/heads/master
Date: 2015-07-13T09:14:38+02:00
Author: vangheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/mockup/commit/5633c09b206819b69ffda674046dfa2fe64e0397

remove accessibility pattern

Files changed:
M CHANGES.rst
M mockup/js/bundles/docs.js
M mockup/js/bundles/plone.js
M mockup/js/config.js
D mockup/patterns/accessibility/pattern.js
D mockup/tests/pattern-accessibility-test.js

diff --git a/CHANGES.rst b/CHANGES.rst
index 104b12d..0ecc621 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,6 +4,11 @@ Changelog
 2.0.5 (unreleased)
 ------------------
 
+- remove accessibility pattern. see
+    https://github.com/plone/Products.CMFPlone/issues/627
+    https://github.com/plone/Products.CMFPlone/issues/348
+  [vangheem]
+
 - be able to specify not submit modal forms with ajax
   [vangheem]
 
diff --git a/mockup/js/bundles/docs.js b/mockup/js/bundles/docs.js
index eaae54b..2f26e7d 100644
--- a/mockup/js/bundles/docs.js
+++ b/mockup/js/bundles/docs.js
@@ -32,11 +32,6 @@ require([
         description: 'All the patterns you\'ll ever need',
         autotoc: false,
         patterns: [
-          { id: 'accessibility',
-            title: 'Accessibility',
-            description: 'Easily change text size on a page',
-            url: 'patterns/accessibility/pattern.js'
-          },
           { id: 'autotoc',
             title: 'Autotoc',
             description: 'Automatically generate a table of contents',
diff --git a/mockup/js/bundles/plone.js b/mockup/js/bundles/plone.js
index ca32504..11f1438 100644
--- a/mockup/js/bundles/plone.js
+++ b/mockup/js/bundles/plone.js
@@ -9,7 +9,6 @@ define([
   'mockup-patterns-querystring',
   'mockup-patterns-tinymce',
 
-  'mockup-patterns-accessibility',
   'mockup-patterns-autotoc',
   'mockup-patterns-formunloadalert',
   'mockup-patterns-preventdoublesubmit',
diff --git a/mockup/js/config.js b/mockup/js/config.js
index e348bdc..e52b5e4 100644
--- a/mockup/js/config.js
+++ b/mockup/js/config.js
@@ -61,7 +61,6 @@
       'mockup-fakeserver': 'tests/fakeserver',
       'mockup-i18n': 'js/i18n',
       'mockup-parser': 'bower_components/mockup-core/js/parser',
-      'mockup-patterns-accessibility': 'patterns/accessibility/pattern',
       'mockup-patterns-autotoc': 'patterns/autotoc/pattern',
       'mockup-patterns-backdrop': 'patterns/backdrop/pattern',
       'mockup-patterns-base': 'bower_components/mockup-core/js/pattern',
diff --git a/mockup/patterns/accessibility/pattern.js b/mockup/patterns/accessibility/pattern.js
deleted file mode 100644
index 5891e85..0000000
--- a/mockup/patterns/accessibility/pattern.js
+++ /dev/null
@@ -1,99 +0,0 @@
-/* Pattern which provides accessibility support
- *
- * Options:
- *    smallbtn(string):	Selector used to activate small text on click. (null)
- *    normalbtn(string): Selector used to activate normal text on click. (null)
- *    largebtn(string):	Selector used to activate large text on click. (null)
- *
- * Documentation:
- *    # Example
- *
- *    {{ example-1 }}
- *
- * Example: example-1
- *    <ul id="textAdjust"
- *        class="pat-accessibility"
- *        data-pat-accessibility="smallbtn:.decrease-text;
- *                                normalbtn:.normal-text;
- *                                largebtn:.increase-text;">
- *      <li>
- *        <a href="." class="decrease-text">
- *          <i class="icon-minus-sign"></i>
- *          Decrease Text Size
- *        </a>
- *      </li>
- *      <li>
- *        <a href="." class="normal-text">
- *          <i class="icon-circle"></i>
- *          Normal Text Size
- *        </a>
- *      </li>
- *      <li>
- *        <a href="." class="increase-text">
- *          <i class="icon-plus-sign"></i>
- *          Increase Text Size
- *        </a>
- *      </li>
- *    </ul>
- *
- */
-
-
-define([
-  'jquery',
-  'mockup-patterns-base',
-  'jquery.cookie'
-], function($, Base) {
-  'use strict';
-
-  var Accessibility = Base.extend({
-    name: 'accessibility',
-    trigger: '.pat-accessibility',
-    defaults: {
-      'smallbtn': null,
-      'normalbtn': null,
-      'largebtn': null
-    },
-    setBaseFontSize: function($fontsize, $reset) {
-      if ($reset) {
-        this.$el.removeClass('smallText').removeClass('largeText').
-            removeClass('mediumText');
-        $.cookie('fontsize', $fontsize, { expires: 365, path: '/' });
-      }
-      this.$el.addClass($fontsize);
-    },
-    initBtn: function(btn) {
-      var self = this;
-      btn.el.click(function(e) {
-        e.preventDefault();
-        self.setBaseFontSize(btn.name + 'Text', 1);
-      });
-    },
-    init: function() {
-      var self = this;
-      var $fontsize = $.cookie('fontsize');
-      if ($fontsize) {
-        self.setBaseFontSize($fontsize, 0);
-      }
-      var btns = ['smallbtn', 'normalbtn', 'largebtn'];
-      $.each(btns, function(idx, btn) {
-        var btnName = btn.replace('btn', '');
-        var btnSelector = self.options[btn];
-        if (btnSelector !== null) {
-          var el = $(btnSelector, self.$el);
-          if (el) {
-            btn = {
-              name: btnName,
-              el: el
-            };
-            self[btnName] = btn;
-            self.initBtn(btn);
-          }
-        }
-      });
-    }
-  });
-
-  return Accessibility;
-
-});
diff --git a/mockup/tests/pattern-accessibility-test.js b/mockup/tests/pattern-accessibility-test.js
deleted file mode 100644
index 5249bf7..0000000
--- a/mockup/tests/pattern-accessibility-test.js
+++ /dev/null
@@ -1,66 +0,0 @@
-define([
-  'expect',
-  'jquery',
-  'pat-registry',
-  'mockup-patterns-accessibility'
-], function(expect, $, registry, Accessibility) {
-  'use strict';
-
-  window.mocha.setup('bdd');
-  $.fx.off = true;
-
-/* ==========================
-   TEST: Accessibility
-  ========================== */
-
-  describe('Accessibility', function () {
-    beforeEach(function() {
-      $.removeCookie('fontsize');
-      this.$el = $('' +
-        '<div class="pat-accessibility">' +
-          '<a id="btn1" />' +
-          '<a id="btn2" />' +
-          '<a id="btn3" />' +
-        '</div>');
-    });
-    it('test cookie remains set', function() {
-      var accessibility = new Accessibility(this.$el);
-      expect($.cookie('fontsize')).to.be.equal(undefined);
-      accessibility.setBaseFontSize('smallText', 1);
-      // XXX breaking chrome with phantom js for some reason--new Date() is returning a date from 1969
-      // expect($.cookie('fontsize')).to.be.equal('smallText');
-    });
-    it('test class is set', function() {
-      var accessibility = new Accessibility(this.$el);
-      expect(this.$el.hasClass('smallText')).to.be.equal(false);
-      expect(this.$el.hasClass('largeText')).to.be.equal(false);
-      accessibility.setBaseFontSize('smallText', 1);
-      expect(this.$el.hasClass('smallText')).to.be.equal(true);
-      expect(this.$el.hasClass('largeText')).to.be.equal(false);
-      accessibility.setBaseFontSize('largeText', 1);
-      expect(this.$el.hasClass('smallText')).to.be.equal(false);
-      expect(this.$el.hasClass('largeText')).to.be.equal(true);
-    });
-    it('test class is set if a cookie is found', function() {
-      $.cookie('fontsize', 'smallText');
-      expect(this.$el.hasClass('smallText')).to.be.equal(false);
-      registry.scan(this.$el);
-      expect(this.$el.hasClass('smallText')).to.be.equal(true);
-    });
-    it('test setting small font size with button works', function() {
-      // add pattern to anchor
-      this.$el.attr('data-pat-accessibility', 'smallbtn: #btn1');
-      registry.scan(this.$el);
-      $('#btn1', this.$el).trigger('click');
-      expect(this.$el.hasClass('smallText')).to.be.equal(true);
-    });
-    it('test setting large font size with button works', function() {
-      // add pattern to anchor
-      this.$el.attr('data-pat-accessibility', 'largebtn: #btn3; smallbtn: #btn1');
-      registry.scan(this.$el);
-      $('#btn3', this.$el).trigger('click');
-      expect(this.$el.hasClass('largeText')).to.be.equal(true);
-    });
-  });
-
-});


Repository: mockup


Branch: refs/heads/master
Date: 2015-07-13T09:52:50+02:00
Author: Nathan Van Gheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/mockup/commit/c9ed966e0d8d870b94e346eb2b6cb3ff27f3d649

Merge pull request #521 from plone/remove-accessibility

remove accessibility pattern

Files changed:
M CHANGES.rst
M mockup/js/bundles/docs.js
M mockup/js/bundles/plone.js
M mockup/js/config.js
D mockup/patterns/accessibility/pattern.js
D mockup/tests/pattern-accessibility-test.js

diff --git a/CHANGES.rst b/CHANGES.rst
index 104b12d..0ecc621 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,6 +4,11 @@ Changelog
 2.0.5 (unreleased)
 ------------------
 
+- remove accessibility pattern. see
+    https://github.com/plone/Products.CMFPlone/issues/627
+    https://github.com/plone/Products.CMFPlone/issues/348
+  [vangheem]
+
 - be able to specify not submit modal forms with ajax
   [vangheem]
 
diff --git a/mockup/js/bundles/docs.js b/mockup/js/bundles/docs.js
index eaae54b..2f26e7d 100644
--- a/mockup/js/bundles/docs.js
+++ b/mockup/js/bundles/docs.js
@@ -32,11 +32,6 @@ require([
         description: 'All the patterns you\'ll ever need',
         autotoc: false,
         patterns: [
-          { id: 'accessibility',
-            title: 'Accessibility',
-            description: 'Easily change text size on a page',
-            url: 'patterns/accessibility/pattern.js'
-          },
           { id: 'autotoc',
             title: 'Autotoc',
             description: 'Automatically generate a table of contents',
diff --git a/mockup/js/bundles/plone.js b/mockup/js/bundles/plone.js
index ca32504..11f1438 100644
--- a/mockup/js/bundles/plone.js
+++ b/mockup/js/bundles/plone.js
@@ -9,7 +9,6 @@ define([
   'mockup-patterns-querystring',
   'mockup-patterns-tinymce',
 
-  'mockup-patterns-accessibility',
   'mockup-patterns-autotoc',
   'mockup-patterns-formunloadalert',
   'mockup-patterns-preventdoublesubmit',
diff --git a/mockup/js/config.js b/mockup/js/config.js
index e348bdc..e52b5e4 100644
--- a/mockup/js/config.js
+++ b/mockup/js/config.js
@@ -61,7 +61,6 @@
       'mockup-fakeserver': 'tests/fakeserver',
       'mockup-i18n': 'js/i18n',
       'mockup-parser': 'bower_components/mockup-core/js/parser',
-      'mockup-patterns-accessibility': 'patterns/accessibility/pattern',
       'mockup-patterns-autotoc': 'patterns/autotoc/pattern',
       'mockup-patterns-backdrop': 'patterns/backdrop/pattern',
       'mockup-patterns-base': 'bower_components/mockup-core/js/pattern',
diff --git a/mockup/patterns/accessibility/pattern.js b/mockup/patterns/accessibility/pattern.js
deleted file mode 100644
index 5891e85..0000000
--- a/mockup/patterns/accessibility/pattern.js
+++ /dev/null
@@ -1,99 +0,0 @@
-/* Pattern which provides accessibility support
- *
- * Options:
- *    smallbtn(string):	Selector used to activate small text on click. (null)
- *    normalbtn(string): Selector used to activate normal text on click. (null)
- *    largebtn(string):	Selector used to activate large text on click. (null)
- *
- * Documentation:
- *    # Example
- *
- *    {{ example-1 }}
- *
- * Example: example-1
- *    <ul id="textAdjust"
- *        class="pat-accessibility"
- *        data-pat-accessibility="smallbtn:.decrease-text;
- *                                normalbtn:.normal-text;
- *                                largebtn:.increase-text;">
- *      <li>
- *        <a href="." class="decrease-text">
- *          <i class="icon-minus-sign"></i>
- *          Decrease Text Size
- *        </a>
- *      </li>
- *      <li>
- *        <a href="." class="normal-text">
- *          <i class="icon-circle"></i>
- *          Normal Text Size
- *        </a>
- *      </li>
- *      <li>
- *        <a href="." class="increase-text">
- *          <i class="icon-plus-sign"></i>
- *          Increase Text Size
- *        </a>
- *      </li>
- *    </ul>
- *
- */
-
-
-define([
-  'jquery',
-  'mockup-patterns-base',
-  'jquery.cookie'
-], function($, Base) {
-  'use strict';
-
-  var Accessibility = Base.extend({
-    name: 'accessibility',
-    trigger: '.pat-accessibility',
-    defaults: {
-      'smallbtn': null,
-      'normalbtn': null,
-      'largebtn': null
-    },
-    setBaseFontSize: function($fontsize, $reset) {
-      if ($reset) {
-        this.$el.removeClass('smallText').removeClass('largeText').
-            removeClass('mediumText');
-        $.cookie('fontsize', $fontsize, { expires: 365, path: '/' });
-      }
-      this.$el.addClass($fontsize);
-    },
-    initBtn: function(btn) {
-      var self = this;
-      btn.el.click(function(e) {
-        e.preventDefault();
-        self.setBaseFontSize(btn.name + 'Text', 1);
-      });
-    },
-    init: function() {
-      var self = this;
-      var $fontsize = $.cookie('fontsize');
-      if ($fontsize) {
-        self.setBaseFontSize($fontsize, 0);
-      }
-      var btns = ['smallbtn', 'normalbtn', 'largebtn'];
-      $.each(btns, function(idx, btn) {
-        var btnName = btn.replace('btn', '');
-        var btnSelector = self.options[btn];
-        if (btnSelector !== null) {
-          var el = $(btnSelector, self.$el);
-          if (el) {
-            btn = {
-              name: btnName,
-              el: el
-            };
-            self[btnName] = btn;
-            self.initBtn(btn);
-          }
-        }
-      });
-    }
-  });
-
-  return Accessibility;
-
-});
diff --git a/mockup/tests/pattern-accessibility-test.js b/mockup/tests/pattern-accessibility-test.js
deleted file mode 100644
index 5249bf7..0000000
--- a/mockup/tests/pattern-accessibility-test.js
+++ /dev/null
@@ -1,66 +0,0 @@
-define([
-  'expect',
-  'jquery',
-  'pat-registry',
-  'mockup-patterns-accessibility'
-], function(expect, $, registry, Accessibility) {
-  'use strict';
-
-  window.mocha.setup('bdd');
-  $.fx.off = true;
-
-/* ==========================
-   TEST: Accessibility
-  ========================== */
-
-  describe('Accessibility', function () {
-    beforeEach(function() {
-      $.removeCookie('fontsize');
-      this.$el = $('' +
-        '<div class="pat-accessibility">' +
-          '<a id="btn1" />' +
-          '<a id="btn2" />' +
-          '<a id="btn3" />' +
-        '</div>');
-    });
-    it('test cookie remains set', function() {
-      var accessibility = new Accessibility(this.$el);
-      expect($.cookie('fontsize')).to.be.equal(undefined);
-      accessibility.setBaseFontSize('smallText', 1);
-      // XXX breaking chrome with phantom js for some reason--new Date() is returning a date from 1969
-      // expect($.cookie('fontsize')).to.be.equal('smallText');
-    });
-    it('test class is set', function() {
-      var accessibility = new Accessibility(this.$el);
-      expect(this.$el.hasClass('smallText')).to.be.equal(false);
-      expect(this.$el.hasClass('largeText')).to.be.equal(false);
-      accessibility.setBaseFontSize('smallText', 1);
-      expect(this.$el.hasClass('smallText')).to.be.equal(true);
-      expect(this.$el.hasClass('largeText')).to.be.equal(false);
-      accessibility.setBaseFontSize('largeText', 1);
-      expect(this.$el.hasClass('smallText')).to.be.equal(false);
-      expect(this.$el.hasClass('largeText')).to.be.equal(true);
-    });
-    it('test class is set if a cookie is found', function() {
-      $.cookie('fontsize', 'smallText');
-      expect(this.$el.hasClass('smallText')).to.be.equal(false);
-      registry.scan(this.$el);
-      expect(this.$el.hasClass('smallText')).to.be.equal(true);
-    });
-    it('test setting small font size with button works', function() {
-      // add pattern to anchor
-      this.$el.attr('data-pat-accessibility', 'smallbtn: #btn1');
-      registry.scan(this.$el);
-      $('#btn1', this.$el).trigger('click');
-      expect(this.$el.hasClass('smallText')).to.be.equal(true);
-    });
-    it('test setting large font size with button works', function() {
-      // add pattern to anchor
-      this.$el.attr('data-pat-accessibility', 'largebtn: #btn3; smallbtn: #btn1');
-      registry.scan(this.$el);
-      $('#btn3', this.$el).trigger('click');
-      expect(this.$el.hasClass('largeText')).to.be.equal(true);
-    });
-  });
-
-});


