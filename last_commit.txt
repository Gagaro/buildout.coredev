Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2015-09-24T21:46:45-05:00
Author: vangheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/plone.app.upgrade/commit/ef0e85bc813954d1cbc6a9d49ae8d8aeb3415255

Add migration for TinyMCE settings

Files changed:
A plone/app/upgrade/v50/final.py
A plone/app/upgrade/v50/profiles/to_500/registry.xml
M CHANGES.rst
M plone/app/upgrade/v50/configure.zcml
M plone/app/upgrade/v50/profiles.zcml

diff --git a/CHANGES.rst b/CHANGES.rst
index 8747bba..b01dd43 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,6 +4,9 @@ Changelog
 1.3.18 (unreleased)
 -------------------
 
+- Add migration for TinyMCE settings
+  [vangheem]
+
 - Fix migration of typesUseViewActionInListings to registry.
   [pbauer]
 
diff --git a/plone/app/upgrade/v50/configure.zcml b/plone/app/upgrade/v50/configure.zcml
index 7ea58de..5f10cc4 100644
--- a/plone/app/upgrade/v50/configure.zcml
+++ b/plone/app/upgrade/v50/configure.zcml
@@ -200,4 +200,17 @@
 
     </gs:upgradeSteps>
 
+    <gs:upgradeSteps
+        source="5010"
+        destination="5011"
+        profile="Products.CMFPlone:plone">
+
+       <gs:upgradeStep
+           title="Run to500 upgrade profile"
+           description=""
+           handler=".final.to500"
+           />
+
+    </gs:upgradeSteps>
+
 </configure>
diff --git a/plone/app/upgrade/v50/final.py b/plone/app/upgrade/v50/final.py
new file mode 100644
index 0000000..c9518e0
--- /dev/null
+++ b/plone/app/upgrade/v50/final.py
@@ -0,0 +1,6 @@
+from plone.app.upgrade.utils import loadMigrationProfile
+
+
+def to500(context):
+    """5.0rc3 -> 5.0.0"""
+    loadMigrationProfile(context, 'profile-plone.app.upgrade.v50:to500')
\ No newline at end of file
diff --git a/plone/app/upgrade/v50/profiles.zcml b/plone/app/upgrade/v50/profiles.zcml
index 869c086..b34ff4c 100644
--- a/plone/app/upgrade/v50/profiles.zcml
+++ b/plone/app/upgrade/v50/profiles.zcml
@@ -84,4 +84,12 @@
       provides="Products.GenericSetup.interfaces.EXTENSION"
       />
 
+  <genericsetup:registerProfile
+      name="to500"
+      title="Upgrade profile for Plone 5010 to Plone 5.0.0"
+      description=""
+      directory="profiles/to_500"
+      for="Products.CMFPlone.interfaces.IMigratingPloneSiteRoot"
+      provides="Products.GenericSetup.interfaces.EXTENSION"
+      />
 </configure>
diff --git a/plone/app/upgrade/v50/profiles/to_500/registry.xml b/plone/app/upgrade/v50/profiles/to_500/registry.xml
new file mode 100644
index 0000000..b367867
--- /dev/null
+++ b/plone/app/upgrade/v50/profiles/to_500/registry.xml
@@ -0,0 +1,5 @@
+<?xml version="1.0"?>
+<registry>
+  <records interface="Products.CMFPlone.interfaces.ITinyMCESchema"
+           prefix="plone" />
+</registry>
\ No newline at end of file


Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2015-09-24T22:44:25-05:00
Author: Nathan Van Gheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/plone.app.upgrade/commit/0bb8ead3e97833003408881ef06642a37329dc3a

Merge pull request #53 from plone/upgrade-tinymce-500

Add migration for TinyMCE settings

Files changed:
A plone/app/upgrade/v50/final.py
A plone/app/upgrade/v50/profiles/to_500/registry.xml
M CHANGES.rst
M plone/app/upgrade/v50/configure.zcml
M plone/app/upgrade/v50/profiles.zcml

diff --git a/CHANGES.rst b/CHANGES.rst
index 8747bba..b01dd43 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,6 +4,9 @@ Changelog
 1.3.18 (unreleased)
 -------------------
 
+- Add migration for TinyMCE settings
+  [vangheem]
+
 - Fix migration of typesUseViewActionInListings to registry.
   [pbauer]
 
diff --git a/plone/app/upgrade/v50/configure.zcml b/plone/app/upgrade/v50/configure.zcml
index 7ea58de..5f10cc4 100644
--- a/plone/app/upgrade/v50/configure.zcml
+++ b/plone/app/upgrade/v50/configure.zcml
@@ -200,4 +200,17 @@
 
     </gs:upgradeSteps>
 
+    <gs:upgradeSteps
+        source="5010"
+        destination="5011"
+        profile="Products.CMFPlone:plone">
+
+       <gs:upgradeStep
+           title="Run to500 upgrade profile"
+           description=""
+           handler=".final.to500"
+           />
+
+    </gs:upgradeSteps>
+
 </configure>
diff --git a/plone/app/upgrade/v50/final.py b/plone/app/upgrade/v50/final.py
new file mode 100644
index 0000000..c9518e0
--- /dev/null
+++ b/plone/app/upgrade/v50/final.py
@@ -0,0 +1,6 @@
+from plone.app.upgrade.utils import loadMigrationProfile
+
+
+def to500(context):
+    """5.0rc3 -> 5.0.0"""
+    loadMigrationProfile(context, 'profile-plone.app.upgrade.v50:to500')
\ No newline at end of file
diff --git a/plone/app/upgrade/v50/profiles.zcml b/plone/app/upgrade/v50/profiles.zcml
index 869c086..b34ff4c 100644
--- a/plone/app/upgrade/v50/profiles.zcml
+++ b/plone/app/upgrade/v50/profiles.zcml
@@ -84,4 +84,12 @@
       provides="Products.GenericSetup.interfaces.EXTENSION"
       />
 
+  <genericsetup:registerProfile
+      name="to500"
+      title="Upgrade profile for Plone 5010 to Plone 5.0.0"
+      description=""
+      directory="profiles/to_500"
+      for="Products.CMFPlone.interfaces.IMigratingPloneSiteRoot"
+      provides="Products.GenericSetup.interfaces.EXTENSION"
+      />
 </configure>
diff --git a/plone/app/upgrade/v50/profiles/to_500/registry.xml b/plone/app/upgrade/v50/profiles/to_500/registry.xml
new file mode 100644
index 0000000..b367867
--- /dev/null
+++ b/plone/app/upgrade/v50/profiles/to_500/registry.xml
@@ -0,0 +1,5 @@
+<?xml version="1.0"?>
+<registry>
+  <records interface="Products.CMFPlone.interfaces.ITinyMCESchema"
+           prefix="plone" />
+</registry>
\ No newline at end of file


