Repository: Products.CMFPlone
Branch: refs/heads/master
Date: 2015-06-04T17:04:46-05:00
Author: vangheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/c0c94c6fe435d594d1c4111310dddc4fa5dd0bf4

check valid field to use getSize with

Files changed:
M Products/CMFPlone/browser/syndication/adapters.py

diff --git a/Products/CMFPlone/browser/syndication/adapters.py b/Products/CMFPlone/browser/syndication/adapters.py
index 6a03cf3..5eb9482 100644
--- a/Products/CMFPlone/browser/syndication/adapters.py
+++ b/Products/CMFPlone/browser/syndication/adapters.py
@@ -266,13 +266,16 @@ def __init__(self, context, feed):
         self.dexterity = IDexterityContent.providedBy(context)
         lead = ILeadImage(self.context, None)
         if lead:
-            if lead.image.getSize() > 0:
+            if (lead.image
+                    and hasattr(lead.image, 'getSize')
+                    and lead.image.getSize() > 0):
                 self.file = lead.image
                 self.field_name = 'lead'
         if self.file is None:
             try:
                 primary = IPrimaryFieldInfo(self.context, None)
                 if (INamedField.providedBy(primary.field)
+                        and hasattr(primary.field, 'getSize')
                         and primary.field.getSize() > 0):
                     self.file = primary.field
                     self.field_name = primary.fieldname


