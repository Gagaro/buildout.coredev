Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2015-09-17T15:22:31+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.app.upgrade/commit/71728d250eb978aa8c0cc362b958b40df1f2ef02

Portal properties calendar_starting_year and calendar_future_years_available were moved to registry

Files changed:
M CHANGES.rst
M plone/app/upgrade/v50/betas.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 7c66a65..e4c48db 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,6 +4,10 @@ Changelog
 1.3.16 (unreleased)
 -------------------
 
+- Portal properties calendar_starting_year and calendar_future_years_available
+  were moved to registry.
+  [pbauer]
+
 - Remove unused invalid_ids portal property
   [esteele]
 
diff --git a/plone/app/upgrade/v50/betas.py b/plone/app/upgrade/v50/betas.py
index 5bab165..6f8fbd6 100644
--- a/plone/app/upgrade/v50/betas.py
+++ b/plone/app/upgrade/v50/betas.py
@@ -460,7 +460,9 @@ def to50rc3(context):
         if portal.hasProperty(p):
             portal._delProperty(p)
 
-    properties_to_migrate = ['external_links_open_new_window']
+    properties_to_migrate = ['external_links_open_new_window',
+                             'calendar_starting_year',
+                             'calendar_future_years_available']
     for p in properties_to_migrate:
         if site_properties.hasProperty(p):
             value = site_properties.getProperty(p)


