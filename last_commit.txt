Repository: diazo
Branch: refs/heads/master
Date: 2014-08-21T19:04:16+02:00
Author: Christopher Mann (chris2fr) <christopher@mann.fr>
Commit: https://github.com/plone/diazo/commit/7fa6c722235f404db412702532efff9b88c70e78

Updated information on Nginx stand-alone deployment

This documentation update shows how you can update the Nginx 1.6 and 1.7
servers whereas the original html-xslt project only maintains the 0.7
and 0.8 releases.

Files changed:
M docs/deployment.rst

diff --git a/docs/deployment.rst b/docs/deployment.rst
index 23612c6..3aff611 100644
--- a/docs/deployment.rst
+++ b/docs/deployment.rst
@@ -141,9 +141,22 @@ To deploy an Diazo theme to the Nginx_ web server, you
 will need to compile Nginx with a special version of the XSLT module that
 can (optionally) use the HTML parser from libxml2.
 
+If you expect the source content to be xhtml well-formed and valid, then you
+should be able to avoid the ``xslt_html_parser on;`` directive. You can 
+achieve this if you generate the source content.
+
+Otherwise, if you expect non-xhtml compliant html, you need to compile Nginx 
+from source. At the time of this writing, the html-xslt_ project proposes 
+full Nginx sources for Nginx 0.7 and 0.8, whereas Nginx is now 1.6 and 1.7. 
+Here is an alternative `patch
+<https://github.com/jcu-eresearch/nginx-custom-build/blob/master/nginx-xslt-html-parser.patch>`_
+you should be able to apply to any Nginx source code with the command-line
+``patch src/http/modules/ngx_http_xslt_filter_module.c nginx-xslt-html-parser.patch``.
+
 In the future, the necessary patches to enable HTML mode parsing will
-hopefully be part of the standard Nginx distribution. In the meantime, they
-are maintained in the html-xslt_ project.
+hopefully be part of the standard Nginx distribution. There also is a
+`Nginx ticket <http://trac.nginx.org/nginx/ticket/609>`_ asking for the 
+xslt_html_parser in the http_xslt_module.
 
 Using a properly patched Nginx, you can configure it with XSLT support like
 so::


Repository: diazo
Branch: refs/heads/master
Date: 2015-05-20T11:04:50+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/diazo/commit/e917d54922f7111913d032e1056113890efeab4f

Merge pull request #31 from chris2fr/master

Updated information on Nginx stand-alone deployment

Files changed:
M docs/deployment.rst

diff --git a/docs/deployment.rst b/docs/deployment.rst
index 62c02cf..ae72e49 100644
--- a/docs/deployment.rst
+++ b/docs/deployment.rst
@@ -141,9 +141,22 @@ To deploy an Diazo theme to the Nginx_ web server, you
 will need to compile Nginx with a special version of the XSLT module that
 can (optionally) use the HTML parser from libxml2.
 
+If you expect the source content to be xhtml well-formed and valid, then you
+should be able to avoid the ``xslt_html_parser on;`` directive. You can 
+achieve this if you generate the source content.
+
+Otherwise, if you expect non-xhtml compliant html, you need to compile Nginx 
+from source. At the time of this writing, the html-xslt_ project proposes 
+full Nginx sources for Nginx 0.7 and 0.8, whereas Nginx is now 1.6 and 1.7. 
+Here is an alternative `patch
+<https://github.com/jcu-eresearch/nginx-custom-build/blob/master/nginx-xslt-html-parser.patch>`_
+you should be able to apply to any Nginx source code with the command-line
+``patch src/http/modules/ngx_http_xslt_filter_module.c nginx-xslt-html-parser.patch``.
+
 In the future, the necessary patches to enable HTML mode parsing will
-hopefully be part of the standard Nginx distribution. In the meantime, they
-are maintained in the html-xslt_ project.
+hopefully be part of the standard Nginx distribution. There also is a
+`Nginx ticket <http://trac.nginx.org/nginx/ticket/609>`_ asking for the 
+xslt_html_parser in the http_xslt_module.
 
 Using a properly patched Nginx, you can configure it with XSLT support like
 so::


