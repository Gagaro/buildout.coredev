Repository: plone.app.contentrules
Branch: refs/heads/master
Date: 2015-03-16T13:24:02+01:00
Author: Kees Hink (khink) <keeshink@gmail.com>
Commit: https://github.com/plone/plone.app.contentrules/commit/58320d02ff254b583e7d485625bb90b7ad4bbba5

Remove DL's from portal message templates.

Files changed:
M CHANGES.rst
M plone/app/contentrules/actions/templates/mail.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index de36222..def2573 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,7 +4,9 @@ Changelog
 4.0.2 (unreleased)
 ------------------
 
-- Nothing changed yet.
+- Remove DL's from portal message templates.
+  https://github.com/plone/Products.CMFPlone/issues/153
+  [khink]
 
 
 4.0.1 (2015-03-11)
diff --git a/plone/app/contentrules/actions/templates/mail.pt b/plone/app/contentrules/actions/templates/mail.pt
index 1748a43..6db8d8c 100644
--- a/plone/app/contentrules/actions/templates/mail.pt
+++ b/plone/app/contentrules/actions/templates/mail.pt
@@ -13,21 +13,21 @@
     <metal:block metal:define-macro="form">
 
      <tal:status define="status view/status" condition="status">
-         <dl class="portalMessage error"
+         <div class="portalMessage error"
              tal:condition="view/errors">
-             <dt i18n:translate="">
+             <strong i18n:translate="">
                  Error
-             </dt>
-             <dd tal:content="status" />
-         </dl>
+             </strong>
+             <span tal:replace="status" />
+         </div>
 
-         <dl class="portalMessage info"
+         <div class="portalMessage info"
              tal:condition="not: view/errors">
-             <dt i18n:translate="">
+             <strong i18n:translate="">
                  Info
-             </dt>
-             <dd tal:content="status" />
-         </dl>
+             </strong>
+             <span tal:replace="status" />
+         </div>
      </tal:status>
 
      <h1  class="documentFirstHeading"


Repository: plone.app.contentrules
Branch: refs/heads/master
Date: 2015-03-16T13:24:02+01:00
Author: Kees Hink (khink) <keeshink@gmail.com>
Commit: https://github.com/plone/plone.app.contentrules/commit/8dc7abb41b0df463963ca7188496dd6bdca5ebce

Remove DL's from JS portal message insertion.

Files changed:
M plone/app/contentrules/browser/contentrules.js

diff --git a/plone/app/contentrules/browser/contentrules.js b/plone/app/contentrules/browser/contentrules.js
index 985c243..3fb91a6 100644
--- a/plone/app/contentrules/browser/contentrules.js
+++ b/plone/app/contentrules/browser/contentrules.js
@@ -15,10 +15,10 @@ require([
       type = 'info';
     }
     var _show = function(){
-      var msg = $('<dl class="portalMessage ' + type + '">' +
-                  '<dt>' + type + '</dt>' +
-                  '<dd>' + message + '</dd>' +
-                '</dl>');
+      var msg = $('<div class="portalMessage ' + type + '">' +
+                  '<strong>' + type + '</strong>' +
+                  message +
+                '</div>');
       $('#content').before(msg);
       msg.fadeIn();
     };


Repository: plone.app.contentrules
Branch: refs/heads/master
Date: 2015-03-16T13:24:03+01:00
Author: Kees Hink (khink) <keeshink@gmail.com>
Commit: https://github.com/plone/plone.app.contentrules/commit/62232ffd25ff0a884717d4ac685ae6e8fcf9b9fc

Remove DL from /@@rules-controlpanel

Files changed:
M plone/app/contentrules/browser/templates/controlpanel.pt

diff --git a/plone/app/contentrules/browser/templates/controlpanel.pt b/plone/app/contentrules/browser/templates/controlpanel.pt
index a4d9599..e7be88c 100644
--- a/plone/app/contentrules/browser/templates/controlpanel.pt
+++ b/plone/app/contentrules/browser/templates/controlpanel.pt
@@ -120,15 +120,13 @@
                     <tr tal:define="oddrow repeat/rule/odd"
                         tal:attributes="class python:(oddrow and 'even ' or 'odd ') + rule['row_class'];">
                         <td>
-                            <dl>
-                                <dt>
+                                <header>
                                   <a tal:attributes="href string:${context/absolute_url}/++rule++${rule/id}/@@manage-elements"><span
                                      tal:replace="rule/title">Rule Title</span></a>
-                                </dt>
-                                <dd tal:content="rule/description">
+                                </header>
+                                <span tal:content="rule/description">
                                     Rule Description.
-                                </dd>
-                            </dl>
+                                </span>
                         </td>
                         <td>
                             <span class="trigger"


Repository: plone.app.contentrules
Branch: refs/heads/master
Date: 2015-03-16T13:25:24+01:00
Author: Kees Hink (khink) <keeshink@gmail.com>
Commit: https://github.com/plone/plone.app.contentrules/commit/0eea9281456609a42a504eae85e5db1a82c24577

Remove DL's from manage-assignments.pt

Files changed:
M plone/app/contentrules/browser/templates/manage-assignments.pt

diff --git a/plone/app/contentrules/browser/templates/manage-assignments.pt b/plone/app/contentrules/browser/templates/manage-assignments.pt
index 5e42675..988abe4 100644
--- a/plone/app/contentrules/browser/templates/manage-assignments.pt
+++ b/plone/app/contentrules/browser/templates/manage-assignments.pt
@@ -13,12 +13,12 @@
 
 <metal:body fill-slot="body">
 
-    <div tal:condition="not:view/globally_enabled"
-         class="portalMessage info">
-        <strong i18n:translate="">
+    <div class="portalMessage info"
+        tal:condition="not:view/globally_enabled">
+        <header i18n:translate="">
             Info
-        </strong>
-        <span i18n:translate="warning_contentrules_disabled">
+        </header>
+        <span tal:omit-tag="" i18n:translate="warning_contentrules_disabled">
             Content rules are disabled globally. No assigned rules will execute
             until they are re-enabled. Use the
             <a href=""
@@ -73,17 +73,14 @@
                             <tal:rules repeat="rule acquired_rules">
                                 <tr tal:define="oddrow repeat/rule/odd"
                                     tal:attributes="class python:oddrow and 'even' or 'odd'">
-                                    <td>
-                                        <dl>
-                                            <dt><a tal:attributes="href rule/url">
+                                            <header><a tal:attributes="href rule/url">
                                                 <span tal:replace="rule/title" />
                                                 (<span class="trigger"
                                                     i18n:translate=""
-                                                    tal:content="rule/trigger">trigger</span>)</a></dt>
-                                            <dd tal:content="rule/description">
+                                                    tal:content="rule/trigger">trigger</span>)</a></header>
+                                            <span tal:content="rule/description">
                                                 Rule Description.
-                                            </dd>
-                                        </dl>
+                                            </span>
                                     </td>
                                     <td class="checker">
                                         <img tal:condition="rule/enabled"
@@ -158,16 +155,14 @@
                                            tal:attributes="value rule/id" />
                                 </td>
                                 <td>
-                                    <dl>
-                                        <dt><a tal:attributes="href rule/url">
+                                        <header><a tal:attributes="href rule/url">
                                             <span tal:replace="rule/title" />
                                             (<span class="trigger"
                                                 i18n:translate=""
-                                                tal:content="rule/trigger">trigger</span>)</a></dt>
-                                        <dd tal:content="rule/description">
+                                                tal:content="rule/trigger">trigger</span>)</a></header>
+                                        <span tal:content="rule/description">
                                             Rule Description.
-                                        </dd>
-                                    </dl>
+                                        </span>
                                 </td>
                                 <td class="checker">
                                     <a tal:condition="not:repeat/rule/start"


Repository: plone.app.contentrules
Branch: refs/heads/master
Date: 2015-03-16T13:29:07+01:00
Author: Kees Hink (khink) <keeshink@gmail.com>
Commit: https://github.com/plone/plone.app.contentrules/commit/dcd9810a4b7dc0614597ff44c5261747c2e2a1d7

Remove DL's from /@@manage-elements

Files changed:
M plone/app/contentrules/browser/templates/manage-elements.pt

diff --git a/plone/app/contentrules/browser/templates/manage-elements.pt b/plone/app/contentrules/browser/templates/manage-elements.pt
index 960f52a..c3f75c2 100644
--- a/plone/app/contentrules/browser/templates/manage-elements.pt
+++ b/plone/app/contentrules/browser/templates/manage-elements.pt
@@ -139,7 +139,7 @@
                            />
                 </div>
                 <div class="portalMessage warning">
-                    <strong tal:content="condition/title" i18n:translate="">Transition was publish.</strong>
+                    <header tal:content="condition/title" i18n:translate="">Transition was publish.</header>
                     <span tal:content="condition/summary">
                         Something happened
                     </span>
@@ -221,8 +221,8 @@
                            />
                 </div>
                 <div class="portalMessage warning">
-                    <strong tal:content="action/title"
-                        i18n:translate="">Move to folder</strong>
+                    <header tal:content="action/title"
+                        i18n:translate="">Move to folder</header>
                     <span tal:content="action/summary">
                         Something happened
                     </span>
@@ -282,19 +282,18 @@
 
           </tal:noassignments>
           <tal:assignments condition="nocall:assignments">
-            <div class="portalMessage info" i18n:translate="description_contentrules_rule_assignments">
-              <strong>Info</strong>
-              <span>This rule is assigned to the following locations:
-
-
-                <tal:items repeat="assignment assignments">
-
+            <p class="portalMessage info"
+                i18n:translate="description_contentrules_rule_assignments">
+                This rule is assigned to the following locations.
+            </p>
+                <article tal:repeat="assignment assignments">
+                    <header>
+                        <img tal:replace="structure assignment/icon/html_tag" />
                         <a tal:attributes="href string:${assignment/url}/@@manage-content-rules"
                            tal:content="assignment/title" />
-
-                </tal:items>
-              </span>
-            </div>
+                    </header>
+                    <span tal:content="assignment/description"></span>
+                </article>
           </tal:assignments>
         </fieldset>
 


Repository: plone.app.contentrules
Branch: refs/heads/master
Date: 2015-03-16T18:01:16+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.contentrules/commit/7e88899178344669c700a8d413662aeef80842c1

Merge pull request #5 from plone/remove-dt-dl-dd

Remove DL's from portal message templates.

Files changed:
M CHANGES.rst
M plone/app/contentrules/actions/templates/mail.pt
M plone/app/contentrules/browser/contentrules.js
M plone/app/contentrules/browser/templates/controlpanel.pt
M plone/app/contentrules/browser/templates/manage-assignments.pt
M plone/app/contentrules/browser/templates/manage-elements.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index de36222..def2573 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,7 +4,9 @@ Changelog
 4.0.2 (unreleased)
 ------------------
 
-- Nothing changed yet.
+- Remove DL's from portal message templates.
+  https://github.com/plone/Products.CMFPlone/issues/153
+  [khink]
 
 
 4.0.1 (2015-03-11)
diff --git a/plone/app/contentrules/actions/templates/mail.pt b/plone/app/contentrules/actions/templates/mail.pt
index 1748a43..6db8d8c 100644
--- a/plone/app/contentrules/actions/templates/mail.pt
+++ b/plone/app/contentrules/actions/templates/mail.pt
@@ -13,21 +13,21 @@
     <metal:block metal:define-macro="form">
 
      <tal:status define="status view/status" condition="status">
-         <dl class="portalMessage error"
+         <div class="portalMessage error"
              tal:condition="view/errors">
-             <dt i18n:translate="">
+             <strong i18n:translate="">
                  Error
-             </dt>
-             <dd tal:content="status" />
-         </dl>
+             </strong>
+             <span tal:replace="status" />
+         </div>
 
-         <dl class="portalMessage info"
+         <div class="portalMessage info"
              tal:condition="not: view/errors">
-             <dt i18n:translate="">
+             <strong i18n:translate="">
                  Info
-             </dt>
-             <dd tal:content="status" />
-         </dl>
+             </strong>
+             <span tal:replace="status" />
+         </div>
      </tal:status>
 
      <h1  class="documentFirstHeading"
diff --git a/plone/app/contentrules/browser/contentrules.js b/plone/app/contentrules/browser/contentrules.js
index 985c243..3fb91a6 100644
--- a/plone/app/contentrules/browser/contentrules.js
+++ b/plone/app/contentrules/browser/contentrules.js
@@ -15,10 +15,10 @@ require([
       type = 'info';
     }
     var _show = function(){
-      var msg = $('<dl class="portalMessage ' + type + '">' +
-                  '<dt>' + type + '</dt>' +
-                  '<dd>' + message + '</dd>' +
-                '</dl>');
+      var msg = $('<div class="portalMessage ' + type + '">' +
+                  '<strong>' + type + '</strong>' +
+                  message +
+                '</div>');
       $('#content').before(msg);
       msg.fadeIn();
     };
diff --git a/plone/app/contentrules/browser/templates/controlpanel.pt b/plone/app/contentrules/browser/templates/controlpanel.pt
index a4d9599..e7be88c 100644
--- a/plone/app/contentrules/browser/templates/controlpanel.pt
+++ b/plone/app/contentrules/browser/templates/controlpanel.pt
@@ -120,15 +120,13 @@
                     <tr tal:define="oddrow repeat/rule/odd"
                         tal:attributes="class python:(oddrow and 'even ' or 'odd ') + rule['row_class'];">
                         <td>
-                            <dl>
-                                <dt>
+                                <header>
                                   <a tal:attributes="href string:${context/absolute_url}/++rule++${rule/id}/@@manage-elements"><span
                                      tal:replace="rule/title">Rule Title</span></a>
-                                </dt>
-                                <dd tal:content="rule/description">
+                                </header>
+                                <span tal:content="rule/description">
                                     Rule Description.
-                                </dd>
-                            </dl>
+                                </span>
                         </td>
                         <td>
                             <span class="trigger"
diff --git a/plone/app/contentrules/browser/templates/manage-assignments.pt b/plone/app/contentrules/browser/templates/manage-assignments.pt
index 5e42675..988abe4 100644
--- a/plone/app/contentrules/browser/templates/manage-assignments.pt
+++ b/plone/app/contentrules/browser/templates/manage-assignments.pt
@@ -13,12 +13,12 @@
 
 <metal:body fill-slot="body">
 
-    <div tal:condition="not:view/globally_enabled"
-         class="portalMessage info">
-        <strong i18n:translate="">
+    <div class="portalMessage info"
+        tal:condition="not:view/globally_enabled">
+        <header i18n:translate="">
             Info
-        </strong>
-        <span i18n:translate="warning_contentrules_disabled">
+        </header>
+        <span tal:omit-tag="" i18n:translate="warning_contentrules_disabled">
             Content rules are disabled globally. No assigned rules will execute
             until they are re-enabled. Use the
             <a href=""
@@ -73,17 +73,14 @@
                             <tal:rules repeat="rule acquired_rules">
                                 <tr tal:define="oddrow repeat/rule/odd"
                                     tal:attributes="class python:oddrow and 'even' or 'odd'">
-                                    <td>
-                                        <dl>
-                                            <dt><a tal:attributes="href rule/url">
+                                            <header><a tal:attributes="href rule/url">
                                                 <span tal:replace="rule/title" />
                                                 (<span class="trigger"
                                                     i18n:translate=""
-                                                    tal:content="rule/trigger">trigger</span>)</a></dt>
-                                            <dd tal:content="rule/description">
+                                                    tal:content="rule/trigger">trigger</span>)</a></header>
+                                            <span tal:content="rule/description">
                                                 Rule Description.
-                                            </dd>
-                                        </dl>
+                                            </span>
                                     </td>
                                     <td class="checker">
                                         <img tal:condition="rule/enabled"
@@ -158,16 +155,14 @@
                                            tal:attributes="value rule/id" />
                                 </td>
                                 <td>
-                                    <dl>
-                                        <dt><a tal:attributes="href rule/url">
+                                        <header><a tal:attributes="href rule/url">
                                             <span tal:replace="rule/title" />
                                             (<span class="trigger"
                                                 i18n:translate=""
-                                                tal:content="rule/trigger">trigger</span>)</a></dt>
-                                        <dd tal:content="rule/description">
+                                                tal:content="rule/trigger">trigger</span>)</a></header>
+                                        <span tal:content="rule/description">
                                             Rule Description.
-                                        </dd>
-                                    </dl>
+                                        </span>
                                 </td>
                                 <td class="checker">
                                     <a tal:condition="not:repeat/rule/start"
diff --git a/plone/app/contentrules/browser/templates/manage-elements.pt b/plone/app/contentrules/browser/templates/manage-elements.pt
index 960f52a..c3f75c2 100644
--- a/plone/app/contentrules/browser/templates/manage-elements.pt
+++ b/plone/app/contentrules/browser/templates/manage-elements.pt
@@ -139,7 +139,7 @@
                            />
                 </div>
                 <div class="portalMessage warning">
-                    <strong tal:content="condition/title" i18n:translate="">Transition was publish.</strong>
+                    <header tal:content="condition/title" i18n:translate="">Transition was publish.</header>
                     <span tal:content="condition/summary">
                         Something happened
                     </span>
@@ -221,8 +221,8 @@
                            />
                 </div>
                 <div class="portalMessage warning">
-                    <strong tal:content="action/title"
-                        i18n:translate="">Move to folder</strong>
+                    <header tal:content="action/title"
+                        i18n:translate="">Move to folder</header>
                     <span tal:content="action/summary">
                         Something happened
                     </span>
@@ -282,19 +282,18 @@
 
           </tal:noassignments>
           <tal:assignments condition="nocall:assignments">
-            <div class="portalMessage info" i18n:translate="description_contentrules_rule_assignments">
-              <strong>Info</strong>
-              <span>This rule is assigned to the following locations:
-
-
-                <tal:items repeat="assignment assignments">
-
+            <p class="portalMessage info"
+                i18n:translate="description_contentrules_rule_assignments">
+                This rule is assigned to the following locations.
+            </p>
+                <article tal:repeat="assignment assignments">
+                    <header>
+                        <img tal:replace="structure assignment/icon/html_tag" />
                         <a tal:attributes="href string:${assignment/url}/@@manage-content-rules"
                            tal:content="assignment/title" />
-
-                </tal:items>
-              </span>
-            </div>
+                    </header>
+                    <span tal:content="assignment/description"></span>
+                </article>
           </tal:assignments>
         </fieldset>
 


