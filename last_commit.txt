Repository: plone.app.upgrade
Branch: refs/heads/master
Date: 2015-03-25T01:12:35-03:00
Author: Juan Pablo Gim√©nez (jpgimenez) <jpg@rosario.com>
Commit: https://github.com/plone/plone.app.upgrade/commit/9d92631dbefd87cd60b97cd57d5d24a12bbf9e6b

Upgrade to implement the improvements to syndication.

Files changed:
A plone/app/upgrade/v43/profiles/to_433/registry.xml
M plone/app/upgrade/v43/configure.zcml
M plone/app/upgrade/v43/final.py
M plone/app/upgrade/v43/profiles.zcml

diff --git a/plone/app/upgrade/v43/configure.zcml b/plone/app/upgrade/v43/configure.zcml
index 71c0a87..7ec7d6e 100644
--- a/plone/app/upgrade/v43/configure.zcml
+++ b/plone/app/upgrade/v43/configure.zcml
@@ -185,4 +185,12 @@
     </genericsetup:upgradeSteps>
 
 
+      <genericsetup:upgradeStep
+        title="Miscellaneous"
+        description=""
+        handler=".final.to433"
+        />
+
+    </genericsetup:upgradeSteps>
+
 </configure>
diff --git a/plone/app/upgrade/v43/final.py b/plone/app/upgrade/v43/final.py
index 583419f..361f44b 100644
--- a/plone/app/upgrade/v43/final.py
+++ b/plone/app/upgrade/v43/final.py
@@ -5,6 +5,7 @@
 from plone.contentrules.engine.interfaces import IRuleStorage
 from plone.contentrules.engine.assignments import check_rules_with_dotted_name_moved
 
+from plone.app.upgrade.utils import loadMigrationProfile
 from plone.app.upgrade.utils import unregisterSteps
 
 logger = logging.getLogger('plone.app.upgrade')
@@ -49,3 +50,8 @@ def addDefaultPlonePasswordPolicy(context):
 def addShowInactiveCriteria(context):
     qi = getToolByName(context, 'portal_quickinstaller')
     qi.upgradeProduct('plone.app.querystring')
+
+def to433(context):
+    """4.3.2 -> 4.3.3
+    """
+    loadMigrationProfile(context, 'profile-plone.app.upgrade.v43:to433')
diff --git a/plone/app/upgrade/v43/profiles.zcml b/plone/app/upgrade/v43/profiles.zcml
index 2e2a1db..5bd4b96 100644
--- a/plone/app/upgrade/v43/profiles.zcml
+++ b/plone/app/upgrade/v43/profiles.zcml
@@ -48,4 +48,13 @@
       provides="Products.GenericSetup.interfaces.EXTENSION"
       />
 
+  <genericsetup:registerProfile
+      name="to433"
+      title="Upgrade profile for Plone 4.3.2 to Plone 4.3.3"
+      description=""
+      directory="profiles/to_433"
+      for="Products.CMFPlone.interfaces.IMigratingPloneSiteRoot"
+      provides="Products.GenericSetup.interfaces.EXTENSION"
+      />
+
 </configure>
diff --git a/plone/app/upgrade/v43/profiles/to_433/registry.xml b/plone/app/upgrade/v43/profiles/to_433/registry.xml
new file mode 100644
index 0000000..d6cb456
--- /dev/null
+++ b/plone/app/upgrade/v43/profiles/to_433/registry.xml
@@ -0,0 +1,3 @@
+<registry>
+    <records interface="Products.CMFPlone.interfaces.syndication.ISiteSyndicationSettings" />
+</registry>


Repository: plone.app.upgrade
Branch: refs/heads/master
Date: 2015-03-26T23:28:56-03:00
Author: Thiago Curvelo (tcurvelo) <tcurvelo@gmail.com>
Commit: https://github.com/plone/plone.app.upgrade/commit/c758c0f61f1112bc283c0c05f4e9da69c05f4d48

Update upgrade profile {to_433 =&gt; to_435}

Files changed:
A plone/app/upgrade/v43/profiles/to_435/registry.xml
M plone/app/upgrade/v43/configure.zcml
M plone/app/upgrade/v43/final.py
M plone/app/upgrade/v43/profiles.zcml
D plone/app/upgrade/v43/profiles/to_433/registry.xml

diff --git a/plone/app/upgrade/v43/configure.zcml b/plone/app/upgrade/v43/configure.zcml
index 7ec7d6e..5bfa94b 100644
--- a/plone/app/upgrade/v43/configure.zcml
+++ b/plone/app/upgrade/v43/configure.zcml
@@ -177,20 +177,11 @@
         profile="Products.CMFPlone:plone">
 
         <genericsetup:upgradeStep
-            title="Miscellaneous"
-            description=""
-            handler="..utils.null_upgrade_step"
+            title="Improve syndication"
+            description="Implement NewsML feed syndication"
+            handler=".final.improveSyndication"
             />
 
     </genericsetup:upgradeSteps>
 
-
-      <genericsetup:upgradeStep
-        title="Miscellaneous"
-        description=""
-        handler=".final.to433"
-        />
-
-    </genericsetup:upgradeSteps>
-
 </configure>
diff --git a/plone/app/upgrade/v43/final.py b/plone/app/upgrade/v43/final.py
index 361f44b..6eda84f 100644
--- a/plone/app/upgrade/v43/final.py
+++ b/plone/app/upgrade/v43/final.py
@@ -47,11 +47,11 @@ def addDefaultPlonePasswordPolicy(context):
     from Products.PlonePAS.Extensions.Install import setupPasswordPolicyPlugin
     setupPasswordPolicyPlugin(portal)
 
+
 def addShowInactiveCriteria(context):
     qi = getToolByName(context, 'portal_quickinstaller')
     qi.upgradeProduct('plone.app.querystring')
 
-def to433(context):
-    """4.3.2 -> 4.3.3
-    """
-    loadMigrationProfile(context, 'profile-plone.app.upgrade.v43:to433')
+
+def improveSyndication(context):
+    loadMigrationProfile(context, 'profile-plone.app.upgrade.v43:to435')
diff --git a/plone/app/upgrade/v43/profiles.zcml b/plone/app/upgrade/v43/profiles.zcml
index 5bd4b96..30890b8 100644
--- a/plone/app/upgrade/v43/profiles.zcml
+++ b/plone/app/upgrade/v43/profiles.zcml
@@ -49,10 +49,10 @@
       />
 
   <genericsetup:registerProfile
-      name="to433"
-      title="Upgrade profile for Plone 4.3.2 to Plone 4.3.3"
+      name="to435"
+      title="Upgrade profile for Plone 4.3.4 to Plone 4.3.5"
       description=""
-      directory="profiles/to_433"
+      directory="profiles/to_435"
       for="Products.CMFPlone.interfaces.IMigratingPloneSiteRoot"
       provides="Products.GenericSetup.interfaces.EXTENSION"
       />
diff --git a/plone/app/upgrade/v43/profiles/to_433/registry.xml b/plone/app/upgrade/v43/profiles/to_433/registry.xml
deleted file mode 100644
index d6cb456..0000000
--- a/plone/app/upgrade/v43/profiles/to_433/registry.xml
+++ /dev/null
@@ -1,3 +0,0 @@
-<registry>
-    <records interface="Products.CMFPlone.interfaces.syndication.ISiteSyndicationSettings" />
-</registry>
diff --git a/plone/app/upgrade/v43/profiles/to_435/registry.xml b/plone/app/upgrade/v43/profiles/to_435/registry.xml
new file mode 100644
index 0000000..d6cb456
--- /dev/null
+++ b/plone/app/upgrade/v43/profiles/to_435/registry.xml
@@ -0,0 +1,3 @@
+<registry>
+    <records interface="Products.CMFPlone.interfaces.syndication.ISiteSyndicationSettings" />
+</registry>


Repository: plone.app.upgrade
Branch: refs/heads/master
Date: 2015-03-27T09:07:57-03:00
Author: Thiago Curvelo (tcurvelo) <tcurvelo@gmail.com>
Commit: https://github.com/plone/plone.app.upgrade/commit/d1fccaffc4ba5b4cfd2951e531e580d40585ded6

Merge pull request #30 from plone/syndication_improvements

Syndication improvements

Files changed:
A plone/app/upgrade/v43/profiles/to_435/registry.xml
M plone/app/upgrade/v43/configure.zcml
M plone/app/upgrade/v43/final.py
M plone/app/upgrade/v43/profiles.zcml

diff --git a/plone/app/upgrade/v43/configure.zcml b/plone/app/upgrade/v43/configure.zcml
index 71c0a87..5bfa94b 100644
--- a/plone/app/upgrade/v43/configure.zcml
+++ b/plone/app/upgrade/v43/configure.zcml
@@ -177,12 +177,11 @@
         profile="Products.CMFPlone:plone">
 
         <genericsetup:upgradeStep
-            title="Miscellaneous"
-            description=""
-            handler="..utils.null_upgrade_step"
+            title="Improve syndication"
+            description="Implement NewsML feed syndication"
+            handler=".final.improveSyndication"
             />
 
     </genericsetup:upgradeSteps>
 
-
 </configure>
diff --git a/plone/app/upgrade/v43/final.py b/plone/app/upgrade/v43/final.py
index 583419f..6eda84f 100644
--- a/plone/app/upgrade/v43/final.py
+++ b/plone/app/upgrade/v43/final.py
@@ -5,6 +5,7 @@
 from plone.contentrules.engine.interfaces import IRuleStorage
 from plone.contentrules.engine.assignments import check_rules_with_dotted_name_moved
 
+from plone.app.upgrade.utils import loadMigrationProfile
 from plone.app.upgrade.utils import unregisterSteps
 
 logger = logging.getLogger('plone.app.upgrade')
@@ -46,6 +47,11 @@ def addDefaultPlonePasswordPolicy(context):
     from Products.PlonePAS.Extensions.Install import setupPasswordPolicyPlugin
     setupPasswordPolicyPlugin(portal)
 
+
 def addShowInactiveCriteria(context):
     qi = getToolByName(context, 'portal_quickinstaller')
     qi.upgradeProduct('plone.app.querystring')
+
+
+def improveSyndication(context):
+    loadMigrationProfile(context, 'profile-plone.app.upgrade.v43:to435')
diff --git a/plone/app/upgrade/v43/profiles.zcml b/plone/app/upgrade/v43/profiles.zcml
index 2e2a1db..30890b8 100644
--- a/plone/app/upgrade/v43/profiles.zcml
+++ b/plone/app/upgrade/v43/profiles.zcml
@@ -48,4 +48,13 @@
       provides="Products.GenericSetup.interfaces.EXTENSION"
       />
 
+  <genericsetup:registerProfile
+      name="to435"
+      title="Upgrade profile for Plone 4.3.4 to Plone 4.3.5"
+      description=""
+      directory="profiles/to_435"
+      for="Products.CMFPlone.interfaces.IMigratingPloneSiteRoot"
+      provides="Products.GenericSetup.interfaces.EXTENSION"
+      />
+
 </configure>
diff --git a/plone/app/upgrade/v43/profiles/to_435/registry.xml b/plone/app/upgrade/v43/profiles/to_435/registry.xml
new file mode 100644
index 0000000..d6cb456
--- /dev/null
+++ b/plone/app/upgrade/v43/profiles/to_435/registry.xml
@@ -0,0 +1,3 @@
+<registry>
+    <records interface="Products.CMFPlone.interfaces.syndication.ISiteSyndicationSettings" />
+</registry>


