Repository: plone.app.versioningbehavior


Branch: refs/heads/master
Date: 2015-07-15T17:03:27+02:00
Author: Ramon Navarro Bosch (bloodbare) <ramon.nb@gmail.com>
Commit: https://github.com/plone/plone.app.versioningbehavior/commit/834e19af498e8743eb058b421c6aa3d5d8a29d4d

Correct functional test, it was not checking correct on version1

Files changed:
M plone/app/versioningbehavior/tests/test_functional.py

diff --git a/plone/app/versioningbehavior/tests/test_functional.py b/plone/app/versioningbehavior/tests/test_functional.py
index b482f54..e0a02f8 100644
--- a/plone/app/versioningbehavior/tests/test_functional.py
+++ b/plone/app/versioningbehavior/tests/test_functional.py
@@ -74,9 +74,10 @@ def _assert_versions_history_form(self, version_id, obj_id, title, text):
             '%s/%s/versions_history_form?version_id=%s'
             % (self.portal_url, obj_id, version_id))
         self.assertIn('Working Copy', self.browser.contents)
-        self.assertIn(
-            '/%s/versions_history_form?version_id=%s' % (obj_id, version_id),
-            self.browser.contents)
+        if version_id == 0:
+            self.assertIn(
+                '/%s/versions_history_form?version_id=%s' % (obj_id, version_id),
+                self.browser.contents)
         self.assertIn('Working Copy', self.browser.contents)
         self.assertIn('Revert to this revision', self.browser.contents)
         self.assertIn(


