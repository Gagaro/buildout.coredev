Repository: Products.CMFQuickInstallerTool
Branch: refs/heads/master
Date: 2015-06-02T10:01:21+02:00
Author: Tom Gross (tomgross) <itconsense@gmail.com>
Commit: https://github.com/plone/Products.CMFQuickInstallerTool/commit/2eb8af558696caa2b66aae86e94083aff9703c8d

run all doctests

Files changed:
M Products/CMFQuickInstallerTool/tests/profiles.txt
M Products/CMFQuickInstallerTool/tests/test_install.py

diff --git a/Products/CMFQuickInstallerTool/tests/profiles.txt b/Products/CMFQuickInstallerTool/tests/profiles.txt
index 7a85c3d..ec7e58c 100644
--- a/Products/CMFQuickInstallerTool/tests/profiles.txt
+++ b/Products/CMFQuickInstallerTool/tests/profiles.txt
@@ -68,6 +68,11 @@ We now expect to see Products.Product1 and Products.Product2 in the list of
 installable products, but not Products.Product3.
 
   >>> installable = [x['id'] for x in qi.listInstallableProducts()]
-  >>> self.failUnless('Products.Product1' in installable)
-  >>> self.failUnless('Products.Product2' in installable)
-  >>> self.failIf('Products.Product3' in installable)
+  >>> 'Products.Product1' in installable
+  True
+
+  >>> 'Products.Product2' in installable
+  True
+
+  >>> 'Products.Product3' in installable
+  False
diff --git a/Products/CMFQuickInstallerTool/tests/test_install.py b/Products/CMFQuickInstallerTool/tests/test_install.py
index 143240d..130f4b4 100644
--- a/Products/CMFQuickInstallerTool/tests/test_install.py
+++ b/Products/CMFQuickInstallerTool/tests/test_install.py
@@ -61,7 +61,7 @@ def test_suite():
     for testfile in ['actions.txt', 'profiles.txt', 'install.txt']:
         suite.addTest(layered(
             doctest.DocFileSuite(
-                'actions.txt',
+                testfile,
                 package='Products.CMFQuickInstallerTool.tests',
                 optionflags=OPTIONFLAGS),
             layer=CQI_FUNCTIONAL_TESTING))


Repository: Products.CMFQuickInstallerTool
Branch: refs/heads/master
Date: 2015-06-02T10:55:01+02:00
Author: Tom Gross (tomgross) <itconsense@gmail.com>
Commit: https://github.com/plone/Products.CMFQuickInstallerTool/commit/df358c68690cdef4601249a81e94242f08a441ca

fixed doctests

Files changed:
M Products/CMFQuickInstallerTool/tests/install.txt
M Products/CMFQuickInstallerTool/tests/test_install.py

diff --git a/Products/CMFQuickInstallerTool/tests/install.txt b/Products/CMFQuickInstallerTool/tests/install.txt
index b5b60d8..46f1db8 100644
--- a/Products/CMFQuickInstallerTool/tests/install.txt
+++ b/Products/CMFQuickInstallerTool/tests/install.txt
@@ -7,7 +7,7 @@ First we set three convenience variables for later use:
   >>> from Products.CMFQuickInstallerTool.interfaces import IQuickInstallerTool
   >>> from Products.CMFCore.utils import getToolByName
 
-  >>> portal = layer['plone']
+  >>> portal = layer['portal']
   >>> portal
   <PloneSite at /plone>
 
diff --git a/Products/CMFQuickInstallerTool/tests/test_install.py b/Products/CMFQuickInstallerTool/tests/test_install.py
index 130f4b4..d59c6f6 100644
--- a/Products/CMFQuickInstallerTool/tests/test_install.py
+++ b/Products/CMFQuickInstallerTool/tests/test_install.py
@@ -5,6 +5,7 @@
 from Products.GenericSetup import EXTENSION, profile_registry
 from plone.app import testing
 from plone.testing import layered
+from plone.app.contenttypes.testing import PLONE_APP_CONTENTTYPES_FIXTURE
 
 from Products.CMFQuickInstallerTool.QuickInstallerTool import QuickInstallerTool
 from Products.CMFQuickInstallerTool.events import handleBeforeProfileImportEvent
@@ -17,7 +18,7 @@
 
 class QuickInstallerCaseFixture(testing.PloneSandboxLayer):
 
-    defaultBases = (testing.PLONE_FIXTURE, )
+    defaultBases = (PLONE_APP_CONTENTTYPES_FIXTURE, )
 
     def setUpZope(self, app, configurationContext):
         sm = zope.component.getSiteManager()


Repository: Products.CMFQuickInstallerTool
Branch: refs/heads/master
Date: 2015-06-02T10:56:01+02:00
Author: Tom Gross (tomgross) <itconsense@gmail.com>
Commit: https://github.com/plone/Products.CMFQuickInstallerTool/commit/cb04fc46e09ac2d73c958eb4d20348bbda5b9f4c

document changes

Files changed:
M CHANGES.rst

diff --git a/CHANGES.rst b/CHANGES.rst
index acb2cfa..ad60c97 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,7 +4,8 @@ Changelog
 3.0.9 (unreleased)
 ------------------
 
-- Nothing changed yet.
+- Readded doctests which were not run after port to plone.app.testing
+  [tomgross]
 
 
 3.0.8 (2015-03-21)


Repository: Products.CMFQuickInstallerTool
Branch: refs/heads/master
Date: 2015-06-02T12:25:35+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/Products.CMFQuickInstallerTool/commit/135eb81610d2a8616d300581d20285243becfe1f

Merge pull request #8 from plone/tomgross-fixdoctests

Readded doctests which were not run after migration to p.a.testing

Files changed:
M CHANGES.rst
M Products/CMFQuickInstallerTool/tests/install.txt
M Products/CMFQuickInstallerTool/tests/profiles.txt
M Products/CMFQuickInstallerTool/tests/test_install.py

diff --git a/CHANGES.rst b/CHANGES.rst
index acb2cfa..ad60c97 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,7 +4,8 @@ Changelog
 3.0.9 (unreleased)
 ------------------
 
-- Nothing changed yet.
+- Readded doctests which were not run after port to plone.app.testing
+  [tomgross]
 
 
 3.0.8 (2015-03-21)
diff --git a/Products/CMFQuickInstallerTool/tests/install.txt b/Products/CMFQuickInstallerTool/tests/install.txt
index b5b60d8..46f1db8 100644
--- a/Products/CMFQuickInstallerTool/tests/install.txt
+++ b/Products/CMFQuickInstallerTool/tests/install.txt
@@ -7,7 +7,7 @@ First we set three convenience variables for later use:
   >>> from Products.CMFQuickInstallerTool.interfaces import IQuickInstallerTool
   >>> from Products.CMFCore.utils import getToolByName
 
-  >>> portal = layer['plone']
+  >>> portal = layer['portal']
   >>> portal
   <PloneSite at /plone>
 
diff --git a/Products/CMFQuickInstallerTool/tests/profiles.txt b/Products/CMFQuickInstallerTool/tests/profiles.txt
index 7a85c3d..ec7e58c 100644
--- a/Products/CMFQuickInstallerTool/tests/profiles.txt
+++ b/Products/CMFQuickInstallerTool/tests/profiles.txt
@@ -68,6 +68,11 @@ We now expect to see Products.Product1 and Products.Product2 in the list of
 installable products, but not Products.Product3.
 
   >>> installable = [x['id'] for x in qi.listInstallableProducts()]
-  >>> self.failUnless('Products.Product1' in installable)
-  >>> self.failUnless('Products.Product2' in installable)
-  >>> self.failIf('Products.Product3' in installable)
+  >>> 'Products.Product1' in installable
+  True
+
+  >>> 'Products.Product2' in installable
+  True
+
+  >>> 'Products.Product3' in installable
+  False
diff --git a/Products/CMFQuickInstallerTool/tests/test_install.py b/Products/CMFQuickInstallerTool/tests/test_install.py
index 143240d..d59c6f6 100644
--- a/Products/CMFQuickInstallerTool/tests/test_install.py
+++ b/Products/CMFQuickInstallerTool/tests/test_install.py
@@ -5,6 +5,7 @@
 from Products.GenericSetup import EXTENSION, profile_registry
 from plone.app import testing
 from plone.testing import layered
+from plone.app.contenttypes.testing import PLONE_APP_CONTENTTYPES_FIXTURE
 
 from Products.CMFQuickInstallerTool.QuickInstallerTool import QuickInstallerTool
 from Products.CMFQuickInstallerTool.events import handleBeforeProfileImportEvent
@@ -17,7 +18,7 @@
 
 class QuickInstallerCaseFixture(testing.PloneSandboxLayer):
 
-    defaultBases = (testing.PLONE_FIXTURE, )
+    defaultBases = (PLONE_APP_CONTENTTYPES_FIXTURE, )
 
     def setUpZope(self, app, configurationContext):
         sm = zope.component.getSiteManager()
@@ -61,7 +62,7 @@ def test_suite():
     for testfile in ['actions.txt', 'profiles.txt', 'install.txt']:
         suite.addTest(layered(
             doctest.DocFileSuite(
-                'actions.txt',
+                testfile,
                 package='Products.CMFQuickInstallerTool.tests',
                 optionflags=OPTIONFLAGS),
             layer=CQI_FUNCTIONAL_TESTING))


