Repository: plone.schemaeditor
Branch: refs/heads/master
Date: 2015-04-13T07:57:22-04:00
Author: David Glick (davisagli) <david@glicksoftware.com>
Commit: https://github.com/plone/plone.schemaeditor/commit/5cbe5e090a8a13f43528ade725fde135d178ba02

fix tests

Files changed:
M plone/schemaeditor/tests/choice.txt
M plone/schemaeditor/tests/editing.txt
M plone/schemaeditor/tests/minmax.txt

diff --git a/plone/schemaeditor/tests/choice.txt b/plone/schemaeditor/tests/choice.txt
index 448a2ee..d71b134 100644
--- a/plone/schemaeditor/tests/choice.txt
+++ b/plone/schemaeditor/tests/choice.txt
@@ -32,7 +32,7 @@ Add a Choice field.
     >>> browser.getControl('Title').value = 'Country'
     >>> browser.getControl('Short Name').value = 'country'
     >>> browser.getControl('Field type').getControl(
-    ...     value='Choice').selected = True
+    ...     value='label_choice_field').selected = True
     >>> browser.getControl('Add').click()
     [event: ObjectAddedEvent on Choice]
     [event: FieldAddedEvent on DummySchemaContext]
diff --git a/plone/schemaeditor/tests/editing.txt b/plone/schemaeditor/tests/editing.txt
index 881c03d..1fad5a5 100644
--- a/plone/schemaeditor/tests/editing.txt
+++ b/plone/schemaeditor/tests/editing.txt
@@ -43,7 +43,7 @@ Let's add a 'favorite-color' field to the IDummySchema schema::
     >>> browser.getControl('Title').value = 'Favorite Color'
     >>> browser.getControl('Short Name').value = 'favorite_color'
     >>> browser.getControl(name='form.widgets.description').value = 'Select your favorite color'
-    >>> browser.getControl('Field type').value = ['Text line (String)']
+    >>> browser.getControl('Field type').displayValue = ['Text line (String)']
     >>> browser.getControl(name='form.widgets.required').value = ['true']
     >>> browser.getControl('Add').click()
     [event: ObjectAddedEvent on TextLine]
@@ -245,7 +245,7 @@ move it into an other fieldset and remove it::
     >>> browser.getLink('Add new field').click()
     >>> browser.getControl('Title').value = 'Other Set'
     >>> browser.getControl('Short Name').value = 'other_set'
-    >>> browser.getControl('Field type').value = ['Text line (String)']
+    >>> browser.getControl('Field type').displayValue = ['Text line (String)']
     >>> browser.getControl('Add').click()
     [event: ObjectAddedEvent on TextLine]
     [event: FieldAddedEvent on DummySchemaContext]
@@ -313,9 +313,7 @@ and saved.
     ...     browser.getControl('Title').value = name
     ...     field_id = name.replace('-', '_')
     ...     browser.getControl('Short Name').value = field_id
-    ...     browser.getControl('Field type').getControl(
-    ...         value=getattr(factory.title, 'default', factory.title)
-    ...         ).selected = True
+    ...     browser.getControl('Field type').value = [factory.title]
     ...     browser.getControl('Add').click()
     ...     assert browser.url == portal_url + '/@@schemaeditor', (
     ...         'Failed to create %r' % name)
diff --git a/plone/schemaeditor/tests/minmax.txt b/plone/schemaeditor/tests/minmax.txt
index 8c13799..c7663ee 100644
--- a/plone/schemaeditor/tests/minmax.txt
+++ b/plone/schemaeditor/tests/minmax.txt
@@ -30,8 +30,7 @@ Add an Int field.
     >>> browser.getLink('Add new field').click()
     >>> browser.getControl('Title').value = 'Age'
     >>> browser.getControl('Short Name').value = 'age'
-    >>> browser.getControl('Field type').getControl(
-    ...     value='Integer').selected = True
+    >>> browser.getControl('Field type').getControl('Integer').selected = True
     >>> browser.getControl('Add').click()
     [event: ObjectAddedEvent on Int]
     [event: FieldAddedEvent on DummySchemaContext]


