Repository: mockup
Branch: refs/heads/master
Date: 2015-05-20T08:29:06-05:00
Author: vangheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/mockup/commit/07debc6368ff91b3918cd92fa79187bcc8786f9f

fix rename popover

Files changed:
M mockup/patterns/structure/js/views/rename.js

diff --git a/mockup/patterns/structure/js/views/rename.js b/mockup/patterns/structure/js/views/rename.js
index c4280c3..92fd330 100644
--- a/mockup/patterns/structure/js/views/rename.js
+++ b/mockup/patterns/structure/js/views/rename.js
@@ -2,8 +2,9 @@ define([
   'jquery',
   'underscore',
   'backbone',
-  'mockup-ui-url/views/popover'
-], function($, _, Backbone, PopoverView) {
+  'mockup-ui-url/views/popover',
+  'translate'
+], function($, _, Backbone, PopoverView, _t) {
   'use strict';
 
   var PropertiesView = PopoverView.extend({
@@ -11,7 +12,7 @@ define([
     title: _.template('<%- _t("Rename items") %>'),
     content: _.template(
       '<div class="itemstoremove"></div>' +
-      '<button class="btn btn-block btn-primary"><% _t("Apply") %></button>'
+      '<button class="btn btn-block btn-primary"><%= _t("Apply") %></button>'
     ),
     itemTemplate: _.template(
       '<div class="item">' +
@@ -46,7 +47,6 @@ define([
           newtitle: $item.find('[name="newtitle"]').val()
         });
       });
-      var self = this;
       this.app.defaultButtonClickEvent(this.triggerView, {
         torename: JSON.stringify(torename)
       });
@@ -60,7 +60,9 @@ define([
       }
       self.$items.empty();
       self.app.selectedCollection.each(function(item) {
-        self.$items.append(self.itemTemplate(item.toJSON()));
+        self.$items.append(self.itemTemplate($.extend({}, true, item.toJSON(), {
+          _t: _t
+        })));
       });
     }
   });


