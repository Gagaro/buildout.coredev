Repository: plone.outputfilters
Branch: refs/heads/master
Date: 2015-03-11T09:03:09+01:00
Author: Timo Stollenwerk (tisto) <tisto@plone.org>
Commit: https://github.com/plone/plone.outputfilters/commit/2bd2f10b6d6aed35c9486106c951daa644e3b6f3

No need to install plone.outputfilters as z2 product.

Files changed:
M plone/outputfilters/testing.py

diff --git a/plone/outputfilters/testing.py b/plone/outputfilters/testing.py
index fd89779..b7c6f58 100644
--- a/plone/outputfilters/testing.py
+++ b/plone/outputfilters/testing.py
@@ -3,14 +3,12 @@
 from plone.app.testing import PloneSandboxLayer
 from plone.app.testing import applyProfile
 from plone.app.contenttypes.testing import PLONE_APP_CONTENTTYPES_FIXTURE
-from zope.configuration import xmlconfig
-from Products.Five import fiveconfigure
-from plone.testing import z2
 
-from plone.outputfilters.filters.resolveuid_and_caption import IImageCaptioningEnabler
+from plone.outputfilters.filters.resolveuid_and_caption import IImageCaptioningEnabler  # noqa
 from zope.interface import implements
 import zope.component
 
+
 class DummyImageCaptioningEnabler(object):
     implements(IImageCaptioningEnabler)
 
@@ -24,15 +22,20 @@ class PloneOutputfilters(PloneSandboxLayer):
     def setUpZope(self, app, configurationContext):
         import plone.outputfilters
         self.loadZCML(package=plone.outputfilters)
-        # Install product and call its initialize() function
-        z2.installProduct(app, 'plone.outputfilters')
         gsm = zope.component.getGlobalSiteManager()
-        gsm.registerUtility(DummyImageCaptioningEnabler(), IImageCaptioningEnabler, 'outputfiltertest', event=False)
-
+        gsm.registerUtility(
+            DummyImageCaptioningEnabler(),
+            IImageCaptioningEnabler,
+            'outputfiltertest',
+            event=False
+        )
 
     def tearDownZope(self, app):
         gsm = zope.component.getGlobalSiteManager()
-        gsm.unregisterUtility(provided=IImageCaptioningEnabler, name='outputfiltertest')
+        gsm.unregisterUtility(
+            provided=IImageCaptioningEnabler,
+            name='outputfiltertest'
+        )
 
     def setUpPloneSite(self, portal):
         applyProfile(portal, 'plone.outputfilters:default')


