Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2015-10-22T20:03:31Z
Author: T. Kim Nguyen (tkimnguyen) <tkn@alumni.uwaterloo.ca>
Commit: https://github.com/plone/Products.CMFPlone/commit/e8c8cbee46efa8cd300a2d281d08c4ee4a632990

set Reply-to address so that replying to an email sent by the contact-info form does the expected thing

Files changed:
M Products/CMFPlone/browser/contact_info.py

diff --git a/Products/CMFPlone/browser/contact_info.py b/Products/CMFPlone/browser/contact_info.py
index 189c5f6..6d5bd23 100644
--- a/Products/CMFPlone/browser/contact_info.py
+++ b/Products/CMFPlone/browser/contact_info.py
@@ -67,12 +67,13 @@ def send_message(self, data):
 
         try:
             # This actually sends out the mail
-            host.send(
+            host.secureSend(
                 self.generate_mail(data, encoding),
                 send_to_address,
                 from_address,
                 subject=subject,
-                charset=encoding
+                charset=encoding,
+                **{'Reply-to':data['sender_from_address']}
             )
         except (SMTPException, RuntimeError), e:
             log.error(e)


Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2015-10-22T15:32:47-05:00
Author: T. Kim Nguyen (tkimnguyen) <tkimnguyen@users.noreply.github.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/fadb58f24cb39ffc387a5c3f9b420ce1a9e4aaf6

Update CHANGES.rst

Files changed:
M CHANGES.rst

diff --git a/CHANGES.rst b/CHANGES.rst
index 0c72f5a..8ffc162 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -8,9 +8,13 @@ Changelog
 5.0.1 (unreleased)
 ------------------
 
+- set Reply-to address in contact-info emails so you can reply to them
+  [tkimnguyen]
+
 - prevent breaking Plone when TinyMCE JSON settings fields contain
   invalid JSON
   [petschki]
+
 - Fix #1199 prevent throwing error with mis-configured bundle
   [vangheem]
 


Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2015-10-22T16:56:24-05:00
Author: Nathan Van Gheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/7c26e49f25694e87a8e8a20c4de9148695c87f07

Merge pull request #1208 from tkimnguyen/master

set Reply-to address

Files changed:
M CHANGES.rst
M Products/CMFPlone/browser/contact_info.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 0c72f5a..8ffc162 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -8,9 +8,13 @@ Changelog
 5.0.1 (unreleased)
 ------------------
 
+- set Reply-to address in contact-info emails so you can reply to them
+  [tkimnguyen]
+
 - prevent breaking Plone when TinyMCE JSON settings fields contain
   invalid JSON
   [petschki]
+
 - Fix #1199 prevent throwing error with mis-configured bundle
   [vangheem]
 
diff --git a/Products/CMFPlone/browser/contact_info.py b/Products/CMFPlone/browser/contact_info.py
index 189c5f6..6d5bd23 100644
--- a/Products/CMFPlone/browser/contact_info.py
+++ b/Products/CMFPlone/browser/contact_info.py
@@ -67,12 +67,13 @@ def send_message(self, data):
 
         try:
             # This actually sends out the mail
-            host.send(
+            host.secureSend(
                 self.generate_mail(data, encoding),
                 send_to_address,
                 from_address,
                 subject=subject,
-                charset=encoding
+                charset=encoding,
+                **{'Reply-to':data['sender_from_address']}
             )
         except (SMTPException, RuntimeError), e:
             log.error(e)


