Repository: plonetheme.barceloneta


Branch: refs/heads/master
Date: 2015-08-21T17:23:03+07:00
Author: Dylan Jay () <software@pretaweb.com>
Commit: https://github.com/plone/plonetheme.barceloneta/commit/8adf6a5835fe88c7954352be885ddf1d858e677b

initial version of a seperated backend

Files changed:
A plonetheme/barceloneta/theme/backend.xml
M plonetheme/barceloneta/theme/index.html

diff --git a/plonetheme/barceloneta/theme/backend.xml b/plonetheme/barceloneta/theme/backend.xml
new file mode 100644
index 0000000..4890ce4
--- /dev/null
+++ b/plonetheme/barceloneta/theme/backend.xml
@@ -0,0 +1,118 @@
+<?xml version="1.0" encoding="utf-8"?>
+<rules xmlns="http://namespaces.plone.org/diazo"
+       xmlns:css="http://namespaces.plone.org/diazo/css"
+       xmlns:xhtml="http://www.w3.org/1999/xhtml"
+       xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
+       xmlns:xi="http://www.w3.org/2001/XInclude">
+
+  <!-- toolbar -->
+  <before css:theme-children="body" css:content-children="#edit-bar" css:if-not-content=".ajax_load" css:if-content=".userrole-authenticated"/>
+  <replace css:theme="#anonymous-actions" css:content-children="#portal-personaltools-wrapper" css:if-not-content=".ajax_load" css:if-content=".userrole-anonymous"/>
+
+
+  <!-- we don't want overlays -->
+  <drop attributes="class" css:content="#edit-bar a.pat-plone-modal" />
+
+
+<!-- Cut down barceloneta without just for backend UI -->
+<rules css:if-not-content="body.viewpermission-view,body.viewpermission-none">
+       <theme href="../++theme++barceloneta/index.html" />
+  <notheme css:if-not-content="#visual-portal-wrapper" />
+
+
+  <rules if-content="//*[@id='portal-top']">
+   <!-- Attributes -->
+    <copy attributes="*" theme="/html" content="/html"/>
+    <!-- Base tag -->
+    <before theme="/html/head/title" content="/html/head/base"/>
+    <!-- Title -->
+    <replace theme="/html/head/title" content="/html/head/title" />
+    <!-- Pull in Plone Meta -->
+    <after theme-children="/html/head" content="/html/head/meta" />
+    <!-- dont use Plone icons, use the theme -->
+    <drop css:content="head link[rel='apple-touch-icon']" />
+    <drop css:content="head link[rel='shortcut icon']" />
+
+  </rules>
+
+  <!-- Copy over the id/class attributes on the body tag.
+       This is important for per-section styling -->
+  <copy attributes="*" css:content="body" css:theme="body" />
+
+
+    <after theme-children="/html/head" content="/html/head/link" />
+    <!-- Script -->
+    <after theme-children="/html/head" content="/html/head/script" />
+
+  <!-- move global nav -->
+<!--
+  <replace css:theme-children="#mainnavigation" css:content-children="#portal-mainnavigation" method="raw" />
+-->
+
+  <!-- hero unit on homepage only -->
+  <drop css:if-not-content="body.template-document_view.section-front-page"
+        css:theme="div.principal" />
+
+  <!-- full-width breadcrumb -->
+  <replace css:theme="#above-content" css:content="#viewlet-above-content"/>
+
+  <!-- Central column -->
+  <replace css:theme="#content-container" method="raw">
+
+      <xsl:variable name="central">
+        <xsl:if test="//aside[@id='portal-column-one'] and //aside[@id='portal-column-two']">col-xs-12 col-sm-6</xsl:if>
+        <xsl:if test="//aside[@id='portal-column-two'] and not(//aside[@id='portal-column-one'])">col-xs-12 col-sm-9</xsl:if>
+        <xsl:if test="//aside[@id='portal-column-one'] and not(//aside[@id='portal-column-two'])">col-xs-12 col-sm-9</xsl:if>
+        <xsl:if test="not(//aside[@id='portal-column-one']) and not(//aside[@id='portal-column-two'])">col-xs-12 col-sm-12</xsl:if>
+      </xsl:variable>
+
+      <div class="{$central}">
+<!--           <p class="pull-right visible-xs">
+            <button type="button" class="btn btn-primary btn-xs" data-toggle="offcanvas">Toggle nav</button>
+          </p> -->
+          <div class="row">
+            <div class="col-xs-12 col-sm-12">
+               <xsl:apply-templates css:select="#content"/>
+            </div>
+          </div>
+          <footer class="row">
+            <div class="col-xs-12 col-sm-12">
+             <xsl:copy-of select="//div[@id='viewlet-below-content']"/>
+            </div>
+          </footer>
+      </div><!--/row-->
+  </replace>
+
+  <!-- Alert message -->
+  <replace css:theme-children="#global_statusmessage" css:content-children="#global_statusmessage" />
+
+  <!-- Left column -->
+  <rules if-content="//*[@id='portal-column-one']">
+    <replace css:theme="#column1-container">
+        <div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar">
+          <aside id="portal-column-one">
+             <xsl:copy-of select="//*[@id='portal-column-one']/*"/>
+          </aside>
+        </div>
+    </replace>
+  </rules>
+
+  <!-- Right column -->
+  <rules if-content="//*[@id='portal-column-two']">
+    <replace css:theme="#column2-container">
+        <div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar" role="complementary">
+          <aside id="portal-column-two">
+             <xsl:copy-of select="//*[@id='portal-column-two']/*"/>
+          </aside>
+        </div>
+    </replace>
+  </rules>
+
+  <!-- Content header -->
+<!--
+  <replace css:theme="#portal-top" css:content-children="#portal-top" />
+  <replace css:theme-children="#portal-footer" css:content-children="#portal-footer-wrapper" />
+-->
+
+</rules>
+</rules>
diff --git a/plonetheme/barceloneta/theme/index.html b/plonetheme/barceloneta/theme/index.html
index 51378b7..c66093d 100644
--- a/plonetheme/barceloneta/theme/index.html
+++ b/plonetheme/barceloneta/theme/index.html
@@ -17,6 +17,8 @@
           href="barceloneta-apple-touch-icon-57x57-precomposed.png" />
     <link rel="apple-touch-icon-precomposed"
           href="barceloneta-apple-touch-icon-precomposed.png" />
+<link rel="stylesheet" type="text/css" href="/++theme++barceloneta/less/barceloneta-compiled.css" >
+
   
   </head>
 


Repository: plonetheme.barceloneta


Branch: refs/heads/master
Date: 2015-08-25T23:32:09+07:00
Author: Dylan Jay () <software@pretaweb.com>
Commit: https://github.com/plone/plonetheme.barceloneta/commit/f17b11850fa45f646f195f2c78df1072fc001b34

show breadcrumb in backend.cfg, clean it up and document it.

Files changed:
M plonetheme/barceloneta/theme/backend.xml
M plonetheme/barceloneta/theme/index.html

diff --git a/plonetheme/barceloneta/theme/backend.xml b/plonetheme/barceloneta/theme/backend.xml
index 4890ce4..3ca3f26 100644
--- a/plonetheme/barceloneta/theme/backend.xml
+++ b/plonetheme/barceloneta/theme/backend.xml
@@ -5,6 +5,25 @@
        xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
        xmlns:xi="http://www.w3.org/2001/XInclude">
 
+    <!--
+    You can include this rules file in your own theme as follows
+
+    <rules xmlns="http://namespaces.plone.org/diazo"
+           xmlns:css="http://namespaces.plone.org/diazo/css"
+           xmlns:xhtml="http://www.w3.org/1999/xhtml"
+           xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
+           xmlns:xi="http://www.w3.org/2001/XInclude">
+        <xi:include href="++theme++barceloneta/backend.xml" />
+        <rules css:if-content="body.viewpermission-view,body.viewpermission-none">
+           <theme href="index.html" />
+           ... your rules
+        </rules>
+    </rules>
+
+    This will include the toolbar in your theme and use bareceloneta to theme
+    all your backend pages such as site setup and edit.
+    -->
+
   <!-- toolbar -->
   <before css:theme-children="body" css:content-children="#edit-bar" css:if-not-content=".ajax_load" css:if-content=".userrole-authenticated"/>
   <replace css:theme="#anonymous-actions" css:content-children="#portal-personaltools-wrapper" css:if-not-content=".ajax_load" css:if-content=".userrole-anonymous"/>
@@ -16,9 +35,14 @@
 
 <!-- Cut down barceloneta without just for backend UI -->
 <rules css:if-not-content="body.viewpermission-view,body.viewpermission-none">
-       <theme href="../++theme++barceloneta/index.html" />
+  <theme href="../++theme++barceloneta/index.html" />
   <notheme css:if-not-content="#visual-portal-wrapper" />
 
+  <!-- We can't control the bundle from here due to include. Just hard code -->
+  <after css:theme-children="head">
+    <link rel="stylesheet" type="text/css" href="/++theme++barceloneta/less/barceloneta-compiled.css"/>
+  </after>
+
 
   <rules if-content="//*[@id='portal-top']">
    <!-- Attributes -->
@@ -44,10 +68,8 @@
     <!-- Script -->
     <after theme-children="/html/head" content="/html/head/script" />
 
-  <!-- move global nav -->
-<!--
-  <replace css:theme-children="#mainnavigation" css:content-children="#portal-mainnavigation" method="raw" />
--->
+  <!-- we don't need global nav -->
+  <drop css:theme="#mainnavigation-wrapper"/>
 
   <!-- hero unit on homepage only -->
   <drop css:if-not-content="body.template-document_view.section-front-page"
@@ -55,6 +77,10 @@
 
   <!-- full-width breadcrumb -->
   <replace css:theme="#above-content" css:content="#viewlet-above-content"/>
+  <after css:theme-children="head">
+      <style>.plone-breadcrumb {margin-top: 0px;}</style>
+  </after>
+
 
   <!-- Central column -->
   <replace css:theme="#content-container" method="raw">
@@ -109,10 +135,8 @@
   </rules>
 
   <!-- Content header -->
-<!--
-  <replace css:theme="#portal-top" css:content-children="#portal-top" />
-  <replace css:theme-children="#portal-footer" css:content-children="#portal-footer-wrapper" />
--->
+  <drop css:theme="#portal-top"  />
+  <drop css:theme="#portal-footer-wrapper" />
 
 </rules>
 </rules>
diff --git a/plonetheme/barceloneta/theme/index.html b/plonetheme/barceloneta/theme/index.html
index c66093d..2791b8f 100644
--- a/plonetheme/barceloneta/theme/index.html
+++ b/plonetheme/barceloneta/theme/index.html
@@ -17,7 +17,6 @@
           href="barceloneta-apple-touch-icon-57x57-precomposed.png" />
     <link rel="apple-touch-icon-precomposed"
           href="barceloneta-apple-touch-icon-precomposed.png" />
-<link rel="stylesheet" type="text/css" href="/++theme++barceloneta/less/barceloneta-compiled.css" >
 
   
   </head>


Repository: plonetheme.barceloneta


Branch: refs/heads/master
Date: 2015-08-25T23:40:18+07:00
Author: Dylan Jay () <software@pretaweb.com>
Commit: https://github.com/plone/plonetheme.barceloneta/commit/39e8f537b063e9939db3a7c4da7d838cecdfca7a

Merge branch 'master' into backend

Files changed:
M CHANGES.rst
M setup.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 5246de3..167d788 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -1,7 +1,13 @@
 Changelog
 =========
 
-1.6.9 (unreleased)
+1.6.10 (unreleased)
+-------------------
+
+- Nothing changed yet.
+
+
+1.6.9 (2015-08-22)
 ------------------
 
 - Hide searchbox, personaltools, breadcrumbs in print.css
diff --git a/setup.py b/setup.py
index 1bf06aa..8841f79 100644
--- a/setup.py
+++ b/setup.py
@@ -5,7 +5,7 @@
 def read(*rnames):
     return open(os.path.join(os.path.dirname(__file__), *rnames)).read()
 
-version = '1.6.9.dev0'
+version = '1.6.10.dev0'
 
 long_description = (
     read('README.rst') + '\n' +


Repository: plonetheme.barceloneta


Branch: refs/heads/master
Date: 2015-09-05T18:01:58-05:00
Author: Nathan Van Gheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/plonetheme.barceloneta/commit/4cdc76ecef49abc6aab4783966c6bc51f8dd644e

Merge pull request #40 from plone/backend

A cutdown version of barceloneta to include in your theme to save you making a custom backend theme

Files changed:
A plonetheme/barceloneta/theme/backend.xml
M plonetheme/barceloneta/theme/index.html

diff --git a/plonetheme/barceloneta/theme/backend.xml b/plonetheme/barceloneta/theme/backend.xml
new file mode 100644
index 0000000..3ca3f26
--- /dev/null
+++ b/plonetheme/barceloneta/theme/backend.xml
@@ -0,0 +1,142 @@
+<?xml version="1.0" encoding="utf-8"?>
+<rules xmlns="http://namespaces.plone.org/diazo"
+       xmlns:css="http://namespaces.plone.org/diazo/css"
+       xmlns:xhtml="http://www.w3.org/1999/xhtml"
+       xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
+       xmlns:xi="http://www.w3.org/2001/XInclude">
+
+    <!--
+    You can include this rules file in your own theme as follows
+
+    <rules xmlns="http://namespaces.plone.org/diazo"
+           xmlns:css="http://namespaces.plone.org/diazo/css"
+           xmlns:xhtml="http://www.w3.org/1999/xhtml"
+           xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
+           xmlns:xi="http://www.w3.org/2001/XInclude">
+        <xi:include href="++theme++barceloneta/backend.xml" />
+        <rules css:if-content="body.viewpermission-view,body.viewpermission-none">
+           <theme href="index.html" />
+           ... your rules
+        </rules>
+    </rules>
+
+    This will include the toolbar in your theme and use bareceloneta to theme
+    all your backend pages such as site setup and edit.
+    -->
+
+  <!-- toolbar -->
+  <before css:theme-children="body" css:content-children="#edit-bar" css:if-not-content=".ajax_load" css:if-content=".userrole-authenticated"/>
+  <replace css:theme="#anonymous-actions" css:content-children="#portal-personaltools-wrapper" css:if-not-content=".ajax_load" css:if-content=".userrole-anonymous"/>
+
+
+  <!-- we don't want overlays -->
+  <drop attributes="class" css:content="#edit-bar a.pat-plone-modal" />
+
+
+<!-- Cut down barceloneta without just for backend UI -->
+<rules css:if-not-content="body.viewpermission-view,body.viewpermission-none">
+  <theme href="../++theme++barceloneta/index.html" />
+  <notheme css:if-not-content="#visual-portal-wrapper" />
+
+  <!-- We can't control the bundle from here due to include. Just hard code -->
+  <after css:theme-children="head">
+    <link rel="stylesheet" type="text/css" href="/++theme++barceloneta/less/barceloneta-compiled.css"/>
+  </after>
+
+
+  <rules if-content="//*[@id='portal-top']">
+   <!-- Attributes -->
+    <copy attributes="*" theme="/html" content="/html"/>
+    <!-- Base tag -->
+    <before theme="/html/head/title" content="/html/head/base"/>
+    <!-- Title -->
+    <replace theme="/html/head/title" content="/html/head/title" />
+    <!-- Pull in Plone Meta -->
+    <after theme-children="/html/head" content="/html/head/meta" />
+    <!-- dont use Plone icons, use the theme -->
+    <drop css:content="head link[rel='apple-touch-icon']" />
+    <drop css:content="head link[rel='shortcut icon']" />
+
+  </rules>
+
+  <!-- Copy over the id/class attributes on the body tag.
+       This is important for per-section styling -->
+  <copy attributes="*" css:content="body" css:theme="body" />
+
+
+    <after theme-children="/html/head" content="/html/head/link" />
+    <!-- Script -->
+    <after theme-children="/html/head" content="/html/head/script" />
+
+  <!-- we don't need global nav -->
+  <drop css:theme="#mainnavigation-wrapper"/>
+
+  <!-- hero unit on homepage only -->
+  <drop css:if-not-content="body.template-document_view.section-front-page"
+        css:theme="div.principal" />
+
+  <!-- full-width breadcrumb -->
+  <replace css:theme="#above-content" css:content="#viewlet-above-content"/>
+  <after css:theme-children="head">
+      <style>.plone-breadcrumb {margin-top: 0px;}</style>
+  </after>
+
+
+  <!-- Central column -->
+  <replace css:theme="#content-container" method="raw">
+
+      <xsl:variable name="central">
+        <xsl:if test="//aside[@id='portal-column-one'] and //aside[@id='portal-column-two']">col-xs-12 col-sm-6</xsl:if>
+        <xsl:if test="//aside[@id='portal-column-two'] and not(//aside[@id='portal-column-one'])">col-xs-12 col-sm-9</xsl:if>
+        <xsl:if test="//aside[@id='portal-column-one'] and not(//aside[@id='portal-column-two'])">col-xs-12 col-sm-9</xsl:if>
+        <xsl:if test="not(//aside[@id='portal-column-one']) and not(//aside[@id='portal-column-two'])">col-xs-12 col-sm-12</xsl:if>
+      </xsl:variable>
+
+      <div class="{$central}">
+<!--           <p class="pull-right visible-xs">
+            <button type="button" class="btn btn-primary btn-xs" data-toggle="offcanvas">Toggle nav</button>
+          </p> -->
+          <div class="row">
+            <div class="col-xs-12 col-sm-12">
+               <xsl:apply-templates css:select="#content"/>
+            </div>
+          </div>
+          <footer class="row">
+            <div class="col-xs-12 col-sm-12">
+             <xsl:copy-of select="//div[@id='viewlet-below-content']"/>
+            </div>
+          </footer>
+      </div><!--/row-->
+  </replace>
+
+  <!-- Alert message -->
+  <replace css:theme-children="#global_statusmessage" css:content-children="#global_statusmessage" />
+
+  <!-- Left column -->
+  <rules if-content="//*[@id='portal-column-one']">
+    <replace css:theme="#column1-container">
+        <div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar">
+          <aside id="portal-column-one">
+             <xsl:copy-of select="//*[@id='portal-column-one']/*"/>
+          </aside>
+        </div>
+    </replace>
+  </rules>
+
+  <!-- Right column -->
+  <rules if-content="//*[@id='portal-column-two']">
+    <replace css:theme="#column2-container">
+        <div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar" role="complementary">
+          <aside id="portal-column-two">
+             <xsl:copy-of select="//*[@id='portal-column-two']/*"/>
+          </aside>
+        </div>
+    </replace>
+  </rules>
+
+  <!-- Content header -->
+  <drop css:theme="#portal-top"  />
+  <drop css:theme="#portal-footer-wrapper" />
+
+</rules>
+</rules>
diff --git a/plonetheme/barceloneta/theme/index.html b/plonetheme/barceloneta/theme/index.html
index 51378b7..2791b8f 100644
--- a/plonetheme/barceloneta/theme/index.html
+++ b/plonetheme/barceloneta/theme/index.html
@@ -17,6 +17,7 @@
           href="barceloneta-apple-touch-icon-57x57-precomposed.png" />
     <link rel="apple-touch-icon-precomposed"
           href="barceloneta-apple-touch-icon-precomposed.png" />
+
   
   </head>
 


