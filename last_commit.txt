Repository: mockup


Branch: refs/heads/master
Date: 2015-06-29T21:58:44-05:00
Author: vangheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/mockup/commit/9cd35907dbd03933444abb92655c3fa35f9c8b46

fix title not being set on images fixes https://github.com/plone/Products.CMFPlone/issues/659

Files changed:
M CHANGES.rst
M mockup/patterns/tinymce/js/links.js

diff --git a/CHANGES.rst b/CHANGES.rst
index 82fb41b..b6b6362 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,6 +4,9 @@ Changelog
 2.0.5 (unreleased)
 ------------------
 
+- fix title not being set on images
+  [vangheem]
+
 - Improve the upload pattern so it shows useful messages in case of errors
   [frapell]
 
diff --git a/mockup/patterns/tinymce/js/links.js b/mockup/patterns/tinymce/js/links.js
index 52c94fa..98b7fbe 100644
--- a/mockup/patterns/tinymce/js/links.js
+++ b/mockup/patterns/tinymce/js/links.js
@@ -487,8 +487,10 @@ define([
 
     updateImage: function(src) {
       var self = this;
+      var title = self.$title.val();
       var data = $.extend(true, {}, {
         src: src,
+        title: title ? title : null,
         alt: self.$alt.val(),
         'class': 'image-' + self.$align.val(),
         'data-linkType': self.linkType,
@@ -598,6 +600,7 @@ define([
         }
         if (self.imgElm) {
           var src = self.dom.getAttrib(self.imgElm, 'src');
+          self.$title.val(self.dom.getAttrib(self.imgElm, 'title'));
           self.$alt.val(self.dom.getAttrib(self.imgElm, 'alt'));
           linkType = self.dom.getAttrib(self.imgElm, 'data-linktype');
           if (linkType) {


