Repository: mockup
Branch: refs/heads/master
Date: 2015-04-08T23:01:08-04:00
Author: David Glick (davisagli) <david@glicksoftware.com>
Commit: https://github.com/plone/mockup/commit/362af956b142254f0e214643afea1219f54d1738

fix param passed when setting default page from action menu in structure; refs plone/Products.CMFPlone#424

Files changed:
M mockup/patterns/structure/js/views/actionmenu.js

diff --git a/mockup/patterns/structure/js/views/actionmenu.js b/mockup/patterns/structure/js/views/actionmenu.js
index af30b13..e0fac56 100644
--- a/mockup/patterns/structure/js/views/actionmenu.js
+++ b/mockup/patterns/structure/js/views/actionmenu.js
@@ -78,7 +78,7 @@ define([
         type: 'POST',
         data: {
           '_authenticator': $('[name="_authenticator"]').val(),
-          'id': this.$active.attr('data-id')
+          'id': this.model.attributes.id
         },
         success: function(data) {
           self.app.ajaxSuccessResponse.apply(self.app, [data]);


Repository: mockup
Branch: refs/heads/master
Date: 2015-04-09T12:57:40+02:00
Author: Nathan Van Gheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/mockup/commit/42618798ec77d3a8e2ebd88dff7ef4a8777117af

Merge pull request #478 from plone/fix/structure-default-page

fix param passed when setting default page from action menu in structure

Files changed:
M mockup/patterns/structure/js/views/actionmenu.js

diff --git a/mockup/patterns/structure/js/views/actionmenu.js b/mockup/patterns/structure/js/views/actionmenu.js
index af30b13..e0fac56 100644
--- a/mockup/patterns/structure/js/views/actionmenu.js
+++ b/mockup/patterns/structure/js/views/actionmenu.js
@@ -78,7 +78,7 @@ define([
         type: 'POST',
         data: {
           '_authenticator': $('[name="_authenticator"]').val(),
-          'id': this.$active.attr('data-id')
+          'id': this.model.attributes.id
         },
         success: function(data) {
           self.app.ajaxSuccessResponse.apply(self.app, [data]);


