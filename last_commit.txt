Repository: Products.CMFDynamicViewFTI
Branch: refs/heads/master
Date: 2015-06-02T12:35:18+02:00
Author: Godefroid Chapelle (gotcha) <gotcha@bubblenet.be>
Commit: https://github.com/plone/Products.CMFDynamicViewFTI/commit/6ecdf22593f13ac0bc5bf546b5ce92e2bfa7a6e8

fix https://github.com/plone/Products.CMFPlone/issues/591

Files changed:
M CHANGES.txt
M Products/CMFDynamicViewFTI/browserdefault.py

diff --git a/CHANGES.txt b/CHANGES.txt
index 9cfb71f..1b8a2e0 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -4,7 +4,8 @@ Changelog
 4.1.2 (unreleased)
 ------------------
 
-- Nothing changed yet.
+- Fix https://github.com/plone/Products.CMFPlone/issues/591
+  [gotcha]
 
 
 4.1.1 (2015-05-13)
diff --git a/Products/CMFDynamicViewFTI/browserdefault.py b/Products/CMFDynamicViewFTI/browserdefault.py
index d6300a4..64323d5 100644
--- a/Products/CMFDynamicViewFTI/browserdefault.py
+++ b/Products/CMFDynamicViewFTI/browserdefault.py
@@ -244,7 +244,7 @@ def getAvailableLayouts(self):
 
 def check_default_page(obj, event):
     container = obj
-    default_page_id = container.getDefaultPage()
+    default_page_id = container.getProperty('default_page', '')
     if default_page_id and not (default_page_id in container.objectIds()):
         ISelectableBrowserDefault(container).setDefaultPage(None)
 


Repository: Products.CMFDynamicViewFTI
Branch: refs/heads/master
Date: 2015-06-03T09:02:51+02:00
Author: Godefroid Chapelle (gotcha) <gotcha@bubblenet.be>
Commit: https://github.com/plone/Products.CMFDynamicViewFTI/commit/2fda2880d4d48d22ebfaa024a27a6d774cedc1f5

Merge pull request #6 from plone/fix_plone_591

fix https://github.com/plone/Products.CMFPlone/issues/591

Files changed:
M CHANGES.txt
M Products/CMFDynamicViewFTI/browserdefault.py

diff --git a/CHANGES.txt b/CHANGES.txt
index 9cfb71f..1b8a2e0 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -4,7 +4,8 @@ Changelog
 4.1.2 (unreleased)
 ------------------
 
-- Nothing changed yet.
+- Fix https://github.com/plone/Products.CMFPlone/issues/591
+  [gotcha]
 
 
 4.1.1 (2015-05-13)
diff --git a/Products/CMFDynamicViewFTI/browserdefault.py b/Products/CMFDynamicViewFTI/browserdefault.py
index d6300a4..64323d5 100644
--- a/Products/CMFDynamicViewFTI/browserdefault.py
+++ b/Products/CMFDynamicViewFTI/browserdefault.py
@@ -244,7 +244,7 @@ def getAvailableLayouts(self):
 
 def check_default_page(obj, event):
     container = obj
-    default_page_id = container.getDefaultPage()
+    default_page_id = container.getProperty('default_page', '')
     if default_page_id and not (default_page_id in container.objectIds()):
         ISelectableBrowserDefault(container).setDefaultPage(None)
 


