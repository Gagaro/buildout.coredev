Repository: plone.app.contenttypes
Branch: refs/heads/master
Date: 2015-03-21T18:13:50+01:00
Author: Timo Stollenwerk (tisto) <tisto@plone.org>
Commit: https://github.com/plone/plone.app.contenttypes/commit/5874f0b46150545d70d678f1599fd53ed1647114

Remove unused robot keyword 'fill in metadata'. Make Select2 query widget work more reliable. If the browser window is small, the option to select might not always be visible, therefore we use the search.

Files changed:
M plone/app/contenttypes/tests/robot/keywords.txt

diff --git a/plone/app/contenttypes/tests/robot/keywords.txt b/plone/app/contenttypes/tests/robot/keywords.txt
index 85d8f18..f61a9b7 100644
--- a/plone/app/contenttypes/tests/robot/keywords.txt
+++ b/plone/app/contenttypes/tests/robot/keywords.txt
@@ -92,21 +92,6 @@ the collection should not contain
   Go to  ${PLONE_URL}/my-collection
   The content area should not contain  ${title}
 
-fill in metadata
-  Click Link  Categorization
-  Input text  name=form.widgets.IDublinCore.subjects  testcreatedrobot
-  Click Link  Dates
-  ${currentyear}=  Get Time  year
-  fill date field  form.widgets.IDublinCore.effective  2009  January  1
-  fill date field  form.widgets.IDublinCore.expires  2017  December  12
-  Click Link  Ownership
-  Input text  name=form.widgets.IDublinCore.creators  another_creator
-  Input text  name=form.widgets.IDublinCore.contributors  contributor1
-  Input text  name=form.widgets.IDublinCore.rights  Copyright\nstatement\nhere
-  Click Link  Settings
-  Select from List  name=form.widgets.IAllowDiscussion.allow_discussion:list  Yes
-  Select Checkbox  name=form.widgets.IExcludeFromNavigation.exclude_from_nav:list
-
 fill date field
   [Arguments]  ${fieldid}  ${year}=2012  ${month}=January  ${day}=10
   [Documentation]  Fill in the specified date field (such as effective/expiration date in the "dates" metadata tab) with the specified date.
@@ -120,9 +105,10 @@ I set the criteria ${type} in row ${number} to the option '${label}'
   ${criteria_row} =  Convert to String  .querystring-criteria-wrapper:nth-child(${number})
   Wait until page contains element  css=${criteria_row} .querystring-criteria-${type} .select2-choice
   Click Element  css=${criteria_row} .querystring-criteria-${type} .select2-choice
-  Wait until page contains element  css=.select2-input.select2-focused
-  Input text  css=.select2-input.select2-focused  ${label}\n
-# Click Element  xpath=//div[@class='select2-result-label']/descendant-or-self::*[contains(text(), '${label}')]
+  Wait until element is visible  css=#select2-drop input
+  Input Text  css=#select2-drop input  ${label}
+  Wait until element is visible  css=#select2-drop .select2-match
+  Click Element  css=#select2-drop .select2-match
 
 I set the criteria ${type} in row ${number} to the options '${label}'
   ${criteria_row} =  Convert to String  .querystring-criteria-wrapper:nth-child(${number})


