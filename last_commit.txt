Repository: mockup


Branch: refs/heads/master
Date: 2015-07-14T05:06:19+02:00
Author: vangheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/mockup/commit/76cb528f876061033ecc1e344e790f881c2384d0

upgrade mockup-core

Files changed:
M CHANGES.rst
M bower.json
M mockup/tests/pattern-tinymce-test.js

diff --git a/CHANGES.rst b/CHANGES.rst
index b1a01f4..7b27f60 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,6 +4,9 @@ Changelog
 2.0.5 (unreleased)
 ------------------
 
+- upgrade mockup-core to 2.1.10
+  [vangheem]
+
 - fix inserting image right after you upload it in tinymce
   [vangheem]
 
diff --git a/bower.json b/bower.json
index 1df56ea..c9343c6 100644
--- a/bower.json
+++ b/bower.json
@@ -16,7 +16,7 @@
     "jquery.recurrenceinput.js": "v1.5.1",
     "lodash": "2.4.1",
     "logging": "",
-    "mockup-core": "2.1.9",
+    "mockup-core": "2.1.10",
     "moment": "2.10.3",
     "patternslib": "2.0.9",
     "pickadate": "3.5.6",
diff --git a/mockup/tests/pattern-tinymce-test.js b/mockup/tests/pattern-tinymce-test.js
index 7118861..5277e0f 100644
--- a/mockup/tests/pattern-tinymce-test.js
+++ b/mockup/tests/pattern-tinymce-test.js
@@ -197,7 +197,7 @@ define([
         }
       });
       pattern.addLinkClicked();
-      pattern.linkModal.linkTypes.internal.$input.select2('data', {
+      pattern.linkModal.linkTypes.internal.getEl().select2('data', {
         UID: 'foobar',
         portal_type: 'Document',
         Title: 'Foobar',
@@ -212,14 +212,14 @@ define([
       pattern.addLinkClicked();
       var modal = pattern.linkModal;
       modal.linkType = 'external';
-      modal.linkTypes.external.$input.attr('value', 'http://foobar');
+      modal.linkTypes.external.getEl().attr('value', 'http://foobar');
       expect(pattern.linkModal.getLinkUrl()).to.equal('http://foobar');
     });
     it('test add email link', function() {
       var pattern = createTinymce();
       pattern.addLinkClicked();
       pattern.linkModal.linkType = 'email';
-      pattern.linkModal.linkTypes.email.$input.attr('value', 'foo@bar.com');
+      pattern.linkModal.linkTypes.email.getEl().attr('value', 'foo@bar.com');
       expect(pattern.linkModal.getLinkUrl()).to.equal('mailto:foo@bar.com');
     });
     it('test add image link', function() {
@@ -229,7 +229,7 @@ define([
         prependToScalePart: '/@@images/image/'
       });
       pattern.addImageClicked();
-      pattern.imageModal.linkTypes.image.$input.select2('data', {
+      pattern.imageModal.linkTypes.image.getEl().select2('data', {
         UID: 'foobar',
         portal_type: 'Document',
         Title: 'Foobar',
@@ -245,7 +245,7 @@ define([
       var pattern = createTinymce();
       pattern.tiny.setContent('<p>blah</p>');
       pattern.addLinkClicked();
-      pattern.linkModal.linkTypes.internal.$input.select2('data', {
+      pattern.linkModal.linkTypes.internal.getEl().select2('data', {
         UID: 'foobar',
         portal_type: 'Document',
         Title: 'Foobar',
@@ -268,7 +268,7 @@ define([
       pattern.addLinkClicked();
 
       pattern.linkModal.linkTypes.internal.set('123sdfasdf');
-      var val = pattern.linkModal.linkTypes.internal.$input.select2('data');
+      var val = pattern.linkModal.linkTypes.internal.getEl().select2('data');
       /* XXX ajax not loading quickly enough here...
       expect(val.UID).to.equal('123sdfasdf');
       */
@@ -300,7 +300,7 @@ define([
       pattern.tiny.selection.select(pattern.tiny.dom.getRoot().getElementsByTagName('a')[0]);
       pattern.addLinkClicked();
 
-      expect(pattern.linkModal.linkTypes.external.$input.val()).to.equal('foobar');
+      expect(pattern.linkModal.linkTypes.external.getEl().val()).to.equal('foobar');
     });
 
     it('test loads existing link email values', function() {
@@ -311,7 +311,7 @@ define([
       pattern.tiny.selection.select(pattern.tiny.dom.getRoot().getElementsByTagName('a')[0]);
       pattern.addLinkClicked();
 
-      expect(pattern.linkModal.linkTypes.email.$input.val()).to.equal('foo@bar.com');
+      expect(pattern.linkModal.linkTypes.email.getEl().val()).to.equal('foo@bar.com');
     });
 
     it('test anchor link adds existing anchors to list', function() {
@@ -373,7 +373,7 @@ define([
       pattern.tiny.selection.select(pattern.tiny.dom.getRoot().getElementsByTagName('a')[0]);
       pattern.addLinkClicked();
 
-      expect(pattern.linkModal.linkTypes.external.$input.val()).to.equal('foobar');
+      expect(pattern.linkModal.linkTypes.external.getEl().val()).to.equal('foobar');
     });
 
     it('test guess anchor when no data- attribute present', function() {


