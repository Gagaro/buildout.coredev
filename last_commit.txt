Repository: plone.app.dexterity


Branch: refs/heads/master
Date: 2015-09-18T09:20:08-03:00
Author: Rodrigo Ferreira de Souza (rodfersou) <rodfersou@gmail.com>
Commit: https://github.com/plone/plone.app.dexterity/commit/e402475c1038210b791e7a097fc1305185fafc42

Fix ace editor javascript reference

Files changed:
M CHANGES.rst
M plone/app/dexterity/browser/modeleditor.pt
M plone/app/dexterity/tests/editing.txt

diff --git a/CHANGES.rst b/CHANGES.rst
index b75a9ed..5a54e4d 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,6 +4,9 @@ Changelog
 2.1.13 (unreleased)
 -------------------
 
+- Fix ace editor javascript reference (`895`_).
+  [rodfersou]
+
 - Rerun i18ndude and updated German translation.
   [pabo3000]
 
@@ -682,3 +685,5 @@ Changelog
 --------------------
 
 - Initial release
+
+.. _`#895`: https://github.com/plone/Products.CMFPlone/issues/895
diff --git a/plone/app/dexterity/browser/modeleditor.pt b/plone/app/dexterity/browser/modeleditor.pt
index 07eab02..7b6f648 100644
--- a/plone/app/dexterity/browser/modeleditor.pt
+++ b/plone/app/dexterity/browser/modeleditor.pt
@@ -63,10 +63,10 @@
       prefs_main_template doesn't have the head_javascript_slot
   </tal:comment>
 
-  <script src="++resource++plone.resourceeditor/ace/ace.js"
+  <script src="++plone++static/components/ace-builds/src/ace.js"
       type="text/javascript"
       charset="utf-8"
-      tal:attributes="src string:${portal_url}/++resource++plone.resourceeditor/ace/ace.js"
+      tal:attributes="src string:${portal_url}/++plone++static/components/ace-builds/src/ace.js"
       ></script>
   <script src="++resource++plone.schemaeditor/modeleditor.js"
       type="text/javascript"
diff --git a/plone/app/dexterity/tests/editing.txt b/plone/app/dexterity/tests/editing.txt
index 0177398..1d3db7d 100644
--- a/plone/app/dexterity/tests/editing.txt
+++ b/plone/app/dexterity/tests/editing.txt
@@ -149,14 +149,14 @@ button on the field list form::
 We should be telling the browser to load our keys resources::
 
   >>> browser.contents
-  '...<script...src="http://nohost/plone/++resource++plone.resourceeditor/ace/ace.js"...'
+  '...<script...src="http://nohost/plone/++plone++static/components/ace-builds/src/ace.js"...'
 
   >>> browser.contents
   '...<script...src="http://nohost/plone/++resource++plone.app.dexterity.modeleditor.js"...'
 
 Both of those should be available::
 
-  browser.open('http://nohost/plone/++resource++plone.resourceeditor/ace/ace.js')
+  browser.open('http://nohost/plone/++plone++static/components/ace-builds/src/ace.js')
   browser.open('http://nohost/plone/++resource++plone.app.dexterity.modeleditor.js')
 
 Return to our view and find the XML model source in a div, ready for the Ace editor::


Repository: plone.app.dexterity


Branch: refs/heads/master
Date: 2015-09-18T09:49:37-03:00
Author: Rodrigo Ferreira de Souza (rodfersou) <rodfersou@gmail.com>
Commit: https://github.com/plone/plone.app.dexterity/commit/06fdae5c1f17ad2c8dc45dc2c81d71ef6a606d1d

Fix theme (just monokai theme is disponible)

Files changed:
M plone/app/dexterity/browser/modeleditor.js

diff --git a/plone/app/dexterity/browser/modeleditor.js b/plone/app/dexterity/browser/modeleditor.js
index 0455075..9ddbf59 100644
--- a/plone/app/dexterity/browser/modeleditor.js
+++ b/plone/app/dexterity/browser/modeleditor.js
@@ -43,7 +43,7 @@ var init = function(){
         doc_changed = false;
 
     // editor tuneup
-    editor.setTheme("ace/theme/textmate");
+    editor.setTheme("ace/theme/monokai");
     session.setMode("ace/mode/xml");
     session.setTabSize(4);
     session.setUseSoftTabs(true);
@@ -121,4 +121,4 @@ $().ready(function() {
     init();
 });
 
-});
\ No newline at end of file
+});


Repository: plone.app.dexterity


Branch: refs/heads/master
Date: 2015-09-18T16:13:31+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.app.dexterity/commit/9ad9e25dba41433756635d791b89b43cfab449db

Merge pull request #182 from plone/issue_895

Issue 895 - Fix ace editor javascript reference

Files changed:
M CHANGES.rst
M plone/app/dexterity/browser/modeleditor.js
M plone/app/dexterity/browser/modeleditor.pt
M plone/app/dexterity/tests/editing.txt

diff --git a/CHANGES.rst b/CHANGES.rst
index b75a9ed..5a54e4d 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,6 +4,9 @@ Changelog
 2.1.13 (unreleased)
 -------------------
 
+- Fix ace editor javascript reference (`895`_).
+  [rodfersou]
+
 - Rerun i18ndude and updated German translation.
   [pabo3000]
 
@@ -682,3 +685,5 @@ Changelog
 --------------------
 
 - Initial release
+
+.. _`#895`: https://github.com/plone/Products.CMFPlone/issues/895
diff --git a/plone/app/dexterity/browser/modeleditor.js b/plone/app/dexterity/browser/modeleditor.js
index 0455075..9ddbf59 100644
--- a/plone/app/dexterity/browser/modeleditor.js
+++ b/plone/app/dexterity/browser/modeleditor.js
@@ -43,7 +43,7 @@ var init = function(){
         doc_changed = false;
 
     // editor tuneup
-    editor.setTheme("ace/theme/textmate");
+    editor.setTheme("ace/theme/monokai");
     session.setMode("ace/mode/xml");
     session.setTabSize(4);
     session.setUseSoftTabs(true);
@@ -121,4 +121,4 @@ $().ready(function() {
     init();
 });
 
-});
\ No newline at end of file
+});
diff --git a/plone/app/dexterity/browser/modeleditor.pt b/plone/app/dexterity/browser/modeleditor.pt
index 07eab02..7b6f648 100644
--- a/plone/app/dexterity/browser/modeleditor.pt
+++ b/plone/app/dexterity/browser/modeleditor.pt
@@ -63,10 +63,10 @@
       prefs_main_template doesn't have the head_javascript_slot
   </tal:comment>
 
-  <script src="++resource++plone.resourceeditor/ace/ace.js"
+  <script src="++plone++static/components/ace-builds/src/ace.js"
       type="text/javascript"
       charset="utf-8"
-      tal:attributes="src string:${portal_url}/++resource++plone.resourceeditor/ace/ace.js"
+      tal:attributes="src string:${portal_url}/++plone++static/components/ace-builds/src/ace.js"
       ></script>
   <script src="++resource++plone.schemaeditor/modeleditor.js"
       type="text/javascript"
diff --git a/plone/app/dexterity/tests/editing.txt b/plone/app/dexterity/tests/editing.txt
index 0177398..1d3db7d 100644
--- a/plone/app/dexterity/tests/editing.txt
+++ b/plone/app/dexterity/tests/editing.txt
@@ -149,14 +149,14 @@ button on the field list form::
 We should be telling the browser to load our keys resources::
 
   >>> browser.contents
-  '...<script...src="http://nohost/plone/++resource++plone.resourceeditor/ace/ace.js"...'
+  '...<script...src="http://nohost/plone/++plone++static/components/ace-builds/src/ace.js"...'
 
   >>> browser.contents
   '...<script...src="http://nohost/plone/++resource++plone.app.dexterity.modeleditor.js"...'
 
 Both of those should be available::
 
-  browser.open('http://nohost/plone/++resource++plone.resourceeditor/ace/ace.js')
+  browser.open('http://nohost/plone/++plone++static/components/ace-builds/src/ace.js')
   browser.open('http://nohost/plone/++resource++plone.app.dexterity.modeleditor.js')
 
 Return to our view and find the XML model source in a div, ready for the Ace editor::


