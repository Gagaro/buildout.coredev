Repository: plone.app.contenttypes


Branch: refs/heads/master
Date: 2015-07-21T14:07:42+02:00
Author: Vincent Fretin (vincentfretin) <vincent.fretin@gmail.com>
Commit: https://github.com/plone/plone.app.contenttypes/commit/2cc24cf3b75c845dc2030fe3289396ebe447ab72

Fix i18n on custom_migration view

Files changed:
M CHANGES.rst
M plone/app/contenttypes/migration/custom_migration.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index c8df9f4..d940784 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,7 +4,8 @@ Changelog
 1.2b4 (unreleased)
 ------------------
 
-- Nothing changed yet.
+- Fix i18n on custom_migration view.
+  [vincentfretin]
 
 
 1.2b3 (2015-07-18)
diff --git a/plone/app/contenttypes/migration/custom_migration.pt b/plone/app/contenttypes/migration/custom_migration.pt
index 12ba748..b8f29a7 100644
--- a/plone/app/contenttypes/migration/custom_migration.pt
+++ b/plone/app/contenttypes/migration/custom_migration.pt
@@ -29,11 +29,11 @@
              tal:define="at_types view/getAllArchetypeTypes">
   <div class="important">
     <h2 i18n:translate="">Important</h2>
-    <p i18n:translate="">Before migrating your content please read the <a href="https://github.com/plone/plone.app.contenttypes#migration">migration-section in the documentation of plone.app.contenttypes</a></p>
+    <p i18n:translate="">Before migrating your content please read the <a href="https://github.com/plone/plone.app.contenttypes#migration" i18n:name="migrationsection" i18n:translate="">migration-section in the documentation of plone.app.contenttypes</a></p>
 
 
     <h3>Migrating content that is translated with LinguaPlone</h3>
-    <p i18n:translate="">Since LinguaPlone does not support Dexterity you need to migrate from LinguaPlone to <a href="http://pypi.python.org/pypi/plone.app.multilingual">plone.app.multilingual</a>. The migration from Products.LinguaPlone to plone.app.multilingual should happen before the migration from Archetypes to plone.app.contenttypes. For details on the migration see the <a href="http://pypi.python.org/pypi/plone.app.multilingual#linguaplone-migration">documentation</a></p>
+    <p i18n:translate="">Since LinguaPlone does not support Dexterity you need to migrate from LinguaPlone to <a i18n:name="pam" href="http://pypi.python.org/pypi/plone.app.multilingual">plone.app.multilingual</a>. The migration from Products.LinguaPlone to plone.app.multilingual should happen before the migration from Archetypes to plone.app.contenttypes. For details on the migration see the <a i18n:name="documentation" i18n:translate="" href="http://pypi.python.org/pypi/plone.app.multilingual#linguaplone-migration">documentation</a></p>
     <h3 i18n:translate="">Note about how long it might take</h3>
     <p i18n:translate="">Depending of the number of archetypes in your portal, it may take a <span class="strong">really</span> long time for the migration to be done.
       Stay calm and be patient.</p>
@@ -91,9 +91,9 @@
     <tal:block condition="at_types">
         <div id="migration-options">
           <h2 i18n:translate="">Migrate contents</h2>
-          <div i18n:translate=""
+          <div
             class="documentDescription">
-            <p>You can select which AT content type you want to migrate to an existing DX content type.</p>
+            <p i18n:translate="">You can select which AT content type you want to migrate to an existing DX content type.</p>
             <form id="migrateCustomATForm" method="post"
                   tal:attributes="action python:context.absolute_url() + '/@@custom_migration'">
             <table>
@@ -102,7 +102,7 @@
                     <td valign="top">
                         <p tal:content="at_type/title" style="font-weight: bold;">AT content type title</p>
                         <tal:block repeat="field python: view.getFieldsForATType(at_type)">
-                            <p tal:content="field/title">Field name</p>
+                            <p tal:content="field/title" i18n:translate="">Field name</p>
                             <input type="hidden" tal:attributes="name string:${safe_at_id}:list;
                                                                  value string:${field/id}__type__${field/type};" />
                         </tal:block>
@@ -111,10 +111,11 @@
                         <select tal:attributes="onChange string:javascript:getDXFields(at_typename='${at_type/id}', this.value);
                                                 name string:dx_select_${safe_at_id};"
                                 class="selectedType">
-                            <option value="" selected="selected">Do not migrate</option>
+                            <option value="" selected="selected" i18n:translate="">Do not migrate</option>
                             <option tal:repeat="dx_type view/getDXFTIs"
                                     tal:attributes="value dx_type/id"
-                                    tal:content="dx_type/title">DX type name</option>
+                                    tal:content="dx_type/title"
+                                    i18n:translate="">DX type name</option>
                         </select>
                         <div id="hook_at_fti_News_Item"
                              class="field fieldsMapping"


