Repository: Products.CMFPlone
Branch: refs/heads/master
Date: 2015-06-08T00:27:49-05:00
Author: vangheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/268ce14530a6e929a9615c1884955ac36fd64f4e

fix syndication feed use of lead image as it was using wrong url

Files changed:
M CHANGES.rst
M Products/CMFPlone/browser/syndication/adapters.py

diff --git a/CHANGES.rst b/CHANGES.rst
index b420954..9751e37 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -8,6 +8,9 @@ Changelog
 5.0b3 (unreleased)
 ------------------
 
+- fix syndication feed use of lead image as it was using wrong url
+  [vangheem]
+
 - add utility to get site logo
   [vangheem]
 
diff --git a/Products/CMFPlone/browser/syndication/adapters.py b/Products/CMFPlone/browser/syndication/adapters.py
index 369d87a..8f39f94 100644
--- a/Products/CMFPlone/browser/syndication/adapters.py
+++ b/Products/CMFPlone/browser/syndication/adapters.py
@@ -273,7 +273,7 @@ def __init__(self, context, feed):
                     and hasattr(lead.image, 'getSize')
                     and lead.image.getSize() > 0):
                 self.file = lead.image
-                self.field_name = 'lead'
+                self.field_name = 'image'
         if self.file is None:
             try:
                 primary = IPrimaryFieldInfo(self.context, None)


