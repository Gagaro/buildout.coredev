Repository: plone.formwidget.querystring
Branch: refs/heads/master
Date: 2015-06-08T12:01:52-05:00
Author: vangheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/plone.formwidget.querystring/commit/42a36553fb57c3a36af811b7b3985f18b0ca564b

conditionally setup zope.app.form field

Files changed:
M CHANGES.rst
M plone/formwidget/querystring/configure.zcml

diff --git a/CHANGES.rst b/CHANGES.rst
index 1026f15..a8d1927 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,8 +4,8 @@ Changelog
 1.1.5 (unreleased)
 ------------------
 
-- Nothing changed yet.
-
+- conditionally setup zope.app.form field
+  [vangheem]
 
 1.1.4 (2014-11-05)
 ------------------
diff --git a/plone/formwidget/querystring/configure.zcml b/plone/formwidget/querystring/configure.zcml
index c27bbd8..38e4b6b 100644
--- a/plone/formwidget/querystring/configure.zcml
+++ b/plone/formwidget/querystring/configure.zcml
@@ -3,6 +3,7 @@
     xmlns:zope="http://namespaces.zope.org/zope"
     xmlns:browser="http://namespaces.zope.org/browser"
     xmlns:i18n="http://namespaces.zope.org/i18n"
+    xmlns:zcml="http://namespaces.zope.org/zcml"
     xmlns:genericsetup="http://namespaces.zope.org/genericsetup"
     i18n_domain="plone">
 
@@ -19,6 +20,7 @@
     provides="zope.app.form.interfaces.IInputWidget"
     factory=".widget.QueryStringWidget"
     permission="zope.Public"
+    zcml:condition="installed zope.app.form"
     />
 
   <genericsetup:registerProfile


