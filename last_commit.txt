Repository: Products.CMFPlone
Branch: refs/heads/master
Date: 2015-06-06T16:38:33+03:00
Author: Asko Soukka (datakurre) <asko.soukka@iki.fi>
Commit: https://github.com/plone/Products.CMFPlone/commit/5299eb57bdd6505ae0def3e50667b9a78489d24e

Fix issue where upgrading a product logged error 'ERROR root Could not upgrade product: 'set' object has no attribute 'values'

Files changed:
M Products/CMFPlone/controlpanel/browser/quickinstaller.py

diff --git a/Products/CMFPlone/controlpanel/browser/quickinstaller.py b/Products/CMFPlone/controlpanel/browser/quickinstaller.py
index df8948c..ea73ec7 100644
--- a/Products/CMFPlone/controlpanel/browser/quickinstaller.py
+++ b/Products/CMFPlone/controlpanel/browser/quickinstaller.py
@@ -175,7 +175,7 @@ def upgrade_product(self, product):
         try:
             qi.upgradeProduct(product)
             messages.addStatusMessage(
-                _(u'Upgraded ${product}!', mapping={'product', product}), type="info")
+                _(u'Upgraded ${product}!', mapping={'product': product}), type="info")
             return True
         except Exception, e:
             logging.error("Could not upgrade %s: %s" % (product, e))


Repository: Products.CMFPlone
Branch: refs/heads/master
Date: 2015-06-06T16:40:36+03:00
Author: Asko Soukka (datakurre) <asko.soukka@iki.fi>
Commit: https://github.com/plone/Products.CMFPlone/commit/7466d876e8a923d58317ff4407e0e77e9cf3000f

Update changelog

Files changed:
M CHANGES.rst

diff --git a/CHANGES.rst b/CHANGES.rst
index 0e36891..8e2b97e 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -8,6 +8,9 @@ Changelog
 5.0b3 (unreleased)
 ------------------
 
+- fix issue where product upgrade did show an error status message
+  [datakurre]
+
 - fix casing on "First weekday" field on Date and Time control panel
   [vangheem]
 


Repository: Products.CMFPlone
Branch: refs/heads/master
Date: 2015-06-06T08:22:36-07:00
Author: David Glick (davisagli) <david.glick@plone.org>
Commit: https://github.com/plone/Products.CMFPlone/commit/ff0b5e727bd2ec4992f8eda13bd43e66a24770fa

Merge pull request #603 from plone/datakurre-quickinstaller

Fix issue where upgrading a product on Plone 5 resulted an error status message, because of broken mapping value for i18n message

Files changed:
M CHANGES.rst
M Products/CMFPlone/controlpanel/browser/quickinstaller.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 0e36891..8e2b97e 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -8,6 +8,9 @@ Changelog
 5.0b3 (unreleased)
 ------------------
 
+- fix issue where product upgrade did show an error status message
+  [datakurre]
+
 - fix casing on "First weekday" field on Date and Time control panel
   [vangheem]
 
diff --git a/Products/CMFPlone/controlpanel/browser/quickinstaller.py b/Products/CMFPlone/controlpanel/browser/quickinstaller.py
index df8948c..ea73ec7 100644
--- a/Products/CMFPlone/controlpanel/browser/quickinstaller.py
+++ b/Products/CMFPlone/controlpanel/browser/quickinstaller.py
@@ -175,7 +175,7 @@ def upgrade_product(self, product):
         try:
             qi.upgradeProduct(product)
             messages.addStatusMessage(
-                _(u'Upgraded ${product}!', mapping={'product', product}), type="info")
+                _(u'Upgraded ${product}!', mapping={'product': product}), type="info")
             return True
         except Exception, e:
             logging.error("Could not upgrade %s: %s" % (product, e))


