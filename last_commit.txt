Repository: mockup


Branch: refs/heads/master
Date: 2015-07-06T10:52:53-05:00
Author: vangheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/mockup/commit/10662577eaf3cc1da4cc20347a34ced9f33aec5f

fix upload popover close wonkiness

Files changed:
M mockup/patterns/structure/js/views/app.js
M mockup/patterns/structure/pattern.js

diff --git a/mockup/patterns/structure/js/views/app.js b/mockup/patterns/structure/js/views/app.js
index 323dd35..182fd71 100644
--- a/mockup/patterns/structure/js/views/app.js
+++ b/mockup/patterns/structure/js/views/app.js
@@ -49,11 +49,15 @@ define([
       /* close popovers when clicking away */
       $(document).click(function(e){
         var $el = $(e.target);
+        if(!$el.is(':visible')){
+          // ignore this, fake event trigger to element that is not visible
+          return;
+        }
         if($el.is('a') || $el.parent().is('a')){
           return;
         }
         var $popover = $('.popover:visible');
-        if($popover.length > 0 && !$.contains($popover[0], e.target)){
+        if($popover.length > 0 && !$.contains($popover[0], $el[0])){
           var popover = $popover.data('component');
           if(popover){
             popover.hide();
diff --git a/mockup/patterns/structure/pattern.js b/mockup/patterns/structure/pattern.js
index 6e9d8a0..d563977 100644
--- a/mockup/patterns/structure/pattern.js
+++ b/mockup/patterns/structure/pattern.js
@@ -70,7 +70,7 @@ define([
         'Subject': 'Tags',
         'portal_type': 'Type',
         'is_folderish': 'Folder',
-        'exclude_from_nav': 'Excluded from nav',
+        'exclude_from_nav': 'Excluded from navigation',
         'getObjSize': 'Object Size',
         'last_comment_date': 'Last comment date',
         'total_comments': 'Total comments'


