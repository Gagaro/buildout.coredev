Repository: plone.app.theming
Branch: refs/heads/master
Date: 2015-05-29T11:28:09-05:00
Author: Nathan Van Gheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/plone.app.theming/commit/ca0e376a82e2466b93397d4413192819b445bc38

Revert "Fixed broken getTheme method"

Files changed:
M src/plone/app/theming/utils.py

diff --git a/src/plone/app/theming/utils.py b/src/plone/app/theming/utils.py
index 86bc452..4aae0d6 100644
--- a/src/plone/app/theming/utils.py
+++ b/src/plone/app/theming/utils.py
@@ -272,10 +272,9 @@ def getTheme(name, manifest=None, resources=None):
                 MANIFEST_FORMAT,
                 filter=isValidThemeDirectory
             )
-            manifest = filter(lambda x: x['name'] == name, resources)[0]
-
-            if manifest is None:
-                manifest = {}
+        if name not in resources:
+            return None
+        manifest = resources[name] or {}
 
     title = manifest.get('title', None)
     if title is None:


Repository: plone.app.theming
Branch: refs/heads/master
Date: 2015-05-29T11:28:20-05:00
Author: Nathan Van Gheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/plone.app.theming/commit/eac148bce7f243eeaff3f1ab5776c8a7ee08c80c

Merge pull request #57 from plone/revert-55-refactoring

Revert "Fixed broken getTheme method"

Files changed:
M src/plone/app/theming/utils.py

diff --git a/src/plone/app/theming/utils.py b/src/plone/app/theming/utils.py
index 86bc452..4aae0d6 100644
--- a/src/plone/app/theming/utils.py
+++ b/src/plone/app/theming/utils.py
@@ -272,10 +272,9 @@ def getTheme(name, manifest=None, resources=None):
                 MANIFEST_FORMAT,
                 filter=isValidThemeDirectory
             )
-            manifest = filter(lambda x: x['name'] == name, resources)[0]
-
-            if manifest is None:
-                manifest = {}
+        if name not in resources:
+            return None
+        manifest = resources[name] or {}
 
     title = manifest.get('title', None)
     if title is None:


