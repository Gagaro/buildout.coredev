Repository: Products.CMFPlone
Branch: refs/heads/master
Date: 2015-01-22T17:37:16+01:00
Author: Johannes Raggam (thet) <raggam-nl@adm.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/3b671ad2e4252c6445fee12524b08389332787a8

add robot test for site_logo in site control panel

Files changed:
A Products/CMFPlone/tests/robot/pixel.png
A Products/CMFPlone/tests/robot/variables.py
M Products/CMFPlone/tests/robot/test_controlpanel_site.robot

diff --git a/Products/CMFPlone/tests/robot/pixel.png b/Products/CMFPlone/tests/robot/pixel.png
new file mode 100644
index 0000000..a7045ed
Binary files /dev/null and b/Products/CMFPlone/tests/robot/pixel.png differ
diff --git a/Products/CMFPlone/tests/robot/test_controlpanel_site.robot b/Products/CMFPlone/tests/robot/test_controlpanel_site.robot
index 6045727..ae08038 100644
--- a/Products/CMFPlone/tests/robot/test_controlpanel_site.robot
+++ b/Products/CMFPlone/tests/robot/test_controlpanel_site.robot
@@ -6,6 +6,7 @@ Documentation
 
 Resource  plone/app/robotframework/keywords.robot
 Resource  plone/app/robotframework/saucelabs.robot
+Variables  Products/CMFPlone/tests/robot/variables.py
 
 Library  Remote  ${PLONE_URL}/RobotRemote
 
@@ -23,6 +24,12 @@ Scenario: Set Site Title in the Site Control Panel
    When I set the site title to 'My Site'
    Then the site title should be set to 'My Site'
 
+Scenario: Set Site Logo in the Site Control Panel
+  Given a logged-in site administrator
+    and the site control panel
+   When I set a custom logo
+   Then the site logo should be set to the custom logo
+
 Scenario: Enable Dublin Core Metadata in the Site Control Panel
   Given a logged-in site administrator
     and the site control panel
@@ -63,6 +70,11 @@ I set the site title to '${site_title}'
   Click Button  Save
   Wait until page contains  Changes saved
 
+I set a custom logo
+  Choose File  name=form.widgets.site_logo  ${PATH_TO_TEST_FILES}/pixel.png
+  Click Button  Save
+  Wait until page contains  Changes saved
+
 I enable dublin core metadata
   Select Checkbox  form.widgets.exposeDCMetaTags:list
   Click Button  Save
@@ -81,6 +93,10 @@ the site title should be set to '${expected_site_title}'
   ${actual_site_title}=  Get title
   Should be equal  ${actual_site_title}  ${expected_site_title}
 
+the site logo should be set to the custom logo
+  Go To  ${PLONE_URL}
+  Page should contain element  //*[@id="portal-logo"]/img[contains(@src,'@@site-logo/pixel.png')]
+  
 then I can see a sitemap
   Go to  ${PLONE_URL}/sitemap.xml.gz
   # We need a 'Download file' selenium2library keyword to test this:
diff --git a/Products/CMFPlone/tests/robot/variables.py b/Products/CMFPlone/tests/robot/variables.py
new file mode 100644
index 0000000..a32e833
--- /dev/null
+++ b/Products/CMFPlone/tests/robot/variables.py
@@ -0,0 +1,3 @@
+import os
+
+PATH_TO_TEST_FILES = os.path.join(os.path.dirname(__file__))  # noqa


