Repository: plone.app.contenttypes


Branch: refs/heads/master
Date: 2015-08-15T10:54:25+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.app.contenttypes/commit/20f731f4879e92b7f42b75a6e34c057b30def5df

use event_listung for event-collection in new pages

Files changed:
M plone/app/contenttypes/setuphandlers.py

diff --git a/plone/app/contenttypes/setuphandlers.py b/plone/app/contenttypes/setuphandlers.py
index de0cf30..56b7e3a 100644
--- a/plone/app/contenttypes/setuphandlers.py
+++ b/plone/app/contenttypes/setuphandlers.py
@@ -269,21 +269,18 @@ def create_events_topic(portal, target_language):
         #: Sort on the Event start date
         aggregator.sort_on = u'start'
         aggregator.sort_reversed = True
-        #: Query by Type, Review State and Event start date after today
+        #: Query by Type and Review State
         aggregator.query = [
             {'i': 'portal_type',
              'o': 'plone.app.querystring.operation.selection.is',
              'v': ['Event']
              },
-            {'i': 'start',
-             'o': 'plone.app.querystring.operation.date.afterToday',
-             'v': ''
-             },
             {'i': 'review_state',
              'o': 'plone.app.querystring.operation.selection.is',
              'v': ['published']
              },
         ]
+        aggregator.setLayout('event_listing')
         _publish(aggregator)
 
 


