Repository: plone.app.multilingual


Branch: refs/heads/master
Date: 2015-06-18T16:39:54+02:00
Author: Patrick Gerken (do3cc) <do3cc@patrick-gerken.de>
Commit: https://github.com/plone/plone.app.multilingual/commit/b7bf3b10000aaab288b8c19fc7d09b46f257a181

Bind multilingual-selector to navroot

Instead of PloneSite. PloneSite is also a nav root, so
this is a non breaking change.
the languagefolders are nav roots so with this change, one can hide the
language folders in the webserver and the languageselector keeps working.

Files changed:
M CHANGES.rst
M src/plone/app/multilingual/browser/configure.zcml

diff --git a/CHANGES.rst b/CHANGES.rst
index 3758df7..b531dd2 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,7 +4,9 @@ Changelog
 3.0.4 (unreleased)
 ------------------
 
-- Nothing changed yet.
+- Move @@multilingual-selector registration from PloneRoot to Navigation root
+  This allows to hide language folders in nginx and to use different domains.
+  [do3cc]
 
 
 3.0.3 (2015-06-05)
diff --git a/src/plone/app/multilingual/browser/configure.zcml b/src/plone/app/multilingual/browser/configure.zcml
index 14c4e1b..bbf2f8c 100644
--- a/src/plone/app/multilingual/browser/configure.zcml
+++ b/src/plone/app/multilingual/browser/configure.zcml
@@ -135,7 +135,7 @@
   <!-- Selector -->
   <browser:page
       name="multilingual-selector"
-      for="Products.CMFPlone.interfaces.IPloneSiteRoot"
+      for="plone.app.layout.navigation.interfaces.INavigationRoot"
       class=".helper_views.selector_view"
       permission="zope.Public"
       layer="..interfaces.IPloneAppMultilingualInstalled"/>


Repository: plone.app.multilingual


Branch: refs/heads/master
Date: 2015-08-13T14:25:48+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.multilingual/commit/2d202e8369dd30e9ede6137a31640c22a8286a20

Merge remote-tracking branch 'origin/do3cc_navroot_3'

Files changed:
M CHANGES.rst
M src/plone/app/multilingual/browser/configure.zcml

diff --git a/CHANGES.rst b/CHANGES.rst
index 42a8434..a52fa01 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,6 +4,10 @@ Changelog
 3.0.5 (unreleased)
 ------------------
 
+- Move @@multilingual-selector registration from PloneRoot to Navigation root
+  This allows to hide language folders in nginx and to use different domains.
+  [do3cc]
+
 - Update Traditional Chinese translation.
   [l34marr]
 
diff --git a/src/plone/app/multilingual/browser/configure.zcml b/src/plone/app/multilingual/browser/configure.zcml
index 14c4e1b..bbf2f8c 100644
--- a/src/plone/app/multilingual/browser/configure.zcml
+++ b/src/plone/app/multilingual/browser/configure.zcml
@@ -135,7 +135,7 @@
   <!-- Selector -->
   <browser:page
       name="multilingual-selector"
-      for="Products.CMFPlone.interfaces.IPloneSiteRoot"
+      for="plone.app.layout.navigation.interfaces.INavigationRoot"
       class=".helper_views.selector_view"
       permission="zope.Public"
       layer="..interfaces.IPloneAppMultilingualInstalled"/>


