Repository: Products.CMFPlone
Branch: refs/heads/master
Date: 2015-06-05T00:59:23-05:00
Author: vangheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/c16bdb050a538a30fc704e09687902004bb16b89

be more defensive before using properties of a potentially None value

Files changed:
M Products/CMFPlone/browser/syndication/adapters.py

diff --git a/Products/CMFPlone/browser/syndication/adapters.py b/Products/CMFPlone/browser/syndication/adapters.py
index 5eb9482..53b8c77 100644
--- a/Products/CMFPlone/browser/syndication/adapters.py
+++ b/Products/CMFPlone/browser/syndication/adapters.py
@@ -299,8 +299,11 @@ def has_enclosure(self):
 
     @property
     def file_length(self):
-        return self.file.getSize()
+        if self.has_enclosure:
+            return self.file.getSize()
+        return 0
 
     @property
     def file_type(self):
-        return self.file.contentType
+        if self.has_enclosure:
+            return self.file.contentType


