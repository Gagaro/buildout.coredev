Repository: plone.dexterity


Branch: refs/heads/master
Date: 2015-08-13T18:44:49+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.dexterity/commit/65aca6c9607f7c91d6b220fb24159a4dd3ec4f2d

Avoid our own DeprecationWarning about portalTypeToSchemaName.

Files changed:
M CHANGES.rst
M plone/dexterity/fti.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 82eae94..a76670d 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -1,10 +1,12 @@
 Changelog
 =========
 
+
 2.3.4 (unreleased)
 ------------------
 
-- Nothing changed yet.
+- Avoid our own DeprecationWarning about portalTypeToSchemaName.
+  [maurits]
 
 
 2.3.3 (2015-07-29)
diff --git a/plone/dexterity/fti.py b/plone/dexterity/fti.py
index edc97d3..48856a3 100644
--- a/plone/dexterity/fti.py
+++ b/plone/dexterity/fti.py
@@ -8,6 +8,7 @@
 from plone.dexterity.interfaces import IDexterityFTI
 from plone.dexterity.interfaces import IDexterityFTIModificationDescription
 from plone.dexterity.schema import SchemaInvalidatedEvent
+from plone.dexterity.schema import portalTypeToSchemaName
 from plone.supermodel import loadString, loadFile
 from plone.supermodel.model import Model
 from plone.supermodel.utils import syncSchema
@@ -248,7 +249,7 @@ def lookupSchema(self):
         # an unnamed schema if it is the first time it is looked up.
         # See schema.py
 
-        schemaName = utils.portalTypeToSchemaName(self.getId())
+        schemaName = portalTypeToSchemaName(self.getId())
         return getattr(plone.dexterity.schema.generated, schemaName)
 
     def lookupModel(self):
@@ -535,7 +536,7 @@ def ftiModified(object, event):
         if (fti.model_source or fti.model_file) \
            and ('model_source' in mod or 'model_file' in mod):
 
-            schemaName = utils.portalTypeToSchemaName(portal_type)
+            schemaName = portalTypeToSchemaName(portal_type)
             schema = getattr(plone.dexterity.schema.generated, schemaName)
 
             model = fti.lookupModel()


Repository: plone.dexterity


Branch: refs/heads/master
Date: 2015-08-13T18:46:25+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.dexterity/commit/bd7a6a4302a6bb502281e46230bcf0b8b23f47b7

Added classifiers to setup.py.

[ci skip]

Files changed:
M setup.py

diff --git a/setup.py b/setup.py
index 226670f..8a0f27a 100644
--- a/setup.py
+++ b/setup.py
@@ -17,10 +17,14 @@
     description=short_description,
     long_description=long_description,
     # Get more strings from
-    # http://www.python.org/pypi?%3Aaction=list_classifiers
+    # http://pypi.python.org/pypi?%3Aaction=list_classifiers
     classifiers=[
         "Framework :: Plone",
+        "Framework :: Plone :: 4.3",
+        "Framework :: Plone :: 5.0",
         "Programming Language :: Python",
+        "Programming Language :: Python :: 2.6",
+        "Programming Language :: Python :: 2.7",
         "Topic :: Software Development :: Libraries :: Python Modules",
     ],
     keywords='',


