Repository: plone.formwidget.recurrence
Branch: refs/heads/master
Date: 2015-06-03T15:01:51+02:00
Author: Johannes Raggam (thet) <raggam-nl@adm.at>
Commit: https://github.com/plone/plone.formwidget.recurrence/commit/d41d93e28dfa7f23ace1ccebf1a4f8b6ce87813d

Fix translations

Files changed:
M CHANGES.rst
M plone/formwidget/recurrence/browser/i18n.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 2ab4c4e..4bd3bdf 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,7 +4,8 @@ Changelog
 2.0.1 (unreleased)
 ------------------
 
-- Nothing changed yet.
+- Fix translations.
+  [thet]
 
 
 2.0 (2015-03-04)
diff --git a/plone/formwidget/recurrence/browser/i18n.py b/plone/formwidget/recurrence/browser/i18n.py
index 2092bd2..e760c38 100644
--- a/plone/formwidget/recurrence/browser/i18n.py
+++ b/plone/formwidget/recurrence/browser/i18n.py
@@ -2,9 +2,8 @@
 from zope.i18n import translate
 
 
-# = translate(messages['display_unactivate'], context=request),
 def translations(request):
-    return dict(
+    translation_table = dict(
         displayUnactivate=translate(pfr_message(u'display_unactivate'), context=request),
         displayActivate=translate(pfr_message(u'display_activate'), context=request),
         add_rules=translate(pfr_message(u'add_rules'), context=request),
@@ -97,25 +96,25 @@ def translations(request):
             translate(pl_message(u'month_dec_abbr'), context=request)
         ],
         weekdays=[
-            translate(pl_message(u'day_sun'), context=request),
-            translate(pl_message(u'day_mon'), context=request),
-            translate(pl_message(u'day_tue'), context=request),
-            translate(pl_message(u'day_wed'), context=request),
-            translate(pl_message(u'day_thu'), context=request),
-            translate(pl_message(u'day_fri'), context=request),
-            translate(pl_message(u'day_sat'), context=request)
+            translate(pl_message(u'weekday_sun'), context=request),
+            translate(pl_message(u'weekday_mon'), context=request),
+            translate(pl_message(u'weekday_tue'), context=request),
+            translate(pl_message(u'weekday_wed'), context=request),
+            translate(pl_message(u'weekday_thu'), context=request),
+            translate(pl_message(u'weekday_fri'), context=request),
+            translate(pl_message(u'weekday_sat'), context=request)
         ],
         shortWeekdays=[
-            translate(pl_message(u'day_sun_abbr'), context=request),
-            translate(pl_message(u'day_mon_abbe'), context=request),
-            translate(pl_message(u'day_tue_abbr'), context=request),
-            translate(pl_message(u'day_wed_abbr'), context=request),
-            translate(pl_message(u'day_thu_abbr'), context=request),
-            translate(pl_message(u'day_fri_abbr'), context=request),
-            translate(pl_message(u'day_sat_abbr'), context=request)
+            translate(pl_message(u'weekday_sun_abbr'), context=request),
+            translate(pl_message(u'weekday_mon_abbr'), context=request),
+            translate(pl_message(u'weekday_tue_abbr'), context=request),
+            translate(pl_message(u'weekday_wed_abbr'), context=request),
+            translate(pl_message(u'weekday_thu_abbr'), context=request),
+            translate(pl_message(u'weekday_fri_abbr'), context=request),
+            translate(pl_message(u'weekday_sat_abbr'), context=request)
         ],
         longDateFormat=translate(pfr_message(u'long_date_format'), context=request),
-        shortDateFormat=translate(pfr_message(u'date_format_short_datepicker'), context=request),
+        shortDateFormat=translate(pl_message(u'date_format_short_datepicker'), context=request),
         unsupportedFeatures=translate(pfr_message(u'unsupported_features'), context=request),
         noTemplateMatch=translate(pfr_message(u'no_template_match'), context=request),
         multipleDayOfMonth=translate(pfr_message(u'multiple_day_of_month'), context=request),
@@ -138,3 +137,4 @@ def translations(request):
         # a bit wonky here, except is a reserved word
         **{"except": translate(pfr_message(u'except'), context=request)}
     )
+    return translation_table


