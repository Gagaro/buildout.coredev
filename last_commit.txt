Repository: mockup


Branch: refs/heads/master
Date: 2015-07-16T07:45:23+02:00
Author: vangheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/mockup/commit/38f6e63f0c7ca745cef919b5e1768bb56c487a70

give stronger warning with rearrange feature closes https://github.com/plone/mockup/issues/526

Files changed:
M CHANGES.rst
M mockup/patterns/structure/js/views/rearrange.js

diff --git a/CHANGES.rst b/CHANGES.rst
index 10b0ace..5f86a31 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,6 +4,9 @@ Changelog
 2.0.5 (unreleased)
 ------------------
 
+- give stronger warning with rearrange feature, specially on root
+  [vangheem]
+
 - show quick view for items in structure row
   [vangheem]
 
diff --git a/mockup/patterns/structure/js/views/rearrange.js b/mockup/patterns/structure/js/views/rearrange.js
index 19f3515..c6a4095 100644
--- a/mockup/patterns/structure/js/views/rearrange.js
+++ b/mockup/patterns/structure/js/views/rearrange.js
@@ -1,8 +1,9 @@
 define([
   'jquery',
   'underscore',
-  'mockup-ui-url/views/popover'
-], function($, _, PopoverView) {
+  'mockup-ui-url/views/popover',
+  'translate'
+], function($, _, PopoverView, _t) {
   'use strict';
 
   var RearrangeView = PopoverView.extend({
@@ -17,7 +18,7 @@ define([
           '<% }); %>' +
         '</select>' +
         '<p class="help-block">' +
-          '<%- _t("This permanently changes the order of items in this folder. This operation may take a long time depending on the size of the folder.") %>' +
+          '<b><%- _t("This permanently changes the order of items in this folder. This operation may take a long time depending on the size of the folder.") %></b>' +
         '</p>' +
       '</div>' +
       '<div>' + 
@@ -40,6 +41,13 @@ define([
       return this;
     },
     rearrangeButtonClicked: function() {
+      if(this.app.queryHelper.getCurrentPath() === '/'){
+        if(!window.confirm(_t('Sorting the content on the base of the site ' +
+                              'could affect your navigation order. ' +
+                              'Are you certain you want to do this?'))){
+          return;
+        }
+      }
       var data = {
         'rearrange_on': this.$rearrangeOn.val(),
         reversed: false


