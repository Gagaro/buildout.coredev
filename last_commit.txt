Repository: plone.app.discussion
Branch: refs/heads/master
Date: 2015-05-03T08:41:24+02:00
Author: Gil Forcada (gforcada) <gforcada@gnome.org>
Commit: https://github.com/plone/plone.app.discussion/commit/8b883451cafb8423e84e75f5c51f6c17dc3725ad

80 chars

Files changed:
M plone/app/discussion/browser/moderation.py

diff --git a/plone/app/discussion/browser/moderation.py b/plone/app/discussion/browser/moderation.py
index 6a3a9e9..3648924 100644
--- a/plone/app/discussion/browser/moderation.py
+++ b/plone/app/discussion/browser/moderation.py
@@ -118,15 +118,18 @@ def can_delete(self, reply):
 
 
 class DeleteOwnComment(DeleteComment):
-    """Delete an own comment if it has no replies. Following conditions have to be true
-    for a user to be able to delete his comments:
+    """Delete an own comment if it has no replies.
+
+    Following conditions have to be true for a user to be able to delete his
+    comments:
     * "Delete own comments" permission
     * no replies to the comment
     * Owner role directly assigned on the comment object
     """
 
     def could_delete(self, comment=None):
-        """Returns true if the comment could be deleted if it had no replies."""
+        """Returns true if the comment could be deleted if it had no replies.
+        """
         sm = getSecurityManager()
         comment = comment or aq_inner(self.context)
         userid = sm.getUser().getId()


Repository: plone.app.discussion
Branch: refs/heads/master
Date: 2015-05-03T08:41:56+02:00
Author: Gil Forcada (gforcada) <gforcada@gnome.org>
Commit: https://github.com/plone/plone.app.discussion/commit/ce48a9ed463d9d996901f74c52684f27d3ded64f

2 spaces before inline comment

Files changed:
M plone/app/discussion/tests/test_catalog.py
M plone/app/discussion/tests/test_comment.py
M plone/app/discussion/tests/test_comments_viewlet.py
M plone/app/discussion/tests/test_contentrules.py
M plone/app/discussion/tests/test_controlpanel.py
M plone/app/discussion/tests/test_conversation.py
M plone/app/discussion/tests/test_events.py
M plone/app/discussion/tests/test_functional.py
M plone/app/discussion/tests/test_indexers.py
M plone/app/discussion/tests/test_moderation_view.py
M plone/app/discussion/tests/test_notifications.py
M plone/app/discussion/tests/test_workflow.py

diff --git a/plone/app/discussion/tests/test_catalog.py b/plone/app/discussion/tests/test_catalog.py
index 771e833..f549110 100644
--- a/plone/app/discussion/tests/test_catalog.py
+++ b/plone/app/discussion/tests/test_catalog.py
@@ -3,7 +3,7 @@
 from Products.CMFCore.utils import getToolByName
 from datetime import datetime
 from plone.app.discussion.interfaces import IConversation
-from plone.app.discussion.testing import PLONE_APP_DISCUSSION_INTEGRATION_TESTING # noqa
+from plone.app.discussion.testing import PLONE_APP_DISCUSSION_INTEGRATION_TESTING  # noqa
 from plone.app.testing import setRoles
 from plone.app.testing import TEST_USER_ID
 from zope.annotation.interfaces import IAnnotations
diff --git a/plone/app/discussion/tests/test_comment.py b/plone/app/discussion/tests/test_comment.py
index 2674ed8..127197e 100644
--- a/plone/app/discussion/tests/test_comment.py
+++ b/plone/app/discussion/tests/test_comment.py
@@ -4,7 +4,7 @@
 from plone.app.discussion.interfaces import IComment
 from plone.app.discussion.interfaces import IConversation
 from plone.app.discussion.interfaces import IReplies
-from plone.app.discussion.testing import PLONE_APP_DISCUSSION_INTEGRATION_TESTING # noqa
+from plone.app.discussion.testing import PLONE_APP_DISCUSSION_INTEGRATION_TESTING  # noqa
 from plone.app.testing import setRoles
 from plone.app.testing import TEST_USER_ID
 from zope.component import createObject
diff --git a/plone/app/discussion/tests/test_comments_viewlet.py b/plone/app/discussion/tests/test_comments_viewlet.py
index 5632cc6..82a9de3 100644
--- a/plone/app/discussion/tests/test_comments_viewlet.py
+++ b/plone/app/discussion/tests/test_comments_viewlet.py
@@ -10,7 +10,7 @@
 from plone.app.discussion.browser.comments import CommentsViewlet
 from plone.app.discussion.interfaces import IConversation
 from plone.app.discussion.interfaces import IDiscussionSettings
-from plone.app.discussion.testing import PLONE_APP_DISCUSSION_INTEGRATION_TESTING # noqa
+from plone.app.discussion.testing import PLONE_APP_DISCUSSION_INTEGRATION_TESTING  # noqa
 from plone.app.testing import login
 from plone.app.testing import logout
 from plone.app.testing import setRoles
diff --git a/plone/app/discussion/tests/test_contentrules.py b/plone/app/discussion/tests/test_contentrules.py
index e7326ca..5498b3f 100644
--- a/plone/app/discussion/tests/test_contentrules.py
+++ b/plone/app/discussion/tests/test_contentrules.py
@@ -4,7 +4,7 @@
 from plone.app.discussion.interfaces import IConversation, IReplies
 from plone.app.discussion.interfaces import IReplyAddedEvent
 from plone.app.discussion.interfaces import IReplyRemovedEvent
-from plone.app.discussion.testing import PLONE_APP_DISCUSSION_INTEGRATION_TESTING # noqa
+from plone.app.discussion.testing import PLONE_APP_DISCUSSION_INTEGRATION_TESTING  # noqa
 from plone.app.testing import setRoles
 from plone.app.testing import TEST_USER_ID
 from plone.contentrules.rule.interfaces import IRuleEventType
diff --git a/plone/app/discussion/tests/test_controlpanel.py b/plone/app/discussion/tests/test_controlpanel.py
index 24b6e03..4308e73 100644
--- a/plone/app/discussion/tests/test_controlpanel.py
+++ b/plone/app/discussion/tests/test_controlpanel.py
@@ -1,6 +1,6 @@
 # -*- coding: utf-8 -*-
 from plone.app.discussion.interfaces import IDiscussionSettings
-from plone.app.discussion.testing import PLONE_APP_DISCUSSION_INTEGRATION_TESTING # noqa
+from plone.app.discussion.testing import PLONE_APP_DISCUSSION_INTEGRATION_TESTING  # noqa
 from plone.app.testing import setRoles
 from plone.app.testing import TEST_USER_ID
 from plone.registry import Registry
diff --git a/plone/app/discussion/tests/test_conversation.py b/plone/app/discussion/tests/test_conversation.py
index c99915b..ff8a6fc 100644
--- a/plone/app/discussion/tests/test_conversation.py
+++ b/plone/app/discussion/tests/test_conversation.py
@@ -8,7 +8,7 @@
 from plone.app.discussion.interfaces import IConversation
 from plone.app.discussion.interfaces import IDiscussionSettings
 from plone.app.discussion.interfaces import IReplies
-from plone.app.discussion.testing import PLONE_APP_DISCUSSION_INTEGRATION_TESTING # noqa
+from plone.app.discussion.testing import PLONE_APP_DISCUSSION_INTEGRATION_TESTING  # noqa
 from plone.app.testing import setRoles
 from plone.app.testing import TEST_USER_ID
 from plone.app.vocabularies.types import BAD_TYPES
diff --git a/plone/app/discussion/tests/test_events.py b/plone/app/discussion/tests/test_events.py
index ac65248..e286f5a 100644
--- a/plone/app/discussion/tests/test_events.py
+++ b/plone/app/discussion/tests/test_events.py
@@ -2,7 +2,7 @@
 from Zope2.App import zcml
 from plone.app.discussion.interfaces import IConversation
 from plone.app.discussion.interfaces import IReplies
-from plone.app.discussion.testing import PLONE_APP_DISCUSSION_INTEGRATION_TESTING # noqa
+from plone.app.discussion.testing import PLONE_APP_DISCUSSION_INTEGRATION_TESTING  # noqa
 from plone.app.testing import setRoles
 from plone.app.testing import TEST_USER_ID
 from zope.component import createObject
diff --git a/plone/app/discussion/tests/test_functional.py b/plone/app/discussion/tests/test_functional.py
index 7eb6836..1467a3f 100644
--- a/plone/app/discussion/tests/test_functional.py
+++ b/plone/app/discussion/tests/test_functional.py
@@ -3,7 +3,7 @@
 
    These test are only triggered when Plone 4 (and plone.testing) is installed.
 """
-from plone.app.discussion.testing import PLONE_APP_DISCUSSION_FUNCTIONAL_TESTING # noqa
+from plone.app.discussion.testing import PLONE_APP_DISCUSSION_FUNCTIONAL_TESTING  # noqa
 from plone.testing import layered
 
 import doctest
diff --git a/plone/app/discussion/tests/test_indexers.py b/plone/app/discussion/tests/test_indexers.py
index d21bb42..0c599f0 100644
--- a/plone/app/discussion/tests/test_indexers.py
+++ b/plone/app/discussion/tests/test_indexers.py
@@ -4,7 +4,7 @@
 from datetime import datetime
 from plone.app.discussion import catalog
 from plone.app.discussion.interfaces import IConversation
-from plone.app.discussion.testing import PLONE_APP_DISCUSSION_INTEGRATION_TESTING # noqa
+from plone.app.discussion.testing import PLONE_APP_DISCUSSION_INTEGRATION_TESTING  # noqa
 from plone.app.testing import setRoles
 from plone.app.testing import TEST_USER_ID
 from plone.indexer.delegate import DelegatingIndexerFactory
diff --git a/plone/app/discussion/tests/test_moderation_view.py b/plone/app/discussion/tests/test_moderation_view.py
index 0d38bf5..aa5ace2 100644
--- a/plone/app/discussion/tests/test_moderation_view.py
+++ b/plone/app/discussion/tests/test_moderation_view.py
@@ -3,7 +3,7 @@
 from plone.app.discussion.browser.moderation import BulkActionsView
 from plone.app.discussion.browser.moderation import View
 from plone.app.discussion.interfaces import IConversation
-from plone.app.discussion.testing import PLONE_APP_DISCUSSION_INTEGRATION_TESTING # noqa
+from plone.app.discussion.testing import PLONE_APP_DISCUSSION_INTEGRATION_TESTING  # noqa
 from plone.app.testing import setRoles
 from plone.app.testing import TEST_USER_ID
 from zope.component import createObject
diff --git a/plone/app/discussion/tests/test_notifications.py b/plone/app/discussion/tests/test_notifications.py
index bcbd516..fc0571b 100644
--- a/plone/app/discussion/tests/test_notifications.py
+++ b/plone/app/discussion/tests/test_notifications.py
@@ -4,7 +4,7 @@
 from Products.CMFPlone.tests.utils import MockMailHost
 from Products.MailHost.interfaces import IMailHost
 from plone.app.discussion.interfaces import IConversation
-from plone.app.discussion.testing import PLONE_APP_DISCUSSION_INTEGRATION_TESTING # noqa
+from plone.app.discussion.testing import PLONE_APP_DISCUSSION_INTEGRATION_TESTING  # noqa
 from plone.app.testing import TEST_USER_ID
 from plone.app.testing import setRoles
 from plone.registry.interfaces import IRegistry
diff --git a/plone/app/discussion/tests/test_workflow.py b/plone/app/discussion/tests/test_workflow.py
index 3659ccb..2c66cb7 100644
--- a/plone/app/discussion/tests/test_workflow.py
+++ b/plone/app/discussion/tests/test_workflow.py
@@ -6,7 +6,7 @@
 from Products.CMFCore.utils import _checkPermission as checkPerm
 from plone.app.discussion.interfaces import IConversation
 from plone.app.discussion.interfaces import IDiscussionLayer
-from plone.app.discussion.testing import PLONE_APP_DISCUSSION_INTEGRATION_TESTING # noqa
+from plone.app.discussion.testing import PLONE_APP_DISCUSSION_INTEGRATION_TESTING  # noqa
 from plone.app.testing import login
 from plone.app.testing import logout
 from plone.app.testing import setRoles


Repository: plone.app.discussion
Branch: refs/heads/master
Date: 2015-05-03T08:42:07+02:00
Author: Gil Forcada (gforcada) <gforcada@gnome.org>
Commit: https://github.com/plone/plone.app.discussion/commit/754e7123729eb11ebeb20e0be674faaca3d5d1e5

Typo

Files changed:
M plone/app/discussion/tests/test_comments_viewlet.py

diff --git a/plone/app/discussion/tests/test_comments_viewlet.py b/plone/app/discussion/tests/test_comments_viewlet.py
index 82a9de3..ad3e08d 100644
--- a/plone/app/discussion/tests/test_comments_viewlet.py
+++ b/plone/app/discussion/tests/test_comments_viewlet.py
@@ -185,7 +185,7 @@ def make_request(form={}):
         self.assertEquals(comment.text, u"foobar")
 
         comments = IConversation(commentForm.context).getComments()
-        comments = [comment for comment in comments]  # consume itertor
+        comments = [comment for comment in comments]  # consume iterator
         self.assertEqual(len(comments), 1)
 
         for comment in comments:


Repository: plone.app.discussion
Branch: refs/heads/master
Date: 2015-05-03T08:42:52+02:00
Author: Gil Forcada (gforcada) <gforcada@gnome.org>
Commit: https://github.com/plone/plone.app.discussion/commit/8410b7525fea00a9bf7780791ae7cfbcd3c0c39a

Do not redefine comment

Files changed:
M plone/app/discussion/tests/test_comments_viewlet.py

diff --git a/plone/app/discussion/tests/test_comments_viewlet.py b/plone/app/discussion/tests/test_comments_viewlet.py
index ad3e08d..ef4d72b 100644
--- a/plone/app/discussion/tests/test_comments_viewlet.py
+++ b/plone/app/discussion/tests/test_comments_viewlet.py
@@ -185,7 +185,7 @@ def make_request(form={}):
         self.assertEquals(comment.text, u"foobar")
 
         comments = IConversation(commentForm.context).getComments()
-        comments = [comment for comment in comments]  # consume iterator
+        comments = [c for c in comments]  # consume iterator
         self.assertEqual(len(comments), 1)
 
         for comment in comments:


Repository: plone.app.discussion
Branch: refs/heads/master
Date: 2015-05-03T08:43:22+02:00
Author: Gil Forcada (gforcada) <gforcada@gnome.org>
Commit: https://github.com/plone/plone.app.discussion/commit/dcb2a5f51b4e887b029b5940d0ccbf4e17053f65

2 spaces between top level classes

Files changed:
M plone/app/discussion/tests/test_events.py

diff --git a/plone/app/discussion/tests/test_events.py b/plone/app/discussion/tests/test_events.py
index e286f5a..ae942e0 100644
--- a/plone/app/discussion/tests/test_events.py
+++ b/plone/app/discussion/tests/test_events.py
@@ -104,6 +104,7 @@ def test_removedEvent(self):
         del conversation[cid]
         self.assertTrue(self.registry.commentRemoved)
 
+
 class RepliesEventsTest(unittest.TestCase):
     """ Test custom replies events
     """


