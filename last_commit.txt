Repository: plone.app.controlpanel
Branch: refs/heads/master
Date: 2015-06-01T17:34:10+02:00
Author: Timo Stollenwerk (tisto) <tisto@plone.org>
Commit: https://github.com/plone/plone.app.controlpanel/commit/7032df6a9fb20732a545c98ed7ad1cf98035aa00

Remove RAM/skins control panel.

Files changed:
M CHANGES.rst
M plone/app/controlpanel/configure.zcml
M plone/app/controlpanel/events.py
M setup.py
D plone/app/controlpanel/control-panel.pt
D plone/app/controlpanel/ram.pt
D plone/app/controlpanel/ram.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 8c05ae5..786abb2 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,7 +4,11 @@ Changelog
 3.0.3 (unreleased)
 ------------------
 
-- Nothing changed yet.
+- Remove RAM control panel (has been moved to p.a.caching).
+  [timo]
+
+- Remove skins control panel (has been moved to p.a.theming).
+  [timo]
 
 
 3.0.2 (2015-05-04)
@@ -25,7 +29,7 @@ Changelog
 3.0.1 (2015-03-26)
 ------------------
 
-- Disable language control panel because it has been moved to 
+- Disable language control panel because it has been moved to
   z3c.form/plone.app.registry.
   [bloodbare]
 
diff --git a/plone/app/controlpanel/configure.zcml b/plone/app/controlpanel/configure.zcml
index a77c08e..4274453 100644
--- a/plone/app/controlpanel/configure.zcml
+++ b/plone/app/controlpanel/configure.zcml
@@ -7,40 +7,6 @@
 
   <include file="permissions.zcml" />
 
-  <adapter factory=".ram.RAMCacheControlPanelAdapter" />
-
-  <adapter factory=".skins.SkinsControlPanelAdapter" />
-
-<!--
-  <browser:page
-      name="filter-controlpanel"
-      for="Products.CMFPlone.interfaces.IPloneSiteRoot"
-      class=".filter.FilterControlPanel"
-      permission="plone.app.controlpanel.Filtering"
-      />
- -->
-
-  <!--<browser:page
-      name="language-controlpanel"
-      for="Products.CMFPlone.interfaces.IPloneSiteRoot"
-      class=".language.LanguageControlPanel"
-      permission="plone.app.controlpanel.Language"
-      />-->
-
-  <browser:page
-      name="ramcache-controlpanel"
-      for="Products.CMFPlone.interfaces.IPloneSiteRoot"
-      class=".ram.RAMCacheControlPanel"
-      permission="cmf.ManagePortal"
-      />
-
-  <browser:page
-      name="skins-controlpanel"
-      for="Products.CMFPlone.interfaces.IPloneSiteRoot"
-      class=".skins.SkinsControlPanel"
-      permission="plone.app.controlpanel.Themes"
-      />
-
   <view
       type="zope.publisher.interfaces.browser.IBrowserRequest"
       for="zope.schema.interfaces.ITuple
diff --git a/plone/app/controlpanel/control-panel.pt b/plone/app/controlpanel/control-panel.pt
deleted file mode 100644
index 90eefe8..0000000
--- a/plone/app/controlpanel/control-panel.pt
+++ /dev/null
@@ -1,199 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml"
-      xmlns:metal="http://xml.zope.org/namespaces/metal"
-      xmlns:tal="http://xml.zope.org/namespaces/tal"
-      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
-      xml:lang="en" lang="en"
-      tal:omit-tag=""
-      metal:define-macro="controlpanel"
-      i18n:domain="plone">
-
-<metal:block use-macro="context/prefs_main_template/macros/master">
-
-<body>
-
-<metal:main fill-slot="prefs_configlet_main">
-
-    <metal:form metal:define-macro="form">
-
-        <metal:block define-macro="header">
-
-            <div class="portalMessage info"
-                 tal:define="status view/status"
-                 tal:condition="status"
-                 tal:attributes="class python: view.errors and 'portalMessage error' or 'portalMessage info'">
-                <strong i18n:translate="">
-                    Info
-                </strong>
-                <span tal:replace="view/status" />
-            </div>
-        </metal:block>
-
-        <h1 class="documentFirstHeading"
-            i18n:translate=""
-            tal:condition="view/label"
-            tal:content="view/label"
-            metal:define-slot="heading">
-            Do something
-        </h1>
-
-        <div class="documentDescription" i18n:translate=""
-           tal:condition="view/description"
-           tal:content="view/description">
-            Description
-        </div>
-
-        <div id="content-core">
-
-            <form action="."
-                  metal:define-macro="master"
-                  tal:define="is_fieldsets view/is_fieldsets"
-                  tal:attributes="action request/URL;
-                                  class python: is_fieldsets and 'edit-form enableFormTabbing enableUnloadProtection' or default"
-                  method="post"
-                  class="edit-form enableUnloadProtection"
-                  enctype="multipart/form-data"
-                  id="zc.page.browser_form">
-
-                <input type="hidden"
-                       name="fieldset.current"
-                       value=""
-                       tal:attributes="value request/fieldset.current | string:" />
-
-                <div metal:define-slot="extra_info" tal:replace="nothing">
-                </div>
-
-                <fieldset tal:condition="not: is_fieldsets">
-                    <legend tal:define="form_name view/form_name|nothing"
-                            tal:condition="form_name"
-                            tal:content="form_name"
-                            i18n:translate="">Form name</legend>
-                    <tal:block tal:repeat="widget view/widgets">
-
-                        <div class="field"
-                             tal:define="description widget/hint;
-                                         error widget/error"
-                             tal:attributes="class python:'field'+(error and ' error' or '')">
-
-                            <label tal:attributes="for widget/name">
-                              <span i18n:translate="" tal:replace="widget/label">
-                                  label
-                              </span>
-
-                              <span class="fieldRequired"
-                                    title="Required"
-                                    i18n:attributes="title title_required;"
-                                    i18n:translate="label_required"
-                                    tal:condition="widget/required">
-                                  (Required)
-                              </span>
-
-                              <span class="formHelp"
-                                   i18n:translate=""
-                                   tal:content="description"
-                                   tal:condition="description">
-                                  field description
-                              </span>
-                            </label>
-
-                            <div tal:condition="error"
-                                 tal:content="structure error">
-                                The Error
-                            </div>
-
-                            <div class="widget" tal:content="structure widget">
-                                <input type="text" />
-                            </div>
-                        </div>
-
-                    </tal:block>
-
-                </fieldset>
-
-                <fieldset tal:attributes="id python:'fieldset-%s' % fieldset.id"
-                          tal:condition="is_fieldsets"
-                          tal:repeat="fieldset view/form_fields/fieldsets">
-                    <legend tal:define="form_name fieldset/label"
-                            tal:condition="form_name"
-                            tal:attributes="id python:'fieldsetlegend-%s' % fieldset.id"
-                            tal:content="form_name"
-                            i18n:translate="">Form name</legend>
-
-                    <p i18n:translate=""
-                       tal:condition="fieldset/description"
-                       tal:content="fieldset/description">
-                        Description
-                    </p>
-
-                    <tal:block tal:repeat="widget fieldset/widgets">
-
-                        <div class="field"
-                             tal:define="description widget/hint;
-                                         error widget/error"
-                             tal:attributes="class python:'field'+(error and ' error' or '')">
-
-                            <label tal:attributes="for widget/associateLabelWithInputControl|name"
-                                   tal:define="name widget/name">
-                                <span tal:replace="widget/label"
-                                      i18n:translate="">Label</span>
-
-                                <span class="fieldRequired"
-                                      title="Required"
-                                      i18n:attributes="title title_required;"
-                                      i18n:translate="label_required"
-                                      tal:condition="widget/required">
-                                    (Required)
-                                </span>
-
-                                <span class="formHelp"
-                                     i18n:translate=""
-                                     tal:content="description"
-                                     tal:condition="description">
-                                    field description
-                                </span>
-                            </label>
-
-                            <div tal:condition="error"
-                                 tal:content="structure error">
-                                The Error
-                            </div>
-
-                            <div class="widget" tal:content="structure widget">
-                                <input type="text" />
-                            </div>
-                        </div>
-
-                    </tal:block>
-
-                </fieldset>
-
-                <metal:block define-slot="above_buttons" />
-
-                <div class="visualClear"><!-- --></div>
-
-                <div id="actionsView" class="formControls">
-                    <span class="actionButtons"
-                          tal:condition="view/availableActions"
-                          metal:define-slot="bottom_buttons">
-                        <input tal:repeat="action view/actions"
-                               tal:replace="structure action/render" />
-                    </span>
-                </div>
-
-                <input tal:replace="structure context/@@authenticator/authenticator" />
-
-            </form>
-
-            <script type="text/javascript"
-                tal:define="extra_script view/extra_script | nothing"
-                tal:condition="extra_script"
-                tal:content="structure extra_script">
-            </script>
-        </div>
-
-    </metal:form>
-
-</metal:main>
-</body>
-
-</metal:block>
-</html>
diff --git a/plone/app/controlpanel/events.py b/plone/app/controlpanel/events.py
index caab88d..3cfcfb0 100644
--- a/plone/app/controlpanel/events.py
+++ b/plone/app/controlpanel/events.py
@@ -5,6 +5,7 @@
 
 from plone.app.controlpanel.interfaces import IConfigurationChangedEvent
 
+
 class ConfigurationChangedEvent(object):
     implements(IConfigurationChangedEvent)
 
diff --git a/plone/app/controlpanel/ram.pt b/plone/app/controlpanel/ram.pt
deleted file mode 100644
index 432d7fe..0000000
--- a/plone/app/controlpanel/ram.pt
+++ /dev/null
@@ -1,64 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml"
-      xmlns:metal="http://xml.zope.org/namespaces/metal"
-      xmlns:tal="http://xml.zope.org/namespaces/tal"
-      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
-      xml:lang="en" lang="en"
-      metal:use-macro="view/base_template/macros/controlpanel"
-      i18n:domain="plone">
-
-<body>
-
-<div metal:fill-slot="extra_info">
-
-        <fieldset>
-            <legend i18n:translate="heading_ramcache_stats">
-                RAM cache statistics
-            </legend>
-
-            <table tal:define="stats view/getStatistics"
-                   class="listing" summary="RAM cache statistics"
-                   cellpadding="2" cellspacing="0"
-                   i18n:attributes="summary heading_ramcache_stats;">
-              <thead>
-                <th i18n:translate="label_cache_key">Key</th>
-                <th i18n:translate="label_cache_hits">Hits</th>
-                <th i18n:translate="label_cache_misses">Misses</th>
-                <th i18n:translate="label_cache_size_bytes">Size (bytes)</th>
-                <th i18n:translate="label_cache_entries">Entries</th>
-              </thead>
-              <tbody>
-                <tr tal:repeat="data stats">
-                  <td><span tal:content="data/path">&nbsp;</span></td>
-                  <td><span tal:content="data/hits">&nbsp;</span></td>
-                  <td><span tal:content="data/misses">&nbsp;</span></td>
-                  <td><span tal:content="data/size">&nbsp;</span></td>
-                  <td><span tal:content="data/entries">&nbsp;</span></td>
-                </tr>
-              </tbody>
-            </table>
-
-            <div class="formControls">
-                <span class="actionButtons">
-                    <input type="submit"
-                           id="form.actions.clearall"
-                           name="form.actions.clearall"
-                           value="Clear cache"
-                           i18n:attributes="value"
-                           class="context" />
-
-                </span>
-            </div>
-
-        </fieldset>
-
-</div>
-
-<div metal:fill-slot="bottom_buttons">
-
-    <input tal:repeat="action view/restricted_actions"
-           tal:replace="structure action/render" />
-
-</div>
-
-</body>
-</html>
diff --git a/plone/app/controlpanel/ram.py b/plone/app/controlpanel/ram.py
deleted file mode 100644
index df71702..0000000
--- a/plone/app/controlpanel/ram.py
+++ /dev/null
@@ -1,116 +0,0 @@
-from plone.app.form.validators import null_validator
-
-from zope.interface import Interface
-from zope.component import adapts
-from zope.component import getMultiAdapter
-from zope.component import getUtility
-from zope.formlib import form
-from zope.interface import implements
-from zope.ramcache.interfaces.ram import IRAMCache
-from zope.schema import Int
-
-from Acquisition import aq_inner
-
-from Products.CMFPlone import PloneMessageFactory as _
-from Products.CMFPlone.interfaces import IPloneSiteRoot
-from Products.Five.browser.pagetemplatefile import ZopeTwoPageTemplateFile
-from Products.statusmessages.interfaces import IStatusMessage
-
-from plone.app.controlpanel.form import ControlPanelForm
-
-from plone.protect import CheckAuthenticator
-
-
-class IRAMCacheSchema(Interface):
-
-    maxEntries = Int(title=_(u'A maximum number of cached values.'),
-                     default=1000,
-                     required=True)
-
-    maxAge = Int(title=_(u'Maximum age for cached values in seconds.'),
-                 default=3600,
-                 required=True)
-
-    cleanupInterval = Int(title=_(u"An interval between cache cleanups "
-                                   "in seconds."),
-                 default=300,
-                 required=True)
-
-
-class RAMCacheControlPanelAdapter(object):
-    adapts(IPloneSiteRoot)
-    implements(IRAMCacheSchema)
-
-    def __init__(self, context):
-        self.context = context
-        self.encoding = 'utf-8'
-
-    def get_max_entries(self):
-        return getUtility(IRAMCache).maxEntries
-
-    def set_max_entries(self, value):
-        getUtility(IRAMCache).maxEntries = value
-
-    maxEntries = property(get_max_entries, set_max_entries)
-
-    def get_max_age(self):
-        return getUtility(IRAMCache).maxAge
-
-    def set_max_age(self, value):
-        getUtility(IRAMCache).maxAge = value
-
-    maxAge = property(get_max_age, set_max_age)
-
-    def get_cleanup_intervall(self):
-        return getUtility(IRAMCache).cleanupInterval
-
-    def set_cleanup_intervall(self, value):
-        getUtility(IRAMCache).cleanupInterval = value
-
-    cleanupInterval = property(get_cleanup_intervall, set_cleanup_intervall)
-
-
-class RAMCacheControlPanel(ControlPanelForm):
-
-    base_template = ControlPanelForm.template
-    template = ZopeTwoPageTemplateFile('ram.pt')
-
-    form_fields = form.FormFields(IRAMCacheSchema)
-
-    label = _("RAM Cache Settings")
-    description = None
-    form_name = _("RAM Cache Settings")
-
-    def getStatistics(self):
-        return getUtility(IRAMCache).getStatistics()
-
-    def restricted_actions(self):
-        return [a for a in self.actions.actions
-                  if a.__name__ in ('form.actions.save', 'form.actions.cancel')]
-
-    @form.action(_(u'Clear cache'), validator=null_validator, name=u'clearall')
-    def handle_clearall_action(self, action, data):
-        CheckAuthenticator(self.request)
-        getUtility(IRAMCache).invalidateAll()
-        self.status = _(u'Cleared the cache.')
-
-    @form.action(_(u'label_save', default=u'Save'), name=u'save')
-    def handle_edit_action(self, action, data):
-        CheckAuthenticator(self.request)
-        if form.applyChanges(self.context, self.form_fields, data,
-                             self.adapters):
-            self.status = _("Changes saved.")
-            self._on_save(data)
-        else:
-            self.status = _("No changes made.")
-
-    @form.action(_(u'label_cancel', default=u'Cancel'),
-                 validator=null_validator,
-                 name=u'cancel')
-    def handle_cancel_action(self, action, data):
-        IStatusMessage(self.request).addStatusMessage(_("Changes canceled."),
-                                                      type="info")
-        url = getMultiAdapter((self.context, self.request),
-                              name='absolute_url')()
-        self.request.response.redirect(url + '/plone_control_panel')
-        return ''
diff --git a/setup.py b/setup.py
index c217345..91121a0 100644
--- a/setup.py
+++ b/setup.py
@@ -23,7 +23,7 @@
       url='http://pypi.python.org/pypi/plone.app.controlpanel',
       license='GPL version 2',
       packages=find_packages(exclude=['ez_setup']),
-      namespace_packages = ['plone', 'plone.app'],
+      namespace_packages=['plone', 'plone.app'],
       include_package_data=True,
       zip_safe=False,
       install_requires=[


Repository: plone.app.controlpanel
Branch: refs/heads/master
Date: 2015-06-01T21:24:20+02:00
Author: Timo Stollenwerk (tisto) <tisto@plone.org>
Commit: https://github.com/plone/plone.app.controlpanel/commit/68c8c4a563927b95c941fbf531cfc296892360ff

Merge pull request #51 from plone/tisto-cleanup

Remove RAM/skins control panel.

Files changed:
M CHANGES.rst
M plone/app/controlpanel/configure.zcml
M plone/app/controlpanel/events.py
M setup.py
D plone/app/controlpanel/control-panel.pt
D plone/app/controlpanel/ram.pt
D plone/app/controlpanel/ram.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 8c05ae5..786abb2 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,7 +4,11 @@ Changelog
 3.0.3 (unreleased)
 ------------------
 
-- Nothing changed yet.
+- Remove RAM control panel (has been moved to p.a.caching).
+  [timo]
+
+- Remove skins control panel (has been moved to p.a.theming).
+  [timo]
 
 
 3.0.2 (2015-05-04)
@@ -25,7 +29,7 @@ Changelog
 3.0.1 (2015-03-26)
 ------------------
 
-- Disable language control panel because it has been moved to 
+- Disable language control panel because it has been moved to
   z3c.form/plone.app.registry.
   [bloodbare]
 
diff --git a/plone/app/controlpanel/configure.zcml b/plone/app/controlpanel/configure.zcml
index a77c08e..4274453 100644
--- a/plone/app/controlpanel/configure.zcml
+++ b/plone/app/controlpanel/configure.zcml
@@ -7,40 +7,6 @@
 
   <include file="permissions.zcml" />
 
-  <adapter factory=".ram.RAMCacheControlPanelAdapter" />
-
-  <adapter factory=".skins.SkinsControlPanelAdapter" />
-
-<!--
-  <browser:page
-      name="filter-controlpanel"
-      for="Products.CMFPlone.interfaces.IPloneSiteRoot"
-      class=".filter.FilterControlPanel"
-      permission="plone.app.controlpanel.Filtering"
-      />
- -->
-
-  <!--<browser:page
-      name="language-controlpanel"
-      for="Products.CMFPlone.interfaces.IPloneSiteRoot"
-      class=".language.LanguageControlPanel"
-      permission="plone.app.controlpanel.Language"
-      />-->
-
-  <browser:page
-      name="ramcache-controlpanel"
-      for="Products.CMFPlone.interfaces.IPloneSiteRoot"
-      class=".ram.RAMCacheControlPanel"
-      permission="cmf.ManagePortal"
-      />
-
-  <browser:page
-      name="skins-controlpanel"
-      for="Products.CMFPlone.interfaces.IPloneSiteRoot"
-      class=".skins.SkinsControlPanel"
-      permission="plone.app.controlpanel.Themes"
-      />
-
   <view
       type="zope.publisher.interfaces.browser.IBrowserRequest"
       for="zope.schema.interfaces.ITuple
diff --git a/plone/app/controlpanel/control-panel.pt b/plone/app/controlpanel/control-panel.pt
deleted file mode 100644
index 90eefe8..0000000
--- a/plone/app/controlpanel/control-panel.pt
+++ /dev/null
@@ -1,199 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml"
-      xmlns:metal="http://xml.zope.org/namespaces/metal"
-      xmlns:tal="http://xml.zope.org/namespaces/tal"
-      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
-      xml:lang="en" lang="en"
-      tal:omit-tag=""
-      metal:define-macro="controlpanel"
-      i18n:domain="plone">
-
-<metal:block use-macro="context/prefs_main_template/macros/master">
-
-<body>
-
-<metal:main fill-slot="prefs_configlet_main">
-
-    <metal:form metal:define-macro="form">
-
-        <metal:block define-macro="header">
-
-            <div class="portalMessage info"
-                 tal:define="status view/status"
-                 tal:condition="status"
-                 tal:attributes="class python: view.errors and 'portalMessage error' or 'portalMessage info'">
-                <strong i18n:translate="">
-                    Info
-                </strong>
-                <span tal:replace="view/status" />
-            </div>
-        </metal:block>
-
-        <h1 class="documentFirstHeading"
-            i18n:translate=""
-            tal:condition="view/label"
-            tal:content="view/label"
-            metal:define-slot="heading">
-            Do something
-        </h1>
-
-        <div class="documentDescription" i18n:translate=""
-           tal:condition="view/description"
-           tal:content="view/description">
-            Description
-        </div>
-
-        <div id="content-core">
-
-            <form action="."
-                  metal:define-macro="master"
-                  tal:define="is_fieldsets view/is_fieldsets"
-                  tal:attributes="action request/URL;
-                                  class python: is_fieldsets and 'edit-form enableFormTabbing enableUnloadProtection' or default"
-                  method="post"
-                  class="edit-form enableUnloadProtection"
-                  enctype="multipart/form-data"
-                  id="zc.page.browser_form">
-
-                <input type="hidden"
-                       name="fieldset.current"
-                       value=""
-                       tal:attributes="value request/fieldset.current | string:" />
-
-                <div metal:define-slot="extra_info" tal:replace="nothing">
-                </div>
-
-                <fieldset tal:condition="not: is_fieldsets">
-                    <legend tal:define="form_name view/form_name|nothing"
-                            tal:condition="form_name"
-                            tal:content="form_name"
-                            i18n:translate="">Form name</legend>
-                    <tal:block tal:repeat="widget view/widgets">
-
-                        <div class="field"
-                             tal:define="description widget/hint;
-                                         error widget/error"
-                             tal:attributes="class python:'field'+(error and ' error' or '')">
-
-                            <label tal:attributes="for widget/name">
-                              <span i18n:translate="" tal:replace="widget/label">
-                                  label
-                              </span>
-
-                              <span class="fieldRequired"
-                                    title="Required"
-                                    i18n:attributes="title title_required;"
-                                    i18n:translate="label_required"
-                                    tal:condition="widget/required">
-                                  (Required)
-                              </span>
-
-                              <span class="formHelp"
-                                   i18n:translate=""
-                                   tal:content="description"
-                                   tal:condition="description">
-                                  field description
-                              </span>
-                            </label>
-
-                            <div tal:condition="error"
-                                 tal:content="structure error">
-                                The Error
-                            </div>
-
-                            <div class="widget" tal:content="structure widget">
-                                <input type="text" />
-                            </div>
-                        </div>
-
-                    </tal:block>
-
-                </fieldset>
-
-                <fieldset tal:attributes="id python:'fieldset-%s' % fieldset.id"
-                          tal:condition="is_fieldsets"
-                          tal:repeat="fieldset view/form_fields/fieldsets">
-                    <legend tal:define="form_name fieldset/label"
-                            tal:condition="form_name"
-                            tal:attributes="id python:'fieldsetlegend-%s' % fieldset.id"
-                            tal:content="form_name"
-                            i18n:translate="">Form name</legend>
-
-                    <p i18n:translate=""
-                       tal:condition="fieldset/description"
-                       tal:content="fieldset/description">
-                        Description
-                    </p>
-
-                    <tal:block tal:repeat="widget fieldset/widgets">
-
-                        <div class="field"
-                             tal:define="description widget/hint;
-                                         error widget/error"
-                             tal:attributes="class python:'field'+(error and ' error' or '')">
-
-                            <label tal:attributes="for widget/associateLabelWithInputControl|name"
-                                   tal:define="name widget/name">
-                                <span tal:replace="widget/label"
-                                      i18n:translate="">Label</span>
-
-                                <span class="fieldRequired"
-                                      title="Required"
-                                      i18n:attributes="title title_required;"
-                                      i18n:translate="label_required"
-                                      tal:condition="widget/required">
-                                    (Required)
-                                </span>
-
-                                <span class="formHelp"
-                                     i18n:translate=""
-                                     tal:content="description"
-                                     tal:condition="description">
-                                    field description
-                                </span>
-                            </label>
-
-                            <div tal:condition="error"
-                                 tal:content="structure error">
-                                The Error
-                            </div>
-
-                            <div class="widget" tal:content="structure widget">
-                                <input type="text" />
-                            </div>
-                        </div>
-
-                    </tal:block>
-
-                </fieldset>
-
-                <metal:block define-slot="above_buttons" />
-
-                <div class="visualClear"><!-- --></div>
-
-                <div id="actionsView" class="formControls">
-                    <span class="actionButtons"
-                          tal:condition="view/availableActions"
-                          metal:define-slot="bottom_buttons">
-                        <input tal:repeat="action view/actions"
-                               tal:replace="structure action/render" />
-                    </span>
-                </div>
-
-                <input tal:replace="structure context/@@authenticator/authenticator" />
-
-            </form>
-
-            <script type="text/javascript"
-                tal:define="extra_script view/extra_script | nothing"
-                tal:condition="extra_script"
-                tal:content="structure extra_script">
-            </script>
-        </div>
-
-    </metal:form>
-
-</metal:main>
-</body>
-
-</metal:block>
-</html>
diff --git a/plone/app/controlpanel/events.py b/plone/app/controlpanel/events.py
index caab88d..3cfcfb0 100644
--- a/plone/app/controlpanel/events.py
+++ b/plone/app/controlpanel/events.py
@@ -5,6 +5,7 @@
 
 from plone.app.controlpanel.interfaces import IConfigurationChangedEvent
 
+
 class ConfigurationChangedEvent(object):
     implements(IConfigurationChangedEvent)
 
diff --git a/plone/app/controlpanel/ram.pt b/plone/app/controlpanel/ram.pt
deleted file mode 100644
index 432d7fe..0000000
--- a/plone/app/controlpanel/ram.pt
+++ /dev/null
@@ -1,64 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml"
-      xmlns:metal="http://xml.zope.org/namespaces/metal"
-      xmlns:tal="http://xml.zope.org/namespaces/tal"
-      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
-      xml:lang="en" lang="en"
-      metal:use-macro="view/base_template/macros/controlpanel"
-      i18n:domain="plone">
-
-<body>
-
-<div metal:fill-slot="extra_info">
-
-        <fieldset>
-            <legend i18n:translate="heading_ramcache_stats">
-                RAM cache statistics
-            </legend>
-
-            <table tal:define="stats view/getStatistics"
-                   class="listing" summary="RAM cache statistics"
-                   cellpadding="2" cellspacing="0"
-                   i18n:attributes="summary heading_ramcache_stats;">
-              <thead>
-                <th i18n:translate="label_cache_key">Key</th>
-                <th i18n:translate="label_cache_hits">Hits</th>
-                <th i18n:translate="label_cache_misses">Misses</th>
-                <th i18n:translate="label_cache_size_bytes">Size (bytes)</th>
-                <th i18n:translate="label_cache_entries">Entries</th>
-              </thead>
-              <tbody>
-                <tr tal:repeat="data stats">
-                  <td><span tal:content="data/path">&nbsp;</span></td>
-                  <td><span tal:content="data/hits">&nbsp;</span></td>
-                  <td><span tal:content="data/misses">&nbsp;</span></td>
-                  <td><span tal:content="data/size">&nbsp;</span></td>
-                  <td><span tal:content="data/entries">&nbsp;</span></td>
-                </tr>
-              </tbody>
-            </table>
-
-            <div class="formControls">
-                <span class="actionButtons">
-                    <input type="submit"
-                           id="form.actions.clearall"
-                           name="form.actions.clearall"
-                           value="Clear cache"
-                           i18n:attributes="value"
-                           class="context" />
-
-                </span>
-            </div>
-
-        </fieldset>
-
-</div>
-
-<div metal:fill-slot="bottom_buttons">
-
-    <input tal:repeat="action view/restricted_actions"
-           tal:replace="structure action/render" />
-
-</div>
-
-</body>
-</html>
diff --git a/plone/app/controlpanel/ram.py b/plone/app/controlpanel/ram.py
deleted file mode 100644
index df71702..0000000
--- a/plone/app/controlpanel/ram.py
+++ /dev/null
@@ -1,116 +0,0 @@
-from plone.app.form.validators import null_validator
-
-from zope.interface import Interface
-from zope.component import adapts
-from zope.component import getMultiAdapter
-from zope.component import getUtility
-from zope.formlib import form
-from zope.interface import implements
-from zope.ramcache.interfaces.ram import IRAMCache
-from zope.schema import Int
-
-from Acquisition import aq_inner
-
-from Products.CMFPlone import PloneMessageFactory as _
-from Products.CMFPlone.interfaces import IPloneSiteRoot
-from Products.Five.browser.pagetemplatefile import ZopeTwoPageTemplateFile
-from Products.statusmessages.interfaces import IStatusMessage
-
-from plone.app.controlpanel.form import ControlPanelForm
-
-from plone.protect import CheckAuthenticator
-
-
-class IRAMCacheSchema(Interface):
-
-    maxEntries = Int(title=_(u'A maximum number of cached values.'),
-                     default=1000,
-                     required=True)
-
-    maxAge = Int(title=_(u'Maximum age for cached values in seconds.'),
-                 default=3600,
-                 required=True)
-
-    cleanupInterval = Int(title=_(u"An interval between cache cleanups "
-                                   "in seconds."),
-                 default=300,
-                 required=True)
-
-
-class RAMCacheControlPanelAdapter(object):
-    adapts(IPloneSiteRoot)
-    implements(IRAMCacheSchema)
-
-    def __init__(self, context):
-        self.context = context
-        self.encoding = 'utf-8'
-
-    def get_max_entries(self):
-        return getUtility(IRAMCache).maxEntries
-
-    def set_max_entries(self, value):
-        getUtility(IRAMCache).maxEntries = value
-
-    maxEntries = property(get_max_entries, set_max_entries)
-
-    def get_max_age(self):
-        return getUtility(IRAMCache).maxAge
-
-    def set_max_age(self, value):
-        getUtility(IRAMCache).maxAge = value
-
-    maxAge = property(get_max_age, set_max_age)
-
-    def get_cleanup_intervall(self):
-        return getUtility(IRAMCache).cleanupInterval
-
-    def set_cleanup_intervall(self, value):
-        getUtility(IRAMCache).cleanupInterval = value
-
-    cleanupInterval = property(get_cleanup_intervall, set_cleanup_intervall)
-
-
-class RAMCacheControlPanel(ControlPanelForm):
-
-    base_template = ControlPanelForm.template
-    template = ZopeTwoPageTemplateFile('ram.pt')
-
-    form_fields = form.FormFields(IRAMCacheSchema)
-
-    label = _("RAM Cache Settings")
-    description = None
-    form_name = _("RAM Cache Settings")
-
-    def getStatistics(self):
-        return getUtility(IRAMCache).getStatistics()
-
-    def restricted_actions(self):
-        return [a for a in self.actions.actions
-                  if a.__name__ in ('form.actions.save', 'form.actions.cancel')]
-
-    @form.action(_(u'Clear cache'), validator=null_validator, name=u'clearall')
-    def handle_clearall_action(self, action, data):
-        CheckAuthenticator(self.request)
-        getUtility(IRAMCache).invalidateAll()
-        self.status = _(u'Cleared the cache.')
-
-    @form.action(_(u'label_save', default=u'Save'), name=u'save')
-    def handle_edit_action(self, action, data):
-        CheckAuthenticator(self.request)
-        if form.applyChanges(self.context, self.form_fields, data,
-                             self.adapters):
-            self.status = _("Changes saved.")
-            self._on_save(data)
-        else:
-            self.status = _("No changes made.")
-
-    @form.action(_(u'label_cancel', default=u'Cancel'),
-                 validator=null_validator,
-                 name=u'cancel')
-    def handle_cancel_action(self, action, data):
-        IStatusMessage(self.request).addStatusMessage(_("Changes canceled."),
-                                                      type="info")
-        url = getMultiAdapter((self.context, self.request),
-                              name='absolute_url')()
-        self.request.response.redirect(url + '/plone_control_panel')
-        return ''
diff --git a/setup.py b/setup.py
index c217345..91121a0 100644
--- a/setup.py
+++ b/setup.py
@@ -23,7 +23,7 @@
       url='http://pypi.python.org/pypi/plone.app.controlpanel',
       license='GPL version 2',
       packages=find_packages(exclude=['ez_setup']),
-      namespace_packages = ['plone', 'plone.app'],
+      namespace_packages=['plone', 'plone.app'],
       include_package_data=True,
       zip_safe=False,
       install_requires=[


