Repository: Products.CMFPlone
Branch: refs/heads/master
Date: 2015-04-09T14:44:13+02:00
Author: vangheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/fe40cd95d0aad01d6d040c4e551a2a129dad208f

update js with latest folder contents fixes

Files changed:
M Products/CMFPlone/static/plone-logged-in-compiled.js
M Products/CMFPlone/static/plone-logged-in-compiled.min.js

diff --git a/Products/CMFPlone/static/plone-logged-in-compiled.js b/Products/CMFPlone/static/plone-logged-in-compiled.js
index 6e12d1e..9edd3a9 100644
--- a/Products/CMFPlone/static/plone-logged-in-compiled.js
+++ b/Products/CMFPlone/static/plone-logged-in-compiled.js
@@ -80254,7 +80254,7 @@ define('mockup-patterns-structure-url/js/views/actionmenu',[
         type: 'POST',
         data: {
           '_authenticator': $('[name="_authenticator"]').val(),
-          'id': this.$active.attr('data-id')
+          'id': this.model.attributes.id
         },
         success: function(data) {
           self.app.ajaxSuccessResponse.apply(self.app, [data]);
diff --git a/Products/CMFPlone/static/plone-logged-in-compiled.min.js b/Products/CMFPlone/static/plone-logged-in-compiled.min.js
index 35675ba..edbe20c 100644
--- a/Products/CMFPlone/static/plone-logged-in-compiled.min.js
+++ b/Products/CMFPlone/static/plone-logged-in-compiled.min.js
@@ -31,7 +31,7 @@ var a=L.createRng();a.setStartAfter(g),a.setEndAfter(g),K.setRng(a),L.remove(g)}
 b=0;b<c.length;b+=2)d.push({text:c[b+1],color:"#"+c[b]});return d}function d(){function b(a,b){var c="transparent"==a;return'<td class="mce-grid-cell'+(c?" mce-colorbtn-trans":"")+'"><div id="'+n+"-"+o++ +'" data-mce-color="'+(a?a:"")+'" role="option" tabIndex="-1" style="'+(a?"background-color: "+a:"")+'" title="'+tinymce.translate(b)+'">'+(c?"&#215;":"")+"</div></td>"}var d,e,f,g,h,k,l,m=this,n=m._id,o=0;for(d=c(),d.push({text:tinymce.translate("No color"),color:"transparent"}),f='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>',g=d.length-1,k=0;j>k;k++){for(f+="<tr>",h=0;i>h;h++)l=k*i+h,l>g?f+="<td></td>":(e=d[l],f+=b(e.color,e.text));f+="</tr>"}if(a.settings.color_picker_callback){for(f+='<tr><td colspan="'+i+'" class="mce-custom-color-btn"><div id="'+n+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" role="button" tabindex="-1" aria-labelledby="'+n+'-c" style="width: 100%"><button type="button" role="presentation" tabindex="-1">'+tinymce.translate("Custom...")+"</button></div></td></tr>",f+="<tr>",h=0;i>h;h++)f+=b("","Custom color");f+="</tr>"}return f+="</tbody></table>"}function e(b,c){a.focus(),a.formatter.apply(b,{value:c}),a.nodeChanged()}function f(b){a.focus(),a.formatter.remove(b,{value:null},null,!0),a.nodeChanged()}function g(c){function d(a){j.hidePanel(),j.color(a),e(j.settings.format,a)}function g(a,b){a.style.background=b,a.setAttribute("data-mce-color",b)}var h,j=this.parent();if(tinymce.DOM.getParent(c.target,".mce-custom-color-btn")&&(j.hidePanel(),a.settings.color_picker_callback.call(a,function(a){var b,c,e,f=j.panel.getEl().getElementsByTagName("table")[0];for(b=tinymce.map(f.rows[f.rows.length-1].childNodes,function(a){return a.firstChild}),e=0;e<b.length&&(c=b[e],c.getAttribute("data-mce-color"));e++);if(e==i)for(e=0;i-1>e;e++)g(b[e],b[e+1].getAttribute("data-mce-color"));g(c,a),d(a)},b(j.settings.format))),h=c.target.getAttribute("data-mce-color")){if(this.lastId&&document.getElementById(this.lastId).setAttribute("aria-selected",!1),c.target.setAttribute("aria-selected",!0),this.lastId=c.target.id,"transparent"==h)return f(j.settings.format),void j.hidePanel();d(h)}else null!==h&&j.hidePanel()}function h(){var a=this;a._color&&e(a.settings.format,a._color)}var i,j;j=a.settings.textcolor_rows||5,i=a.settings.textcolor_cols||8,a.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",format:"forecolor",panel:{role:"application",ariaRemember:!0,html:d,onclick:g},onclick:h}),a.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",format:"hilitecolor",panel:{role:"application",ariaRemember:!0,html:d,onclick:g},onclick:h})})}.apply(a,arguments)})}(this),function(a){define("tinymce-textpattern",["tinymce"],function(){return function(){tinymce.PluginManager.add("textpattern",function(a){function b(){return j&&(i.sort(function(a,b){return a.start.length>b.start.length?-1:a.start.length<b.start.length?1:0}),j=!1),i}function c(a){for(var c=b(),d=0;d<c.length;d++)if(0===a.indexOf(c[d].start)&&(!c[d].end||a.lastIndexOf(c[d].end)==a.length-c[d].end.length))return c[d]}function d(a,c,d){var e,f,g;for(e=b(),g=0;g<e.length;g++)if(f=e[g],f.end&&a.substr(c-f.end.length-d,f.end.length)==f.end)return f}function e(b){function e(){i=i.splitText(k),i.splitText(j-k-o),i.deleteData(0,n.start.length),i.deleteData(i.data.length-n.end.length,n.end.length)}var f,g,h,i,j,k,l,m,n,o,p;return f=a.selection,g=a.dom,f.isCollapsed()&&(h=f.getRng(!0),i=h.startContainer,j=h.startOffset,l=i.data,o=b?1:0,3==i.nodeType&&(n=d(l,j,o),n&&(k=Math.max(0,j-o),k=l.lastIndexOf(n.start,k-n.end.length-1),-1!==k&&(m=g.createRng(),m.setStart(i,k),m.setEnd(i,j-o),n=c(m.toString()),n&&n.end&&!(i.data.length<=n.start.length+n.end.length)))))?(p=a.formatter.get(n.format),p&&p[0].inline?(e(),a.formatter.apply(n.format,{},i),i):void 0):void 0}function f(){var b,d,e,f,g,h,i,j,k,l,m;if(b=a.selection,d=a.dom,b.isCollapsed()&&(i=d.getParent(b.getStart(),"p"))){for(k=new tinymce.dom.TreeWalker(i,i);g=k.next();)if(3==g.nodeType){f=g;break}if(f){if(j=c(f.data),!j)return;if(l=b.getRng(!0),e=l.startContainer,m=l.startOffset,f==e&&(m=Math.max(0,m-j.start.length)),tinymce.trim(f.data).length==j.start.length)return;j.format&&(h=a.formatter.get(j.format),h&&h[0].block&&(f.deleteData(0,j.start.length),a.formatter.apply(j.format,{},f),l.setStart(e,m),l.collapse(!0),b.setRng(l))),j.cmd&&a.undoManager.transact(function(){f.deleteData(0,j.start.length),a.execCommand(j.cmd)})}}}function g(){var b,c;c=e(),c&&(b=a.dom.createRng(),b.setStart(c,c.data.length),b.setEnd(c,c.data.length),a.selection.setRng(b)),f()}function h(){var b,c,d,f,g;b=e(!0),b&&(g=a.dom,c=b.data.slice(-1),/[\u00a0 ]/.test(c)&&(b.deleteData(b.data.length-1,1),d=g.doc.createTextNode(c),b.nextSibling?g.insertAfter(d,b.nextSibling):b.parentNode.appendChild(d),f=g.createRng(),f.setStart(d,1),f.setEnd(d,1),a.selection.setRng(f)))}var i,j=!0;i=a.settings.textpattern_patterns||[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}],a.on("keydown",function(a){13!=a.keyCode||tinymce.util.VK.modifierPressed(a)||g()},!0),a.on("keyup",function(a){32!=a.keyCode||tinymce.util.VK.modifierPressed(a)||h()}),this.getPatterns=b,this.setPatterns=function(a){i=a,j=!0}})}.apply(a,arguments)})}(this),function(a){define("tinymce-visualblocks",["tinymce"],function(){return function(){tinymce.PluginManager.add("visualblocks",function(a,b){function c(){var b=this;b.active(f),a.on("VisualBlocks",function(){b.active(a.dom.hasClass(a.getBody(),"mce-visualblocks"))})}var d,e,f;window.NodeList&&(a.addCommand("mceVisualBlocks",function(){var c,g=a.dom;d||(d=g.uniqueId(),c=g.create("link",{id:d,rel:"stylesheet",href:b+"/css/visualblocks.css"}),a.getDoc().getElementsByTagName("head")[0].appendChild(c)),a.on("PreviewFormats AfterPreviewFormats",function(b){f&&g.toggleClass(a.getBody(),"mce-visualblocks","afterpreviewformats"==b.type)}),g.toggleClass(a.getBody(),"mce-visualblocks"),f=a.dom.hasClass(a.getBody(),"mce-visualblocks"),e&&e.active(g.hasClass(a.getBody(),"mce-visualblocks")),a.fire("VisualBlocks")}),a.addButton("visualblocks",{title:"Show blocks",cmd:"mceVisualBlocks",onPostRender:c}),a.addMenuItem("visualblocks",{text:"Show blocks",cmd:"mceVisualBlocks",onPostRender:c,selectable:!0,context:"view",prependToContext:!0}),a.on("init",function(){a.settings.visualblocks_default_state&&a.execCommand("mceVisualBlocks",!1,null,{skip_focus:!0})}),a.on("remove",function(){a.dom.removeClass(a.getBody(),"mce-visualblocks")}))})}.apply(a,arguments)})}(this),function(a){define("tinymce-visualchars",["tinymce"],function(){return function(){tinymce.PluginManager.add("visualchars",function(a){function b(b){var c,f,g,h,i,j,k=a.getBody(),l=a.selection;if(d=!d,e.state=d,a.fire("VisualChars",{state:d}),b&&(j=l.getBookmark()),d)for(f=[],tinymce.walk(k,function(a){3==a.nodeType&&a.nodeValue&&-1!=a.nodeValue.indexOf("Â ")&&f.push(a)},"childNodes"),g=0;g<f.length;g++){for(h=f[g].nodeValue,h=h.replace(/(\u00a0)/g,'<span data-mce-bogus="1" class="mce-nbsp">$1</span>'),i=a.dom.create("div",null,h);c=i.lastChild;)a.dom.insertAfter(c,f[g]);a.dom.remove(f[g])}else for(f=a.dom.select("span.mce-nbsp",k),g=f.length-1;g>=0;g--)a.dom.remove(f[g],1);l.moveToBookmark(j)}function c(){var b=this;a.on("VisualChars",function(a){b.active(a.state)})}var d,e=this;a.addCommand("mceVisualChars",b),a.addButton("visualchars",{title:"Show invisible characters",cmd:"mceVisualChars",onPostRender:c}),a.addMenuItem("visualchars",{text:"Show invisible characters",cmd:"mceVisualChars",onPostRender:c,selectable:!0,context:"view",prependToContext:!0}),a.on("beforegetcontent",function(a){d&&"raw"!=a.format&&!a.draft&&(d=!0,b(!1))})})}.apply(a,arguments)})}(this),function(a){define("tinymce-wordcount",["tinymce"],function(){return function(){tinymce.PluginManager.add("wordcount",function(a){function b(){a.theme.panel.find("#wordcount").text(["Words: {0}",e.getCount()])}var c,d,e=this;c=a.getParam("wordcount_countregex",/[\w\u2019\x27\-\u00C0-\u1FFF]+/g),d=a.getParam("wordcount_cleanregex",/[0-9.(),;:!?%#$?\x27\x22_+=\\\/\-]*/g),a.on("init",function(){var c=a.theme.panel&&a.theme.panel.find("#statusbar")[0];c&&window.setTimeout(function(){c.insert({type:"label",name:"wordcount",text:["Words: {0}",e.getCount()],classes:"wordcount",disabled:a.settings.readonly},0),a.on("setcontent beforeaddundo",b),a.on("keyup",function(a){32==a.keyCode&&b()})},0)}),e.getCount=function(){var b=a.getContent({format:"raw"}),e=0;if(b){b=b.replace(/\.\.\./g," "),b=b.replace(/<.[^<>]*?>/g," ").replace(/&nbsp;|&#160;/gi," "),b=b.replace(/(\w+)(&#?[a-z0-9]+;)+(\w+)/i,"$1$3").replace(/&.+?;/g," "),b=b.replace(d,"");var f=b.match(c);f&&(e=f.length)}return e}})}.apply(a,arguments)})}(this),define("mockup-patterns-tinymce",["jquery","underscore","mockup-patterns-base","mockup-patterns-relateditems","mockup-patterns-modal","tinymce","mockup-patterns-autotoc","text!mockup-patterns-tinymce-url/templates/result.xml","text!mockup-patterns-tinymce-url/templates/selection.xml","mockup-utils","mockup-patterns-tinymce-url/js/links","mockup-i18n","translate","tinymce-modern-theme","tinymce-advlist","tinymce-anchor","tinymce-autolink","tinymce-autoresize","tinymce-autosave","tinymce-bbcode","tinymce-charmap","tinymce-code","tinymce-colorpicker","tinymce-contextmenu","tinymce-directionality","tinymce-emoticons","tinymce-fullpage","tinymce-fullscreen","tinymce-hr","tinymce-image","tinymce-importcss","tinymce-insertdatetime","tinymce-layer","tinymce-legacyoutput","tinymce-link","tinymce-lists","tinymce-media","tinymce-nonbreaking","tinymce-noneditable","tinymce-pagebreak","tinymce-paste","tinymce-preview","tinymce-print","tinymce-save","tinymce-searchreplace","tinymce-spellchecker","tinymce-tabfocus","tinymce-table","tinymce-template","tinymce-textcolor","tinymce-textpattern","tinymce-visualblocks","tinymce-visualchars","tinymce-wordcount"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";var n=c.extend({name:"tinymce",trigger:".pat-tinymce",defaults:{upload:{uploadMultiple:!1,maxFiles:1,showTitle:!1},relatedItems:{attributes:["UID","Title","Description","getURL","portal_type","path","ModificationDate","getIcon"],batchSize:20,basePath:"/",vocabularyUrl:null,width:500,maximumSelectionSize:1,placeholder:m("Search for item on site...")},text:{insertBtn:m("Insert"),cancelBtn:m("Cancel"),insertHeading:m("Insert link"),title:m("Title"),internal:m("Internal"),external:m("External"),email:m("Email"),anchor:m("Anchor"),subject:m("Subject"),image:m("Image"),imageAlign:m("Align"),scale:m("Size"),alt:m("Alternative Text"),externalImage:m("External Image URI")},loadingBaseUrl:"../../../bower_components/tinymce-builded/js/tinymce/",prependToUrl:"",appendToUrl:"",linkAttribute:"path",prependToScalePart:"/imagescale/",appendToScalePart:"",appendToOriginalScalePart:"",scales:m("Listing (16x16):listing,Icon (32x32):icon,Tile (64x64):tile,Thumb (128x128):thumb,Mini (200x200):mini,Preview (400x400):preview,Large (768x768):large"),targetList:[{text:m("Open in this window / frame"),value:""},{text:m("Open in new window"),value:"_blank"},{text:m("Open in parent window / frame"),value:"_parent"},{text:m("Open in top frame (replaces all frames)"),value:"_top"}],imageTypes:"Image",folderTypes:["Folder","Plone Site"],linkableTypes:"Document,Event,File,Folder,Image,News Item,Topic",tiny:{content_css:"../../../bower_components/tinymce-builded/js/tinymce/skins/lightgray/content.min.css",theme:"-modern",plugins:["advlist autolink lists charmap print preview anchor searchreplace visualblocks code fullscreen insertdatetime media table contextmenu paste plonelink ploneimage"],menubar:"edit table format tools view insert",toolbar:"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | unlink plonelink ploneimage",height:400}},addLinkClicked:function(){var b=this;if(null===b.linkModal){var c=a("<div/>").insertAfter(b.$el),d=["internal","upload","external","email","anchor"];b.options.upload||d.splice(1,1),b.linkModal=new k(c,a.extend(!0,{},b.options,{tinypattern:b,linkTypes:d})),b.linkModal.show()}else b.linkModal.reinitialize(),b.linkModal.show()},addImageClicked:function(){var b=this;if(null===b.imageModal){var c=["image","uploadImage","externalImage"];b.options.upload||c.splice(1,1);var d=a.extend(!0,{},b.options,{tinypattern:b,linkTypes:c,initialLinkType:"image",text:{insertHeading:m("Insert Image")},relatedItems:{baseCriteria:[{i:"portal_type",o:"plone.app.querystring.operation.list.contains",v:b.options.imageTypes.concat(b.options.folderTypes)}],selectableTypes:b.options.imageTypes,resultTemplate:h,selectionTemplate:i}}),e=a("<div/>").insertAfter(b.$el);b.imageModal=new k(e,d),b.imageModal.show()}else b.imageModal.reinitialize(),b.imageModal.show()},generateUrl:function(a){var b=this,c=a[b.options.linkAttribute];return b.options.prependToUrl+c+b.options.appendToUrl},generateImageUrl:function(a,b){var c=this,d=c.generateUrl(a);if(""!==b){for(var e=b,f=0;f<c.options.scales.length;f++)c.options.scales[f].name==b&&(e=c.options.scales[f].part);d=d+c.options.prependToScalePart+e+c.options.appendToScalePart}else d+=c.options.appendToOriginalScalePart;return d},stripGeneratedUrl:function(a){var b=this;if(a=a.split(b.options.prependToScalePart,2)[0],b.options.prependToUrl){var c=a.split(b.options.prependToUrl,2);2===c.length&&(a=c[1])}return b.options.appendToUrl&&(a=a.split(b.options.appendToUrl)[0]),a},getScaleFromUrl:function(a){var b=this,c=a.split(b.options.prependToScalePart);return 2!==c.length?null:(a=b.options.appendToScalePart?c[1].split(b.options.appendToScalePart)[0]:c[1],-1!==a.indexOf("/image_")&&(a=a.split("/image_")[1]),a)},initLanguage:function(b){var c=this,d=l.currentLanguage;"en"!=d&&"en"!==c.options.tiny.language?(f.baseURL=c.options.loadingBaseUrl,a.ajax({url:f.baseURL+"/langs/"+d+".js",type:"HEAD",success:function(){c.options.tiny.language=d,b()},error:function(){d=d.split("_")>1?d.split("_")[0]:d+"_"+d.toUpperCase(),a.ajax({url:f.baseURL+"/langs/"+d+".js",type:"HEAD",success:function(){c.options.tiny.language=d,b()},error:function(){b()}})}})):b()},init:function(){var a=this;a.linkModal=a.imageModal=a.uploadModal=null;var c=j.setId(a.$el),d=a.options.tiny;d.selector="#"+c,d.addLinkClicked=function(){a.addLinkClicked.apply(a,[])},d.addImageClicked=function(){a.addImageClicked.apply(a,[])},d.skin=!1,a.options.relatedItems.generateImageUrl=function(b,c){return a.generateImageUrl.apply(a,[b,c])},d.init_instance_callback=function(b){(void 0===a.tiny||null===a.tiny)&&(a.tiny=b)},a.initLanguage(function(){"string"==typeof a.options.scales&&(a.options.scales=b.map(a.options.scales.split(","),function(a){var a=a.split(":");return{part:a[1],name:a[1],label:a[0]}})),"string"==typeof a.options.folderTypes&&(a.options.folderTypes=a.options.folderTypes.split(",")),"string"==typeof a.options.imageTypes&&(a.options.imageTypes=a.options.imageTypes.split(",")),f.init(d),a.tiny=f.get(c);var e=a.$el.parents("form");e.on("submit",function(){a.tiny.save()})})},destroy:function(){this.tiny.destroy()}});return n}),define("mockup-patterns-textareamimetypeselector",["jquery","mockup-patterns-base","pat-registry","mockup-patterns-tinymce"],function(a,b,c,d){"use strict";var e=b.extend({name:"textareamimetypeselector",trigger:".pat-textareamimetypeselector",textarea:void 0,currentWidget:void 0,defaults:{textareaName:"",widgets:{"text/html":{pattern:"tinymce",patternOptions:{}}}},init:function(){var b=this,c=b.$el;b.textarea=a('[name="'+b.options.textareaName+'"]'),c.change(function(a){b.initTextarea(a.target.value)}),b.initTextarea(c.val())},initTextarea:function(a){var b,d=this,e=d.options.widgets[a];d.currentWidget&&d.currentWidget.destroy(),e&&(b=new c.patterns[e.pattern](d.textarea,e.patternOptions||{}),d.currentWidget=b)}});return e}),function(a){"function"==typeof define&&define.amd?define("picker",["jquery"],a):this.Picker=a(jQuery)}(function(a){function b(d,e,g,h){function i(){return b._.node("div",b._.node("div",b._.node("div",b._.node("div",s.component.nodes(n.open),p.box),p.wrap),p.frame),p.holder)}function j(){q.data(e,s).addClass(p.input).val(q.data("value")?s.get("select",o.format):d.value).on("focus."+n.id+" click."+n.id,m),o.editable||q.on("keydown."+n.id,function(a){var b=a.keyCode,c=/^(8|46)$/.test(b);return 27==b?(s.close(),!1):void((32==b||c||!n.open&&s.component.key[b])&&(a.preventDefault(),a.stopPropagation(),c?s.clear().close():s.open()))}),c(d,{haspopup:!0,expanded:!1,readonly:!1,owns:d.id+"_root"+(s._hidden?" "+s._hidden.id:"")})}function k(){s.$root.on({focusin:function(a){s.$root.removeClass(p.focused),c(s.$root[0],"selected",!1),a.stopPropagation()},"mousedown click":function(b){var c=b.target;c!=s.$root.children()[0]&&(b.stopPropagation(),"mousedown"!=b.type||a(c).is(":input")||"OPTION"==c.nodeName||(b.preventDefault(),d.focus()))}}).on("click","[data-pick], [data-nav], [data-clear]",function(){var c=a(this),e=c.data(),f=c.hasClass(p.navDisabled)||c.hasClass(p.disabled),g=document.activeElement;g=g&&(g.type||g.href)&&g,(f||g&&!a.contains(s.$root[0],g))&&d.focus(),e.nav&&!f?s.set("highlight",s.component.item.highlight,{nav:e.nav}):b._.isInteger(e.pick)&&!f?s.set("select",e.pick).close(!0):e.clear&&s.clear().close(!0)}),c(s.$root[0],"hidden",!0)}function l(){var b=["string"==typeof o.hiddenPrefix?o.hiddenPrefix:"","string"==typeof o.hiddenSuffix?o.hiddenSuffix:"_submit"];s._hidden=a('<input type=hidden name="'+b[0]+d.name+b[1]+'"id="'+b[0]+d.id+b[1]+'"'+(q.data("value")||d.value?' value="'+s.get("select",o.formatSubmit)+'"':"")+">")[0],q.on("change."+n.id,function(){s._hidden.value=d.value?s.get("select",o.formatSubmit):""}).after(s._hidden)}function m(a){a.stopPropagation(),"focus"==a.type&&(s.$root.addClass(p.focused),c(s.$root[0],"selected",!0)),s.open()}if(!d)return b;var n={id:d.id||"P"+Math.abs(~~(Math.random()*new Date))},o=g?a.extend(!0,{},g.defaults,h):h||{},p=a.extend({},b.klasses(),o.klass),q=a(d),r=function(){return this.start()},s=r.prototype={constructor:r,$node:q,start:function(){return n&&n.start?s:(n.methods={},n.start=!0,n.open=!1,n.type=d.type,d.autofocus=d==document.activeElement,d.type="text",d.readOnly=!o.editable,d.id=d.id||n.id,s.component=new g(s,o),s.$root=a(b._.node("div",i(),p.picker,'id="'+d.id+'_root"')),k(),o.formatSubmit&&l(),j(),o.container?a(o.container).append(s.$root):q.after(s.$root),s.on({start:s.component.onStart,render:s.component.onRender,stop:s.component.onStop,open:s.component.onOpen,close:s.component.onClose,set:s.component.onSet}).on({start:o.onStart,render:o.onRender,stop:o.onStop,open:o.onOpen,close:o.onClose,set:o.onSet}),d.autofocus&&s.open(),s.trigger("start").trigger("render"))},render:function(a){return a?s.$root.html(i()):s.$root.find("."+p.box).html(s.component.nodes(n.open)),s.trigger("render")},stop:function(){return n.start?(s.close(),s._hidden&&s._hidden.parentNode.removeChild(s._hidden),s.$root.remove(),q.removeClass(p.input).removeData(e),setTimeout(function(){q.off("."+n.id)},0),d.type=n.type,d.readOnly=!1,s.trigger("stop"),n.methods={},n.start=!1,s):s},open:function(e){return n.open?s:(q.addClass(p.active),c(d,"expanded",!0),s.$root.addClass(p.opened),c(s.$root[0],"hidden",!1),e!==!1&&(n.open=!0,q.trigger("focus"),f.on("click."+n.id+" focusin."+n.id,function(a){var b=a.target;b!=d&&b!=document&&3!=a.which&&s.close(b===s.$root.children()[0])}).on("keydown."+n.id,function(c){var e=c.keyCode,f=s.component.key[e],g=c.target;27==e?s.close(!0):g!=d||!f&&13!=e?a.contains(s.$root[0],g)&&13==e&&(c.preventDefault(),g.click()):(c.preventDefault(),f?b._.trigger(s.component.key.go,s,[b._.trigger(f)]):s.$root.find("."+p.highlighted).hasClass(p.disabled)||s.set("select",s.component.item.highlight).close())})),s.trigger("open"))},close:function(a){return a&&(q.off("focus."+n.id).trigger("focus"),setTimeout(function(){q.on("focus."+n.id,m)},0)),q.removeClass(p.active),c(d,"expanded",!1),s.$root.removeClass(p.opened+" "+p.focused),c(s.$root[0],"hidden",!0),c(s.$root[0],"selected",!1),n.open?(n.open=!1,f.off("."+n.id),s.trigger("close")):s},clear:function(){return s.set("clear")},set:function(b,c,d){var e,f,g=a.isPlainObject(b),h=g?b:{};if(d=g&&a.isPlainObject(c)?c:d||{},b){g||(h[b]=c);for(e in h)f=h[e],e in s.component.item&&s.component.set(e,f,d),("select"==e||"clear"==e)&&q.val("clear"==e?"":s.get(e,o.format)).trigger("change");s.render()}return d.muted?s:s.trigger("set",h)},get:function(a,c){return a=a||"value",null!=n[a]?n[a]:"value"==a?d.value:a in s.component.item?"string"==typeof c?b._.trigger(s.component.formats.toString,s.component,[c,s.component.get(a)]):s.component.get(a):void 0},on:function(b,c){var d,e,f=a.isPlainObject(b),g=f?b:{};if(b){f||(g[b]=c);for(d in g)e=g[d],n.methods[d]=n.methods[d]||[],n.methods[d].push(e)}return s},off:function(){var a,b,c=arguments;for(a=0,namesCount=c.length;a<namesCount;a+=1)b=c[a],b in n.methods&&delete n.methods[b];return s},trigger:function(a,c){var d=n.methods[a];return d&&d.map(function(a){b._.trigger(a,s,[c])}),s}};return new r}function c(b,c,e){if(a.isPlainObject(c))for(var f in c)d(b,f,c[f]);else d(b,c,e)}function d(a,b,c){a.setAttribute(("role"==b?"":"aria-")+b,c)}function e(b,c){a.isPlainObject(b)||(b={attribute:c}),c="";for(var d in b){var e=("role"==d?"":"aria-")+d,f=b[d];c+=null==f?"":e+'="'+b[d]+'"'}return c}var f=a(document);return b.klasses=function(a){return a=a||"picker",{picker:a,opened:a+"--opened",focused:a+"--focused",input:a+"__input",active:a+"__input--active",holder:a+"__holder",frame:a+"__frame",wrap:a+"__wrap",box:a+"__box"}},b._={group:function(a){for(var c,d="",e=b._.trigger(a.min,a);e<=b._.trigger(a.max,a,[e]);e+=a.i)c=b._.trigger(a.item,a,[e]),d+=b._.node(a.node,c[0],c[1],c[2]);return d},node:function(b,c,d,e){return c?(c=a.isArray(c)?c.join(""):c,d=d?' class="'+d+'"':"",e=e?" "+e:"","<"+b+d+e+">"+c+"</"+b+">"):""},lead:function(a){return(10>a?"0":"")+a},trigger:function(a,b,c){return"function"==typeof a?a.apply(b,c||[]):a},digits:function(a){return/\d/.test(a[1])?2:1},isDate:function(a){return{}.toString.call(a).indexOf("Date")>-1&&this.isInteger(a.getDate())},isInteger:function(a){return{}.toString.call(a).indexOf("Number")>-1&&a%1===0},ariaAttr:e},b.extend=function(c,d){a.fn[c]=function(e,f){var g=this.data(c);return"picker"==e?g:g&&"string"==typeof e?(b._.trigger(g[e],g,[f]),this):this.each(function(){var f=a(this);f.data(c)||new b(this,c,d,e)})},a.fn[c].defaults=d.defaults},b}),function(a){"function"==typeof define&&define.amd?define("picker.date",["picker","jquery"],a):a(Picker,jQuery)}(function(a,b){function c(a,b){var c=this,d=a.$node[0].value,e=a.$node.data("value"),f=e||d,g=e?b.formatSubmit:b.format,h=function(){return"rtl"===getComputedStyle(a.$root[0]).direction};c.settings=b,c.$node=a.$node,c.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse navigate create validate",view:"parse create validate viewset",disable:"deactivate",enable:"activate"},c.item={},c.item.disable=(b.disable||[]).slice(0),c.item.enable=-function(a){return a[0]===!0?a.shift():-1}(c.item.disable),c.set("min",b.min).set("max",b.max).set("now"),f?c.set("select",f,{format:g,fromValue:!!d}):c.set("select",null).set("highlight",c.item.now),c.key={40:7,38:-7,39:function(){return h()?-1:1},37:function(){return h()?1:-1},go:function(a){var b=c.item.highlight,d=new Date(b.year,b.month,b.date+a);c.set("highlight",[d.getFullYear(),d.getMonth(),d.getDate()],{interval:a}),this.render()}},a.on("render",function(){a.$root.find("."+b.klass.selectMonth).on("change",function(){var c=this.value;c&&(a.set("highlight",[a.get("view").year,c,a.get("highlight").date]),a.$root.find("."+b.klass.selectMonth).trigger("focus"))}),a.$root.find("."+b.klass.selectYear).on("change",function(){var c=this.value;c&&(a.set("highlight",[c,a.get("view").month,a.get("highlight").date]),a.$root.find("."+b.klass.selectYear).trigger("focus"))})}).on("open",function(){a.$root.find("button, select").attr("disabled",!1)}).on("close",function(){a.$root.find("button, select").attr("disabled",!0)})}var d=7,e=6,f=a._;c.prototype.set=function(a,b,c){var d=this,e=d.item;return null===b?(e[a]=b,d):(e["enable"==a?"disable":"flip"==a?"enable":a]=d.queue[a].split(" ").map(function(e){return b=d[e](a,b,c)}).pop(),"select"==a?d.set("highlight",e.select,c):"highlight"==a?d.set("view",e.highlight,c):a.match(/^(flip|min|max|disable|enable)$/)&&(e.select&&d.disabled(e.select)&&d.set("select",e.select,c),e.highlight&&d.disabled(e.highlight)&&d.set("highlight",e.highlight,c)),d)},c.prototype.get=function(a){return this.item[a]},c.prototype.create=function(a,c,d){var e,g=this;return c=void 0===c?a:c,c==-(1/0)||c==1/0?e=c:b.isPlainObject(c)&&f.isInteger(c.pick)?c=c.obj:b.isArray(c)?(c=new Date(c[0],c[1],c[2]),c=f.isDate(c)?c:g.create().obj):c=f.isInteger(c)||f.isDate(c)?g.normalize(new Date(c),d):g.now(a,c,d),{year:e||c.getFullYear(),month:e||c.getMonth(),date:e||c.getDate(),day:e||c.getDay(),obj:e||c,pick:e||c.getTime()}},c.prototype.createRange=function(a,c){var d=this,e=function(a){return a===!0||b.isArray(a)||f.isDate(a)?d.create(a):a};return f.isInteger(a)||(a=e(a)),f.isInteger(c)||(c=e(c)),f.isInteger(a)&&b.isPlainObject(c)?a=[c.year,c.month,c.date+a]:f.isInteger(c)&&b.isPlainObject(a)&&(c=[a.year,a.month,a.date+c]),{from:e(a),to:e(c)}},c.prototype.withinRange=function(a,b){return a=this.createRange(a.from,a.to),b.pick>=a.from.pick&&b.pick<=a.to.pick},c.prototype.overlapRanges=function(a,b){var c=this;return a=c.createRange(a.from,a.to),b=c.createRange(b.from,b.to),c.withinRange(a,b.from)||c.withinRange(a,b.to)||c.withinRange(b,a.from)||c.withinRange(b,a.to)},c.prototype.now=function(a,b,c){return b=new Date,c&&c.rel&&b.setDate(b.getDate()+c.rel),this.normalize(b,c)},c.prototype.navigate=function(a,c,d){var e,f,g,h,i=b.isArray(c),j=b.isPlainObject(c),k=this.item.view;if(i||j){for(j?(f=c.year,g=c.month,h=c.date):(f=+c[0],g=+c[1],h=+c[2]),d&&d.nav&&k&&k.month!==g&&(f=k.year,g=k.month),e=new Date(f,g+(d&&d.nav?d.nav:0),1),f=e.getFullYear(),g=e.getMonth();new Date(f,g,h).getMonth()!==g;)h-=1;c=[f,g,h]}return c},c.prototype.normalize=function(a){return a.setHours(0,0,0,0),a},c.prototype.measure=function(a,b){var c=this;return b?f.isInteger(b)&&(b=c.now(a,b,{rel:b})):b="min"==a?-(1/0):1/0,b},c.prototype.viewset=function(a,b){return this.create([b.year,b.month,1])},c.prototype.validate=function(a,c,d){var e,g,h,i,j=this,k=c,l=d&&d.interval?d.interval:1,m=-1===j.item.enable,n=j.item.min,o=j.item.max,p=m&&j.item.disable.filter(function(a){if(b.isArray(a)){var d=j.create(a).pick;d<c.pick?e=!0:d>c.pick&&(g=!0)}return f.isInteger(a)}).length;if((!d||!d.nav)&&(!m&&j.disabled(c)||m&&j.disabled(c)&&(p||e||g)||!m&&(c.pick<=n.pick||c.pick>=o.pick)))for(m&&!p&&(!g&&l>0||!e&&0>l)&&(l*=-1);j.disabled(c)&&(Math.abs(l)>1&&(c.month<k.month||c.month>k.month)&&(c=k,l=l>0?1:-1),c.pick<=n.pick?(h=!0,l=1,c=j.create([n.year,n.month,n.date-1])):c.pick>=o.pick&&(i=!0,l=-1,c=j.create([o.year,o.month,o.date+1])),!h||!i);)c=j.create([c.year,c.month,c.date+l]);return c},c.prototype.disabled=function(a){var c=this,d=c.item.disable.filter(function(d){return f.isInteger(d)?a.day===(c.settings.firstDay?d:d-1)%7:b.isArray(d)||f.isDate(d)?a.pick===c.create(d).pick:b.isPlainObject(d)?c.withinRange(d,a):void 0});return d=d.length&&!d.filter(function(a){return b.isArray(a)&&"inverted"==a[3]||b.isPlainObject(a)&&a.inverted}).length,-1===c.item.enable?!d:d||a.pick<c.item.min.pick||a.pick>c.item.max.pick},c.prototype.parse=function(a,c,d){var e,g=this,h={};return!c||f.isInteger(c)||b.isArray(c)||f.isDate(c)||b.isPlainObject(c)&&f.isInteger(c.pick)?c:(d&&d.format||(d=d||{},d.format=g.settings.format),e="string"!=typeof c||d.fromValue?0:1,g.formats.toArray(d.format).map(function(a){var b=g.formats[a],d=b?f.trigger(b,g,[c,h]):a.replace(/^!/,"").length;b&&(h[a]=c.substr(0,d)),c=c.substr(d)}),[h.yyyy||h.yy,+(h.mm||h.m)-e,h.dd||h.d])},c.prototype.formats=function(){function a(a,b,c){var d=a.match(/\w+/)[0];return c.mm||c.m||(c.m=b.indexOf(d)),d.length}function b(a){return a.match(/\w+/)[0].length}return{d:function(a,b){return a?f.digits(a):b.date},dd:function(a,b){return a?2:f.lead(b.date)},ddd:function(a,c){return a?b(a):this.settings.weekdaysShort[c.day]},dddd:function(a,c){return a?b(a):this.settings.weekdaysFull[c.day]},m:function(a,b){return a?f.digits(a):b.month+1},mm:function(a,b){return a?2:f.lead(b.month+1)},mmm:function(b,c){var d=this.settings.monthsShort;return b?a(b,d,c):d[c.month]},mmmm:function(b,c){var d=this.settings.monthsFull;return b?a(b,d,c):d[c.month]},yy:function(a,b){return a?2:(""+b.year).slice(2)},yyyy:function(a,b){return a?4:b.year},toArray:function(a){return a.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(a,b){var c=this;return c.formats.toArray(a).map(function(a){return f.trigger(c.formats[a],c,[0,b])||a.replace(/^!/,"")}).join("")}}}(),c.prototype.isDateExact=function(a,c){var d=this;return f.isInteger(a)&&f.isInteger(c)||"boolean"==typeof a&&"boolean"==typeof c?a===c:(f.isDate(a)||b.isArray(a))&&(f.isDate(c)||b.isArray(c))?d.create(a).pick===d.create(c).pick:b.isPlainObject(a)&&b.isPlainObject(c)?d.isDateExact(a.from,c.from)&&d.isDateExact(a.to,c.to):!1},c.prototype.isDateOverlap=function(a,c){var d=this;return f.isInteger(a)&&(f.isDate(c)||b.isArray(c))?a===d.create(c).day+1:f.isInteger(c)&&(f.isDate(a)||b.isArray(a))?c===d.create(a).day+1:b.isPlainObject(a)&&b.isPlainObject(c)?d.overlapRanges(a,c):!1},c.prototype.flipEnable=function(a){var b=this.item;b.enable=a||(-1==b.enable?1:-1)},c.prototype.deactivate=function(a,c){var d=this,e=d.item.disable.slice(0);return"flip"==c?d.flipEnable():c===!1?(d.flipEnable(1),e=[]):c===!0?(d.flipEnable(-1),e=[]):c.map(function(a){for(var c,g=0;g<e.length;g+=1)if(d.isDateExact(a,e[g])){c=!0;break}c||(f.isInteger(a)||f.isDate(a)||b.isArray(a)||b.isPlainObject(a)&&a.from&&a.to)&&e.push(a)}),e},c.prototype.activate=function(a,c){var d=this,e=d.item.disable,g=e.length;return"flip"==c?d.flipEnable():c===!0?(d.flipEnable(1),e=[]):c===!1?(d.flipEnable(-1),e=[]):c.map(function(a){var c,h,i,j;for(i=0;g>i;i+=1){if(h=e[i],d.isDateExact(h,a)){c=e[i]=null,j=!0;break}if(d.isDateOverlap(h,a)){b.isPlainObject(a)?(a.inverted=!0,c=a):b.isArray(a)?(c=a,c[3]||c.push("inverted")):f.isDate(a)&&(c=[a.getFullYear(),a.getMonth(),a.getDate(),"inverted"]);break}}if(c)for(i=0;g>i;i+=1)if(d.isDateExact(e[i],a)){e[i]=null;break}if(j)for(i=0;g>i;i+=1)if(d.isDateOverlap(e[i],a)){e[i]=null;break}c&&e.push(c)}),e.filter(function(a){return null!=a})},c.prototype.nodes=function(a){var b=this,c=b.settings,g=b.item,h=g.now,i=g.select,j=g.highlight,k=g.view,l=g.disable,m=g.min,n=g.max,o=function(a){return c.firstDay&&a.push(a.shift()),f.node("thead",f.node("tr",f.group({min:0,max:d-1,i:1,node:"th",item:function(b){return[a[b],c.klass.weekdays]}})))}((c.showWeekdaysFull?c.weekdaysFull:c.weekdaysShort).slice(0)),p=function(a){return f.node("div"," ",c.klass["nav"+(a?"Next":"Prev")]+(a&&k.year>=n.year&&k.month>=n.month||!a&&k.year<=m.year&&k.month<=m.month?" "+c.klass.navDisabled:""),"data-nav="+(a||-1))},q=function(b){return c.selectMonths?f.node("select",f.group({min:0,max:11,i:1,node:"option",item:function(a){return[b[a],0,"value="+a+(k.month==a?" selected":"")+(k.year==m.year&&a<m.month||k.year==n.year&&a>n.month?" disabled":"")]}}),c.klass.selectMonth,a?"":"disabled"):f.node("div",b[k.month],c.klass.month)},r=function(){var b=k.year,d=c.selectYears===!0?5:~~(c.selectYears/2);if(d){var e=m.year,g=n.year,h=b-d,i=b+d;if(e>h&&(i+=e-h,h=e),i>g){var j=h-e,l=i-g;h-=j>l?l:j,i=g}return f.node("select",f.group({min:h,max:i,i:1,node:"option",item:function(a){return[a,0,"value="+a+(b==a?" selected":"")];
 
 }}),c.klass.selectYear,a?"":"disabled")}return f.node("div",b,c.klass.year)};return f.node("div",p()+p(1)+q(c.showMonthsShort?c.monthsShort:c.monthsFull)+r(),c.klass.header)+f.node("table",o+f.node("tbody",f.group({min:0,max:e-1,i:1,node:"tr",item:function(a){var e=c.firstDay&&0===b.create([k.year,k.month,1]).day?-7:0;return[f.group({min:d*a-k.day+e+1,max:function(){return this.min+d-1},i:1,node:"td",item:function(a){a=b.create([k.year,k.month,a+(c.firstDay?1:0)]);var d=i&&i.pick==a.pick,e=j&&j.pick==a.pick,g=l&&b.disabled(a)||a.pick<m.pick||a.pick>n.pick;return[f.node("div",a.date,function(b){return b.push(k.month==a.month?c.klass.infocus:c.klass.outfocus),h.pick==a.pick&&b.push(c.klass.now),d&&b.push(c.klass.selected),e&&b.push(c.klass.highlighted),g&&b.push(c.klass.disabled),b.join(" ")}([c.klass.day]),"data-pick="+a.pick+" "+f.ariaAttr({role:"button",controls:b.$node[0].id,checked:d&&b.$node.val()===f.trigger(b.formats.toString,b,[c.format,a])?!0:null,activedescendant:e?!0:null,disabled:g?!0:null}))]}})]}})),c.klass.table)+f.node("div",f.node("button",c.today,c.klass.buttonToday,"type=button data-pick="+h.pick+(a?"":" disabled"))+f.node("button",c.clear,c.klass.buttonClear,"type=button data-clear=1"+(a?"":" disabled")),c.klass.footer)},c.defaults=function(a){return{monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],today:"Today",clear:"Clear",format:"d mmmm, yyyy",klass:{table:a+"table",header:a+"header",navPrev:a+"nav--prev",navNext:a+"nav--next",navDisabled:a+"nav--disabled",month:a+"month",year:a+"year",selectMonth:a+"select--month",selectYear:a+"select--year",weekdays:a+"weekday",day:a+"day",disabled:a+"day--disabled",selected:a+"day--selected",highlighted:a+"day--highlighted",now:a+"day--today",infocus:a+"day--infocus",outfocus:a+"day--outfocus",footer:a+"footer",buttonClear:a+"button--clear",buttonToday:a+"button--today"}}}(a.klasses().picker+"__"),a.extend("pickadate",c)}),function(a){"function"==typeof define&&define.amd?define("picker.time",["picker","jquery"],a):a(Picker,jQuery)}(function(a,b){function c(a,b){var c=this,d=a.$node[0].value,e=a.$node.data("value"),f=e||d,g=e?b.formatSubmit:b.format;c.settings=b,c.$node=a.$node,c.queue={interval:"i",min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse create validate",view:"parse create validate",disable:"deactivate",enable:"activate"},c.item={},c.item.interval=b.interval||30,c.item.disable=(b.disable||[]).slice(0),c.item.enable=-function(a){return a[0]===!0?a.shift():-1}(c.item.disable),c.set("min",b.min).set("max",b.max).set("now"),f?c.set("select",f,{format:g,fromValue:!!d}):c.set("select",null).set("highlight",c.item.now),c.key={40:1,38:-1,39:1,37:-1,go:function(a){c.set("highlight",c.item.highlight.pick+a*c.item.interval,{interval:a*c.item.interval}),this.render()}},a.on("render",function(){var c=a.$root.children(),d=c.find("."+b.klass.viewset);d.length&&(c[0].scrollTop=~~d.position().top-2*d[0].clientHeight)}).on("open",function(){a.$root.find("button").attr("disable",!1)}).on("close",function(){a.$root.find("button").attr("disable",!0)})}var d=24,e=60,f=12,g=d*e,h=a._;c.prototype.set=function(a,b,c){var d=this,e=d.item;return null===b?(e[a]=b,d):(e["enable"==a?"disable":"flip"==a?"enable":a]=d.queue[a].split(" ").map(function(e){return b=d[e](a,b,c)}).pop(),"select"==a?d.set("highlight",e.select,c):"highlight"==a?d.set("view",e.highlight,c):"interval"==a?d.set("min",e.min,c).set("max",e.max,c):a.match(/^(flip|min|max|disable|enable)$/)&&("min"==a&&d.set("max",e.max,c),e.select&&d.disabled(e.select)&&d.set("select",e.select,c),e.highlight&&d.disabled(e.highlight)&&d.set("highlight",e.highlight,c)),d)},c.prototype.get=function(a){return this.item[a]},c.prototype.create=function(a,c,f){var i=this;return c=void 0===c?a:c,h.isDate(c)&&(c=[c.getHours(),c.getMinutes()]),b.isPlainObject(c)&&h.isInteger(c.pick)?c=c.pick:b.isArray(c)?c=+c[0]*e+ +c[1]:h.isInteger(c)||(c=i.now(a,c,f)),"max"==a&&c<i.item.min.pick&&(c+=g),"min"!=a&&"max"!=a&&(c-i.item.min.pick)%i.item.interval!==0&&(c+=i.item.interval),c=i.normalize(a,c,f),{hour:~~(d+c/e)%d,mins:(e+c%e)%e,time:(g+c)%g,pick:c}},c.prototype.createRange=function(a,c){var d=this,e=function(a){return a===!0||b.isArray(a)||h.isDate(a)?d.create(a):a};return h.isInteger(a)||(a=e(a)),h.isInteger(c)||(c=e(c)),h.isInteger(a)&&b.isPlainObject(c)?a=[c.hour,c.mins+a*d.settings.interval]:h.isInteger(c)&&b.isPlainObject(a)&&(c=[a.hour,a.mins+c*d.settings.interval]),{from:e(a),to:e(c)}},c.prototype.withinRange=function(a,b){return a=this.createRange(a.from,a.to),b.pick>=a.from.pick&&b.pick<=a.to.pick},c.prototype.overlapRanges=function(a,b){var c=this;return a=c.createRange(a.from,a.to),b=c.createRange(b.from,b.to),c.withinRange(a,b.from)||c.withinRange(a,b.to)||c.withinRange(b,a.from)||c.withinRange(b,a.to)},c.prototype.now=function(a,b){var c,d=this.item.interval,f=new Date,g=f.getHours()*e+f.getMinutes(),i=h.isInteger(b);return g-=g%d,c=0>b&&-d>=d*b+g,g+="min"==a&&c?0:d,i&&(g+=d*(c&&"max"!=a?b+1:b)),g},c.prototype.normalize=function(a,b){var c=this.item.interval,d=this.item.min&&this.item.min.pick||0;return b-="min"==a?0:(b-d)%c},c.prototype.measure=function(a,c,f){var g=this;return c?c===!0||h.isInteger(c)?c=g.now(a,c,f):b.isPlainObject(c)&&h.isInteger(c.pick)&&(c=g.normalize(a,c.pick,f)):c="min"==a?[0,0]:[d-1,e-1],c},c.prototype.validate=function(a,b,c){var d=this,e=c&&c.interval?c.interval:d.item.interval;return d.disabled(b)&&(b=d.shift(b,e)),b=d.scope(b),d.disabled(b)&&(b=d.shift(b,-1*e)),b},c.prototype.disabled=function(a){var c=this,d=c.item.disable.filter(function(d){return h.isInteger(d)?a.hour==d:b.isArray(d)||h.isDate(d)?a.pick==c.create(d).pick:b.isPlainObject(d)?c.withinRange(d,a):void 0});return d=d.length&&!d.filter(function(a){return b.isArray(a)&&"inverted"==a[2]||b.isPlainObject(a)&&a.inverted}).length,-1===c.item.enable?!d:d||a.pick<c.item.min.pick||a.pick>c.item.max.pick},c.prototype.shift=function(a,b){var c=this,d=c.item.min.pick,e=c.item.max.pick;for(b=b||c.item.interval;c.disabled(a)&&(a=c.create(a.pick+=b),!(a.pick<=d||a.pick>=e)););return a},c.prototype.scope=function(a){var b=this.item.min.pick,c=this.item.max.pick;return this.create(a.pick>c?c:a.pick<b?b:a)},c.prototype.parse=function(a,c,d){var f,g,i,j,k,l=this,m={};if(!c||h.isInteger(c)||b.isArray(c)||h.isDate(c)||b.isPlainObject(c)&&h.isInteger(c.pick))return c;d&&d.format||(d=d||{},d.format=l.settings.format),l.formats.toArray(d.format).map(function(a){var b,d=l.formats[a],e=d?h.trigger(d,l,[c,m]):a.replace(/^!/,"").length;d&&(b=c.substr(0,e),m[a]=b.match(/^\d+$/)?+b:b),c=c.substr(e)});for(j in m)k=m[j],h.isInteger(k)?j.match(/^(h|hh)$/i)?(f=k,("h"==j||"hh"==j)&&(f%=12)):"i"==j&&(g=k):j.match(/^a$/i)&&k.match(/^p/i)&&("h"in m||"hh"in m)&&(i=!0);return(i?f+12:f)*e+g},c.prototype.formats={h:function(a,b){return a?h.digits(a):b.hour%f||f},hh:function(a,b){return a?2:h.lead(b.hour%f||f)},H:function(a,b){return a?h.digits(a):""+b.hour%24},HH:function(a,b){return a?h.digits(a):h.lead(b.hour%24)},i:function(a,b){return a?2:h.lead(b.mins)},a:function(a,b){return a?4:g/2>b.time%g?"a.m.":"p.m."},A:function(a,b){return a?2:g/2>b.time%g?"AM":"PM"},toArray:function(a){return a.split(/(h{1,2}|H{1,2}|i|a|A|!.)/g)},toString:function(a,b){var c=this;return c.formats.toArray(a).map(function(a){return h.trigger(c.formats[a],c,[0,b])||a.replace(/^!/,"")}).join("")}},c.prototype.isTimeExact=function(a,c){var d=this;return h.isInteger(a)&&h.isInteger(c)||"boolean"==typeof a&&"boolean"==typeof c?a===c:(h.isDate(a)||b.isArray(a))&&(h.isDate(c)||b.isArray(c))?d.create(a).pick===d.create(c).pick:b.isPlainObject(a)&&b.isPlainObject(c)?d.isTimeExact(a.from,c.from)&&d.isTimeExact(a.to,c.to):!1},c.prototype.isTimeOverlap=function(a,c){var d=this;return h.isInteger(a)&&(h.isDate(c)||b.isArray(c))?a===d.create(c).hour:h.isInteger(c)&&(h.isDate(a)||b.isArray(a))?c===d.create(a).hour:b.isPlainObject(a)&&b.isPlainObject(c)?d.overlapRanges(a,c):!1},c.prototype.flipEnable=function(a){var b=this.item;b.enable=a||(-1==b.enable?1:-1)},c.prototype.deactivate=function(a,c){var d=this,e=d.item.disable.slice(0);return"flip"==c?d.flipEnable():c===!1?(d.flipEnable(1),e=[]):c===!0?(d.flipEnable(-1),e=[]):c.map(function(a){for(var c,f=0;f<e.length;f+=1)if(d.isTimeExact(a,e[f])){c=!0;break}c||(h.isInteger(a)||h.isDate(a)||b.isArray(a)||b.isPlainObject(a)&&a.from&&a.to)&&e.push(a)}),e},c.prototype.activate=function(a,c){var d=this,e=d.item.disable,f=e.length;return"flip"==c?d.flipEnable():c===!0?(d.flipEnable(1),e=[]):c===!1?(d.flipEnable(-1),e=[]):c.map(function(a){var c,g,i,j;for(i=0;f>i;i+=1){if(g=e[i],d.isTimeExact(g,a)){c=e[i]=null,j=!0;break}if(d.isTimeOverlap(g,a)){b.isPlainObject(a)?(a.inverted=!0,c=a):b.isArray(a)?(c=a,c[2]||c.push("inverted")):h.isDate(a)&&(c=[a.getFullYear(),a.getMonth(),a.getDate(),"inverted"]);break}}if(c)for(i=0;f>i;i+=1)if(d.isTimeExact(e[i],a)){e[i]=null;break}if(j)for(i=0;f>i;i+=1)if(d.isTimeOverlap(e[i],a)){e[i]=null;break}c&&e.push(c)}),e.filter(function(a){return null!=a})},c.prototype.i=function(a,b){return h.isInteger(b)&&b>0?b:this.item.interval},c.prototype.nodes=function(a){var b=this,c=b.settings,d=b.item.select,e=b.item.highlight,f=b.item.view,g=b.item.disable;return h.node("ul",h.group({min:b.item.min.pick,max:b.item.max.pick,i:b.item.interval,node:"li",item:function(a){a=b.create(a);var i=a.pick,j=d&&d.pick==i,k=e&&e.pick==i,l=g&&b.disabled(a);return[h.trigger(b.formats.toString,b,[h.trigger(c.formatLabel,b,[a])||c.format,a]),function(a){return j&&a.push(c.klass.selected),k&&a.push(c.klass.highlighted),f&&f.pick==i&&a.push(c.klass.viewset),l&&a.push(c.klass.disabled),a.join(" ")}([c.klass.listItem]),"data-pick="+a.pick+" "+h.ariaAttr({role:"button",controls:b.$node[0].id,checked:j&&b.$node.val()===h.trigger(b.formats.toString,b,[c.format,a])?!0:null,activedescendant:k?!0:null,disabled:l?!0:null})]}})+h.node("li",h.node("button",c.clear,c.klass.buttonClear,"type=button data-clear=1"+(a?"":" disable"))),c.klass.list)},c.defaults=function(a){return{clear:"Clear",format:"h:i A",interval:30,klass:{picker:a+" "+a+"--time",holder:a+"__holder",list:a+"__list",listItem:a+"__list-item",disabled:a+"__list-item--disabled",selected:a+"__list-item--selected",highlighted:a+"__list-item--highlighted",viewset:a+"__list-item--viewset",now:a+"__list-item--now",buttonClear:a+"__button--clear"}}}(a.klasses().picker),a.extend("pickatime",c)}),define("mockup-patterns-pickadate",["jquery","mockup-patterns-base","picker","picker.date","picker.time","mockup-patterns-select2","translate"],function(a,b,c,d,e,f,g){"use strict";var h=b.extend({name:"pickadate",trigger:".pat-pickadate",defaults:{separator:" ",date:{selectYears:!0,selectMonths:!0},time:{},timezone:null,classWrapperName:"pattern-pickadate-wrapper",classSeparatorName:"pattern-pickadate-separator",classDateName:"pattern-pickadate-date",classDateWrapperName:"pattern-pickadate-date-wrapper",classTimeName:"pattern-pickadate-time",classTimeWrapperName:"pattern-pickadate-time-wrapper",classTimezoneName:"pattern-pickadate-timezone",classTimezoneWrapperName:"pattern-pickadate-timezone-wrapper",classClearName:"pattern-pickadate-clear",placeholderDate:g("Enter date..."),placeholderTime:g("Enter time..."),placeholderTimezone:g("Enter timezone...")},isFalse:function(a){return"string"==typeof a&&"false"===a?!1:a},init:function(){var b=this,c=b.$el.val().split(" "),d=c[0]||"",e=c[1]||"";if(b.options.date=b.isFalse(b.options.date),b.options.time=b.isFalse(b.options.time),b.options.date===!1&&(e=c[0]),b.$el.hide(),b.$wrapper=a("<div/>").addClass(b.options.classWrapperName).insertAfter(b.$el),b.options.date!==!1&&(b.options.date.formatSubmit="yyyy-mm-dd",b.$date=a('<input type="text"/>').attr("placeholder",b.options.placeholderDate).attr("data-value",d).addClass(b.options.classDateName).appendTo(a("<div/>").addClass(b.options.classDateWrapperName).appendTo(b.$wrapper)).pickadate(a.extend(!0,{},b.options.date,{onSet:function(a){void 0!==a.select&&(b.$date.attr("data-value",a.select),(b.options.time===!1||""!==b.$time.attr("data-value"))&&b.updateValue.call(b)),a.hasOwnProperty("clear")&&(b.$el.removeAttr("value"),b.$date.attr("data-value",""))}}))),b.options.date!==!1&&b.options.time!==!1&&(b.$separator=a("<span/>").addClass(b.options.classSeparatorName).html(" "===b.options.separator?"&nbsp;":b.options.separator).appendTo(b.$wrapper)),b.options.time!==!1&&(b.options.time.formatSubmit="HH:i",b.$time=a('<input type="text"/>').attr("placeholder",b.options.placeholderTime).attr("data-value",e).addClass(b.options.classTimeName).appendTo(a("<div/>").addClass(b.options.classTimeWrapperName).appendTo(b.$wrapper)).pickatime(a.extend(!0,{},b.options.time,{onSet:function(a){void 0!==a.select&&(b.$time.attr("data-value",a.select),(b.options.date===!1||""!==b.$date.attr("data-value"))&&b.updateValue.call(b)),a.hasOwnProperty("clear")&&(b.$el.removeAttr("value"),b.$time.attr("data-value",""))}})),"string"==typeof e&&"00"===e.substring(0,2)&&(b.$time.pickatime("picker").set("select",e.split(":")),b.$time.attr("data-value",e))),b.options.date!==!1&&b.options.time!==!1&&b.options.timezone&&(b.$separator=a("<span/>").addClass(b.options.classSeparatorName).html(" "===b.options.separator?"&nbsp;":b.options.separator).appendTo(b.$wrapper)),null!==b.options.timezone){b.$timezone=a('<input type="text"/>').addClass(b.options.classTimezoneName).appendTo(a("<div/>").addClass(b.options.classTimezoneWrapperName).appendTo(b.$wrapper)).patternSelect2(a.extend(!0,{placeholder:b.options.placeholderTimezone,width:"10em"},b.options.timezone,{multiple:!1})).on("change",function(a){void 0!==a.val&&(b.$timezone.attr("data-value",a.val),b.options.date!==!1&&""===b.$date.attr("data-value")||b.options.time!==!1&&""===b.$time.attr("data-value")||b.updateValue.call(b))});var f=b.options.timezone["default"];if(f){var g;b.options.timezone.data.forEach(function(a){g=a.text===b.options.timezone["default"]?!0:!1}),g&&(b.$timezone.attr("data-value",f),b.$timezone.parent().find(".select2-chosen").text(f))}1===b.options.timezone.data.length&&(b.$timezone.attr("data-value",b.options.timezone.data[0].text),b.$timezone.parent().find(".select2-chosen").text(b.options.timezone.data[0].text),b.$timezone.select2("enable",!1))}b.$clear=a("<div/>").addClass(b.options.classClearName).appendTo(b.$wrapper)},updateValue:function(){var a=this,b="";if(a.options.date!==!1){var c=a.$date.data("pickadate").component,d=a.$date.data("pickadate").get("select"),e=c.formats.toString;d&&(b+=e.apply(c,["yyyy-mm-dd",d]))}if(a.options.date!==!1&&a.options.time!==!1&&(b+=" "),a.options.time!==!1){var f=a.$time.data("pickatime").component,g=a.$time.data("pickatime").get("select"),h=f.formats.toString;g&&(b+=h.apply(f,["HH:i",g]))}if(null!==a.options.timezone){var i=" "+a.$timezone.attr("data-value");i&&(b+=i)}a.$el.attr("value",b),a.emit("updated")}});return h}),define("mockup-patterns-querystring",["jquery","mockup-patterns-base","mockup-patterns-select2","mockup-patterns-pickadate","select2","translate"],function(a,b,c,d,e,f){"use strict";var g=function(){this.init.apply(this,arguments)};g.prototype={defaults:{indexWidth:"20em",placeholder:f("Select criteria"),remove:"",results:f(" items matching your search."),days:f("days"),betweendt:f("to"),classBetweenDtName:"querystring-criteria-betweendt",classWrapperName:"querystring-criteria-wrapper",classIndexName:"querystring-criteria-index",classOperatorName:"querystring-criteria-operator",classValueName:"querystring-criteria-value",classRemoveName:"querystring-criteria-remove",classResultsName:"querystring-criteria-results",classClearName:"querystring-criteria-clear"},init:function(b,c,d,f,g,h){var i=this;i.options=a.extend(!0,{},i.defaults,c),i.indexes=d,i.indexGroups={},i.$wrapper=a("<div/>").addClass(i.options.classWrapperName).appendTo(b),i.$remove=a("<div>"+i.options.remove+"</div>").addClass(i.options.classRemoveName).appendTo(i.$wrapper).on("click",function(a){i.remove()}),i.$index=a("<select><option></option></select>").attr("placeholder",i.options.placeholder),a.each(i.indexes,function(b,c){c.enabled&&(i.indexGroups[c.group]||(i.indexGroups[c.group]=a("<optgroup/>").attr("label",c.group).appendTo(i.$index)),i.indexGroups[c.group].append(a("<option/>").attr("value",b).html(c.title)))}),i.$wrapper.append(a("<div/>").addClass(i.options.classIndexName).append(i.$index)),i.$index.patternSelect2({width:i.options.indexWidth,placeholder:i.options.placeholder}).on("change",function(a){i.removeValue(),i.createOperator(a.val),i.createClear(),i.trigger("index-changed")}),f!==e&&(i.$index.select2("val",f),i.createOperator(f,g,h),i.createClear()),i.trigger("create-criteria")},createOperator:function(b,c,d){var f=this;f.removeOperator(),f.$operator=a("<select/>"),f.indexes[b]&&a.each(f.indexes[b].operators,function(b,c){a("<option/>").attr("value",b).html(c.title).appendTo(f.$operator)}),f.$wrapper.append(a("<div/>").addClass(f.options.classOperatorName).append(f.$operator)),f.$operator.patternSelect2({width:"10em"}).on("change",function(a){f.createValue(b),f.createClear(),f.trigger("operator-changed")}),c===e&&(c=f.$operator.select2("val")),f.$operator.select2("val",c),f.createValue(b,d),f.trigger("create-operator")},createValue:function(b,c){var d=this,f=d.indexes[b].operators[d.$operator.val()].widget,g=a("<div/>").addClass(d.options.classValueName).appendTo(d.$wrapper);if(d.removeValue(),"StringWidget"===f)d.$value=a('<input type="text"/>').addClass(d.options.classValueName+"-"+f).val(c).appendTo(g).change(function(){d.trigger("value-changed")});else if("DateWidget"===f)d.$value=a('<input type="text"/>').addClass(d.options.classValueName+"-"+f).appendTo(g).patternPickadate({time:!1,date:{format:"dd/mm/yyyy"}}).change(function(){d.trigger("value-changed")});else if("DateRangeWidget"===f){var h=a("<span/>").appendTo(g),i=a('<input type="text"/>').addClass(d.options.classValueName+"-"+f).addClass(d.options.classValueName+"-"+f+"-start").appendTo(h).patternPickadate({time:!1,date:{format:"dd/mm/yyyy"}});g.append(a("<span/>").html(d.options.betweendt).addClass(d.options.classBetweenDtName));var j=a("<span/>").appendTo(g),k=a('<input type="text"/>').addClass(d.options.classValueName+"-"+f).addClass(d.options.classValueName+"-"+f+"-end").appendTo(j).patternPickadate({time:!1,date:{format:"dd/mm/yyyy"}});g.find(".picker__input").change(function(){d.trigger("value-changed")}),d.$value=[i,k]}else"RelativeDateWidget"===f?d.$value=a('<input type="text"/>').after(a("<span/>").html(d.options.days)).addClass(d.options.classValueName+"-"+f).appendTo(g).change(function(){d.trigger("value-changed")}):"ReferenceWidget"===f?d.$value=a('<input type="text"/>').addClass(d.options.classValueName+"-"+f).appendTo(g).change(function(){d.trigger("value-changed")}):"RelativePathWidget"===f?d.$value=a('<input type="text"/>').addClass(d.options.classValueName+"-"+f).appendTo(g).val(c).change(function(){d.trigger("value-changed")}):"MultipleSelectionWidget"===f&&(d.$value=a("<select/>").prop("multiple",!0).addClass(d.options.classValueName+"-"+f).appendTo(g).change(function(){d.trigger("value-changed")}),d.indexes[b]&&a.each(d.indexes[b].values,function(b,c){a("<option/>").attr("value",b).html(c.title).appendTo(d.$value)}),d.$value.patternSelect2({width:"250px"}));c!==e&&"undefined"!=typeof d.$value&&d.$value.select2("val",c),d.trigger("create-value")},createClear:function(){var b=this;b.removeClear(),b.$clear=a("<div/>").addClass(b.options.classClearName).appendTo(b.$wrapper)},remove:function(){var a=this;a.trigger("remove"),a.$remove.remove(),a.$index.parent().remove(),a.removeOperator(),a.removeValue(),a.removeClear(),a.$wrapper.remove()},removeClear:function(){var a=this;a.trigger("remove-clear"),a.$clear&&a.$clear.remove()},removeOperator:function(){var a=this;a.trigger("remove-operator"),a.$operator&&a.$operator.parent().remove()},removeValue:function(){var b=this;b.trigger("remove-value"),b.$value&&(a.isArray(b.$value)?b.$value[0].parents(".querystring-criteria-value").remove():b.$value.parents(".querystring-criteria-value").remove())},buildQueryPart:function(){var b=this,c=b.$index.select2("val");if(""===c)return"";var d="query.i:records="+c;if("undefined"==typeof b.$operator)return"";var e=b.$operator.val(),f="query.o:records="+e,g="query.v:records=",h="query.v:records:list=",i=[];return"undefined"==typeof b.$value?i.push(g):a.isArray(b.$value)?a.each(b.$value,function(b,c){i.push(h+a(this).parent().find(".picker__input").val())}):i.push(g+b.$value.val()),d+"&"+f+"&"+i.join("&")},getJSONListStr:function(){var b=this,c=b.$index.select2("val");if(""===c)return"";if("undefined"==typeof b.$operator)return"";var d=b.$operator.val(),e=[];a.isArray(b.$value)?a.each(b.$value,function(b,c){e.push(a(this).parent().find(".picker__input").val())}):"undefined"!=typeof b.$value&&e.push(b.$value.val());var f;return f=e.length>1?"[j"+e.join('","')+'"]':1===e.length?JSON.stringify(e[0]):'""','{"i":"'+c+'", "o":"'+d+'", "v":'+f+"}"},trigger:function(a){this.$wrapper.trigger(a+"-criteria.querystring.patterns",[this])},on:function(a,b){this.$wrapper.on(a+"-criteria.querystring.patterns",b)}};var h=b.extend({name:"querystring",trigger:".pat-querystring",defaults:{indexes:[],classWrapperName:"querystring-wrapper",criteria:{},indexOptionsUrl:null,previewURL:"portal_factory/@@querybuilder_html_results",previewCountURL:"portal_factory/@@querybuildernumberofresults",sorttxt:f("Sort On"),reversetxt:f("Reversed Order"),previewTitle:f("Preview"),previewDescription:f("Preview of at most 10 items"),classSortLabelName:"querystring-sort-label",classSortReverseName:"querystring-sortreverse",classSortReverseLabelName:"querystring-sortreverse-label",classPreviewCountWrapperName:"querystring-previewcount-wrapper",classPreviewResultsWrapperName:"querystring-previewresults-wrapper",classPreviewWrapperName:"querystring-preview-wrapper",classPreviewName:"querystring-preview",classPreviewTitleName:"querystring-preview-title",classPreviewDescriptionName:"querystring-preview-description",classSortWrapperName:"querystring-sort-wrapper",showPreviews:!0},init:function(){var b=this;b.$el.hide(),b.$wrapper=a("<div/>"),b.$el.after(b.$wrapper),b.initialized=!1,b.options.indexOptionsUrl?a.ajax({url:b.options.indexOptionsUrl,success:function(a){b.options.indexes=a.indexes,b.options.sortable_indexes=a.sortable_indexes,b._init()},error:function(a){}}):b._init()},_init:function(){var b=this;b.$criteriaWrapper=a("<div/>").addClass(b.options.classWrapperName).appendTo(b.$wrapper),b.$sortWrapper=a("<div/>").addClass(b.options.classSortWrapperName).appendTo(b.$wrapper),"false"===b.options.showPreviews&&(b.options.showPreviews=!1),b.options.showPreviews&&(b.$previewWrapper=a("<div/>").addClass(b.options.classPreviewWrapperName).appendTo(b.$wrapper),a("<div/>").addClass(b.options.classPreviewTitleName).html(b.options.previewTitle).appendTo(b.$previewWrapper),a("<div/>").addClass(b.options.classPreviewDescriptionName).html(b.options.previewDescription).appendTo(b.$previewWrapper)),b.criterias=[],b.$el.val()&&a.each(JSON.parse(b.$el.val()),function(a,c){b.createCriteria(c.i,c.o,c.v)}),b.createCriteria(),b.createSort(),b.options.showPreviews&&b.refreshPreviewEvent(),b.$el.trigger("initialized"),b.initialized=!0},createCriteria:function(a,b,c){var d=this,e=new g(d.$criteriaWrapper,d.options.criteria,d.options.indexes,a,b,c);e.on("remove",function(a){d.criterias[d.criterias.length-1]===e&&d.createCriteria()}),e.on("index-changed",function(a){d.criterias[d.criterias.length-1]===e&&d.createCriteria()});var f=function(){d.refreshPreviewEvent(),d.updateValue()};e.on("remove",function(a,b){-1!==d.criterias.indexOf(b)&&d.criterias.splice(d.criterias.indexOf(b),1),f(a,b)}),e.on("remove-clear",f),e.on("remove-operator",f),e.on("remove-value",f),e.on("index-changed",f),e.on("operator-changed",f),e.on("create-criteria",f),e.on("create-operator",f),e.on("create-value",f),e.on("value-changed",f),d.criterias.push(e)},createSort:function(){var b=this,c=a('[id$="-sort_on"]').filter('[id^="formfield-"]'),d=a('[id$="-sort_reversed"]').filter('[id^="formfield-"]');a("<span/>").addClass(b.options.classSortLabelName).html(b.options.sorttxt).appendTo(b.$sortWrapper),b.$sortOn=a("<select/>").attr("name","sort_on").appendTo(b.$sortWrapper).change(function(){b.refreshPreviewEvent.call(b),a('[id$="sort_on"]',c).val(a(this).val())}),b.$sortOn.append(a('<option value="">No sorting</option>'));for(var e in b.options.sortable_indexes)b.$sortOn.append(a("<option/>").attr("value",e).html(b.options.indexes[e].title));if(b.$sortOn.patternSelect2({width:150}),b.$sortOrder=a('<input type="checkbox" />').attr("name","sort_reversed:boolean").change(function(){b.refreshPreviewEvent.call(b),a(this).prop("checked")?a('.option input[type="checkbox"]',d).prop("checked",!0):a('.option input[type="checkbox"]',d).prop("checked",!1)}),a("<span/>").addClass(b.options.classSortReverseName).appendTo(b.$sortWrapper).append(b.$sortOrder).append(a("<span/>").html(b.options.reversetxt).addClass(b.options.classSortReverseLabelName)),c.length>=1&&d.length>=1){var f=a('.option input[type="checkbox"]',d).prop("checked"),g=a('[id$="-sort_on"]',c).val();f&&b.$sortOrder.prop("checked",!0),b.$sortOn.select2("val",g),a(c).hide(),a(d).hide()}},refreshPreviewEvent:function(){var b=this;if(b.options.showPreviews){"undefined"!=typeof b._previewXhr&&b._previewXhr.abort(),"undefined"!=typeof b.$previewPane&&b.$previewPane.remove();var c,d=[];if(a.each(b.criterias,function(a,b){c=b.buildQueryPart(),""!==c&&d.push(b.buildQueryPart())}),b.$previewPane=a("<div/>").addClass(b.options.classPreviewName).appendTo(b.$previewWrapper),d.length<=0)return void a("<div/>").addClass(b.options.classPreviewCountWrapperName).html("No results to preview").prependTo(b.$previewPane);d.push("sort_on="+b.$sortOn.val()),b.$sortOrder.prop("checked")&&d.push("sort_order=reverse"),b._previewXhr=a.get(b.options.previewURL+"?"+d.join("&")).done(function(c,d){a("<div/>").addClass(b.options.classPreviewResultsWrapperName).html(c).appendTo(b.$previewPane)})}},updateValue:function(){var b=this,c=[];a.each(b.criterias,function(a,b){var d=b.getJSONListStr();""!==d&&c.push(d)});var d=(b.$el.val(),"["+c.join(",")+"]");b.$el.val(d),b.$el.trigger("change")}});return h}),define("mockup-patterns-inlinevalidation",["jquery","mockup-patterns-base"],function(a,b){"use strict";var c=b.extend({name:"inlinevalidation",trigger:".pat-inlinevalidation",render_error:function(b,c){var d=a("div.fieldErrorBox",b);""!==c?(b.addClass("error"),d.html(c)):(b.removeClass("error"),d.html(""))},append_url_path:function(a,b){var c,d,e=a.split(/\?/);for(d=e[0],"/"!==d[d.length-1]&&(d+="/"),d+=b,c=1;c<e.length;c+=1)d+="?"+e[c];return d},validate_archetypes_field:function(b){var c=a(b),d=c.closest(".field"),e=d.attr("data-uid"),f=d.attr("data-fieldname"),g=c.val();c.prop("multiple")&&null===g&&(g=a([]).serialize());var h,i=a.param({uid:e,fname:f,value:g},h=!0);d&&e&&f&&a.post(a("base").attr("href")+"/at_validate_field",i,function(a){this.render_error(d,a.errmsg)})},validate_formlib_field:function(b){var c=a(b),d=c.closest(".field"),e=d.closest("form"),f=d.attr("data-fieldname");e.ajaxSubmit({url:this.append_url_path(e.attr("action"),"@@formlib_validate_field"),data:{fname:f},iframe:!1,success:a.proxy(function(a){this.render_error(d,a.errmsg)},this),dataType:"json"})},validate_z3cform_field:function(b){var c=a(b),d=c.closest(".field"),e=d.closest("form"),f=c.closest("fieldset").attr("data-fieldset"),g=d.attr("data-fieldname");g&&e.ajaxSubmit({url:this.append_url_path(e.attr("action"),"@@z3cform_validate_field"),data:{fname:g,fset:f},iframe:!1,success:a.proxy(function(a){this.render_error(d,a.errmsg)},this),dataType:"json"})},init:function(){this.$el.find('input[type="text"], input[type="password"], input[type="checkbox"], select, textarea').on("blur",a.proxy(function(a){"archetypes"===this.options.type?this.validate_archetypes_field(a.target):"z3c.form"===this.options.type?this.validate_z3cform_field(a.target):"formlib"===this.options.type&&this.validate_formlib_field(a.target)},this))}});return c}),define("mockup-ui-url/views/base",["jquery","underscore","backbone","translate"],function(a,b,c,d){"use strict";var e=c.View.extend({isUIView:!0,eventPrefix:"ui",template:null,appendInContainer:!0,initialize:function(a){this.options=a;for(var b in this.options)this[b]=this.options[b]},render:function(){return this.applyTemplate(),this.trigger("render",this),this.afterRender(),!this.$el.attr("id")&&this.options.id&&this.$el.attr("id","gen-"+this.options.id),this},afterRender:function(){},serializedModel:function(){return this.options},applyTemplate:function(){if(null!==this.template){var c=a.extend({_t:d},this.options,this.serializedModel()),e=this.template;"string"==typeof e&&(e=b.template(e)),this.$el.html(e(c))}},propagateEvent:function(a){if(a.indexOf(":")>0){var b=a.split(":")[0];if(""!==this.eventPrefix&&(b===this.eventPrefix||b===this.eventPrefix+"."+this.id))return!0}return!1},uiEventTrigger:function(a){var b=[].slice.call(arguments,0);""!==this.eventPrefix&&(b[0]=this.eventPrefix+":"+a,c.View.prototype.trigger.apply(this,b),this.id&&(b[0]=this.eventPrefix+"."+this.id+":"+a,c.View.prototype.trigger.apply(this,b)))}});return e}),define("mockup-ui-url/views/container",["jquery","underscore","backbone","mockup-ui-url/views/base"],function(a,b,c,d){"use strict";var e=d.extend({id:"",items:[],itemContainer:null,isOffsetParent:!0,render:function(){return this.applyTemplate(),this.renderItems(),this.bindEvents(),this.isOffsetParent&&this.$el.addClass("ui-offset-parent"),this.trigger("render",this),this.afterRender(),this},renderItems:function(){var c;if(null!==this.itemContainer){if(c=a(this.itemContainer,this.$el),0===c.length)throw"Item Container element not found."}else c=this.$el;b.each(this.items,function(a){a.appendInContainer===!0?c.append(a.render().$el):a.render()},this)},bindEvents:function(){var a=this;b.each(this.items,function(b){b.on("all",function(){var b,c=[].slice,d=arguments[0],e=""!==a.id?a.id+"."+d:d;if(arguments.length>1&&(b=arguments[1]),e!==d){var f=c.call(arguments,0);f[0]=e,a.trigger.apply(a,f)}void 0!==b&&b.isUIView===!0&&b.propagateEvent(d)===!0&&a.trigger.apply(a,arguments)})})},get:function(a){return b.findWhere(this.items,{id:a})},add:function(a){if(void 0!==a.id&&this.get(a.id))throw"Another item with the same `id` already exists.";this.items.push(a)}});return e}),define("mockup-ui-url/views/toolbar",["underscore","backbone","mockup-ui-url/views/container"],function(a,b,c){"use strict";var d=c.extend({tagName:"div",className:"navbar"});return d}),define("mockup-ui-url/views/buttongroup",["underscore","backbone","mockup-ui-url/views/container"],function(a,b,c){"use strict";var d=c.extend({tagName:"div",className:"btn-group",disable:function(){a.each(this.items,function(a){a.trigger("disable")})},enable:function(){a.each(this.items,function(a){a.trigger("enable")})}});return d}),define("mockup-patterns-tooltip",["jquery","mockup-patterns-base"],function(a,b,c){"use strict";var d=b.extend({name:"tooltip",trigger:".pat-tooltip",init:function(a,b){this.data=new e(this.$el[0],this.options)}}),e=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",a,b)};return e.VERSION="3.2.0",e.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},e.prototype.init=function(b,c,d){this.enabled=!0,this.type=b,this.$element=a(c),
-this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(this.options.viewport.selector||this.options.viewport);for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},e.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},e.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show()},e.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},e.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var c=a.contains(document.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!c)return;var d=this,e=this.tip(),f=this.getUID(this.type);this.setContent(),e.attr("id",f),this.$element.attr("aria-describedby",f),this.options.animation&&e.addClass("fade");var g="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,h=/\s?auto?\s?/i,i=h.test(g);i&&(g=g.replace(h,"")||"top"),e.detach().css({top:0,left:0,display:"block"}).addClass(g).data("bs."+this.type,this),this.options.container?e.appendTo(this.options.container):e.insertAfter(this.$element);var j=this.getPosition(),k=e[0].offsetWidth,l=e[0].offsetHeight;if(i){var m=g,n=this.$element.parent(),o=this.getPosition(n);g="bottom"==g&&j.top+j.height+l-o.scroll>o.height?"top":"top"==g&&j.top-o.scroll-l<0?"bottom":"right"==g&&j.right+k>o.width?"left":"left"==g&&j.left-k<o.left?"right":g,e.removeClass(m).addClass(g)}var p=this.getCalculatedOffset(g,j,k,l);this.applyPlacement(p,g);var q=function(){d.$element.trigger("shown.bs."+d.type),d.hoverState=null};a.support.transition&&this.$tip.hasClass("fade")?e.one("bsTransitionEnd",q).emulateTransitionEnd(150):q()}},e.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top=b.top+g,b.left=b.left+h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=k.left?2*k.left-e+i:2*k.top-f+j,m=k.left?"left":"top",n=k.left?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(l,d[0][n],m)},e.prototype.replaceArrow=function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},e.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"ht`ml":"text"](b),a.removeClass("fade in top bottom left right")},e.prototype.hide=function(){function b(){"in"!=c.hoverState&&d.detach(),c.$element.trigger("hidden.bs."+c.type)}var c=this,d=this.tip(),e=a.Event("hide.bs."+this.type);return this.$element.removeAttr("aria-describedby"),this.$element.trigger(e),e.isDefaultPrevented()?void 0:(d.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d.one("bsTransitionEnd",b).emulateTransitionEnd(150):b(),this.hoverState=null,this)},e.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},e.prototype.hasContent=function(){return this.getTitle()},e.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName;return a.extend({},"function"==typeof c.getBoundingClientRect?c.getBoundingClientRect():null,{scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop(),width:d?a(window).width():b.outerWidth(),height:d?a(window).height():b.outerHeight()},d?{top:0,left:0}:b.offset())},e.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},e.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.width&&(e.left=g.left+g.width-k)}return e},e.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},e.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},e.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},e.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.toggleEnabled=function(){this.enabled=!this.enabled},e.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),c.tip().hasClass("in")?c.leave(c):c.enter(c)},e.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)},d}),define("mockup-ui-url/views/button",["jquery","backbone","underscore","mockup-ui-url/views/base","mockup-patterns-tooltip"],function(a,b,c,d,e){"use strict";var f=d.extend({tagName:"a",className:"btn",eventPrefix:"button",context:"default",attributes:{href:"#"},extraClasses:[],tooltip:null,template:'<% if (icon) { %><span class="glyphicon glyphicon-<%= icon %>"></span><% } %> <%= title %>',events:{click:"handleClick"},initialize:function(a){if(!a.id){var b=a.title||"";a.id=""!==b?b.toLowerCase().replace(" ","-"):this.cid}d.prototype.initialize.apply(this,[a]),this.on("disable",function(){this.disable()},this),this.on("enable",function(){this.enable()},this),this.on("render",function(){if(null!==this.context&&this.$el.addClass("btn-"+this.context),c.each(this.extraClasses,function(a){this.$el.addClass(a)}),null!==this.tooltip){this.$el.attr("title",this.tooltip);{new e(this.$el)}this.$el.on("hidden",function(a){"hidden"===a.type&&a.stopPropagation()})}},this)},handleClick:function(a){a.preventDefault(),this.$el.is(".disabled")||this.uiEventTrigger("click",this,a)},serializedModel:function(){return c.extend({icon:"",title:""},this.options)},disable:function(){this.options.disabled=!0,this.$el.addClass("disabled")},enable:function(){this.options.disabled=!1,this.$el.removeClass("disabled")}});return f}),define("text!mockup-patterns-structure-url/templates/actionmenu.xml",[],function(){return'<a class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" href="#">\n  <span class="glyphicon glyphicon-cog"></span>\n  <span class="caret"></span>\n</a>\n<ul class="dropdown-menu pull-right">\n  <% if(header) { %>\n    <li class="dropdown-header"><%- header %></li>\n    <li class="divider"></li>\n  <% } %>\n  <li class="cutItem"><a href="#">Cut</a></li>\n  <li class="copyItem"><a href="#">Copy</a></li>\n  <% if(pasteAllowed && attributes.is_folderish){ %>\n    <li class="pasteItem"><a href="#">Paste</a></li>\n  <% } %>\n  <% if(!inQueryMode && canMove){ %>\n    <li class="move-top"><a href="#">Move to top of folder</a></li>\n    <li class="move-bottom"><a href="#">Move to bottom of folder</a></li>\n  <% } %>\n  <% if(!attributes.is_folderish && canSetDefaultPage){ %>\n    <li class="set-default-page"><a href="#">Set as default page</a></li>\n  <% } %>\n  <li class="openItem"><a href="#">Open</a></li>\n  <li class="editItem"><a href="#">Edit</a></li>\n</ul>\n\n'}),function(a){define("bootstrap-dropdown",["jquery"],function(){return function(){+function(a){"use strict";function b(b){b&&3===b.which||(a(e).remove(),a(f).each(function(){var d=c(a(this)),e={relatedTarget:this};d.hasClass("open")&&(d.trigger(b=a.Event("hide.bs.dropdown",e)),b.isDefaultPrevented()||d.removeClass("open").trigger("hidden.bs.dropdown",e))}))}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.2.0",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=c(e),g=f.hasClass("open");if(b(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus"),f.toggleClass("open").trigger("shown.bs.dropdown",h)}return!1}},g.prototype.keydown=function(b){if(/(38|40|27)/.test(b.keyCode)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var e=c(d),g=e.hasClass("open");if(!g||g&&27==b.keyCode)return 27==b.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.divider):visible a",i=e.find('[role="menu"]'+h+', [role="listbox"]'+h);if(i.length){var j=i.index(i.filter(":focus"));38==b.keyCode&&j>0&&j--,40==b.keyCode&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f+', [role="menu"], [role="listbox"]',g.prototype.keydown)}(jQuery)}.apply(a,arguments)})}(this),define("mockup-patterns-structure-url/js/views/actionmenu",["jquery","underscore","backbone","mockup-ui-url/views/base","mockup-utils","text!mockup-patterns-structure-url/templates/actionmenu.xml","bootstrap-dropdown"],function(a,b,c,d,e,f){"use strict";var g=d.extend({className:"btn-group actionmenu",template:b.template(f),events:{"click .cutItem a":"cutClicked","click .copyItem a":"copyClicked","click .pasteItem a":"pasteClicked","click .move-top a":"moveTopClicked","click .move-bottom a":"moveBottomClicked","click .set-default-page a":"setDefaultPageClicked","click .openItem a":"openClicked","click .editItem a":"editClicked"},initialize:function(a){this.options=a,this.app=a.app,this.model=a.model,this.selectedCollection=this.app.selectedCollection,this.canMove=a.canMove===!1?!1:!0},cutClicked:function(a){a.preventDefault(),this.cutCopyClicked("cut"),this.app.collection.pager()},copyClicked:function(a){a.preventDefault(),this.cutCopyClicked("copy"),this.app.collection.pager()},cutCopyClicked:function(a){var b=this;b.app.pasteOperation=a,b.app.pasteSelection=new c.Collection,b.app.pasteSelection.add(this.model),b.app.setStatus(a+" 1 item"),b.app.pasteAllowed=!0,b.app.buttons.primary.get("paste").enable()},pasteClicked:function(a){a.preventDefault(),this.app.pasteEvent(this.app.buttons.primary.get("paste"),a,{folder:this.model.attributes.path}),this.app.collection.pager()},moveTopClicked:function(a){a.preventDefault(),this.app.moveItem(this.model.attributes.id,"top")},moveBottomClicked:function(a){a.preventDefault(),this.app.moveItem(this.model.attributes.id,"bottom")},setDefaultPageClicked:function(b){b.preventDefault();var c=this;a.ajax({url:c.app.getAjaxUrl(c.app.setDefaultPageUrl),type:"POST",data:{_authenticator:a('[name="_authenticator"]').val(),id:this.$active.attr("data-id")},success:function(a){c.app.ajaxSuccessResponse.apply(c.app,[a])},error:function(a){c.app.ajaxErrorResponse.apply(c.app,[a])}})},getSelectedBaseUrl:function(){var a=this;return a.model.attributes.getURL},getWindow:function(){var a=window;return a.parent!==window&&(a=a.parent),a},openUrl:function(a){var b=this,c=b.getWindow(),d=this.app.keyEvent;d&&d.ctrlKey?c.open(a):c.location=a},openClicked:function(a){a.preventDefault();var b=this;b.openUrl(b.getSelectedBaseUrl()+"/view")},editClicked:function(a){a.preventDefault();var b=this;b.openUrl(b.getSelectedBaseUrl()+"/edit")},render:function(){var a=this;a.$el.empty();var b=this.model.toJSON();return b.attributes=a.model.attributes,b.pasteAllowed=a.app.pasteAllowed,b.canSetDefaultPage=a.app.setDefaultPageUrl,b.inQueryMode=a.app.inQueryMode(),b.header=a.options.header,b.canMove=a.canMove,a.$el.html(a.template(b)),a.$dropdown=a.$(".dropdown-toggle"),a.$dropdown.dropdown(),a.options.className&&a.$el.addClass(a.options.className),this}});return g}),define("text!mockup-patterns-structure-url/templates/tablerow.xml",[],function(){return'<td class="selection"><input type="checkbox" <% if(selected){ %> checked="checked" <% } %>/></td>\n<td class="title">\n  <a href="<%- getURL %>" class="state-<%- review_state %> contenttype-<%- portal_type.toLowerCase() %>"><%- Title %></a>\n</td>\n<% _.each(activeColumns, function(column){ %>\n  <% if(_.has(availableColumns, column)) { %>\n    <td class="<%- column %>"><%- attributes[column] %></td>\n  <% } %>\n<% }); %>\n<td class="actionmenu-container">\n</td>\n'}),define("mockup-patterns-structure-url/js/views/tablerow",["jquery","underscore","backbone","mockup-patterns-structure-url/js/views/actionmenu","text!mockup-patterns-structure-url/templates/tablerow.xml"],function(a,b,c,d,e){"use strict";var f=c.View.extend({tagName:"tr",className:"itemRow",template:b.template(e),events:{"change input":"itemSelected","click td.title a":"itemClicked"},initialize:function(a){this.options=a,this.app=a.app,this.selectedCollection=this.app.selectedCollection,this.table=this.options.table},render:function(){var b=this,c=this.model.toJSON();c.selected=!1,this.selectedCollection.findWhere({UID:c.UID})&&(c.selected=!0),c.attributes=b.model.attributes,c.activeColumns=b.app.activeColumns,c.availableColumns=b.app.availableColumns,b.$el.html(b.template(c));var e=b.model.attributes;return b.$el.addClass("state-"+e.review_state).addClass("type-"+e.portal_type),e.is_folderish&&b.$el.addClass("folder"),b.$el.attr("data-path",c.path),b.$el.attr("data-UID",c.UID),b.$el.attr("data-id",c.id),b.$el.attr("data-type",c.portal_type),b.$el.attr("data-folderish",c.is_folderish),b.el.model=this.model,b.menu=new d({app:b.app,model:b.model}),a(".actionmenu-container",b.$el).append(b.menu.render().el),this},itemClicked:function(a){a.preventDefault();var b=this.app.keyEvent;if(b&&b.ctrlKey)this.menu.openClicked(a);else if(this.model.attributes.is_folderish){this.app.queryHelper.currentPath=this.model.attributes.path;var c=this.app.collection;c.goTo(c.information.firstPage)}else this.menu.openClicked(a)},itemSelected:function(){var b=this.$("input")[0];b.checked?this.app.selectedCollection.add(this.model):this.app.selectedCollection.removeResult(this.model);var c=this.selectedCollection,d=this.app.keyEvent;if(d&&d.shiftKey&&this.app.last_selected&&null!==this.app.last_selected.parentNode){var e=a(this.app.last_selected),f=e.index(),g=this.$el.index();this.app.tableView.$('input[type="checkbox"]').each(function(){e=a(this);var d=e.parents("tr").index();if(d>f&&g>d||f>d&&d>g){this.checked=b.checked;var h=a(this).closest("tr")[0].model,i=c.getByUID(h.attributes.UID);this.checked?i||c.add(h):i&&c.remove(i)}})}this.app.last_selected=this.el}});return f}),define("text!mockup-patterns-structure-url/templates/table.xml",[],function(){return'<div class="alert alert-<%= statusType %> status">\n    <%= status %>\n</div>\n<table class="table table-striped table-bordered">\n  <thead>\n    <tr class="breadcrumbs-container">\n      <td colspan="<%= activeColumns.length + 3 %>">\n        <% if(pathParts.length > 0) { %>\n          <div class="input-group context-buttons" style="display:none">\n            <span class="input-group-addon">\n              <input type="checkbox" />\n            </span>\n            <div class="input-group-btn">\n            </div>\n          </div>\n        <% } %>\n        <div class="breadcrumbs">\n          <a href="#" data-path="/">\n            <span class="glyphicon glyphicon-home"></span> /\n          </a>\n          <% _.each(pathParts, function(part, idx, list){\n            if(part){\n              if(idx > 0){ %>\n                /\n              <% } %>\n              <a href="#" class="crumb" data-path="<%- part %>"><%- part %></a>\n            <% }\n          }); %>\n        </div>\n      </td>\n    </tr>\n    <tr>\n      <th><input type="checkbox" class="select-all" /></th>\n      <th>Title</th>\n      <% _.each(activeColumns, function(column){ %>\n        <% if(_.has(availableColumns, column)) { %>\n          <th><%- availableColumns[column] %></th>\n        <% } %>\n      <% }); %>\n      <th>Actions</th>\n    </tr>\n  </thead>\n  <tbody>\n  </tbody>\n</table>\n'}),define("mockup-patterns-sortable",["jquery","mockup-patterns-base","jquery.event.drag","jquery.event.drop"],function(a,b,c,d){"use strict";var e=b.extend({name:"sortable",trigger:".pat-sortable",defaults:{selector:"li",dragClass:"item-dragging",cloneClass:"dragging",drop:null},init:function(){var b=this,c=0;b.$el.find(b.options.selector).drag("start",function(e,f){var g=this;return a(g).addClass(b.options.dragClass),d({tolerance:function(c,d,e){if(0!==a(e.elem).closest(b.$el).length){var f=c.pageY>e.top+e.height/2;return a.data(e.elem,"drop+reorder",f?"insertAfter":"insertBefore"),this.contains(e,[c.pageX,c.pageY])}}}),c=a(this).index(),a(this).clone().addClass(b.options.cloneClass).css({opacity:.75,position:"absolute"}).appendTo(document.body)}).drag(function(b,c){a(c.proxy).css({top:c.offsetY,left:c.offsetX});var d=c.drop[0],e=a.data(d||{},"drop+reorder");e&&d&&(d!=c.current||e!=c.method)&&(a(this)[e](d),c.current=d,c.method=e,c.update())}).drag("end",function(d,e){var f=a(this);f.removeClass(b.options.dragClass),a(e.proxy).remove(),b.options.drop&&b.options.drop(f,f.index()-c)}).drop("init",function(a,b){return this==b.drag?!1:!0})}});return e}),function(a){function b(a,b,c){switch(arguments.length){case 2:return null!=a?a:b;case 3:return null!=a?a:null!=b?b:c;default:throw new Error("Implement me")}}function c(a,b){return za.call(a,b)}function d(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function e(a){ta.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}function f(a,b){var c=!0;return m(function(){return c&&(e(a),c=!1),b.apply(this,arguments)},b)}function g(a,b){qb[a]||(e(b),qb[a]=!0)}function h(a,b){return function(c){return p(a.call(this,c),b)}}function i(a,b){return function(c){return this.localeData().ordinal(a.call(this,c),b)}}function j(){}function k(a,b){b!==!1&&F(a),n(this,a),this._d=new Date(+a._d)}function l(a){var b=y(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=ta.localeData(),this._bubble()}function m(a,b){for(var d in b)c(b,d)&&(a[d]=b[d]);return c(b,"toString")&&(a.toString=b.toString),c(b,"valueOf")&&(a.valueOf=b.valueOf),a}function n(a,b){var c,d,e;if("undefined"!=typeof b._isAMomentObject&&(a._isAMomentObject=b._isAMomentObject),"undefined"!=typeof b._i&&(a._i=b._i),"undefined"!=typeof b._f&&(a._f=b._f),"undefined"!=typeof b._l&&(a._l=b._l),"undefined"!=typeof b._strict&&(a._strict=b._strict),"undefined"!=typeof b._tzm&&(a._tzm=b._tzm),"undefined"!=typeof b._isUTC&&(a._isUTC=b._isUTC),"undefined"!=typeof b._offset&&(a._offset=b._offset),"undefined"!=typeof b._pf&&(a._pf=b._pf),"undefined"!=typeof b._locale&&(a._locale=b._locale),Ia.length>0)for(c in Ia)d=Ia[c],e=b[d],"undefined"!=typeof e&&(a[d]=e);return a}function o(a){return 0>a?Math.ceil(a):Math.floor(a)}function p(a,b,c){for(var d=""+Math.abs(a),e=a>=0;d.length<b;)d="0"+d;return(e?c?"+":"":"-")+d}function q(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function r(a,b){var c;return b=K(b,a),a.isBefore(b)?c=q(a,b):(c=q(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c}function s(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(g(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=ta.duration(c,d),t(this,e,a),this}}function t(a,b,c,d){var e=b._milliseconds,f=b._days,g=b._months;d=null==d?!0:d,e&&a._d.setTime(+a._d+e*c),f&&na(a,"Date",ma(a,"Date")+f*c),g&&la(a,ma(a,"Month")+g*c),d&&ta.updateOffset(a,f||g)}function u(a){return"[object Array]"===Object.prototype.toString.call(a)}function v(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function w(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&A(a[d])!==A(b[d]))&&g++;return g+f}function x(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,"$1");a=jb[a]||kb[b]||b}return a}function y(a){var b,d,e={};for(d in a)c(a,d)&&(b=x(d),b&&(e[b]=a[d]));return e}function z(b){var c,d;if(0===b.indexOf("week"))c=7,d="day";else{if(0!==b.indexOf("month"))return;c=12,d="month"}ta[b]=function(e,f){var g,h,i=ta._locale[b],j=[];if("number"==typeof e&&(f=e,e=a),h=function(a){var b=ta().utc().set(d,a);return i.call(ta._locale,b,e||"")},null!=f)return h(f);for(g=0;c>g;g++)j.push(h(g));return j}}function A(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function B(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function C(a,b,c){return ha(ta([a,11,31+b-c]),b,c).week}function D(a){return E(a)?366:365}function E(a){return a%4===0&&a%100!==0||a%400===0}function F(a){var b;a._a&&-2===a._pf.overflow&&(b=a._a[Ba]<0||a._a[Ba]>11?Ba:a._a[Ca]<1||a._a[Ca]>B(a._a[Aa],a._a[Ba])?Ca:a._a[Da]<0||a._a[Da]>23?Da:a._a[Ea]<0||a._a[Ea]>59?Ea:a._a[Fa]<0||a._a[Fa]>59?Fa:a._a[Ga]<0||a._a[Ga]>999?Ga:-1,a._pf._overflowDayOfYear&&(Aa>b||b>Ca)&&(b=Ca),a._pf.overflow=b)}function G(a){return null==a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&a._pf.overflow<0&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length)),a._isValid}function H(a){return a?a.toLowerCase().replace("_","-"):a}function I(a){for(var b,c,d,e,f=0;f<a.length;){for(e=H(a[f]).split("-"),b=e.length,c=H(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=J(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&w(e,c,!0)>=b-1)break;b--}f++}return null}function J(a){var b=null;if(!Ha[a]&&Ja)try{b=ta.locale(),require("./locale/"+a),ta.locale(b)}catch(c){}return Ha[a]}function K(a,b){return b._isUTC?ta(a).zone(b._offset||0):ta(a).local()}function L(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function M(a){var b,c,d=a.match(Na);for(b=0,c=d.length;c>b;b++)d[b]=pb[d[b]]?pb[d[b]]:L(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function N(a,b){return a.isValid()?(b=O(b,a.localeData()),lb[b]||(lb[b]=M(b)),lb[b](a)):a.localeData().invalidDate()}function O(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Oa.lastIndex=0;d>=0&&Oa.test(a);)a=a.replace(Oa,c),Oa.lastIndex=0,d-=1;return a}function P(a,b){var c,d=b._strict;switch(a){case"Q":return Za;case"DDDD":return _a;case"YYYY":case"GGGG":case"gggg":return d?ab:Ra;case"Y":case"G":case"g":return cb;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return d?bb:Sa;case"S":if(d)return Za;case"SS":if(d)return $a;case"SSS":if(d)return _a;case"DDD":return Qa;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Ua;case"a":case"A":return b._locale._meridiemParse;case"X":return Xa;case"Z":case"ZZ":return Va;case"T":return Wa;case"SSSS":return Ta;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return d?$a:Pa;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Pa;case"Do":return Ya;default:return c=new RegExp(Y(X(a.replace("\\","")),"i"))}}function Q(a){a=a||"";var b=a.match(Va)||[],c=b[b.length-1]||[],d=(c+"").match(hb)||["-",0,0],e=+(60*d[1])+A(d[2]);return"+"===d[0]?-e:e}function R(a,b,c){var d,e=c._a;switch(a){case"Q":null!=b&&(e[Ba]=3*(A(b)-1));break;case"M":case"MM":null!=b&&(e[Ba]=A(b)-1);break;case"MMM":case"MMMM":d=c._locale.monthsParse(b),null!=d?e[Ba]=d:c._pf.invalidMonth=b;break;case"D":case"DD":null!=b&&(e[Ca]=A(b));break;case"Do":null!=b&&(e[Ca]=A(parseInt(b,10)));break;case"DDD":case"DDDD":null!=b&&(c._dayOfYear=A(b));break;case"YY":e[Aa]=ta.parseTwoDigitYear(b);break;case"YYYY":case"YYYYY":case"YYYYYY":e[Aa]=A(b);break;case"a":case"A":c._isPm=c._locale.isPM(b);break;case"H":case"HH":case"h":case"hh":e[Da]=A(b);break;case"m":case"mm":e[Ea]=A(b);break;case"s":case"ss":e[Fa]=A(b);break;case"S":case"SS":case"SSS":case"SSSS":e[Ga]=A(1e3*("0."+b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=Q(b);break;case"dd":case"ddd":case"dddd":d=c._locale.weekdaysParse(b),null!=d?(c._w=c._w||{},c._w.d=d):c._pf.invalidWeekday=b;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":a=a.substr(0,1);case"gggg":case"GGGG":case"GGGGG":a=a.substr(0,2),b&&(c._w=c._w||{},c._w[a]=A(b));break;case"gg":case"GG":c._w=c._w||{},c._w[a]=ta.parseTwoDigitYear(b)}}function S(a){var c,d,e,f,g,h,i;c=a._w,null!=c.GG||null!=c.W||null!=c.E?(g=1,h=4,d=b(c.GG,a._a[Aa],ha(ta(),1,4).year),e=b(c.W,1),f=b(c.E,1)):(g=a._locale._week.dow,h=a._locale._week.doy,d=b(c.gg,a._a[Aa],ha(ta(),g,h).year),e=b(c.w,1),null!=c.d?(f=c.d,g>f&&++e):f=null!=c.e?c.e+g:g),i=ia(d,e,f,h,g),a._a[Aa]=i.year,a._dayOfYear=i.dayOfYear}function T(a){var c,d,e,f,g=[];if(!a._d){for(e=V(a),a._w&&null==a._a[Ca]&&null==a._a[Ba]&&S(a),a._dayOfYear&&(f=b(a._a[Aa],e[Aa]),a._dayOfYear>D(f)&&(a._pf._overflowDayOfYear=!0),d=da(f,0,a._dayOfYear),a._a[Ba]=d.getUTCMonth(),a._a[Ca]=d.getUTCDate()),c=0;3>c&&null==a._a[c];++c)a._a[c]=g[c]=e[c];for(;7>c;c++)a._a[c]=g[c]=null==a._a[c]?2===c?1:0:a._a[c];a._d=(a._useUTC?da:ca).apply(null,g),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()+a._tzm)}}function U(a){var b;a._d||(b=y(a._i),a._a=[b.year,b.month,b.day,b.hour,b.minute,b.second,b.millisecond],T(a))}function V(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function W(a){if(a._f===ta.ISO_8601)return void $(a);a._a=[],a._pf.empty=!0;var b,c,d,e,f,g=""+a._i,h=g.length,i=0;for(d=O(a._f,a._locale).match(Na)||[],b=0;b<d.length;b++)e=d[b],c=(g.match(P(e,a))||[])[0],c&&(f=g.substr(0,g.indexOf(c)),f.length>0&&a._pf.unusedInput.push(f),g=g.slice(g.indexOf(c)+c.length),i+=c.length),pb[e]?(c?a._pf.empty=!1:a._pf.unusedTokens.push(e),R(e,c,a)):a._strict&&!c&&a._pf.unusedTokens.push(e);a._pf.charsLeftOver=h-i,g.length>0&&a._pf.unusedInput.push(g),a._isPm&&a._a[Da]<12&&(a._a[Da]+=12),a._isPm===!1&&12===a._a[Da]&&(a._a[Da]=0),T(a),F(a)}function X(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e})}function Y(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Z(a){var b,c,e,f,g;if(0===a._f.length)return a._pf.invalidFormat=!0,void(a._d=new Date(0/0));for(f=0;f<a._f.length;f++)g=0,b=n({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._pf=d(),b._f=a._f[f],W(b),G(b)&&(g+=b._pf.charsLeftOver,g+=10*b._pf.unusedTokens.length,b._pf.score=g,(null==e||e>g)&&(e=g,c=b));m(a,c||b)}function $(a){var b,c,d=a._i,e=db.exec(d);if(e){for(a._pf.iso=!0,b=0,c=fb.length;c>b;b++)if(fb[b][1].exec(d)){a._f=fb[b][0]+(e[6]||" ");break}for(b=0,c=gb.length;c>b;b++)if(gb[b][1].exec(d)){a._f+=gb[b][0];break}d.match(Va)&&(a._f+="Z"),W(a)}else a._isValid=!1}function _(a){$(a),a._isValid===!1&&(delete a._isValid,ta.createFromInputFallback(a))}function aa(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function ba(b){var c,d=b._i;d===a?b._d=new Date:v(d)?b._d=new Date(+d):null!==(c=Ka.exec(d))?b._d=new Date(+c[1]):"string"==typeof d?_(b):u(d)?(b._a=aa(d.slice(0),function(a){return parseInt(a,10)}),T(b)):"object"==typeof d?U(b):"number"==typeof d?b._d=new Date(d):ta.createFromInputFallback(b)}function ca(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function da(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function ea(a,b){if("string"==typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!=typeof a)return null}else a=parseInt(a,10);return a}function fa(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function ga(a,b,c){var d=ta.duration(a).abs(),e=ya(d.as("s")),f=ya(d.as("m")),g=ya(d.as("h")),h=ya(d.as("d")),i=ya(d.as("M")),j=ya(d.as("y")),k=e<mb.s&&["s",e]||1===f&&["m"]||f<mb.m&&["mm",f]||1===g&&["h"]||g<mb.h&&["hh",g]||1===h&&["d"]||h<mb.d&&["dd",h]||1===i&&["M"]||i<mb.M&&["MM",i]||1===j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,fa.apply({},k)}function ha(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=ta(a).add(f,"d"),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function ia(a,b,c,d,e){var f,g,h=da(a,0,1).getUTCDay();return h=0===h?7:h,c=null!=c?c:e,f=e-h+(h>d?7:0)-(e>h?7:0),g=7*(b-1)+(c-e)+f+1,{year:g>0?a:a-1,dayOfYear:g>0?g:D(a-1)+g}}function ja(b){var c=b._i,d=b._f;return b._locale=b._locale||ta.localeData(b._l),null===c||d===a&&""===c?ta.invalid({nullInput:!0}):("string"==typeof c&&(b._i=c=b._locale.preparse(c)),ta.isMoment(c)?new k(c,!0):(d?u(d)?Z(b):W(b):ba(b),new k(b)))}function ka(a,b){var c,d;if(1===b.length&&u(b[0])&&(b=b[0]),!b.length)return ta();for(c=b[0],d=1;d<b.length;++d)b[d][a](c)&&(c=b[d]);return c}function la(a,b){var c;return"string"==typeof b&&(b=a.localeData().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),B(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a)}function ma(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function na(a,b,c){return"Month"===b?la(a,c):a._d["set"+(a._isUTC?"UTC":"")+b](c);
+this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(this.options.viewport.selector||this.options.viewport);for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},e.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},e.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show()},e.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},e.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var c=a.contains(document.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!c)return;var d=this,e=this.tip(),f=this.getUID(this.type);this.setContent(),e.attr("id",f),this.$element.attr("aria-describedby",f),this.options.animation&&e.addClass("fade");var g="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,h=/\s?auto?\s?/i,i=h.test(g);i&&(g=g.replace(h,"")||"top"),e.detach().css({top:0,left:0,display:"block"}).addClass(g).data("bs."+this.type,this),this.options.container?e.appendTo(this.options.container):e.insertAfter(this.$element);var j=this.getPosition(),k=e[0].offsetWidth,l=e[0].offsetHeight;if(i){var m=g,n=this.$element.parent(),o=this.getPosition(n);g="bottom"==g&&j.top+j.height+l-o.scroll>o.height?"top":"top"==g&&j.top-o.scroll-l<0?"bottom":"right"==g&&j.right+k>o.width?"left":"left"==g&&j.left-k<o.left?"right":g,e.removeClass(m).addClass(g)}var p=this.getCalculatedOffset(g,j,k,l);this.applyPlacement(p,g);var q=function(){d.$element.trigger("shown.bs."+d.type),d.hoverState=null};a.support.transition&&this.$tip.hasClass("fade")?e.one("bsTransitionEnd",q).emulateTransitionEnd(150):q()}},e.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top=b.top+g,b.left=b.left+h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=k.left?2*k.left-e+i:2*k.top-f+j,m=k.left?"left":"top",n=k.left?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(l,d[0][n],m)},e.prototype.replaceArrow=function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},e.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"ht`ml":"text"](b),a.removeClass("fade in top bottom left right")},e.prototype.hide=function(){function b(){"in"!=c.hoverState&&d.detach(),c.$element.trigger("hidden.bs."+c.type)}var c=this,d=this.tip(),e=a.Event("hide.bs."+this.type);return this.$element.removeAttr("aria-describedby"),this.$element.trigger(e),e.isDefaultPrevented()?void 0:(d.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d.one("bsTransitionEnd",b).emulateTransitionEnd(150):b(),this.hoverState=null,this)},e.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},e.prototype.hasContent=function(){return this.getTitle()},e.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName;return a.extend({},"function"==typeof c.getBoundingClientRect?c.getBoundingClientRect():null,{scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop(),width:d?a(window).width():b.outerWidth(),height:d?a(window).height():b.outerHeight()},d?{top:0,left:0}:b.offset())},e.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},e.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.width&&(e.left=g.left+g.width-k)}return e},e.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},e.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},e.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},e.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.toggleEnabled=function(){this.enabled=!this.enabled},e.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),c.tip().hasClass("in")?c.leave(c):c.enter(c)},e.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)},d}),define("mockup-ui-url/views/button",["jquery","backbone","underscore","mockup-ui-url/views/base","mockup-patterns-tooltip"],function(a,b,c,d,e){"use strict";var f=d.extend({tagName:"a",className:"btn",eventPrefix:"button",context:"default",attributes:{href:"#"},extraClasses:[],tooltip:null,template:'<% if (icon) { %><span class="glyphicon glyphicon-<%= icon %>"></span><% } %> <%= title %>',events:{click:"handleClick"},initialize:function(a){if(!a.id){var b=a.title||"";a.id=""!==b?b.toLowerCase().replace(" ","-"):this.cid}d.prototype.initialize.apply(this,[a]),this.on("disable",function(){this.disable()},this),this.on("enable",function(){this.enable()},this),this.on("render",function(){if(null!==this.context&&this.$el.addClass("btn-"+this.context),c.each(this.extraClasses,function(a){this.$el.addClass(a)}),null!==this.tooltip){this.$el.attr("title",this.tooltip);{new e(this.$el)}this.$el.on("hidden",function(a){"hidden"===a.type&&a.stopPropagation()})}},this)},handleClick:function(a){a.preventDefault(),this.$el.is(".disabled")||this.uiEventTrigger("click",this,a)},serializedModel:function(){return c.extend({icon:"",title:""},this.options)},disable:function(){this.options.disabled=!0,this.$el.addClass("disabled")},enable:function(){this.options.disabled=!1,this.$el.removeClass("disabled")}});return f}),define("text!mockup-patterns-structure-url/templates/actionmenu.xml",[],function(){return'<a class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" href="#">\n  <span class="glyphicon glyphicon-cog"></span>\n  <span class="caret"></span>\n</a>\n<ul class="dropdown-menu pull-right">\n  <% if(header) { %>\n    <li class="dropdown-header"><%- header %></li>\n    <li class="divider"></li>\n  <% } %>\n  <li class="cutItem"><a href="#">Cut</a></li>\n  <li class="copyItem"><a href="#">Copy</a></li>\n  <% if(pasteAllowed && attributes.is_folderish){ %>\n    <li class="pasteItem"><a href="#">Paste</a></li>\n  <% } %>\n  <% if(!inQueryMode && canMove){ %>\n    <li class="move-top"><a href="#">Move to top of folder</a></li>\n    <li class="move-bottom"><a href="#">Move to bottom of folder</a></li>\n  <% } %>\n  <% if(!attributes.is_folderish && canSetDefaultPage){ %>\n    <li class="set-default-page"><a href="#">Set as default page</a></li>\n  <% } %>\n  <li class="openItem"><a href="#">Open</a></li>\n  <li class="editItem"><a href="#">Edit</a></li>\n</ul>\n\n'}),function(a){define("bootstrap-dropdown",["jquery"],function(){return function(){+function(a){"use strict";function b(b){b&&3===b.which||(a(e).remove(),a(f).each(function(){var d=c(a(this)),e={relatedTarget:this};d.hasClass("open")&&(d.trigger(b=a.Event("hide.bs.dropdown",e)),b.isDefaultPrevented()||d.removeClass("open").trigger("hidden.bs.dropdown",e))}))}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.2.0",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=c(e),g=f.hasClass("open");if(b(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus"),f.toggleClass("open").trigger("shown.bs.dropdown",h)}return!1}},g.prototype.keydown=function(b){if(/(38|40|27)/.test(b.keyCode)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var e=c(d),g=e.hasClass("open");if(!g||g&&27==b.keyCode)return 27==b.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.divider):visible a",i=e.find('[role="menu"]'+h+', [role="listbox"]'+h);if(i.length){var j=i.index(i.filter(":focus"));38==b.keyCode&&j>0&&j--,40==b.keyCode&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f+', [role="menu"], [role="listbox"]',g.prototype.keydown)}(jQuery)}.apply(a,arguments)})}(this),define("mockup-patterns-structure-url/js/views/actionmenu",["jquery","underscore","backbone","mockup-ui-url/views/base","mockup-utils","text!mockup-patterns-structure-url/templates/actionmenu.xml","bootstrap-dropdown"],function(a,b,c,d,e,f){"use strict";var g=d.extend({className:"btn-group actionmenu",template:b.template(f),events:{"click .cutItem a":"cutClicked","click .copyItem a":"copyClicked","click .pasteItem a":"pasteClicked","click .move-top a":"moveTopClicked","click .move-bottom a":"moveBottomClicked","click .set-default-page a":"setDefaultPageClicked","click .openItem a":"openClicked","click .editItem a":"editClicked"},initialize:function(a){this.options=a,this.app=a.app,this.model=a.model,this.selectedCollection=this.app.selectedCollection,this.canMove=a.canMove===!1?!1:!0},cutClicked:function(a){a.preventDefault(),this.cutCopyClicked("cut"),this.app.collection.pager()},copyClicked:function(a){a.preventDefault(),this.cutCopyClicked("copy"),this.app.collection.pager()},cutCopyClicked:function(a){var b=this;b.app.pasteOperation=a,b.app.pasteSelection=new c.Collection,b.app.pasteSelection.add(this.model),b.app.setStatus(a+" 1 item"),b.app.pasteAllowed=!0,b.app.buttons.primary.get("paste").enable()},pasteClicked:function(a){a.preventDefault(),this.app.pasteEvent(this.app.buttons.primary.get("paste"),a,{folder:this.model.attributes.path}),this.app.collection.pager()},moveTopClicked:function(a){a.preventDefault(),this.app.moveItem(this.model.attributes.id,"top")},moveBottomClicked:function(a){a.preventDefault(),this.app.moveItem(this.model.attributes.id,"bottom")},setDefaultPageClicked:function(b){b.preventDefault();var c=this;a.ajax({url:c.app.getAjaxUrl(c.app.setDefaultPageUrl),type:"POST",data:{_authenticator:a('[name="_authenticator"]').val(),id:this.model.attributes.id},success:function(a){c.app.ajaxSuccessResponse.apply(c.app,[a])},error:function(a){c.app.ajaxErrorResponse.apply(c.app,[a])}})},getSelectedBaseUrl:function(){var a=this;return a.model.attributes.getURL},getWindow:function(){var a=window;return a.parent!==window&&(a=a.parent),a},openUrl:function(a){var b=this,c=b.getWindow(),d=this.app.keyEvent;d&&d.ctrlKey?c.open(a):c.location=a},openClicked:function(a){a.preventDefault();var b=this;b.openUrl(b.getSelectedBaseUrl()+"/view")},editClicked:function(a){a.preventDefault();var b=this;b.openUrl(b.getSelectedBaseUrl()+"/edit")},render:function(){var a=this;a.$el.empty();var b=this.model.toJSON();return b.attributes=a.model.attributes,b.pasteAllowed=a.app.pasteAllowed,b.canSetDefaultPage=a.app.setDefaultPageUrl,b.inQueryMode=a.app.inQueryMode(),b.header=a.options.header,b.canMove=a.canMove,a.$el.html(a.template(b)),a.$dropdown=a.$(".dropdown-toggle"),a.$dropdown.dropdown(),a.options.className&&a.$el.addClass(a.options.className),this}});return g}),define("text!mockup-patterns-structure-url/templates/tablerow.xml",[],function(){return'<td class="selection"><input type="checkbox" <% if(selected){ %> checked="checked" <% } %>/></td>\n<td class="title">\n  <a href="<%- getURL %>" class="state-<%- review_state %> contenttype-<%- portal_type.toLowerCase() %>"><%- Title %></a>\n</td>\n<% _.each(activeColumns, function(column){ %>\n  <% if(_.has(availableColumns, column)) { %>\n    <td class="<%- column %>"><%- attributes[column] %></td>\n  <% } %>\n<% }); %>\n<td class="actionmenu-container">\n</td>\n'}),define("mockup-patterns-structure-url/js/views/tablerow",["jquery","underscore","backbone","mockup-patterns-structure-url/js/views/actionmenu","text!mockup-patterns-structure-url/templates/tablerow.xml"],function(a,b,c,d,e){"use strict";var f=c.View.extend({tagName:"tr",className:"itemRow",template:b.template(e),events:{"change input":"itemSelected","click td.title a":"itemClicked"},initialize:function(a){this.options=a,this.app=a.app,this.selectedCollection=this.app.selectedCollection,this.table=this.options.table},render:function(){var b=this,c=this.model.toJSON();c.selected=!1,this.selectedCollection.findWhere({UID:c.UID})&&(c.selected=!0),c.attributes=b.model.attributes,c.activeColumns=b.app.activeColumns,c.availableColumns=b.app.availableColumns,b.$el.html(b.template(c));var e=b.model.attributes;return b.$el.addClass("state-"+e.review_state).addClass("type-"+e.portal_type),e.is_folderish&&b.$el.addClass("folder"),b.$el.attr("data-path",c.path),b.$el.attr("data-UID",c.UID),b.$el.attr("data-id",c.id),b.$el.attr("data-type",c.portal_type),b.$el.attr("data-folderish",c.is_folderish),b.el.model=this.model,b.menu=new d({app:b.app,model:b.model}),a(".actionmenu-container",b.$el).append(b.menu.render().el),this},itemClicked:function(a){a.preventDefault();var b=this.app.keyEvent;if(b&&b.ctrlKey)this.menu.openClicked(a);else if(this.model.attributes.is_folderish){this.app.queryHelper.currentPath=this.model.attributes.path;var c=this.app.collection;c.goTo(c.information.firstPage)}else this.menu.openClicked(a)},itemSelected:function(){var b=this.$("input")[0];b.checked?this.app.selectedCollection.add(this.model):this.app.selectedCollection.removeResult(this.model);var c=this.selectedCollection,d=this.app.keyEvent;if(d&&d.shiftKey&&this.app.last_selected&&null!==this.app.last_selected.parentNode){var e=a(this.app.last_selected),f=e.index(),g=this.$el.index();this.app.tableView.$('input[type="checkbox"]').each(function(){e=a(this);var d=e.parents("tr").index();if(d>f&&g>d||f>d&&d>g){this.checked=b.checked;var h=a(this).closest("tr")[0].model,i=c.getByUID(h.attributes.UID);this.checked?i||c.add(h):i&&c.remove(i)}})}this.app.last_selected=this.el}});return f}),define("text!mockup-patterns-structure-url/templates/table.xml",[],function(){return'<div class="alert alert-<%= statusType %> status">\n    <%= status %>\n</div>\n<table class="table table-striped table-bordered">\n  <thead>\n    <tr class="breadcrumbs-container">\n      <td colspan="<%= activeColumns.length + 3 %>">\n        <% if(pathParts.length > 0) { %>\n          <div class="input-group context-buttons" style="display:none">\n            <span class="input-group-addon">\n              <input type="checkbox" />\n            </span>\n            <div class="input-group-btn">\n            </div>\n          </div>\n        <% } %>\n        <div class="breadcrumbs">\n          <a href="#" data-path="/">\n            <span class="glyphicon glyphicon-home"></span> /\n          </a>\n          <% _.each(pathParts, function(part, idx, list){\n            if(part){\n              if(idx > 0){ %>\n                /\n              <% } %>\n              <a href="#" class="crumb" data-path="<%- part %>"><%- part %></a>\n            <% }\n          }); %>\n        </div>\n      </td>\n    </tr>\n    <tr>\n      <th><input type="checkbox" class="select-all" /></th>\n      <th>Title</th>\n      <% _.each(activeColumns, function(column){ %>\n        <% if(_.has(availableColumns, column)) { %>\n          <th><%- availableColumns[column] %></th>\n        <% } %>\n      <% }); %>\n      <th>Actions</th>\n    </tr>\n  </thead>\n  <tbody>\n  </tbody>\n</table>\n'}),define("mockup-patterns-sortable",["jquery","mockup-patterns-base","jquery.event.drag","jquery.event.drop"],function(a,b,c,d){"use strict";var e=b.extend({name:"sortable",trigger:".pat-sortable",defaults:{selector:"li",dragClass:"item-dragging",cloneClass:"dragging",drop:null},init:function(){var b=this,c=0;b.$el.find(b.options.selector).drag("start",function(e,f){var g=this;return a(g).addClass(b.options.dragClass),d({tolerance:function(c,d,e){if(0!==a(e.elem).closest(b.$el).length){var f=c.pageY>e.top+e.height/2;return a.data(e.elem,"drop+reorder",f?"insertAfter":"insertBefore"),this.contains(e,[c.pageX,c.pageY])}}}),c=a(this).index(),a(this).clone().addClass(b.options.cloneClass).css({opacity:.75,position:"absolute"}).appendTo(document.body)}).drag(function(b,c){a(c.proxy).css({top:c.offsetY,left:c.offsetX});var d=c.drop[0],e=a.data(d||{},"drop+reorder");e&&d&&(d!=c.current||e!=c.method)&&(a(this)[e](d),c.current=d,c.method=e,c.update())}).drag("end",function(d,e){var f=a(this);f.removeClass(b.options.dragClass),a(e.proxy).remove(),b.options.drop&&b.options.drop(f,f.index()-c)}).drop("init",function(a,b){return this==b.drag?!1:!0})}});return e}),function(a){function b(a,b,c){switch(arguments.length){case 2:return null!=a?a:b;case 3:return null!=a?a:null!=b?b:c;default:throw new Error("Implement me")}}function c(a,b){return za.call(a,b)}function d(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function e(a){ta.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}function f(a,b){var c=!0;return m(function(){return c&&(e(a),c=!1),b.apply(this,arguments)},b)}function g(a,b){qb[a]||(e(b),qb[a]=!0)}function h(a,b){return function(c){return p(a.call(this,c),b)}}function i(a,b){return function(c){return this.localeData().ordinal(a.call(this,c),b)}}function j(){}function k(a,b){b!==!1&&F(a),n(this,a),this._d=new Date(+a._d)}function l(a){var b=y(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=ta.localeData(),this._bubble()}function m(a,b){for(var d in b)c(b,d)&&(a[d]=b[d]);return c(b,"toString")&&(a.toString=b.toString),c(b,"valueOf")&&(a.valueOf=b.valueOf),a}function n(a,b){var c,d,e;if("undefined"!=typeof b._isAMomentObject&&(a._isAMomentObject=b._isAMomentObject),"undefined"!=typeof b._i&&(a._i=b._i),"undefined"!=typeof b._f&&(a._f=b._f),"undefined"!=typeof b._l&&(a._l=b._l),"undefined"!=typeof b._strict&&(a._strict=b._strict),"undefined"!=typeof b._tzm&&(a._tzm=b._tzm),"undefined"!=typeof b._isUTC&&(a._isUTC=b._isUTC),"undefined"!=typeof b._offset&&(a._offset=b._offset),"undefined"!=typeof b._pf&&(a._pf=b._pf),"undefined"!=typeof b._locale&&(a._locale=b._locale),Ia.length>0)for(c in Ia)d=Ia[c],e=b[d],"undefined"!=typeof e&&(a[d]=e);return a}function o(a){return 0>a?Math.ceil(a):Math.floor(a)}function p(a,b,c){for(var d=""+Math.abs(a),e=a>=0;d.length<b;)d="0"+d;return(e?c?"+":"":"-")+d}function q(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function r(a,b){var c;return b=K(b,a),a.isBefore(b)?c=q(a,b):(c=q(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c}function s(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(g(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=ta.duration(c,d),t(this,e,a),this}}function t(a,b,c,d){var e=b._milliseconds,f=b._days,g=b._months;d=null==d?!0:d,e&&a._d.setTime(+a._d+e*c),f&&na(a,"Date",ma(a,"Date")+f*c),g&&la(a,ma(a,"Month")+g*c),d&&ta.updateOffset(a,f||g)}function u(a){return"[object Array]"===Object.prototype.toString.call(a)}function v(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function w(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&A(a[d])!==A(b[d]))&&g++;return g+f}function x(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,"$1");a=jb[a]||kb[b]||b}return a}function y(a){var b,d,e={};for(d in a)c(a,d)&&(b=x(d),b&&(e[b]=a[d]));return e}function z(b){var c,d;if(0===b.indexOf("week"))c=7,d="day";else{if(0!==b.indexOf("month"))return;c=12,d="month"}ta[b]=function(e,f){var g,h,i=ta._locale[b],j=[];if("number"==typeof e&&(f=e,e=a),h=function(a){var b=ta().utc().set(d,a);return i.call(ta._locale,b,e||"")},null!=f)return h(f);for(g=0;c>g;g++)j.push(h(g));return j}}function A(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function B(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function C(a,b,c){return ha(ta([a,11,31+b-c]),b,c).week}function D(a){return E(a)?366:365}function E(a){return a%4===0&&a%100!==0||a%400===0}function F(a){var b;a._a&&-2===a._pf.overflow&&(b=a._a[Ba]<0||a._a[Ba]>11?Ba:a._a[Ca]<1||a._a[Ca]>B(a._a[Aa],a._a[Ba])?Ca:a._a[Da]<0||a._a[Da]>23?Da:a._a[Ea]<0||a._a[Ea]>59?Ea:a._a[Fa]<0||a._a[Fa]>59?Fa:a._a[Ga]<0||a._a[Ga]>999?Ga:-1,a._pf._overflowDayOfYear&&(Aa>b||b>Ca)&&(b=Ca),a._pf.overflow=b)}function G(a){return null==a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&a._pf.overflow<0&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length)),a._isValid}function H(a){return a?a.toLowerCase().replace("_","-"):a}function I(a){for(var b,c,d,e,f=0;f<a.length;){for(e=H(a[f]).split("-"),b=e.length,c=H(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=J(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&w(e,c,!0)>=b-1)break;b--}f++}return null}function J(a){var b=null;if(!Ha[a]&&Ja)try{b=ta.locale(),require("./locale/"+a),ta.locale(b)}catch(c){}return Ha[a]}function K(a,b){return b._isUTC?ta(a).zone(b._offset||0):ta(a).local()}function L(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function M(a){var b,c,d=a.match(Na);for(b=0,c=d.length;c>b;b++)d[b]=pb[d[b]]?pb[d[b]]:L(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function N(a,b){return a.isValid()?(b=O(b,a.localeData()),lb[b]||(lb[b]=M(b)),lb[b](a)):a.localeData().invalidDate()}function O(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Oa.lastIndex=0;d>=0&&Oa.test(a);)a=a.replace(Oa,c),Oa.lastIndex=0,d-=1;return a}function P(a,b){var c,d=b._strict;switch(a){case"Q":return Za;case"DDDD":return _a;case"YYYY":case"GGGG":case"gggg":return d?ab:Ra;case"Y":case"G":case"g":return cb;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return d?bb:Sa;case"S":if(d)return Za;case"SS":if(d)return $a;case"SSS":if(d)return _a;case"DDD":return Qa;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Ua;case"a":case"A":return b._locale._meridiemParse;case"X":return Xa;case"Z":case"ZZ":return Va;case"T":return Wa;case"SSSS":return Ta;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return d?$a:Pa;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Pa;case"Do":return Ya;default:return c=new RegExp(Y(X(a.replace("\\","")),"i"))}}function Q(a){a=a||"";var b=a.match(Va)||[],c=b[b.length-1]||[],d=(c+"").match(hb)||["-",0,0],e=+(60*d[1])+A(d[2]);return"+"===d[0]?-e:e}function R(a,b,c){var d,e=c._a;switch(a){case"Q":null!=b&&(e[Ba]=3*(A(b)-1));break;case"M":case"MM":null!=b&&(e[Ba]=A(b)-1);break;case"MMM":case"MMMM":d=c._locale.monthsParse(b),null!=d?e[Ba]=d:c._pf.invalidMonth=b;break;case"D":case"DD":null!=b&&(e[Ca]=A(b));break;case"Do":null!=b&&(e[Ca]=A(parseInt(b,10)));break;case"DDD":case"DDDD":null!=b&&(c._dayOfYear=A(b));break;case"YY":e[Aa]=ta.parseTwoDigitYear(b);break;case"YYYY":case"YYYYY":case"YYYYYY":e[Aa]=A(b);break;case"a":case"A":c._isPm=c._locale.isPM(b);break;case"H":case"HH":case"h":case"hh":e[Da]=A(b);break;case"m":case"mm":e[Ea]=A(b);break;case"s":case"ss":e[Fa]=A(b);break;case"S":case"SS":case"SSS":case"SSSS":e[Ga]=A(1e3*("0."+b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=Q(b);break;case"dd":case"ddd":case"dddd":d=c._locale.weekdaysParse(b),null!=d?(c._w=c._w||{},c._w.d=d):c._pf.invalidWeekday=b;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":a=a.substr(0,1);case"gggg":case"GGGG":case"GGGGG":a=a.substr(0,2),b&&(c._w=c._w||{},c._w[a]=A(b));break;case"gg":case"GG":c._w=c._w||{},c._w[a]=ta.parseTwoDigitYear(b)}}function S(a){var c,d,e,f,g,h,i;c=a._w,null!=c.GG||null!=c.W||null!=c.E?(g=1,h=4,d=b(c.GG,a._a[Aa],ha(ta(),1,4).year),e=b(c.W,1),f=b(c.E,1)):(g=a._locale._week.dow,h=a._locale._week.doy,d=b(c.gg,a._a[Aa],ha(ta(),g,h).year),e=b(c.w,1),null!=c.d?(f=c.d,g>f&&++e):f=null!=c.e?c.e+g:g),i=ia(d,e,f,h,g),a._a[Aa]=i.year,a._dayOfYear=i.dayOfYear}function T(a){var c,d,e,f,g=[];if(!a._d){for(e=V(a),a._w&&null==a._a[Ca]&&null==a._a[Ba]&&S(a),a._dayOfYear&&(f=b(a._a[Aa],e[Aa]),a._dayOfYear>D(f)&&(a._pf._overflowDayOfYear=!0),d=da(f,0,a._dayOfYear),a._a[Ba]=d.getUTCMonth(),a._a[Ca]=d.getUTCDate()),c=0;3>c&&null==a._a[c];++c)a._a[c]=g[c]=e[c];for(;7>c;c++)a._a[c]=g[c]=null==a._a[c]?2===c?1:0:a._a[c];a._d=(a._useUTC?da:ca).apply(null,g),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()+a._tzm)}}function U(a){var b;a._d||(b=y(a._i),a._a=[b.year,b.month,b.day,b.hour,b.minute,b.second,b.millisecond],T(a))}function V(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function W(a){if(a._f===ta.ISO_8601)return void $(a);a._a=[],a._pf.empty=!0;var b,c,d,e,f,g=""+a._i,h=g.length,i=0;for(d=O(a._f,a._locale).match(Na)||[],b=0;b<d.length;b++)e=d[b],c=(g.match(P(e,a))||[])[0],c&&(f=g.substr(0,g.indexOf(c)),f.length>0&&a._pf.unusedInput.push(f),g=g.slice(g.indexOf(c)+c.length),i+=c.length),pb[e]?(c?a._pf.empty=!1:a._pf.unusedTokens.push(e),R(e,c,a)):a._strict&&!c&&a._pf.unusedTokens.push(e);a._pf.charsLeftOver=h-i,g.length>0&&a._pf.unusedInput.push(g),a._isPm&&a._a[Da]<12&&(a._a[Da]+=12),a._isPm===!1&&12===a._a[Da]&&(a._a[Da]=0),T(a),F(a)}function X(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e})}function Y(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Z(a){var b,c,e,f,g;if(0===a._f.length)return a._pf.invalidFormat=!0,void(a._d=new Date(0/0));for(f=0;f<a._f.length;f++)g=0,b=n({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._pf=d(),b._f=a._f[f],W(b),G(b)&&(g+=b._pf.charsLeftOver,g+=10*b._pf.unusedTokens.length,b._pf.score=g,(null==e||e>g)&&(e=g,c=b));m(a,c||b)}function $(a){var b,c,d=a._i,e=db.exec(d);if(e){for(a._pf.iso=!0,b=0,c=fb.length;c>b;b++)if(fb[b][1].exec(d)){a._f=fb[b][0]+(e[6]||" ");break}for(b=0,c=gb.length;c>b;b++)if(gb[b][1].exec(d)){a._f+=gb[b][0];break}d.match(Va)&&(a._f+="Z"),W(a)}else a._isValid=!1}function _(a){$(a),a._isValid===!1&&(delete a._isValid,ta.createFromInputFallback(a))}function aa(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function ba(b){var c,d=b._i;d===a?b._d=new Date:v(d)?b._d=new Date(+d):null!==(c=Ka.exec(d))?b._d=new Date(+c[1]):"string"==typeof d?_(b):u(d)?(b._a=aa(d.slice(0),function(a){return parseInt(a,10)}),T(b)):"object"==typeof d?U(b):"number"==typeof d?b._d=new Date(d):ta.createFromInputFallback(b)}function ca(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function da(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function ea(a,b){if("string"==typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!=typeof a)return null}else a=parseInt(a,10);return a}function fa(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function ga(a,b,c){var d=ta.duration(a).abs(),e=ya(d.as("s")),f=ya(d.as("m")),g=ya(d.as("h")),h=ya(d.as("d")),i=ya(d.as("M")),j=ya(d.as("y")),k=e<mb.s&&["s",e]||1===f&&["m"]||f<mb.m&&["mm",f]||1===g&&["h"]||g<mb.h&&["hh",g]||1===h&&["d"]||h<mb.d&&["dd",h]||1===i&&["M"]||i<mb.M&&["MM",i]||1===j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,fa.apply({},k)}function ha(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=ta(a).add(f,"d"),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function ia(a,b,c,d,e){var f,g,h=da(a,0,1).getUTCDay();return h=0===h?7:h,c=null!=c?c:e,f=e-h+(h>d?7:0)-(e>h?7:0),g=7*(b-1)+(c-e)+f+1,{year:g>0?a:a-1,dayOfYear:g>0?g:D(a-1)+g}}function ja(b){var c=b._i,d=b._f;return b._locale=b._locale||ta.localeData(b._l),null===c||d===a&&""===c?ta.invalid({nullInput:!0}):("string"==typeof c&&(b._i=c=b._locale.preparse(c)),ta.isMoment(c)?new k(c,!0):(d?u(d)?Z(b):W(b):ba(b),new k(b)))}function ka(a,b){var c,d;if(1===b.length&&u(b[0])&&(b=b[0]),!b.length)return ta();for(c=b[0],d=1;d<b.length;++d)b[d][a](c)&&(c=b[d]);return c}function la(a,b){var c;return"string"==typeof b&&(b=a.localeData().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),B(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a)}function ma(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function na(a,b,c){return"Month"===b?la(a,c):a._d["set"+(a._isUTC?"UTC":"")+b](c);
 
 }function oa(a,b){return function(c){return null!=c?(na(this,a,c),ta.updateOffset(this,b),this):ma(this,a)}}function pa(a){return 400*a/146097}function qa(a){return 146097*a/400}function ra(a){ta.duration.fn[a]=function(){return this._data[a]}}function sa(a){"undefined"==typeof ender&&(ua=xa.moment,xa.moment=a?f("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",ta):ta)}for(var ta,ua,va,wa="2.8.3",xa="undefined"!=typeof global?global:this,ya=Math.round,za=Object.prototype.hasOwnProperty,Aa=0,Ba=1,Ca=2,Da=3,Ea=4,Fa=5,Ga=6,Ha={},Ia=[],Ja="undefined"!=typeof module&&module.exports,Ka=/^\/?Date\((\-?\d+)/i,La=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ma=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Na=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,Oa=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Pa=/\d\d?/,Qa=/\d{1,3}/,Ra=/\d{1,4}/,Sa=/[+\-]?\d{1,6}/,Ta=/\d+/,Ua=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Va=/Z|[\+\-]\d\d:?\d\d/gi,Wa=/T/i,Xa=/[\+\-]?\d+(\.\d{1,3})?/,Ya=/\d{1,2}/,Za=/\d/,$a=/\d\d/,_a=/\d{3}/,ab=/\d{4}/,bb=/[+-]?\d{6}/,cb=/[+-]?\d+/,db=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,eb="YYYY-MM-DDTHH:mm:ssZ",fb=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],gb=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],hb=/([\+\-]|\d\d)/gi,ib=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),jb={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},kb={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},lb={},mb={s:45,m:45,h:22,d:26,M:11},nb="DDD w W M D d".split(" "),ob="M D H h m s w W".split(" "),pb={M:function(){return this.month()+1},MMM:function(a){return this.localeData().monthsShort(this,a)},MMMM:function(a){return this.localeData().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.localeData().weekdaysMin(this,a)},ddd:function(a){return this.localeData().weekdaysShort(this,a)},dddd:function(a){return this.localeData().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return p(this.year()%100,2)},YYYY:function(){return p(this.year(),4)},YYYYY:function(){return p(this.year(),5)},YYYYYY:function(){var a=this.year(),b=a>=0?"+":"-";return b+p(Math.abs(a),6)},gg:function(){return p(this.weekYear()%100,2)},gggg:function(){return p(this.weekYear(),4)},ggggg:function(){return p(this.weekYear(),5)},GG:function(){return p(this.isoWeekYear()%100,2)},GGGG:function(){return p(this.isoWeekYear(),4)},GGGGG:function(){return p(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return A(this.milliseconds()/100)},SS:function(){return p(A(this.milliseconds()/10),2)},SSS:function(){return p(this.milliseconds(),3)},SSSS:function(){return p(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+p(A(a/60),2)+":"+p(A(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+p(A(a/60),2)+p(A(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},qb={},rb=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];nb.length;)va=nb.pop(),pb[va+"o"]=i(pb[va],va);for(;ob.length;)va=ob.pop(),pb[va+va]=h(pb[va],2);pb.DDDD=h(pb.DDD,3),m(j.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c,d;for(this._monthsParse||(this._monthsParse=[]),b=0;12>b;b++)if(this._monthsParse[b]||(c=ta.utc([2e3,b]),d="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=new RegExp(d.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=ta([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"==typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return ha(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),ta=function(b,c,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._i=b,g._f=c,g._l=e,g._strict=f,g._isUTC=!1,g._pf=d(),ja(g)},ta.suppressDeprecationWarnings=!1,ta.createFromInputFallback=f("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i)}),ta.min=function(){var a=[].slice.call(arguments,0);return ka("isBefore",a)},ta.max=function(){var a=[].slice.call(arguments,0);return ka("isAfter",a)},ta.utc=function(b,c,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._useUTC=!0,g._isUTC=!0,g._l=e,g._i=b,g._f=c,g._strict=f,g._pf=d(),ja(g).utc()},ta.unix=function(a){return ta(1e3*a)},ta.duration=function(a,b){var d,e,f,g,h=a,i=null;return ta.isDuration(a)?h={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(h={},b?h[b]=a:h.milliseconds=a):(i=La.exec(a))?(d="-"===i[1]?-1:1,h={y:0,d:A(i[Ca])*d,h:A(i[Da])*d,m:A(i[Ea])*d,s:A(i[Fa])*d,ms:A(i[Ga])*d}):(i=Ma.exec(a))?(d="-"===i[1]?-1:1,f=function(a){var b=a&&parseFloat(a.replace(",","."));return(isNaN(b)?0:b)*d},h={y:f(i[2]),M:f(i[3]),d:f(i[4]),h:f(i[5]),m:f(i[6]),s:f(i[7]),w:f(i[8])}):"object"==typeof h&&("from"in h||"to"in h)&&(g=r(ta(h.from),ta(h.to)),h={},h.ms=g.milliseconds,h.M=g.months),e=new l(h),ta.isDuration(a)&&c(a,"_locale")&&(e._locale=a._locale),e},ta.version=wa,ta.defaultFormat=eb,ta.ISO_8601=function(){},ta.momentProperties=Ia,ta.updateOffset=function(){},ta.relativeTimeThreshold=function(b,c){return mb[b]===a?!1:c===a?mb[b]:(mb[b]=c,!0)},ta.lang=f("moment.lang is deprecated. Use moment.locale instead.",function(a,b){return ta.locale(a,b)}),ta.locale=function(a,b){var c;return a&&(c="undefined"!=typeof b?ta.defineLocale(a,b):ta.localeData(a),c&&(ta.duration._locale=ta._locale=c)),ta._locale._abbr},ta.defineLocale=function(a,b){return null!==b?(b.abbr=a,Ha[a]||(Ha[a]=new j),Ha[a].set(b),ta.locale(a),Ha[a]):(delete Ha[a],null)},ta.langData=f("moment.langData is deprecated. Use moment.localeData instead.",function(a){return ta.localeData(a)}),ta.localeData=function(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return ta._locale;if(!u(a)){if(b=J(a))return b;a=[a]}return I(a)},ta.isMoment=function(a){return a instanceof k||null!=a&&c(a,"_isAMomentObject")},ta.isDuration=function(a){return a instanceof l};for(va=rb.length-1;va>=0;--va)z(rb[va]);ta.normalizeUnits=function(a){return x(a)},ta.invalid=function(a){var b=ta.utc(0/0);return null!=a?m(b._pf,a):b._pf.userInvalidated=!0,b},ta.parseZone=function(){return ta.apply(null,arguments).parseZone()},ta.parseTwoDigitYear=function(a){return A(a)+(A(a)>68?1900:2e3)},m(ta.fn=k.prototype,{clone:function(){return ta(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=ta(this).utc();return 0<a.year()&&a.year()<=9999?N(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):N(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return G(this)},isDSTShifted:function(){return this._a?this.isValid()&&w(this._a,(this._isUTC?ta.utc(this._a):ta(this._a)).toArray())>0:!1},parsingFlags:function(){return m({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(a){return this.zone(0,a)},local:function(a){return this._isUTC&&(this.zone(0,a),this._isUTC=!1,a&&this.add(this._dateTzOffset(),"m")),this},format:function(a){var b=N(this,a||ta.defaultFormat);return this.localeData().postformat(b)},add:s(1,"add"),subtract:s(-1,"subtract"),diff:function(a,b,c){var d,e,f,g=K(a,this),h=6e4*(this.zone()-g.zone());return b=x(b),"year"===b||"month"===b?(d=432e5*(this.daysInMonth()+g.daysInMonth()),e=12*(this.year()-g.year())+(this.month()-g.month()),f=this-ta(this).startOf("month")-(g-ta(g).startOf("month")),f-=6e4*(this.zone()-ta(this).startOf("month").zone()-(g.zone()-ta(g).startOf("month").zone())),e+=f/d,"year"===b&&(e/=12)):(d=this-g,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-h)/864e5:"week"===b?(d-h)/6048e5:d),c?e:o(e)},from:function(a,b){return ta.duration({to:this,from:a}).locale(this.locale()).humanize(!b)},fromNow:function(a){return this.from(ta(),a)},calendar:function(a){var b=a||ta(),c=K(b,this).startOf("day"),d=this.diff(c,"days",!0),e=-6>d?"sameElse":-1>d?"lastWeek":0>d?"lastDay":1>d?"sameDay":2>d?"nextDay":7>d?"nextWeek":"sameElse";return this.format(this.localeData().calendar(e,this))},isLeapYear:function(){return E(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=ea(a,this.localeData()),this.add(a-b,"d")):b},month:oa("Month",!0),startOf:function(a){switch(a=x(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(a){return a=x(a),this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")},isAfter:function(a,b){return b=x("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=ta.isMoment(a)?a:ta(a),+this>+a):+this.clone().startOf(b)>+ta(a).startOf(b)},isBefore:function(a,b){return b=x("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=ta.isMoment(a)?a:ta(a),+a>+this):+this.clone().startOf(b)<+ta(a).startOf(b)},isSame:function(a,b){return b=x(b||"millisecond"),"millisecond"===b?(a=ta.isMoment(a)?a:ta(a),+this===+a):+this.clone().startOf(b)===+K(a,this).startOf(b)},min:f("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(a){return a=ta.apply(null,arguments),this>a?this:a}),max:f("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(a){return a=ta.apply(null,arguments),a>this?this:a}),zone:function(a,b){var c,d=this._offset||0;return null==a?this._isUTC?d:this._dateTzOffset():("string"==typeof a&&(a=Q(a)),Math.abs(a)<16&&(a=60*a),!this._isUTC&&b&&(c=this._dateTzOffset()),this._offset=a,this._isUTC=!0,null!=c&&this.subtract(c,"m"),d!==a&&(!b||this._changeInProgress?t(this,ta.duration(d-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,ta.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(a){return a=a?ta(a).zone():0,(this.zone()-a)%60===0},daysInMonth:function(){return B(this.year(),this.month())},dayOfYear:function(a){var b=ya((ta(this).startOf("day")-ta(this).startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")},quarter:function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)},weekYear:function(a){var b=ha(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==a?b:this.add(a-b,"y")},isoWeekYear:function(a){var b=ha(this,1,4).year;return null==a?b:this.add(a-b,"y")},week:function(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")},isoWeek:function(a){var b=ha(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")},weekday:function(a){var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},isoWeeksInYear:function(){return C(this.year(),1,4)},weeksInYear:function(){var a=this.localeData()._week;return C(this.year(),a.dow,a.doy)},get:function(a){return a=x(a),this[a]()},set:function(a,b){return a=x(a),"function"==typeof this[a]&&this[a](b),this},locale:function(b){var c;return b===a?this._locale._abbr:(c=ta.localeData(b),null!=c&&(this._locale=c),this)},lang:f("moment().lang() is deprecated. Use moment().localeData() instead.",function(b){return b===a?this.localeData():this.locale(b)}),localeData:function(){return this._locale},_dateTzOffset:function(){return 15*Math.round(this._d.getTimezoneOffset()/15)}}),ta.fn.millisecond=ta.fn.milliseconds=oa("Milliseconds",!1),ta.fn.second=ta.fn.seconds=oa("Seconds",!1),ta.fn.minute=ta.fn.minutes=oa("Minutes",!1),ta.fn.hour=ta.fn.hours=oa("Hours",!0),ta.fn.date=oa("Date",!0),ta.fn.dates=f("dates accessor is deprecated. Use date instead.",oa("Date",!0)),ta.fn.year=oa("FullYear",!0),ta.fn.years=f("years accessor is deprecated. Use year instead.",oa("FullYear",!0)),ta.fn.days=ta.fn.day,ta.fn.months=ta.fn.month,ta.fn.weeks=ta.fn.week,ta.fn.isoWeeks=ta.fn.isoWeek,ta.fn.quarters=ta.fn.quarter,ta.fn.toJSON=ta.fn.toISOString,m(ta.duration.fn=l.prototype,{_bubble:function(){var a,b,c,d=this._milliseconds,e=this._days,f=this._months,g=this._data,h=0;g.milliseconds=d%1e3,a=o(d/1e3),g.seconds=a%60,b=o(a/60),g.minutes=b%60,c=o(b/60),g.hours=c%24,e+=o(c/24),h=o(pa(e)),e-=o(qa(h)),f+=o(e/30),e%=30,h+=o(f/12),f%=12,g.days=e,g.months=f,g.years=h},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return o(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*A(this._months/12)},humanize:function(a){var b=ga(this,!a,this.localeData());return a&&(b=this.localeData().pastFuture(+this,b)),this.localeData().postformat(b)},add:function(a,b){var c=ta.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this},subtract:function(a,b){var c=ta.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=x(a),this[a.toLowerCase()+"s"]()},as:function(a){var b,c;if(a=x(a),"month"===a||"year"===a)return b=this._days+this._milliseconds/864e5,c=this._months+12*pa(b),"month"===a?c:c/12;switch(b=this._days+qa(this._months/12),a){case"week":return b/7+this._milliseconds/6048e5;case"day":return b+this._milliseconds/864e5;case"hour":return 24*b+this._milliseconds/36e5;case"minute":return 24*b*60+this._milliseconds/6e4;case"second":return 24*b*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*b*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+a)}},lang:ta.fn.lang,locale:ta.fn.locale,toIsoString:f("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"},localeData:function(){return this._locale}}),ta.duration.fn.toString=ta.duration.fn.toISOString;for(va in ib)c(ib,va)&&ra(va.toLowerCase());ta.duration.fn.asMilliseconds=function(){return this.as("ms")},ta.duration.fn.asSeconds=function(){return this.as("s")},ta.duration.fn.asMinutes=function(){return this.as("m")},ta.duration.fn.asHours=function(){return this.as("h")},ta.duration.fn.asDays=function(){return this.as("d")},ta.duration.fn.asWeeks=function(){return this.as("weeks")},ta.duration.fn.asMonths=function(){return this.as("M")},ta.duration.fn.asYears=function(){return this.as("y")},ta.locale("en",{ordinal:function(a){var b=a%10,c=1===A(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),Ja?module.exports=ta:"function"==typeof define&&define.amd?(define("moment",["require","exports","module"],function(a,b,c){return c.config&&c.config()&&c.config().noGlobal===!0&&(xa.moment=ua),ta}),sa(!0)):sa()}.call(this),define("mockup-patterns-moment",["jquery","mockup-patterns-base","moment"],function(a,b,c){"use strict";var d=b.extend({name:"moment",trigger:".pat-moment",defaults:{selector:null,format:"MMMM Do YYYY, h:mm:ss a"},convert:function(b){var d=this,e=b.attr("data-date");e||(e=a.trim(b.html())),e=c(e),e.isValid()&&(e="relative"===d.options.format?e.fromNow():"calendar"===d.options.format?e.calendar():e.format(d.options.format),e&&b.html(e))},init:function(){var b=this;b.options.selector?b.$el.find(b.options.selector).each(function(){b.convert(a(this))}):b.convert(b.$el)}});return d}),define("mockup-patterns-structure-url/js/models/result",["backbone"],function(a){"use strict";var b=a.Model.extend({defaults:function(){return{is_folderish:!1,review_state:""}},uid:function(){return this.attributes.UID}});return b}),define("mockup-patterns-structure-url/js/views/table",["jquery","underscore","backbone","mockup-patterns-structure-url/js/views/tablerow","text!mockup-patterns-structure-url/templates/table.xml","mockup-ui-url/views/base","mockup-patterns-sortable","mockup-patterns-moment","mockup-patterns-structure-url/js/models/result","mockup-patterns-structure-url/js/views/actionmenu"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=f.extend({tagName:"div",template:b.template(e),initialize:function(a){var b=this;f.prototype.initialize.apply(b,[a]),b.collection=b.app.collection,b.selectedCollection=b.app.selectedCollection,b.listenTo(b.collection,"sync",b.render),b.listenTo(b.selectedCollection,"remove",b.render),b.listenTo(b.selectedCollection,"reset",b.render),b.collection.pager(),b.subsetIds=[],b.contextInfo=b.folderModel=b.folderMenu=null,b.app.on("context-info-loaded",function(a){b.contextInfo=a,b.setContextInfo()})},events:{"click .breadcrumbs a":"breadcrumbClicked","change .select-all":"selectAll",'change .breadcrumbs-container input[type="checkbox"]':"selectFolder"},setContextInfo:function(){var c=this,d=c.contextInfo,e=c.$('[data-id="'+d.defaultPage+'"]');e.length>0&&(e.find("td.title").prepend("<span>*</span> "),e.addClass("default-page"));var f=d.breadcrumbs;if(f&&f.length){var g=c.$(".breadcrumbs a.crumb");b.each(f,function(a,b){g.eq(b).html(a.title)})}d.object?(c.folderModel=new i(d.object),a(".context-buttons",c.$el).show(),c.selectedCollection.findWhere({UID:d.object.UID})&&(a('input[type="checkbox"]',c.$breadcrumbs)[0].checked=!0),c.folderMenu=new j({app:c.app,model:c.folderModel,header:"Actions on current folder",canMove:!1}),a(".input-group-btn",c.$breadcrumbs).empty().append(c.folderMenu.render().el)):c.folderModel=null},render:function(){var c=this;if(c.$el.html(c.template({pathParts:b.filter(c.app.queryHelper.getCurrentPath().split("/").slice(1),function(a){return a.length>0}),status:c.app.status,statusType:c.app.statusType,activeColumns:c.app.activeColumns,availableColumns:c.app.availableColumns})),c.$breadcrumbs=a(".breadcrumbs-container",c.$el),c.collection.length){var e=c.$("tbody");c.collection.each(function(a){var b=new d({model:a,app:c.app,table:c}).render();e.append(b.el)})}return c.moment=new h(c.$el,{selector:".ModificationDate,.EffectiveDate,.CreationDate,.ExpirationDate",format:"relative"}),c.addReordering(),c.storeOrder(),this},breadcrumbClicked:function(b){b.preventDefault();var c=a(b.target);"A"!==c[0].tagName&&(c=c.parent("a"));var d="";a(c.prevAll("a").get().reverse()).each(function(){var b=a(this).attr("data-path");d+=b,"/"!==b&&(d+="/")}),d+=c.attr("data-path"),this.app.queryHelper.currentPath=d,this.collection.pager()},selectFolder:function(b){var c=this;c.folderModel&&(a(b.target).is(":checked")?c.selectedCollection.add(c.folderModel):this.selectedCollection.removeByUID(c.folderModel.attributes.UID),c.setContextInfo())},selectAll:function(b){a(b.target).is(":checked")?a('input[type="checkbox"]',this.$("tbody")).prop("checked",!0).change():this.selectedCollection.remove(this.collection.models),this.setContextInfo()},toggleSelectAll:function(b){var c=a(b.target);c.is(":checked")||this.$(".select-all").prop("checked",!1)},addReordering:function(){var a=this;if(a.app.inQueryMode())return a.app.setStatus("Can not order items while querying"),void a.$el.removeClass("order-support");a.$el.addClass("order-support");new g(a.$("tbody"),{selector:"tr",dragClass:"structure-dragging",drop:function(b,c){0!==c&&(a.app.moveItem(b.attr("data-id"),c,a.subsetIds),a.storeOrder())}})},storeOrder:function(){var b=this,c=[];b.$("tbody tr.itemRow").each(function(b){c.push(a(this).attr("data-id"))}),b.subsetIds=c}});return k}),define("text!mockup-ui-url/templates/popover.xml",[],function(){return'<div class="arrow"></div>\n<div class="popover-title">\n</div>\n<div class="items popover-content">\n</div>\n\n'}),define("mockup-ui-url/views/popover",["jquery","underscore","backbone","mockup-ui-url/views/container","mockup-patterns-backdrop","text!mockup-ui-url/templates/popover.xml"],function(a,b,c,d,e,f){"use strict";var g=d.extend({tagName:"div",className:"popover",eventPrefix:"popover",template:f,content:null,title:null,triggerView:null,triggerEvents:{"button:click":"toggle"},placement:"bottom",events:{},opened:!1,closeOnOutClick:!0,appendInContainer:!0,backdrop:void 0,$backdrop:null,useBackdrop:!0,backdropOptions:{zIndex:"1009",opacity:"0.4",className:"backdrop backdrop-popover",classActiveName:"backdrop-active",closeOnEsc:!1,closeOnClick:!0},initialize:function(a){d.prototype.initialize.apply(this,[a]),this.on("render",function(){this.bindTriggerEvents(),this.renderTitle(),this.renderContent()},this)},afterRender:function(){},renderTitle:function(){this.$(".popover-title").append(this.title(this.options))},renderContent:function(){this.$(".popover-content").append(this.content(this.options))},bindTriggerEvents:function(){this.triggerView&&b.each(this.triggerEvents,function(b,c){var d=this[b];d||a.error("Function not found."),this.stopListening(this.triggerView,c),this.listenTo(this.triggerView,c,d)},this)},getPosition:function(){var b=this.triggerView.$el;return a.extend({},{width:b[0].offsetWidth,height:b[0].offsetHeight},b.offset())},show:function(){var a,b,c,d,e=this.getPosition(),f=this.$el;switch(b=this.placement,f.css({top:0,left:0}).addClass("active"),c=f[0].offsetWidth,d=f[0].offsetHeight,b){case"bottom":a={top:e.top+e.height,left:e.left+e.width/2-c/2};break;case"top":a={top:e.top-d,left:e.left+e.width/2-c/2};break;case"left":a={top:e.top+e.height/2-d/2,left:e.left-c};break;case"right":a={top:e.top+e.height/2-d/2,left:e.left+e.width}}this.applyPlacement(a,b),this.setBackdrop(),this.useBackdrop===!0&&this.backdrop.show(),this.opened=!0,this.triggerView&&this.triggerView.$el.addClass("active"),this.uiEventTrigger("show",this)},applyPlacement:function(a,b){var c,d,e,f,g=this.$el,h=this.$el,i=h[0].offsetWidth,j=h[0].offsetHeight;g.removeClass(b),g.offset(a).addClass(b).addClass("active"),c=h[0].offsetWidth,d=h[0].offsetHeight,"top"===b&&d!==j&&(a.top=a.top+j-d,f=!0),"bottom"===b||"top"===b?(e=0,a.left<0&&(e=-2*a.left,a.left=0,g.removeClass(b),g.offset(a).addClass(b),c=h[0].offsetWidth,d=h[0].offsetHeight),this.positionArrow(e-i+c,c,"left")):this.positionArrow(d-j,d,"top"),f&&g.offset(a)},positionArrow:function(a,b,c){var d=this.$(".arrow");d.css(c,a?50*(1-a/b)+"%":"")},hide:function(){this.opened=!1,this.$el.removeClass("active"),this.triggerView&&this.triggerView.$el.removeClass("active"),this.uiEventTrigger("hide",this)},toggle:function(a,b){this.opened?this.hide():this.show()},setBackdrop:function(){if(this.useBackdrop===!0&&void 0===this.backdrop){var b=this;this.$backdrop=this.$el.closest(".ui-backdrop-element"),0===this.$backdrop.length&&(this.$backdrop=a("body")),this.backdrop=new e(this.$backdrop,this.backdropOptions),this.backdrop.$el.on("hidden.backdrop.patterns",function(a){"backdrop.patterns"===a.namespace&&(a.stopPropagation(),b.opened===!0&&b.hide())}),this.on("popover:hide",function(){this.backdrop.hide()},this)}}});return g}),define("text!mockup-patterns-structure-url/templates/selection_item.xml",[],function(){return'<span class="selected-item">\r  <a href="#" data-uid="<%= UID %>" title="remove" class="remove">\r    <span class="glyphicon glyphicon-remove-circle"></span>\r  </a>\r  <%= Title %>\r</span>\r'}),define("mockup-patterns-structure-url/js/views/selectionwell",["jquery","underscore","backbone","mockup-ui-url/views/popover","text!mockup-patterns-structure-url/templates/selection_item.xml"],function(a,b,c,d,e){"use strict";var f=d.extend({className:"popover selected",title:b.template('<input type="text" class="filter" placeholder="Filter" /><a href="#" class=" remove-all"><span class="glyphicon glyphicon-remove-circle"></span> remove all</a>'),content:b.template("<% collection.each(function(item) { %><%= item_template(item.toJSON()) %><% }); %>"),events:{"click a.remove":"itemRemoved","keyup input.filter":"filterSelected","click .remove-all":"removeAll"},initialize:function(a){d.prototype.initialize.apply(this,[a]),this.listenTo(this.collection,"reset all add remove",this.render),this.options.item_template=b.template(e)},render:function(){return d.prototype.render.call(this),0===this.collection.length&&this.$el.removeClass("active"),this},itemRemoved:function(b){b.preventDefault();var c=a(b.currentTarget).data("uid");this.collection.removeByUID(c),0!==this.collection.length&&this.show()},filterSelected:function(b){var c=a(b.target).val().toLowerCase();a(".selected-item",this.$el).each(function(){var b=a(this);-1===b.text().toLowerCase().indexOf(c)?b.hide():b.show()})},removeAll:function(a){a.preventDefault(),this.collection.reset(),this.hide()}});return f}),define("mockup-patterns-structure-url/js/views/tags",["jquery","underscore","backbone","mockup-ui-url/views/popover","mockup-patterns-select2"],function(a,b,c,d,e){"use strict";var f=d.extend({title:b.template("Add/Remove tags"),content:b.template('<label>Tags to remove</label><div class="form-group"><select multiple class="toremove" style="width: 300px"></select></div><label>Tags to add</label><div class="form-group"><input class="toadd" style="width:300px" /></div><button class="btn btn-block btn-primary">Apply</button>'),events:{"click button":"applyButtonClicked"},initialize:function(a){this.app=a.app,this.removeSelect2=null,this.addSelect2=null,d.prototype.initialize.apply(this,[a])},render:function(){return d.prototype.render.call(this),this.$remove=this.$(".toremove"),this.$add=this.$(".toadd"),this.$remove.select2(),this.addSelect2=new e(this.$add,{multiple:!0,vocabularyUrl:this.app.options.tagsVocabularyUrl}),this},getSelect2Values:function(a){var c=[];return b.each(a.select2("data"),function(a){c.push(a.id)}),c},applyButtonClicked:function(a){this.app.defaultButtonClickEvent(this.triggerView,{remove:JSON.stringify(this.getSelect2Values(this.$remove)),add:JSON.stringify(this.getSelect2Values(this.$add))}),this.hide()},toggle:function(a,c){d.prototype.toggle.apply(this,[a,c]);var e=this;this.opened&&(e.$remove.select2("destroy"),e.$remove.empty(),e.$add.select2("data",[]),e.app.selectedCollection.each(function(a){a.attributes.Subject&&b.each(a.attributes.Subject,function(a){0===e.$remove.find('[value="'+a+'"]').length&&e.$remove.append('<option value="'+a+'">'+a+"</option>")})}),e.$remove.select2())}});return f}),define("mockup-patterns-structure-url/js/views/properties",["jquery","underscore","backbone","mockup-ui-url/views/popover","mockup-patterns-pickadate","mockup-patterns-select2"],function(a,b,c,d,e,f){"use strict";var g=d.extend({className:"popover properties",title:b.template("Modify properties on items"),content:b.template('<div class="form-group"><label>Publication Date</label><input class="form-control" name="effective" /></div><div class="form-group"><label>Expiration Date</label><input class="form-control" name="expiration" /></div><div class="form-group"><label>Copyright</label><textarea class="form-control" name="copyright"></textarea></div><label>Creators</label><div class="form-group"><input name="creators" style="width: 300px" /></div><label>Contributors</label><div class="form-group"><input name="contributors" style="width: 300px" /></div><label>Exclude from nav</label><div class="radio"><label><input type="radio" name="exclude-from-nav" value="yes" />Yes</label></div><div class="radio"><label><input type="radio" name="exclude-from-nav" value="no" />No</label></div><button class="btn btn-block btn-primary">Apply</button>'),
 events:{"click button":"applyButtonClicked"},initialize:function(a){this.app=a.app,d.prototype.initialize.apply(this,[a])},render:function(){return d.prototype.render.call(this),this.$effective=this.$('[name="effective"]'),this.$expiration=this.$('[name="expiration"]'),this.$copyright=this.$('[name="copyright"]'),this.$creators=this.$('[name="creators"]'),this.$contributors=this.$('[name="contributors"]'),this.$exclude=this.$('[name="exclude-from-nav"]'),this.creatorsSelect2=new f(this.$creators,{multiple:!0,vocabularyUrl:this.app.options.usersVocabularyUrl}),this.contributorsSelect2=new f(this.$contributors,{multiple:!0,vocabularyUrl:this.app.options.usersVocabularyUrl}),this.effectivePickADate=new e(this.$effective),this.expirationPickADate=new e(this.$expiration),this},applyButtonClicked:function(a){var b={effectiveDate:this.effectivePickADate.$date.val(),effectiveTime:this.effectivePickADate.$time.val(),expirationDate:this.expirationPickADate.$date.val(),expirationTime:this.expirationPickADate.$time.val(),copyright:this.$copyright.val(),contributors:JSON.stringify(this.$contributors.select2("data")),creators:JSON.stringify(this.$creators.select2("data"))};this.$('[name="exclude-from-nav"]:checked').length>0&&(b.exclude_from_nav=this.$('[name="exclude-from-nav"]:checked').val()),this.app.defaultButtonClickEvent(this.triggerView,b),this.hide()},toggle:function(a,b){d.prototype.toggle.apply(this,[a,b]);this.opened&&(this.$effective.attr("value",""),this.$expiration.attr("value",""),this.$copyright.html(""),this.$creators.select2("data",[]),this.$contributors.select2("data",[]),this.$exclude.each(function(){this.checked=!1}))}});return g}),define("mockup-patterns-structure-url/js/views/workflow",["jquery","underscore","backbone","mockup-ui-url/views/popover"],function(a,b,c,d){"use strict";var e=d.extend({className:"popover workflow",title:b.template("Modify dates on items"),content:b.template('<form><fieldset><div class="form-group"><label>Comments</label><textarea class="form-control" rows="4"></textarea><p class="help-block">Select the transition to be used for modifying the items state.</p></div><div class="form-group"><label>Change State</label><p class="help-block">Select the transition to be used for modifying the items state.</p><select class="form-control" name="transition"></select></div><div class="checkbox"><label><input type="checkbox" name="recurse" />Include contained items?</label><p class="help-block">If checked, this will attempt to modify the status of all content in any selected folders and their subfolders.</p></div></fieldset></form><button class="btn btn-block btn-primary">Apply</button>'),events:{"click button":"applyButtonClicked"},initialize:function(a){this.app=a.app,d.prototype.initialize.apply(this,[a])},render:function(){return d.prototype.render.call(this),this.$comments=this.$("textarea"),this.$transition=this.$("select"),this},applyButtonClicked:function(a){var b={comments:this.$comments.val(),transition:this.$transition.val()};this.$('[name="recurse"]')[0].checked&&(b.recurse="yes"),this.app.defaultButtonClickEvent(this.triggerView,b),this.hide()},toggle:function(c,e){d.prototype.toggle.apply(this,[c,e]);var f=this;f.opened&&(f.$comments.val(""),f.$transition.empty(),a.ajax({url:f.triggerView.url,type:"GET",data:{selection:JSON.stringify(f.app.getSelectedUids()),transitions:!0},success:function(a){b.each(a.transitions,function(a){f.$transition.append('<option value="'+a.id+'">'+a.title+"</option>")})},error:function(a){window.alert("error getting transition data")}}))}});return e}),define("mockup-patterns-structure-url/js/views/delete",["jquery","underscore","backbone","mockup-ui-url/views/popover"],function(a,b,c,d){"use strict";var e=d.extend({className:"popover delete",title:b.template("Delete selected items"),content:b.template('<label>Are you certain you want to delete the selected items</label><button class="btn btn-block btn-danger">Yes</button>'),events:{"click button":"applyButtonClicked"},initialize:function(a){this.app=a.app,d.prototype.initialize.apply(this,[a])},render:function(){return d.prototype.render.call(this),this},applyButtonClicked:function(a){var b=this;this.app.defaultButtonClickEvent(this.triggerView,{},function(a){b.app.selectedCollection.reset()}),this.hide()}});return e}),define("mockup-patterns-structure-url/js/views/rename",["jquery","underscore","backbone","mockup-ui-url/views/popover"],function(a,b,c,d){"use strict";var e=d.extend({className:"popover rename",title:b.template("Rename items"),content:b.template('<div class="itemstoremove"></div><button class="btn btn-block btn-primary">Apply</button>'),itemTemplate:b.template('<div class="item"><div class="form-group"><input name="UID" type="hidden" value="<%- UID %>" /><label>Title</label><input class="form-control" name="newtitle" value="<%= Title %>" /><label>Short name</label><input class="form-control" name="newid" value="<%= id %>" /></div></div>'),events:{"click button":"applyButtonClicked"},initialize:function(a){this.app=a.app,d.prototype.initialize.apply(this,[a])},render:function(){return d.prototype.render.call(this),this.$items=this.$(".itemstoremove"),this},applyButtonClicked:function(b){var c=[];this.$items.find(".item").each(function(){var b=a(this);c.push({UID:b.find('[name="UID"]').val(),newid:b.find('[name="newid"]').val(),newtitle:b.find('[name="newtitle"]').val()})});this.app.defaultButtonClickEvent(this.triggerView,{torename:JSON.stringify(c)}),this.hide()},toggle:function(a,b){d.prototype.toggle.apply(this,[a,b]);var c=this;c.opened&&(c.$items.empty(),c.app.selectedCollection.each(function(a){c.$items.append(c.itemTemplate(a.toJSON()))}))}});return e}),define("mockup-patterns-structure-url/js/views/rearrange",["jquery","underscore","mockup-ui-url/views/popover"],function(a,b,c){"use strict";var d=c.extend({className:"popover rearrange",title:b.template("Rearrange items in this folder"),content:b.template('<div class="form-group"><label>What to rearrange on</label><select name="rearrange_on" class="form-control"><% _.each(rearrangeProperties, function(title, property) { %><option value="<%- property %>"><%- title %></option><% }); %></select><p class="help-block">This permanently changes the order of items in this folder.This operation may take a long time depending on the size of the folder.</p></div><div class="checkbox"><label>Reverse <input type="checkbox" name="reversed" /></label></div><button class="btn btn-block btn-primary">Rearrange</button>'),events:{"click button":"rearrangeButtonClicked"},initialize:function(a){this.app=a.app,c.prototype.initialize.apply(this,[a]),this.options.rearrangeProperties=this.app.options.rearrange.properties},render:function(){return c.prototype.render.call(this),this.$rearrangeOn=this.$('[name="rearrange_on"]'),this.$reversed=this.$('[name="reversed"]'),this},rearrangeButtonClicked:function(){var a={rearrange_on:this.$rearrangeOn.val(),reversed:!1};this.$reversed[0].checked&&(a.reversed=!0),this.app.defaultButtonClickEvent(this.triggerView,a),this.hide()}});return d}),define("text!mockup-patterns-structure-url/templates/selection_button.xml",[],function(){return'<%= title %> \r<span class="label<% if (length > 0) { %> label-success<% } else { %> label-default<% } %>">\r  <%= length %>\r</span>\r'}),define("mockup-patterns-structure-url/js/views/selectionbutton",["jquery","backbone","underscore","mockup-ui-url/views/button","text!mockup-patterns-structure-url/templates/selection_button.xml"],function(a,b,c,d,e){"use strict";var f=d.extend({collection:null,template:e,initialize:function(a){d.prototype.initialize.apply(this,[a]),null!==this.collection&&this.collection.on("add remove reset",function(){this.render(),0===this.collection.length&&this.$el.removeClass("active")},this)},serializedModel:function(){var a={icon:"",title:this.options.title,length:0};return null!==this.collection&&(a.length=this.collection.length),a}});return f}),define("text!mockup-patterns-structure-url/templates/paging.xml",[],function(){return'  <ul class="pagination pagination-sm pagination-centered">\n    <li class="<% if (currentPage === 1) { %>disabled<% } %>">\n      <a href="#" class="serverfirst">\n        &laquo;\n      </a>\n    </li>\n    <li class="<% if (currentPage === 1) { %>disabled<% } %>">\n      <a href="#" class="serverprevious">\n        &lt;\n      </a>\n    </li>\n    <% _.each(pages, function(p){ %>\n    <li class="<% if (currentPage == p) { %>active<% } %>">\n      <a href="#" class="page"><%= p %></a>\n    </li>\n    <% }); %>\n    <li class="<% if (currentPage === lastPage) { %>disabled<% } %>">\n      <a href="#" class="servernext">\n        &gt;\n      </a>\n    </li>\n    <li class="<% if (currentPage === lastPage) { %>disabled<% } %>">\n      <a href="#" class="serverlast">\n        &raquo;\n      </a>\n    </li>\n  </ul>\n\n  <ul class="pagination pagination-sm">\n    <li class="disabled"><a href="#">Show:</a></li>\n    <li class="serverhowmany serverhowmany15 <% if(perPage == 15){ %>disabled<% } %>">\n      <a href="#" class="">15</a>\n    </li>\n    <li class="serverhowmany serverhowmany30 <% if(perPage == 30){ %>disabled<% } %>">\n      <a href="#" class="">30</a>\n    </li>\n    <li class="serverhowmany serverhowmany50 <% if(perPage == 50){ %>disabled<% } %>">\n      <a href="#" class="">50</a>\n    </li>\n  </ul>\n\n  <ul class="pagination pagination-sm">\n    <li class="disabled">\n      <a href="#">\n        Page: <span class="current"><%= currentPage %></span>\n        of\n        <span class="total"><%= totalPages %></span>\n              shown\n      </a>\n    </li>\n  </ul>\n'}),define("mockup-patterns-structure-url/js/views/paging",["jquery","underscore","backbone","text!mockup-patterns-structure-url/templates/paging.xml"],function(a,b,c,d){"use strict";var e=c.View.extend({events:{"click a.servernext":"nextResultPage","click a.serverprevious":"previousResultPage","click a.serverlast":"gotoLast","click a.page":"gotoPage","click a.serverfirst":"gotoFirst","click a.serverpage":"gotoPage","click .serverhowmany a":"changeCount"},tagName:"aside",template:b.template(d),maxPages:7,initialize:function(a){this.options=a,this.app=this.options.app,this.collection=this.app.collection,this.collection.on("reset",this.render,this),this.collection.on("sync",this.render,this),this.$el.appendTo("#pagination")},render:function(){var a=this.collection.info();a.pages=this.getPages(a);var b=this.template(a);return this.$el.html(b),this},getPages:function(a){var b=(a.perPage,a.totalPages);if(!b)return[];var c=a.currentPage,d=1,e=b;b>this.maxPages&&(d=Math.max(1,Math.floor(c-this.maxPages/2)),e=Math.min(d+this.maxPages,b),e-d<this.maxPages&&(d-=Math.floor(this.maxPages/2)));for(var f=[],g=d;e>=g;g+=1)f.push(g);return f[0]>1&&(f[0]>2&&(f=["..."].concat(f)),f=[1].concat(f)),f[f.length-1]<b-1&&(f[f.length-2]<b-2&&f.push("..."),f.push(b)),f},nextResultPage:function(a){a.preventDefault(),this.collection.requestNextPage()},previousResultPage:function(a){a.preventDefault(),this.collection.requestPreviousPage()},gotoFirst:function(a){a.preventDefault(),this.collection.goTo(this.collection.information.firstPage)},gotoLast:function(a){a.preventDefault(),this.collection.goTo(this.collection.information.totalPages)},gotoPage:function(b){b.preventDefault();var c=a(b.target).text();this.collection.goTo(c)},changeCount:function(b){b.preventDefault();var c=a(b.target).text();this.collection.howManyPer(c)}});return e}),define("mockup-patterns-structure-url/js/views/addmenu",["jquery","underscore","backbone","mockup-ui-url/views/buttongroup","mockup-ui-url/views/button","mockup-utils","bootstrap-dropdown"],function(a,b,c,d,e,f){"use strict";var g=d.extend({title:"Add",className:"btn-group addnew",events:{},initialize:function(c){var f=this;d.prototype.initialize.apply(f,[c]),f.app.on("context-info-loaded",function(c){f.$items.empty(),b.each(c.addButtons,function(b){var c=new e({id:b.id,title:b.title,url:b.action});c.render();var d=a("<li/>");c.$el.removeAttr("class"),d.append(c.el),f.$items.append(d),c.$el.click(function(a){return f.buttonClicked.apply(f,[a,c]),!1})})})},buttonClicked:function(a,b){var c=this;a.preventDefault(),c.app.loading.show(),window.location=b.url},render:function(){var a=this;return a.$el.empty(),a.$el.append('<a class="btn dropdown-toggle btn-success" data-toggle="dropdown" href="#">'+a.title+'<span class="caret"></span></a><ul class="dropdown-menu"></ul></div>'),a.$items=a.$(".dropdown-menu"),a.$dropdown=a.$(".dropdown-toggle"),a.$dropdown.dropdown(),this}});return g}),define("mockup-patterns-structure-url/js/views/columns",["jquery","underscore","backbone","mockup-ui-url/views/popover","mockup-patterns-sortable"],function(a,b,c,d,e){"use strict";var f=d.extend({className:"popover columns",title:b.template("Columns"),content:b.template('<label>Select columns to show, drag and drop to reorder</label><ul></ul><button class="btn btn-block btn-success">Save</button>'),itemTemplate:b.template('<li><label><input type="checkbox" value="<%- id %>"/><%- title %></label></li>'),events:{"click button":"applyButtonClicked"},initialize:function(a){this.app=a.app,d.prototype.initialize.apply(this,[a])},afterRender:function(){var c=this;c.$container=c.$("ul"),b.each(c.app.activeColumns,function(b){var d=a(c.itemTemplate({title:c.app.availableColumns[b],id:b}));d.find("input")[0].checked=!0,c.$container.append(d)}),b.each(b.omit(c.app.availableColumns,c.app.activeColumns),function(b,d){var e=a(c.itemTemplate({title:b,id:d}));c.$container.append(e)});new e(c.$container,{selector:"li"});return this},applyButtonClicked:function(){var b=this;this.hide(),b.app.activeColumns=[],b.$("input:checked").each(function(){b.app.activeColumns.push(a(this).val())}),b.app.setCookieSetting("activeColumns",this.app.activeColumns),b.app.tableView.render()}});return f}),define("mockup-patterns-structure-url/js/views/textfilter",["jquery","backbone","underscore","mockup-ui-url/views/base","mockup-ui-url/views/button","mockup-ui-url/views/popover","mockup-patterns-querystring"],function(a,b,c,d,e,f,g){"use strict";var h=d.extend({tagName:"div",className:"navbar-search form-search ui-offset-parent",template:c.template('<div class="input-group"><input type="text" class="form-control search-query" placeholder="Filter"><span class="input-group-btn"></span></div>'),popoverContent:c.template('<input class="pat-querystring" />'),events:{"keyup .search-query":"filter"},term:null,timeoutId:null,keyupDelay:300,initialize:function(a){d.prototype.initialize.apply(this,[a]),this.app=this.options.app},render:function(){this.$el.html(this.template({})),this.button=new e({title:"Query"}),this.popover=new f({triggerView:this.button,title:c.template("Query"),content:this.popoverContent,placement:"left"}),this.$(".input-group-btn").append(this.button.render().el),this.$el.append(this.popover.render().el),this.popover.$el.addClass("query"),this.$queryString=this.popover.$("input.pat-querystring"),this.queryString=new g(this.$queryString,{indexOptionsUrl:this.app.options.indexOptionsUrl,showPreviews:!1});var b=this;return b.queryString.$el.on("change",function(){b.timeoutId&&clearTimeout(b.timeoutId),b.timeoutId=setTimeout(function(){var c=a.parseJSON(b.$queryString.val());b.app.additionalCriterias=c,b.app.collection.pager()},this.keyupDelay)}),b.queryString.$el.on("initialized",function(){b.queryString.$sortOn.on("change",function(){b.app.sort_on=b.queryString.$sortOn.val(),b.app.collection.pager()}),b.queryString.$sortOrder.change(function(){b.app.sort_order=b.queryString.$sortOrder[0].checked?"reverse":"ascending",b.app.collection.pager()})}),this},filter:function(b){var c=this;c.timeoutId&&clearTimeout(c.timeoutId),c.timeoutId=setTimeout(function(){c.term=a(b.currentTarget).val(),c.app.collection.pager()},this.keyupDelay)}});return h}),define("mockup-patterns-structure-url/js/views/upload",["jquery","underscore","backbone","mockup-ui-url/views/popover","mockup-patterns-upload"],function(a,b,c,d,e){"use strict";var f=d.extend({className:"popover upload",title:b.template("Upload files"),content:b.template('<input type="text" name="upload" style="display:none" /><div class="uploadify-me"></div>'),initialize:function(a){var b=this;b.app=a.app,d.prototype.initialize.apply(b,[a]),b.currentPathData=null,b.app.on("context-info-loaded",function(a){b.currentPathData=a})},render:function(){var a=this;d.prototype.render.call(this);var b=a.app.options.upload;return b.success=function(){a.app.collection.pager()},b.relatedItems={vocabularyUrl:a.app.options.vocabularyUrl},b.currentPath=a.app.options.queryHelper.getCurrentPath(),a.upload=new e(a.$(".uploadify-me").addClass("pat-upload"),b),this},toggle:function(a,b){d.prototype.toggle.apply(this,[a,b]);var c=this;if(this.opened){var e=c.app.queryHelper.getCurrentPath(),f=c.upload.relatedItems;c.currentPathData&&f&&e!==c.upload.currentPath&&("/"===e?f.$el.select2("data",[]):f.$el.select2("data",[c.currentPathData.object]),c.upload.setPath(e))}}});return f}),function(a){define("backbone.paginator",["backbone"],function(){return function(){return Backbone.Paginator=function(a,b,c){"use strict";var d=b.map(a.VERSION.split("."),function(a){return parseInt(a,10)}),e={};e.version="<%= pkg.version %>",e.clientPager=a.Collection.extend({useDiacriticsPlugin:!0,useLevenshteinPlugin:!0,sortColumn:"",sortDirection:"desc",lastSortColumn:"",fieldFilterRules:[],lastFieldFilterRules:[],filterFields:"",filterExpression:"",lastFilterExpression:"",defaults_ui:{firstPage:0,currentPage:1,perPage:5,totalPages:10,pagesInRange:4},initialize:function(){this.on("add",this.addModel,this),this.on("remove",this.removeModel,this),this.setDefaults()},setDefaults:function(){var a=b.defaults(this.paginator_ui,this.defaults_ui);b.defaults(this,a)},addModel:function(a){this.origModels.push(a)},removeModel:function(a){var c=b.indexOf(this.origModels,a);this.origModels.splice(c,1)},sync:function(e,f,g){var h=this;this.setDefaults();var i={};b.each(b.result(h,"server_api"),function(a,c){b.isFunction(a)&&(a=b.bind(a,h),a=a()),i[c]=a});var j=b.clone(h.paginator_core);b.each(j,function(a,c){b.isFunction(a)&&(a=b.bind(a,h),a=a()),j[c]=a}),j=b.defaults(j,{timeout:25e3,cache:!1,type:"GET",dataType:"jsonp"}),j=b.extend(j,{data:decodeURIComponent(c.param(i)),processData:!1,url:b.result(j,"url")},g);var k=!(0===d[0]&&9===d[1]&&10===d[2]),l=j.success;j.success=function(a,b,c){l&&(k?l(a,b,c):l(f,a,j)),f&&f.trigger&&f.trigger("sync",f,a,j)};var m=j.error;j.error=function(a){m&&m(f,a,j),f&&f.trigger&&f.trigger("error",f,a,j)};var n=j.xhr=a.ajax(j);return f&&f.trigger&&f.trigger("request",f,n,j),n},nextPage:function(a){this.currentPage<this.information.totalPages&&(this.currentPage=++this.currentPage,this.pager(a))},previousPage:function(a){this.currentPage>1&&(this.currentPage=--this.currentPage,this.pager(a))},goTo:function(a,b){void 0!==a&&(this.currentPage=parseInt(a,10),this.pager(b))},howManyPer:function(a){if(void 0!==a){var b=this.perPage;this.perPage=parseInt(a,10),this.currentPage=Math.ceil((b*(this.currentPage-1)+1)/a),this.pager()}},setSort:function(a,b){void 0!==a&&void 0!==b&&(this.lastSortColumn=this.sortColumn,this.sortColumn=a,this.sortDirection=b,this.pager(),this.info())},setFieldFilter:function(a){b.isEmpty(a)?(this.lastFieldFilterRules=this.fieldFilterRules,this.fieldFilterRules="",this.pager(),this.info()):(this.lastFieldFilterRules=this.fieldFilterRules,this.fieldFilterRules=a,this.pager(),this.info())},doFakeFieldFilter:function(a){if(!b.isEmpty(a)){var c=this.origModels;return void 0===c&&(c=this.models),c=this._fieldFilter(c,a),""!==this.filterExpression&&(c=this._filter(c,this.filterFields,this.filterExpression)),c.length}},setFilter:function(a,b){void 0!==a&&void 0!==b&&(this.filterFields=a,this.lastFilterExpression=this.filterExpression,this.filterExpression=b,this.pager(),this.info())},doFakeFilter:function(a,c){if(void 0!==a&&void 0!==c){var d=this.origModels;return void 0===d&&(d=this.models),b.isEmpty(this.fieldFilterRules)||(d=this._fieldFilter(d,this.fieldFilterRules)),d=this._filter(d,a,c),d.length}},pager:function(a){var c=this,d=this.perPage,e=(c.currentPage-1)*d,f=e+d;void 0===c.origModels&&(c.origModels=c.models),c.models=c.origModels.slice(),""!==this.sortColumn&&(c.models=c._sort(c.models,this.sortColumn,this.sortDirection)),b.isEmpty(this.fieldFilterRules)||(c.models=c._fieldFilter(c.models,this.fieldFilterRules)),""!==this.filterExpression&&(c.models=c._filter(c.models,this.filterFields,this.filterExpression)),this.lastSortColumn===this.sortColumn&&this.lastFilterExpression===this.filterExpression&&b.isEqual(this.fieldFilterRules,this.lastFieldFilterRules)||(e=0,f=e+d,c.currentPage=1,this.lastSortColumn=this.sortColumn,this.lastFieldFilterRules=this.fieldFilterRules,this.lastFilterExpression=this.filterExpression),c.sortedAndFilteredModels=c.models.slice(),c.info(),c.reset(c.models.slice(e,f)),b.result(a,"success")},_sort:function(a,c,d){return a=a.sort(function(a,e){var f=a.get(c),g=e.get(c);if(b.isUndefined(f)||b.isUndefined(g)||null===f||null===g)return 0;if(f=f.toString().toLowerCase(),g=g.toString().toLowerCase(),"desc"===d)if(!f.match(/[^\-\d\.]/)&&f.match(/-?[\d\.]+/)&&!g.match(/[^\-\d\.]/)&&g.match(/-?[\d\.]+/)){if(g-0>f-0)return 1;if(f-0>g-0)return-1}else{if(g>f)return 1;if(f>g)return-1}else if(!f.match(/[^\-\d\.]/)&&f.match(/-?[\d\.]+/)&&!g.match(/[^\-\d\.]/)&&g.match(/-?[\d\.]+/)){if(g-0>f-0)return-1;if(f-0>g-0)return 1}else{if(g>f)return-1;if(f>g)return 1}if(a.cid&&e.cid){var h=a.cid,i=e.cid;if(i>h)return-1;if(h>i)return 1}return 0})},_fieldFilter:function(a,c){if(b.isEmpty(c))return a;var d=[];return b.each(a,function(a){var e=!0;b.each(c,function(c){if(!e)return!1;if(e=!1,"function"===c.type){var d=b.wrap(c.value,function(b){return b(a.get(c.field))});d()&&(e=!0)}else"required"===c.type?b.isEmpty(a.get(c.field).toString())||(e=!0):"min"===c.type?!b.isNaN(Number(a.get(c.field)))&&!b.isNaN(Number(c.value))&&Number(a.get(c.field))>=Number(c.value)&&(e=!0):"max"===c.type?!b.isNaN(Number(a.get(c.field)))&&!b.isNaN(Number(c.value))&&Number(a.get(c.field))<=Number(c.value)&&(e=!0):"range"===c.type?!b.isNaN(Number(a.get(c.field)))&&b.isObject(c.value)&&!b.isNaN(Number(c.value.min))&&!b.isNaN(Number(c.value.max))&&Number(a.get(c.field))>=Number(c.value.min)&&Number(a.get(c.field))<=Number(c.value.max)&&(e=!0):"minLength"===c.type?a.get(c.field).toString().length>=c.value&&(e=!0):"maxLength"===c.type?a.get(c.field).toString().length<=c.value&&(e=!0):"rangeLength"===c.type?b.isObject(c.value)&&!b.isNaN(Number(c.value.min))&&!b.isNaN(Number(c.value.max))&&a.get(c.field).toString().length>=c.value.min&&a.get(c.field).toString().length<=c.value.max&&(e=!0):"oneOf"===c.type?b.isArray(c.value)&&b.include(c.value,a.get(c.field))&&(e=!0):"equalTo"===c.type?c.value===a.get(c.field)&&(e=!0):"containsAllOf"===c.type?b.isArray(c.value)&&b.isArray(a.get(c.field))&&b.intersection(c.value,a.get(c.field)).length===c.value.length&&(e=!0):"pattern"===c.type?a.get(c.field).toString().match(c.value)&&(e=!0):e=!1}),e&&d.push(a)}),d},_filter:function(c,d,e){var f=this,g={};if(b.isString(d)?g[d]={cmp_method:"regexp"}:b.isArray(d)?b.each(d,function(a){g[a]={cmp_method:"regexp"}}):b.each(d,function(a,c){g[c]=b.defaults(a,{cmp_method:"regexp"})}),d=g,b.has(a.Paginator,"removeDiacritics")&&f.useDiacriticsPlugin&&(e=a.Paginator.removeDiacritics(e)),""===e||!b.isString(e))return c;var h=b.map(e.match(/\w+/gi),function(a){return a.toLowerCase()}),i="("+b.uniq(h).join("|")+")",j=new RegExp(i,"igm"),k=[];return b.each(c,function(c){var g=[];b.each(d,function(d,i){var k=c.get(i);if(k){var l=[];if(k=b.has(a.Paginator,"removeDiacritics")&&f.useDiacriticsPlugin?a.Paginator.removeDiacritics(k.toString()):k.toString(),"levenshtein"===d.cmp_method&&b.has(a.Paginator,"levenshtein")&&f.useLevenshteinPlugin){var m=a.Paginator.levenshtein(k,e);b.defaults(d,{max_distance:0}),m<=d.max_distance&&(l=b.uniq(h))}else l=k.match(j);l=b.map(l,function(a){return a.toString().toLowerCase()}),b.each(l,function(a){g.push(a)})}}),g=b.uniq(b.without(g,"")),b.isEmpty(b.difference(h,g))&&k.push(c)}),k},info:function(){var a=this,b={},c=a.sortedAndFilteredModels?a.sortedAndFilteredModels.length:a.length,d=Math.ceil(c/a.perPage);return b={totalUnfilteredRecords:a.origModels.length,totalRecords:c,currentPage:a.currentPage,perPage:this.perPage,totalPages:d,lastPage:d,previous:!1,next:!1,startRecord:0===c?0:(a.currentPage-1)*this.perPage+1,endRecord:Math.min(c,a.currentPage*this.perPage)},a.currentPage>1&&(b.previous=a.currentPage-1),a.currentPage<b.totalPages&&(b.next=a.currentPage+1),b.pageSet=a.setPagination(b),a.information=b,b},setPagination:function(a){var b=[],c=0,d=0,e=2*this.pagesInRange,f=Math.ceil(a.totalRecords/a.perPage);if(f>1)if(1+e>=f)for(c=1,d=f;d>=c;c++)b.push(c);else if(a.currentPage<=this.pagesInRange+1)for(c=1,d=2+e;d>c;c++)b.push(c);else if(f-this.pagesInRange>a.currentPage&&a.currentPage>this.pagesInRange)for(c=a.currentPage-this.pagesInRange;c<=a.currentPage+this.pagesInRange;c++)b.push(c);else for(c=f-e;f>=c;c++)b.push(c);return b},bootstrap:function(a){return b.extend(this,a),this.goTo(1),this.info(),this}}),e.clientPager.prototype.prevPage=e.clientPager.prototype.previousPage;var f=function(){var a=new c.Deferred;return a.reject(),a.promise()};return e.requestPager=a.Collection.extend({sync:function(e,f,g){var h=this;h.setDefaults();var i={};b.each(b.result(h,"server_api"),function(a,c){b.isFunction(a)&&(a=b.bind(a,h),a=a()),i[c]=a});var j=b.clone(h.paginator_core);b.each(j,function(a,c){b.isFunction(a)&&(a=b.bind(a,h),a=a()),j[c]=a}),j=b.defaults(j,{timeout:25e3,cache:!1,type:"GET",dataType:"jsonp"}),g.data=decodeURIComponent(g.data?c.param(b.extend(i,g.data)):c.param(i)),j=b.extend(j,{data:decodeURIComponent(c.param(i)),processData:!1,url:b.result(j,"url")},g);var k=!(0===d[0]&&9===d[1]&&10===d[2]),l=j.success;j.success=function(a,b,c){l&&(k?l(a,b,c):l(f,a,j)),d[0]<1&&f&&f.trigger&&f.trigger("sync",f,a,j)};var m=j.error;j.error=function(a){m&&m(a),f&&f.trigger&&f.trigger("error",f,a,j)};var n=j.xhr=a.ajax(j);return f&&f.trigger&&f.trigger("request",f,n,j),n},setDefaults:function(){var a=this;b.defaults(a.paginator_ui,{firstPage:0,currentPage:1,perPage:5,totalPages:10,pagesInRange:4}),b.each(a.paginator_ui,function(c,d){b.isUndefined(a[d])&&(a[d]=a.paginator_ui[d])})},requestNextPage:function(a){return void 0!==this.currentPage?(this.currentPage+=1,this.pager(a)):f()},requestPreviousPage:function(a){return void 0!==this.currentPage?(this.currentPage-=1,this.pager(a)):f()},updateOrder:function(a,b){return void 0!==a?(this.sortField=a,this.pager(b)):f()},goTo:function(a,b){return void 0!==a?(this.currentPage=parseInt(a,10),this.pager(b)):f()},howManyPer:function(a,b){return void 0!==a?(this.currentPage=this.firstPage,this.perPage=a,this.pager(b)):f()},info:function(){var a={totalRecords:this.totalRecords||0,currentPage:this.currentPage,firstPage:this.firstPage,totalPages:Math.ceil(this.totalRecords/this.perPage),lastPage:this.totalPages,perPage:this.perPage,previous:!1,next:!1};return this.currentPage>1&&(a.previous=this.currentPage-1),this.currentPage<a.totalPages&&(a.next=this.currentPage+1),a.hasNext=a.next,a.hasPrevious=a.next,a.pageSet=this.setPagination(a),this.information=a,a},setPagination:function(a){var b=[],c=0,d=0,e=2*this.pagesInRange,f=Math.ceil(a.totalRecords/a.perPage);if(f>1)if(1+e>=f)for(c=1,d=f;d>=c;c++)b.push(c);else if(a.currentPage<=this.pagesInRange+1)for(c=1,d=2+e;d>c;c++)b.push(c);else if(f-this.pagesInRange>a.currentPage&&a.currentPage>this.pagesInRange)for(c=a.currentPage-this.pagesInRange;c<=a.currentPage+this.pagesInRange;c++)b.push(c);else for(c=f-e;f>=c;c++)b.push(c);return b},pager:function(a){return b.isObject(a)||(a={}),this.fetch(a)},url:function(){return void 0!==this.paginator_core&&void 0!==this.paginator_core.url?this.paginator_core.url:null},bootstrap:function(a){return b.extend(this,a),this.setDefaults(),this.info(),this}}),e.requestPager.prototype.nextPage=e.requestPager.prototype.requestNextPage,e.requestPager.prototype.prevPage=e.requestPager.prototype.requestPreviousPage,e}(Backbone,_,jQuery),window.Backbone.Paginator}.apply(a,arguments)})}(this),define("mockup-patterns-structure-url/js/collections/result",["underscore","backbone","mockup-patterns-structure-url/js/models/result","backbone.paginator"],function(a,b,c){"use strict";var d=b.Paginator.requestPager.extend({model:c,queryHelper:null,initialize:function(a,c){this.options=c,this.url=c.url,this.queryParser=c.queryParser,this.queryHelper=c.queryHelper,b.Paginator.requestPager.prototype.initialize.apply(this,[a,c])},pager:function(){this.trigger("pager"),b.Paginator.requestPager.prototype.pager.apply(this,[])},paginator_core:{type:"GET",dataType:"json",url:function(){return this.url}},paginator_ui:{firstPage:1,currentPage:1,perPage:15},server_api:{query:function(){return this.queryParser()},batch:function(){return this.queryHelper.options.batchSize=this.perPage,JSON.stringify(this.queryHelper.getBatch(this.currentPage))},attributes:function(){return JSON.stringify(this.queryHelper.options.attributes)}},parse:function(b){this.totalRecords=b.total;var c=b.results;return a.each(c,function(a,b){a._sort=b}),c},comparator:"_sort"});return d}),define("mockup-patterns-structure-url/js/collections/selected",["backbone","mockup-patterns-structure-url/js/models/result"],function(a,b){"use strict";var c=a.Collection.extend({model:b,removeResult:function(a){return this.removeByUID(a.uid())},removeByUID:function(a){var b=this.getByUID(a);return b&&this.remove(b),b},getByUID:function(a){return this.findWhere({UID:a})}});return c}),function(a){"function"==typeof define&&define.amd?define("jquery.cookie",["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){function b(a){return h.raw?a:encodeURIComponent(a)}function c(a){return h.raw?a:decodeURIComponent(a)}function d(a){return b(h.json?JSON.stringify(a):String(a))}function e(a){0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return a=decodeURIComponent(a.replace(g," ")),h.json?JSON.parse(a):a}catch(b){}}function f(b,c){var d=h.raw?b:e(b);return a.isFunction(c)?c(d):d}var g=/\+/g,h=a.cookie=function(e,g,i){if(void 0!==g&&!a.isFunction(g)){if(i=a.extend({},h.defaults,i),"number"==typeof i.expires){var j=i.expires,k=i.expires=new Date;k.setTime(+k+864e5*j)}return document.cookie=[b(e),"=",d(g),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}for(var l=e?void 0:{},m=document.cookie?document.cookie.split("; "):[],n=0,o=m.length;o>n;n++){var p=m[n].split("="),q=c(p.shift()),r=p.join("=");if(e&&e===q){l=f(r,g);break}e||void 0===(r=f(r))||(l[q]=r)}return l};h.defaults={},a.removeCookie=function(b,c){return void 0===a.cookie(b)?!1:(a.cookie(b,"",a.extend({},c,{expires:-1})),!a.cookie(b))}}),define("mockup-patterns-structure-url/js/views/app",["jquery","underscore","backbone","mockup-ui-url/views/toolbar","mockup-ui-url/views/buttongroup","mockup-ui-url/views/button","mockup-ui-url/views/base","mockup-patterns-structure-url/js/views/table","mockup-patterns-structure-url/js/views/selectionwell","mockup-patterns-structure-url/js/views/tags","mockup-patterns-structure-url/js/views/properties","mockup-patterns-structure-url/js/views/workflow","mockup-patterns-structure-url/js/views/delete","mockup-patterns-structure-url/js/views/rename","mockup-patterns-structure-url/js/views/rearrange","mockup-patterns-structure-url/js/views/selectionbutton","mockup-patterns-structure-url/js/views/paging","mockup-patterns-structure-url/js/views/addmenu","mockup-patterns-structure-url/js/views/columns","mockup-patterns-structure-url/js/views/textfilter","mockup-patterns-structure-url/js/views/upload","mockup-patterns-structure-url/js/collections/result","mockup-patterns-structure-url/js/collections/selected","mockup-utils","jquery.cookie"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){


