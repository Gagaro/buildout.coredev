Repository: Products.CMFQuickInstallerTool
Branch: refs/heads/master
Date: 2015-06-07T11:11:52+02:00
Author: Tom Gross (tomgross) <itconsense@gmail.com>
Commit: https://github.com/plone/Products.CMFQuickInstallerTool/commit/1c780014f63644299983b67caee1bcb636f2f31b

run all doctests

Files changed:
M Products/CMFQuickInstallerTool/tests/profiles.txt
M Products/CMFQuickInstallerTool/tests/test_install.py

diff --git a/Products/CMFQuickInstallerTool/tests/profiles.txt b/Products/CMFQuickInstallerTool/tests/profiles.txt
index 7a85c3d..ec7e58c 100644
--- a/Products/CMFQuickInstallerTool/tests/profiles.txt
+++ b/Products/CMFQuickInstallerTool/tests/profiles.txt
@@ -68,6 +68,11 @@ We now expect to see Products.Product1 and Products.Product2 in the list of
 installable products, but not Products.Product3.
 
   >>> installable = [x['id'] for x in qi.listInstallableProducts()]
-  >>> self.failUnless('Products.Product1' in installable)
-  >>> self.failUnless('Products.Product2' in installable)
-  >>> self.failIf('Products.Product3' in installable)
+  >>> 'Products.Product1' in installable
+  True
+
+  >>> 'Products.Product2' in installable
+  True
+
+  >>> 'Products.Product3' in installable
+  False
diff --git a/Products/CMFQuickInstallerTool/tests/test_install.py b/Products/CMFQuickInstallerTool/tests/test_install.py
index 143240d..130f4b4 100644
--- a/Products/CMFQuickInstallerTool/tests/test_install.py
+++ b/Products/CMFQuickInstallerTool/tests/test_install.py
@@ -61,7 +61,7 @@ def test_suite():
     for testfile in ['actions.txt', 'profiles.txt', 'install.txt']:
         suite.addTest(layered(
             doctest.DocFileSuite(
-                'actions.txt',
+                testfile,
                 package='Products.CMFQuickInstallerTool.tests',
                 optionflags=OPTIONFLAGS),
             layer=CQI_FUNCTIONAL_TESTING))


Repository: Products.CMFQuickInstallerTool
Branch: refs/heads/master
Date: 2015-06-07T11:12:00+02:00
Author: Tom Gross (tomgross) <itconsense@gmail.com>
Commit: https://github.com/plone/Products.CMFQuickInstallerTool/commit/0751b2086499d6d53469b3567d5498c925d22b5e

fixed doctests

Files changed:
M Products/CMFQuickInstallerTool/tests/install.txt
M Products/CMFQuickInstallerTool/tests/test_install.py

diff --git a/Products/CMFQuickInstallerTool/tests/install.txt b/Products/CMFQuickInstallerTool/tests/install.txt
index b5b60d8..46f1db8 100644
--- a/Products/CMFQuickInstallerTool/tests/install.txt
+++ b/Products/CMFQuickInstallerTool/tests/install.txt
@@ -7,7 +7,7 @@ First we set three convenience variables for later use:
   >>> from Products.CMFQuickInstallerTool.interfaces import IQuickInstallerTool
   >>> from Products.CMFCore.utils import getToolByName
 
-  >>> portal = layer['plone']
+  >>> portal = layer['portal']
   >>> portal
   <PloneSite at /plone>
 
diff --git a/Products/CMFQuickInstallerTool/tests/test_install.py b/Products/CMFQuickInstallerTool/tests/test_install.py
index 130f4b4..d59c6f6 100644
--- a/Products/CMFQuickInstallerTool/tests/test_install.py
+++ b/Products/CMFQuickInstallerTool/tests/test_install.py
@@ -5,6 +5,7 @@
 from Products.GenericSetup import EXTENSION, profile_registry
 from plone.app import testing
 from plone.testing import layered
+from plone.app.contenttypes.testing import PLONE_APP_CONTENTTYPES_FIXTURE
 
 from Products.CMFQuickInstallerTool.QuickInstallerTool import QuickInstallerTool
 from Products.CMFQuickInstallerTool.events import handleBeforeProfileImportEvent
@@ -17,7 +18,7 @@
 
 class QuickInstallerCaseFixture(testing.PloneSandboxLayer):
 
-    defaultBases = (testing.PLONE_FIXTURE, )
+    defaultBases = (PLONE_APP_CONTENTTYPES_FIXTURE, )
 
     def setUpZope(self, app, configurationContext):
         sm = zope.component.getSiteManager()


Repository: Products.CMFQuickInstallerTool
Branch: refs/heads/master
Date: 2015-06-07T11:12:06+02:00
Author: Tom Gross (tomgross) <itconsense@gmail.com>
Commit: https://github.com/plone/Products.CMFQuickInstallerTool/commit/e8d140147c29aee773393ad977d455a6b791a226

document changes

Files changed:
M CHANGES.rst

diff --git a/CHANGES.rst b/CHANGES.rst
index acb2cfa..ad60c97 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,7 +4,8 @@ Changelog
 3.0.9 (unreleased)
 ------------------
 
-- Nothing changed yet.
+- Readded doctests which were not run after port to plone.app.testing
+  [tomgross]
 
 
 3.0.8 (2015-03-21)


Repository: Products.CMFQuickInstallerTool
Branch: refs/heads/master
Date: 2015-06-07T11:12:14+02:00
Author: Tom Gross (tomgross) <itconsense@gmail.com>
Commit: https://github.com/plone/Products.CMFQuickInstallerTool/commit/e65ae463fb40563aab042db88266d026bfb76e3c

work with Plone 4.3 (Archetypes)

Files changed:
M Products/CMFQuickInstallerTool/tests/test_install.py

diff --git a/Products/CMFQuickInstallerTool/tests/test_install.py b/Products/CMFQuickInstallerTool/tests/test_install.py
index d59c6f6..51f3b94 100644
--- a/Products/CMFQuickInstallerTool/tests/test_install.py
+++ b/Products/CMFQuickInstallerTool/tests/test_install.py
@@ -5,12 +5,22 @@
 from Products.GenericSetup import EXTENSION, profile_registry
 from plone.app import testing
 from plone.testing import layered
-from plone.app.contenttypes.testing import PLONE_APP_CONTENTTYPES_FIXTURE
 
 from Products.CMFQuickInstallerTool.QuickInstallerTool import QuickInstallerTool
 from Products.CMFQuickInstallerTool.events import handleBeforeProfileImportEvent
 from Products.CMFQuickInstallerTool.events import handleProfileImportedEvent
 
+import pkg_resources
+try:
+    pkg_resources.get_distribution('plone.app.contenttypes')
+except pkg_resources.DistributionNotFound:
+    # assume we have an other content framework (Archetypes) here
+    TESTING_FIXTURE = testing.PLONE_FIXTURE
+else:
+    from plone.app.contenttypes.testing import PLONE_APP_CONTENTTYPES_FIXTURE
+    TESTING_FIXTURE = PLONE_APP_CONTENTTYPES_FIXTURE
+
+
 OPTIONFLAGS = (doctest.ELLIPSIS | doctest.NORMALIZE_WHITESPACE)
 
 TEST_PATCHES = {}
@@ -18,7 +28,7 @@
 
 class QuickInstallerCaseFixture(testing.PloneSandboxLayer):
 
-    defaultBases = (PLONE_APP_CONTENTTYPES_FIXTURE, )
+    defaultBases = (TESTING_FIXTURE, )
 
     def setUpZope(self, app, configurationContext):
         sm = zope.component.getSiteManager()


