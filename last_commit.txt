Repository: plone.app.contenttypes


Branch: refs/heads/master
Date: 2015-08-10T10:01:50+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.app.contenttypes/commit/b76c020afd91daa54d93af8a6fd3f764a4279af2

linkintegrity-relations are (for now) only possible with DX with plone.app.referenceablebehavior

Files changed:
M plone/app/contenttypes/migration/utils.py

diff --git a/plone/app/contenttypes/migration/utils.py b/plone/app/contenttypes/migration/utils.py
index 517d77b..686a4d4 100644
--- a/plone/app/contenttypes/migration/utils.py
+++ b/plone/app/contenttypes/migration/utils.py
@@ -378,7 +378,7 @@ def link_items(
         # with a link to the target and should not be created manually.
         if source_type == 'AT':
             modifiedArchetype(source_obj, None)
-        if source_type == 'DX':
+        if source_type == 'DX' and is_referenceable(source_obj):
             modifiedDexterity(source_obj, None)
         return
 


