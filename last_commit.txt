Repository: plone.app.i18n


Branch: refs/heads/master
Date: 2015-07-13T19:29:11+02:00
Author: Roel Bruggink (jaroel) <roel@jaroel.nl>
Commit: https://github.com/plone/plone.app.i18n/commit/634300e64602ac1c0f46dbefbd31c124df18a22e

Fix language switching links. 'switchLanguage' no longer exists.

Files changed:
M CHANGES.rst
M plone/app/i18n/locales/browser/languageselector.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index 8706559..9df1bf0 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,7 +4,9 @@ Changelog
 3.0.1 (unreleased)
 ------------------
 
-- Nothing changed yet.
+- Fix switchLanguage links. Refs https://github.com/plone/Products.CMFPlone/issues/431
+  Needs 'use_cookie_negotiation' to be on to actually do anything.
+  [jaroel]
 
 
 3.0.0 (2015-03-26)
diff --git a/plone/app/i18n/locales/browser/languageselector.pt b/plone/app/i18n/locales/browser/languageselector.pt
index 5807272..1b2e377 100644
--- a/plone/app/i18n/locales/browser/languageselector.pt
+++ b/plone/app/i18n/locales/browser/languageselector.pt
@@ -14,7 +14,7 @@
            tal:define="flag lang/flag|nothing;
                        name lang/native|lang/name;
                        showflag python:showFlags and flag;"
-           tal:attributes="href string:${here_url}/switchLanguage?set_language=${code};
+           tal:attributes="href string:${here_url}?set_language=${code};
                            title name"
             ><tal:flag condition="showflag">
                 <img width="14"


