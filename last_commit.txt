Repository: plone.app.testing
Branch: refs/heads/master
Date: 2015-03-05T15:11:30+01:00
Author: Timo Stollenwerk (tisto) <tisto@plone.org>
Commit: https://github.com/plone/plone.app.testing/commit/da795e587641ffeb7e7d2183afa0786d62eb2214

Revert "Adding notification to make browser layers work"

This reverts commit 39d0c52b55173c6a9de3a2317a8308cee9d56a1a.

Commit broke the Plone 5.0 build: http://jenkins.plone.org/job/plone-5.0-python-2.7/148/changes#detail0

Files changed:
M plone/app/testing/layers.py

diff --git a/plone/app/testing/layers.py b/plone/app/testing/layers.py
index 3b6a043..7f7012e 100644
--- a/plone/app/testing/layers.py
+++ b/plone/app/testing/layers.py
@@ -4,10 +4,6 @@
 from plone.testing import Layer
 from plone.testing import zodb, zca, z2
 
-from zope.event import notify
-from zope.traversing.interfaces import BeforeTraverseEvent
-
-
 from plone.app.testing.interfaces import (
     PLONE_SITE_ID,
     PLONE_SITE_TITLE,
@@ -290,8 +286,6 @@ def setUpEnvironment(self, portal):
         # Reset skin data
         portal.clearCurrentSkin()
         portal.setupCurrentSkin(portal.REQUEST)
-        notify(BeforeTraverseEvent(portal, portal.REQUEST))
-
 
         # Pseudo-login as the test user
         from plone.app.testing import helpers


