Repository: plone.app.contentrules
Branch: refs/heads/master
Date: 2015-03-16T19:17:14+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.contentrules/commit/ca9bfb704575a66865ad4f9bd3cadd8e8f9f4b2f

Revert "Remove DL's from portal message templates."

Files changed:
M CHANGES.rst
M plone/app/contentrules/actions/templates/mail.pt
M plone/app/contentrules/browser/contentrules.js
M plone/app/contentrules/browser/templates/controlpanel.pt
M plone/app/contentrules/browser/templates/manage-assignments.pt
M plone/app/contentrules/browser/templates/manage-elements.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index def2573..de36222 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,9 +4,7 @@ Changelog
 4.0.2 (unreleased)
 ------------------
 
-- Remove DL's from portal message templates.
-  https://github.com/plone/Products.CMFPlone/issues/153
-  [khink]
+- Nothing changed yet.
 
 
 4.0.1 (2015-03-11)
diff --git a/plone/app/contentrules/actions/templates/mail.pt b/plone/app/contentrules/actions/templates/mail.pt
index 6db8d8c..1748a43 100644
--- a/plone/app/contentrules/actions/templates/mail.pt
+++ b/plone/app/contentrules/actions/templates/mail.pt
@@ -13,21 +13,21 @@
     <metal:block metal:define-macro="form">
 
      <tal:status define="status view/status" condition="status">
-         <div class="portalMessage error"
+         <dl class="portalMessage error"
              tal:condition="view/errors">
-             <strong i18n:translate="">
+             <dt i18n:translate="">
                  Error
-             </strong>
-             <span tal:replace="status" />
-         </div>
+             </dt>
+             <dd tal:content="status" />
+         </dl>
 
-         <div class="portalMessage info"
+         <dl class="portalMessage info"
              tal:condition="not: view/errors">
-             <strong i18n:translate="">
+             <dt i18n:translate="">
                  Info
-             </strong>
-             <span tal:replace="status" />
-         </div>
+             </dt>
+             <dd tal:content="status" />
+         </dl>
      </tal:status>
 
      <h1  class="documentFirstHeading"
diff --git a/plone/app/contentrules/browser/contentrules.js b/plone/app/contentrules/browser/contentrules.js
index 3fb91a6..985c243 100644
--- a/plone/app/contentrules/browser/contentrules.js
+++ b/plone/app/contentrules/browser/contentrules.js
@@ -15,10 +15,10 @@ require([
       type = 'info';
     }
     var _show = function(){
-      var msg = $('<div class="portalMessage ' + type + '">' +
-                  '<strong>' + type + '</strong>' +
-                  message +
-                '</div>');
+      var msg = $('<dl class="portalMessage ' + type + '">' +
+                  '<dt>' + type + '</dt>' +
+                  '<dd>' + message + '</dd>' +
+                '</dl>');
       $('#content').before(msg);
       msg.fadeIn();
     };
diff --git a/plone/app/contentrules/browser/templates/controlpanel.pt b/plone/app/contentrules/browser/templates/controlpanel.pt
index e7be88c..a4d9599 100644
--- a/plone/app/contentrules/browser/templates/controlpanel.pt
+++ b/plone/app/contentrules/browser/templates/controlpanel.pt
@@ -120,13 +120,15 @@
                     <tr tal:define="oddrow repeat/rule/odd"
                         tal:attributes="class python:(oddrow and 'even ' or 'odd ') + rule['row_class'];">
                         <td>
-                                <header>
+                            <dl>
+                                <dt>
                                   <a tal:attributes="href string:${context/absolute_url}/++rule++${rule/id}/@@manage-elements"><span
                                      tal:replace="rule/title">Rule Title</span></a>
-                                </header>
-                                <span tal:content="rule/description">
+                                </dt>
+                                <dd tal:content="rule/description">
                                     Rule Description.
-                                </span>
+                                </dd>
+                            </dl>
                         </td>
                         <td>
                             <span class="trigger"
diff --git a/plone/app/contentrules/browser/templates/manage-assignments.pt b/plone/app/contentrules/browser/templates/manage-assignments.pt
index 988abe4..5e42675 100644
--- a/plone/app/contentrules/browser/templates/manage-assignments.pt
+++ b/plone/app/contentrules/browser/templates/manage-assignments.pt
@@ -13,12 +13,12 @@
 
 <metal:body fill-slot="body">
 
-    <div class="portalMessage info"
-        tal:condition="not:view/globally_enabled">
-        <header i18n:translate="">
+    <div tal:condition="not:view/globally_enabled"
+         class="portalMessage info">
+        <strong i18n:translate="">
             Info
-        </header>
-        <span tal:omit-tag="" i18n:translate="warning_contentrules_disabled">
+        </strong>
+        <span i18n:translate="warning_contentrules_disabled">
             Content rules are disabled globally. No assigned rules will execute
             until they are re-enabled. Use the
             <a href=""
@@ -73,14 +73,17 @@
                             <tal:rules repeat="rule acquired_rules">
                                 <tr tal:define="oddrow repeat/rule/odd"
                                     tal:attributes="class python:oddrow and 'even' or 'odd'">
-                                            <header><a tal:attributes="href rule/url">
+                                    <td>
+                                        <dl>
+                                            <dt><a tal:attributes="href rule/url">
                                                 <span tal:replace="rule/title" />
                                                 (<span class="trigger"
                                                     i18n:translate=""
-                                                    tal:content="rule/trigger">trigger</span>)</a></header>
-                                            <span tal:content="rule/description">
+                                                    tal:content="rule/trigger">trigger</span>)</a></dt>
+                                            <dd tal:content="rule/description">
                                                 Rule Description.
-                                            </span>
+                                            </dd>
+                                        </dl>
                                     </td>
                                     <td class="checker">
                                         <img tal:condition="rule/enabled"
@@ -155,14 +158,16 @@
                                            tal:attributes="value rule/id" />
                                 </td>
                                 <td>
-                                        <header><a tal:attributes="href rule/url">
+                                    <dl>
+                                        <dt><a tal:attributes="href rule/url">
                                             <span tal:replace="rule/title" />
                                             (<span class="trigger"
                                                 i18n:translate=""
-                                                tal:content="rule/trigger">trigger</span>)</a></header>
-                                        <span tal:content="rule/description">
+                                                tal:content="rule/trigger">trigger</span>)</a></dt>
+                                        <dd tal:content="rule/description">
                                             Rule Description.
-                                        </span>
+                                        </dd>
+                                    </dl>
                                 </td>
                                 <td class="checker">
                                     <a tal:condition="not:repeat/rule/start"
diff --git a/plone/app/contentrules/browser/templates/manage-elements.pt b/plone/app/contentrules/browser/templates/manage-elements.pt
index c3f75c2..960f52a 100644
--- a/plone/app/contentrules/browser/templates/manage-elements.pt
+++ b/plone/app/contentrules/browser/templates/manage-elements.pt
@@ -139,7 +139,7 @@
                            />
                 </div>
                 <div class="portalMessage warning">
-                    <header tal:content="condition/title" i18n:translate="">Transition was publish.</header>
+                    <strong tal:content="condition/title" i18n:translate="">Transition was publish.</strong>
                     <span tal:content="condition/summary">
                         Something happened
                     </span>
@@ -221,8 +221,8 @@
                            />
                 </div>
                 <div class="portalMessage warning">
-                    <header tal:content="action/title"
-                        i18n:translate="">Move to folder</header>
+                    <strong tal:content="action/title"
+                        i18n:translate="">Move to folder</strong>
                     <span tal:content="action/summary">
                         Something happened
                     </span>
@@ -282,18 +282,19 @@
 
           </tal:noassignments>
           <tal:assignments condition="nocall:assignments">
-            <p class="portalMessage info"
-                i18n:translate="description_contentrules_rule_assignments">
-                This rule is assigned to the following locations.
-            </p>
-                <article tal:repeat="assignment assignments">
-                    <header>
-                        <img tal:replace="structure assignment/icon/html_tag" />
+            <div class="portalMessage info" i18n:translate="description_contentrules_rule_assignments">
+              <strong>Info</strong>
+              <span>This rule is assigned to the following locations:
+
+
+                <tal:items repeat="assignment assignments">
+
                         <a tal:attributes="href string:${assignment/url}/@@manage-content-rules"
                            tal:content="assignment/title" />
-                    </header>
-                    <span tal:content="assignment/description"></span>
-                </article>
+
+                </tal:items>
+              </span>
+            </div>
           </tal:assignments>
         </fieldset>
 


Repository: plone.app.contentrules
Branch: refs/heads/master
Date: 2015-03-16T19:17:45+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.contentrules/commit/ce0effaea6f2abda7e989591589791ea3c5f9b00

Merge pull request #10 from plone/revert-5-remove-dt-dl-dd

Revert "Remove DL's from portal message templates."

Files changed:
M CHANGES.rst
M plone/app/contentrules/actions/templates/mail.pt
M plone/app/contentrules/browser/contentrules.js
M plone/app/contentrules/browser/templates/controlpanel.pt
M plone/app/contentrules/browser/templates/manage-assignments.pt
M plone/app/contentrules/browser/templates/manage-elements.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index def2573..de36222 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,9 +4,7 @@ Changelog
 4.0.2 (unreleased)
 ------------------
 
-- Remove DL's from portal message templates.
-  https://github.com/plone/Products.CMFPlone/issues/153
-  [khink]
+- Nothing changed yet.
 
 
 4.0.1 (2015-03-11)
diff --git a/plone/app/contentrules/actions/templates/mail.pt b/plone/app/contentrules/actions/templates/mail.pt
index 6db8d8c..1748a43 100644
--- a/plone/app/contentrules/actions/templates/mail.pt
+++ b/plone/app/contentrules/actions/templates/mail.pt
@@ -13,21 +13,21 @@
     <metal:block metal:define-macro="form">
 
      <tal:status define="status view/status" condition="status">
-         <div class="portalMessage error"
+         <dl class="portalMessage error"
              tal:condition="view/errors">
-             <strong i18n:translate="">
+             <dt i18n:translate="">
                  Error
-             </strong>
-             <span tal:replace="status" />
-         </div>
+             </dt>
+             <dd tal:content="status" />
+         </dl>
 
-         <div class="portalMessage info"
+         <dl class="portalMessage info"
              tal:condition="not: view/errors">
-             <strong i18n:translate="">
+             <dt i18n:translate="">
                  Info
-             </strong>
-             <span tal:replace="status" />
-         </div>
+             </dt>
+             <dd tal:content="status" />
+         </dl>
      </tal:status>
 
      <h1  class="documentFirstHeading"
diff --git a/plone/app/contentrules/browser/contentrules.js b/plone/app/contentrules/browser/contentrules.js
index 3fb91a6..985c243 100644
--- a/plone/app/contentrules/browser/contentrules.js
+++ b/plone/app/contentrules/browser/contentrules.js
@@ -15,10 +15,10 @@ require([
       type = 'info';
     }
     var _show = function(){
-      var msg = $('<div class="portalMessage ' + type + '">' +
-                  '<strong>' + type + '</strong>' +
-                  message +
-                '</div>');
+      var msg = $('<dl class="portalMessage ' + type + '">' +
+                  '<dt>' + type + '</dt>' +
+                  '<dd>' + message + '</dd>' +
+                '</dl>');
       $('#content').before(msg);
       msg.fadeIn();
     };
diff --git a/plone/app/contentrules/browser/templates/controlpanel.pt b/plone/app/contentrules/browser/templates/controlpanel.pt
index e7be88c..a4d9599 100644
--- a/plone/app/contentrules/browser/templates/controlpanel.pt
+++ b/plone/app/contentrules/browser/templates/controlpanel.pt
@@ -120,13 +120,15 @@
                     <tr tal:define="oddrow repeat/rule/odd"
                         tal:attributes="class python:(oddrow and 'even ' or 'odd ') + rule['row_class'];">
                         <td>
-                                <header>
+                            <dl>
+                                <dt>
                                   <a tal:attributes="href string:${context/absolute_url}/++rule++${rule/id}/@@manage-elements"><span
                                      tal:replace="rule/title">Rule Title</span></a>
-                                </header>
-                                <span tal:content="rule/description">
+                                </dt>
+                                <dd tal:content="rule/description">
                                     Rule Description.
-                                </span>
+                                </dd>
+                            </dl>
                         </td>
                         <td>
                             <span class="trigger"
diff --git a/plone/app/contentrules/browser/templates/manage-assignments.pt b/plone/app/contentrules/browser/templates/manage-assignments.pt
index 988abe4..5e42675 100644
--- a/plone/app/contentrules/browser/templates/manage-assignments.pt
+++ b/plone/app/contentrules/browser/templates/manage-assignments.pt
@@ -13,12 +13,12 @@
 
 <metal:body fill-slot="body">
 
-    <div class="portalMessage info"
-        tal:condition="not:view/globally_enabled">
-        <header i18n:translate="">
+    <div tal:condition="not:view/globally_enabled"
+         class="portalMessage info">
+        <strong i18n:translate="">
             Info
-        </header>
-        <span tal:omit-tag="" i18n:translate="warning_contentrules_disabled">
+        </strong>
+        <span i18n:translate="warning_contentrules_disabled">
             Content rules are disabled globally. No assigned rules will execute
             until they are re-enabled. Use the
             <a href=""
@@ -73,14 +73,17 @@
                             <tal:rules repeat="rule acquired_rules">
                                 <tr tal:define="oddrow repeat/rule/odd"
                                     tal:attributes="class python:oddrow and 'even' or 'odd'">
-                                            <header><a tal:attributes="href rule/url">
+                                    <td>
+                                        <dl>
+                                            <dt><a tal:attributes="href rule/url">
                                                 <span tal:replace="rule/title" />
                                                 (<span class="trigger"
                                                     i18n:translate=""
-                                                    tal:content="rule/trigger">trigger</span>)</a></header>
-                                            <span tal:content="rule/description">
+                                                    tal:content="rule/trigger">trigger</span>)</a></dt>
+                                            <dd tal:content="rule/description">
                                                 Rule Description.
-                                            </span>
+                                            </dd>
+                                        </dl>
                                     </td>
                                     <td class="checker">
                                         <img tal:condition="rule/enabled"
@@ -155,14 +158,16 @@
                                            tal:attributes="value rule/id" />
                                 </td>
                                 <td>
-                                        <header><a tal:attributes="href rule/url">
+                                    <dl>
+                                        <dt><a tal:attributes="href rule/url">
                                             <span tal:replace="rule/title" />
                                             (<span class="trigger"
                                                 i18n:translate=""
-                                                tal:content="rule/trigger">trigger</span>)</a></header>
-                                        <span tal:content="rule/description">
+                                                tal:content="rule/trigger">trigger</span>)</a></dt>
+                                        <dd tal:content="rule/description">
                                             Rule Description.
-                                        </span>
+                                        </dd>
+                                    </dl>
                                 </td>
                                 <td class="checker">
                                     <a tal:condition="not:repeat/rule/start"
diff --git a/plone/app/contentrules/browser/templates/manage-elements.pt b/plone/app/contentrules/browser/templates/manage-elements.pt
index c3f75c2..960f52a 100644
--- a/plone/app/contentrules/browser/templates/manage-elements.pt
+++ b/plone/app/contentrules/browser/templates/manage-elements.pt
@@ -139,7 +139,7 @@
                            />
                 </div>
                 <div class="portalMessage warning">
-                    <header tal:content="condition/title" i18n:translate="">Transition was publish.</header>
+                    <strong tal:content="condition/title" i18n:translate="">Transition was publish.</strong>
                     <span tal:content="condition/summary">
                         Something happened
                     </span>
@@ -221,8 +221,8 @@
                            />
                 </div>
                 <div class="portalMessage warning">
-                    <header tal:content="action/title"
-                        i18n:translate="">Move to folder</header>
+                    <strong tal:content="action/title"
+                        i18n:translate="">Move to folder</strong>
                     <span tal:content="action/summary">
                         Something happened
                     </span>
@@ -282,18 +282,19 @@
 
           </tal:noassignments>
           <tal:assignments condition="nocall:assignments">
-            <p class="portalMessage info"
-                i18n:translate="description_contentrules_rule_assignments">
-                This rule is assigned to the following locations.
-            </p>
-                <article tal:repeat="assignment assignments">
-                    <header>
-                        <img tal:replace="structure assignment/icon/html_tag" />
+            <div class="portalMessage info" i18n:translate="description_contentrules_rule_assignments">
+              <strong>Info</strong>
+              <span>This rule is assigned to the following locations:
+
+
+                <tal:items repeat="assignment assignments">
+
                         <a tal:attributes="href string:${assignment/url}/@@manage-content-rules"
                            tal:content="assignment/title" />
-                    </header>
-                    <span tal:content="assignment/description"></span>
-                </article>
+
+                </tal:items>
+              </span>
+            </div>
           </tal:assignments>
         </fieldset>
 


