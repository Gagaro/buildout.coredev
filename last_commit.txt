Repository: Products.CMFPlone
Branch: refs/heads/master
Date: 2015-05-14T16:37:20-05:00
Author: vangheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/2d3865805efc6b72dce236eb68e502d8c57717b6

use random urls to get requirejs resources so we can cahce bust it

Files changed:
M Products/CMFPlone/static/components/r.js/dist/r.js

diff --git a/Products/CMFPlone/static/components/r.js/dist/r.js b/Products/CMFPlone/static/components/r.js/dist/r.js
index ed177d8..31c27a3 100644
--- a/Products/CMFPlone/static/components/r.js/dist/r.js
+++ b/Products/CMFPlone/static/components/r.js/dist/r.js
@@ -25821,7 +25821,14 @@ define('build', function (require) {
             d.resolve(require._cachedRawText[path]);
             return d.promise;
         } else {
-            return file.readFileAsync(path, encoding).then(function (text) {
+            var url = path;
+            if(url.indexOf('?') === -1){
+                url += '?';
+            }else{
+                url += '&';
+            }
+            url = url + "bust=" +  (new Date()).getTime();
+            return file.readFileAsync(url, encoding).then(function (text) {
                 require._cachedRawText[path] = text;
                 return text;
             });


