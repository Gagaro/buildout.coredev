Repository: plone.protect


Branch: refs/heads/master
Date: 2015-09-19T12:16:10+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.protect/commit/d206f266af57334b859518bf7bcb0a4840e698b0

fix zcml-condition

Files changed:
M plone/protect/configure.zcml

diff --git a/plone/protect/configure.zcml b/plone/protect/configure.zcml
index 0a53d7b..6adc474 100644
--- a/plone/protect/configure.zcml
+++ b/plone/protect/configure.zcml
@@ -61,14 +61,14 @@
         />
 
     <monkey:patch
-        zcml:condition="Products.PluggableAuthService.utils.getCSRFToken"
+        zcml:condition="installed Products.PluggableAuthService.utils.getCSRFToken"
         description="Patch old pluggable auth to use plone mechanism"
         class="Products.PluggableAuthService.utils"
         original="getCSRFToken"
         replacement=".monkey.pluggableauth__getCSRFToken"
         />
     <monkey:patch
-        zcml:condition="Products.PluggableAuthService.utils.checkCSRFToken"
+        zcml:condition="installed Products.PluggableAuthService.utils.checkCSRFToken"
         description="Patch old pluggable auth to use plone mechanism"
         class="Products.PluggableAuthService.utils"
         original="checkCSRFToken"


