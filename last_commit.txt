Repository: mockup


Branch: refs/heads/master
Date: 2015-10-25T07:15:39-05:00
Author: vangheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/mockup/commit/f138bd5b87ec3e0822aed13bb8c193dbdd063b15

add support for the stub_js_modules field in resource registries pattern

Files changed:
M mockup/patterns/resourceregistry/js/fields.js
M mockup/patterns/resourceregistry/js/registry.js

diff --git a/mockup/patterns/resourceregistry/js/fields.js b/mockup/patterns/resourceregistry/js/fields.js
index e59ddc9..c316a13 100644
--- a/mockup/patterns/resourceregistry/js/fields.js
+++ b/mockup/patterns/resourceregistry/js/fields.js
@@ -185,6 +185,7 @@ define([
       e.preventDefault();
       self.options.value.push('');
       self.render();
+      self.inputChanged();
     },
 
     removeItem: function(e){
@@ -193,6 +194,7 @@ define([
       var index = $el.index();
       this.options.value.splice(index, 1);
       $el.remove();
+      this.inputChanged();
     },
 
     afterRender: function(){
diff --git a/mockup/patterns/resourceregistry/js/registry.js b/mockup/patterns/resourceregistry/js/registry.js
index e934179..4d8dd56 100644
--- a/mockup/patterns/resourceregistry/js/registry.js
+++ b/mockup/patterns/resourceregistry/js/registry.js
@@ -134,6 +134,12 @@ define([
       title: _t('Compiled CSS'),
       description: _t('Automatically generated path to the compiled CSS.'),
       view: fields.ResourceDisplayFieldView
+    }, {
+      name: 'stub_js_modules',
+      title: _t('Stub JS Modules'),
+      description: _t('Define list of modules that will be not be defined empty ' +
+                      'on RequireJS build steps to prevent loading modules multiple times.'),
+      view: fields.ResourceSortableListFieldView
     }]
   });
 


