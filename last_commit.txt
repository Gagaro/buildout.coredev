Repository: mockup
Branch: refs/heads/master
Date: 2015-05-13T14:19:23-05:00
Author: vangheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/mockup/commit/edd718ff5d6e17b6d44494b478f4f65bb9fe4950

modal should emit shown and hidden event after body class toggled

Files changed:
M CHANGES.rst
M mockup/patterns/modal/pattern.js

diff --git a/CHANGES.rst b/CHANGES.rst
index a39f6a1..627ec9a 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,6 +4,9 @@ Changelog
 2.0.3 (unreleased)
 ------------------
 
+- modal should emit shown and hidden event after body class toggled
+  [vangheem]
+
 - cancel should also clear created bundle or resource
   [vangheem]
 
diff --git a/mockup/patterns/modal/pattern.js b/mockup/patterns/modal/pattern.js
index ffce343..4e00fcc 100644
--- a/mockup/patterns/modal/pattern.js
+++ b/mockup/patterns/modal/pattern.js
@@ -811,8 +811,8 @@ define([
       $(window.parent).on('resize.plone-modal.patterns', function() {
         self.positionModal();
       });
-      self.emit('shown');
       $('body').addClass('plone-modal-open');
+      self.emit('shown');
     },
     hide: function() {
       var self = this;
@@ -837,8 +837,8 @@ define([
         self.initModal();
       }
       $(window.parent).off('resize.plone-modal.patterns');
-      self.emit('hidden');
       $('body').removeClass('plone-modal-open');
+      self.emit('hidden');
     },
     redraw: function(response, options) {
       var self = this;


