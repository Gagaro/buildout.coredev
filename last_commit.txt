Repository: plone.app.portlets


Branch: refs/heads/master
Date: 2015-09-18T12:04:17+02:00
Author: esteele (esteele) <eric@esteele.net>
Commit: https://github.com/plone/plone.app.portlets/commit/ccf256132e2ca62b4020aa0a41fee5d89da081ce

Fix test to use registry for 'root' setting

Files changed:
M plone/app/portlets/tests/test_navigation_portlet.py

diff --git a/plone/app/portlets/tests/test_navigation_portlet.py b/plone/app/portlets/tests/test_navigation_portlet.py
index 6009dd9..255e742 100644
--- a/plone/app/portlets/tests/test_navigation_portlet.py
+++ b/plone/app/portlets/tests/test_navigation_portlet.py
@@ -357,8 +357,8 @@ def testRootDoesNotExist(self):
         self.assertEqual(len(tree['children']), 6)
 
     def testAboveRoot(self):
-        ntp=self.portal.portal_properties.navtree_properties
-        ntp.manage_changeProperties(root='/folder2')
+        registry = getUtility(IRegistry)
+        registry['plone.root'] = u'/folder2'
         view = self.renderer(self.portal)
         tree = view.getNavTree()
         self.assertTrue(tree)


