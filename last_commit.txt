Repository: plone.app.content


Branch: refs/heads/master
Date: 2015-08-11T08:58:48+02:00
Author: Alessandro Pisa (ale-rt) <alessandro.pisa@redturtle.it>
Commit: https://github.com/plone/plone.app.content/commit/46231f7ec0164adc406669493ea73935a2462fa7

Remove a different behaviour on ajax calls

Files changed:
M plone/app/content/browser/actions.py

diff --git a/plone/app/content/browser/actions.py b/plone/app/content/browser/actions.py
index f7375c5..a761ccb 100644
--- a/plone/app/content/browser/actions.py
+++ b/plone/app/content/browser/actions.py
@@ -82,11 +82,7 @@ def handle_delete(self, action):
     @button.buttonAndHandler(
         _(u'label_cancel', default=u'Cancel'), name='Cancel')
     def handle_cancel(self, action):
-        environ = self.request.environ
-        if environ.get('HTTP_X_REQUESTED_WITH') == 'XMLHttpRequest':
-            target = self.context.absolute_url()
-        else:
-            target = self.view_url()
+        target = self.view_url()
         return self.request.response.redirect(target)
 
 


Repository: plone.app.content


Branch: refs/heads/master
Date: 2015-08-11T07:51:54-05:00
Author: Nathan Van Gheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/plone.app.content/commit/6bf36e9fe49eb2167bb2bcedcf1b841e99cccd0c

Merge pull request #49 from plone/38-unique-behavior

Remove a different behaviour on ajax calls

Files changed:
M plone/app/content/browser/actions.py

diff --git a/plone/app/content/browser/actions.py b/plone/app/content/browser/actions.py
index f7375c5..a761ccb 100644
--- a/plone/app/content/browser/actions.py
+++ b/plone/app/content/browser/actions.py
@@ -82,11 +82,7 @@ def handle_delete(self, action):
     @button.buttonAndHandler(
         _(u'label_cancel', default=u'Cancel'), name='Cancel')
     def handle_cancel(self, action):
-        environ = self.request.environ
-        if environ.get('HTTP_X_REQUESTED_WITH') == 'XMLHttpRequest':
-            target = self.context.absolute_url()
-        else:
-            target = self.view_url()
+        target = self.view_url()
         return self.request.response.redirect(target)
 
 


