Repository: plone.theme
Branch: refs/heads/master
Date: 2015-04-20T23:44:47+02:00
Author: Tom Gross (tomgross) <itconsense@gmail.com>
Commit: https://github.com/plone/plone.theme/commit/8c71c6ebc8208eabaf7d5543dd6bb61be0802508

remove CMFDefault dependency

Files changed:
M plone/theme/interfaces.py
M plone/theme/layer.py
M plone/theme/tests/testBrowserLayerPrecedence.py
M setup.py

diff --git a/plone/theme/interfaces.py b/plone/theme/interfaces.py
index a91f378..359f8ee 100644
--- a/plone/theme/interfaces.py
+++ b/plone/theme/interfaces.py
@@ -1,7 +1,4 @@
-try:
-    from Products.CMFDefault.interfaces import ICMFDefaultSkin as IDefaultBrowserLayer
-except ImportError:
-    from zope.publisher.interfaces.browser import IDefaultBrowserLayer
+from zope.publisher.interfaces.browser import IDefaultBrowserLayer
 
 
 class IDefaultPloneLayer(IDefaultBrowserLayer):
diff --git a/plone/theme/layer.py b/plone/theme/layer.py
index 362a21d..2451c5c 100644
--- a/plone/theme/layer.py
+++ b/plone/theme/layer.py
@@ -12,13 +12,6 @@
     IDefaultBrowserLayer,
     ]
 
-try:
-    from Products.CMFDefault.interfaces import ICMFDefaultSkin
-except ImportError:
-    pass
-else:
-    default_layers.append(ICMFDefaultSkin)
-
 
 def mark_layer(site, event):
     """Mark the request with a layer corresponding to the current skin,
diff --git a/plone/theme/tests/testBrowserLayerPrecedence.py b/plone/theme/tests/testBrowserLayerPrecedence.py
index 73e4ac7..0ce5207 100644
--- a/plone/theme/tests/testBrowserLayerPrecedence.py
+++ b/plone/theme/tests/testBrowserLayerPrecedence.py
@@ -70,7 +70,7 @@ def testLayerPrecedence(self):
         if self.theme_layer is not None:
             self.assertEqual(theme_layer_pos, 0)
             self.assertTrue(theme_layer_pos < additive_layer_pos)
-            # for BBB, IDefaultPloneLayer and ICMFDefaultSkin are not present
+            # for BBB, IDefaultPloneLayer is not present
             # unless there are theme layers which extend them.
             self.assertTrue(additive_layer_pos < plone_default_pos)
         self.assertTrue(additive_layer_pos < zope_default_pos)
diff --git a/setup.py b/setup.py
index 2a1f9c7..0284bf3 100644
--- a/setup.py
+++ b/setup.py
@@ -24,10 +24,12 @@ def read(*rnames):
       classifiers=[
           "Environment :: Web Environment",
           "Framework :: Plone",
+          "Framework :: Plone :: 5.0",
           "Framework :: Zope2",
           "License :: OSI Approved :: GNU General Public License (GPL)",
           "Operating System :: OS Independent",
           "Programming Language :: Python",
+          "Programming Language :: Python :: 2.7",
       ],
       keywords='',
       author='Plone Foundation',


Repository: plone.theme
Branch: refs/heads/master
Date: 2015-04-20T23:44:47+02:00
Author: Tom Gross (tomgross) <itconsense@gmail.com>
Commit: https://github.com/plone/plone.theme/commit/78b8a97508eed5de1cc9705b773e0774ea503706

added Changelog

Files changed:
M CHANGES.rst

diff --git a/CHANGES.rst b/CHANGES.rst
index 94eb18c..ec8a6cb 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,7 +4,8 @@ Changelog
 2.1.4 (unreleased)
 ------------------
 
-- Nothing changed yet.
+- Remove dependency on CMFDefault
+  [tomgross]
 
 2.1.3 (2015-03-27)
 ------------------


Repository: plone.theme
Branch: refs/heads/master
Date: 2015-04-21T08:48:34+02:00
Author: Timo Stollenwerk (tisto) <tisto@plone.org>
Commit: https://github.com/plone/plone.theme/commit/69b26e9948857ed3bdd144c258af44836b6d27db

Merge pull request #3 from plone/tomgross-nocmfdefault

Remove dependency on CMFDefault

Files changed:
M CHANGES.rst
M plone/theme/interfaces.py
M plone/theme/layer.py
M plone/theme/tests/testBrowserLayerPrecedence.py
M setup.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 94eb18c..ec8a6cb 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,7 +4,8 @@ Changelog
 2.1.4 (unreleased)
 ------------------
 
-- Nothing changed yet.
+- Remove dependency on CMFDefault
+  [tomgross]
 
 2.1.3 (2015-03-27)
 ------------------
diff --git a/plone/theme/interfaces.py b/plone/theme/interfaces.py
index a91f378..359f8ee 100644
--- a/plone/theme/interfaces.py
+++ b/plone/theme/interfaces.py
@@ -1,7 +1,4 @@
-try:
-    from Products.CMFDefault.interfaces import ICMFDefaultSkin as IDefaultBrowserLayer
-except ImportError:
-    from zope.publisher.interfaces.browser import IDefaultBrowserLayer
+from zope.publisher.interfaces.browser import IDefaultBrowserLayer
 
 
 class IDefaultPloneLayer(IDefaultBrowserLayer):
diff --git a/plone/theme/layer.py b/plone/theme/layer.py
index 362a21d..2451c5c 100644
--- a/plone/theme/layer.py
+++ b/plone/theme/layer.py
@@ -12,13 +12,6 @@
     IDefaultBrowserLayer,
     ]
 
-try:
-    from Products.CMFDefault.interfaces import ICMFDefaultSkin
-except ImportError:
-    pass
-else:
-    default_layers.append(ICMFDefaultSkin)
-
 
 def mark_layer(site, event):
     """Mark the request with a layer corresponding to the current skin,
diff --git a/plone/theme/tests/testBrowserLayerPrecedence.py b/plone/theme/tests/testBrowserLayerPrecedence.py
index 73e4ac7..0ce5207 100644
--- a/plone/theme/tests/testBrowserLayerPrecedence.py
+++ b/plone/theme/tests/testBrowserLayerPrecedence.py
@@ -70,7 +70,7 @@ def testLayerPrecedence(self):
         if self.theme_layer is not None:
             self.assertEqual(theme_layer_pos, 0)
             self.assertTrue(theme_layer_pos < additive_layer_pos)
-            # for BBB, IDefaultPloneLayer and ICMFDefaultSkin are not present
+            # for BBB, IDefaultPloneLayer is not present
             # unless there are theme layers which extend them.
             self.assertTrue(additive_layer_pos < plone_default_pos)
         self.assertTrue(additive_layer_pos < zope_default_pos)
diff --git a/setup.py b/setup.py
index 2a1f9c7..0284bf3 100644
--- a/setup.py
+++ b/setup.py
@@ -24,10 +24,12 @@ def read(*rnames):
       classifiers=[
           "Environment :: Web Environment",
           "Framework :: Plone",
+          "Framework :: Plone :: 5.0",
           "Framework :: Zope2",
           "License :: OSI Approved :: GNU General Public License (GPL)",
           "Operating System :: OS Independent",
           "Programming Language :: Python",
+          "Programming Language :: Python :: 2.7",
       ],
       keywords='',
       author='Plone Foundation',


