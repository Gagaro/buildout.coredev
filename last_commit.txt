Repository: plone.app.portlets


Branch: refs/heads/master
Date: 2015-09-17T14:21:44-07:00
Author: Fulvio Casali (fulv) <fulviocasali@gmail.com>
Commit: https://github.com/plone/plone.app.portlets/commit/a8330f22a21dc8d4f0f1eb6a567b10cf1b057114

Fix for plone/Products.CMFPlone#1019.

Files changed:
M plone/app/portlets/portlets/navigation.py

diff --git a/plone/app/portlets/portlets/navigation.py b/plone/app/portlets/portlets/navigation.py
index 04abfc7..d6cd8f4 100644
--- a/plone/app/portlets/portlets/navigation.py
+++ b/plone/app/portlets/portlets/navigation.py
@@ -1,6 +1,6 @@
 from Acquisition import aq_inner, aq_base, aq_parent
 from ComputedAttribute import ComputedAttribute
-from plone.app.layout.navigation.defaultpage import isDefaultPage
+from Products.CMFPlone.defaultpage import check_default_page_via_view
 from plone.app.layout.navigation.interfaces import INavigationQueryBuilder
 from plone.app.layout.navigation.interfaces import INavigationRoot
 from plone.app.layout.navigation.interfaces import INavtreeStrategy
@@ -214,7 +214,7 @@ def root_item_class(self):
         container = aq_parent(context)
         if (aq_base(root) is aq_base(context) or
                 (aq_base(root) is aq_base(container) and
-                isDefaultPage(container, context))):
+                check_default_page_via_view(container, context))):
             return 'navTreeCurrentItem'
         return ''
 


Repository: plone.app.portlets


Branch: refs/heads/master
Date: 2015-09-17T14:22:42-07:00
Author: Fulvio Casali (fulv) <fulviocasali@gmail.com>
Commit: https://github.com/plone/plone.app.portlets/commit/f531a87e644450be8cac4ed27eea68bc6276706f

Add changelog entry.

Files changed:
M CHANGES.rst

diff --git a/CHANGES.rst b/CHANGES.rst
index d20f9ec..ca12fe4 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -6,6 +6,8 @@ Changelog
 
 - Prevent values lower than 1 in number of items.
   [pbauer]
+- Resolve deprecation warning for isDefaultFolder.
+  [fulv]
 
 
 3.1 (2015-09-14)


Repository: plone.app.portlets


Branch: refs/heads/master
Date: 2015-09-17T23:29:04+02:00
Author: Johannes Raggam (thet) <raggam-nl@adm.at>
Commit: https://github.com/plone/plone.app.portlets/commit/314b716ecbd64bb26bf4aeebaa04e0a0a128605c

Update CHANGES.rst

Files changed:
M CHANGES.rst

diff --git a/CHANGES.rst b/CHANGES.rst
index ca12fe4..e4c6539 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -6,7 +6,8 @@ Changelog
 
 - Prevent values lower than 1 in number of items.
   [pbauer]
-- Resolve deprecation warning for isDefaultFolder.
+
+- Resolve deprecation warning for isDefaultPage.
   [fulv]
 
 


Repository: plone.app.portlets


Branch: refs/heads/master
Date: 2015-09-18T18:39:56+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.portlets/commit/a1dc506c263a65486a1dfb6fb18cecebad76342f

Merge pull request #56 from plone/fulv-plone5

Fixes plone/Products.CMFPlone#1019

Files changed:
M CHANGES.rst
M plone/app/portlets/portlets/navigation.py

diff --git a/CHANGES.rst b/CHANGES.rst
index d20f9ec..e4c6539 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -7,6 +7,9 @@ Changelog
 - Prevent values lower than 1 in number of items.
   [pbauer]
 
+- Resolve deprecation warning for isDefaultPage.
+  [fulv]
+
 
 3.1 (2015-09-14)
 ----------------
diff --git a/plone/app/portlets/portlets/navigation.py b/plone/app/portlets/portlets/navigation.py
index 50c1b51..b40452f 100644
--- a/plone/app/portlets/portlets/navigation.py
+++ b/plone/app/portlets/portlets/navigation.py
@@ -1,6 +1,6 @@
 from Acquisition import aq_inner, aq_base, aq_parent
 from ComputedAttribute import ComputedAttribute
-from plone.app.layout.navigation.defaultpage import isDefaultPage
+from Products.CMFPlone.defaultpage import check_default_page_via_view
 from plone.app.layout.navigation.interfaces import INavigationQueryBuilder
 from plone.app.layout.navigation.interfaces import INavigationRoot
 from plone.app.layout.navigation.interfaces import INavtreeStrategy
@@ -214,7 +214,7 @@ def root_item_class(self):
         container = aq_parent(context)
         if (aq_base(root) is aq_base(context) or
                 (aq_base(root) is aq_base(container) and
-                isDefaultPage(container, context))):
+                check_default_page_via_view(container, context))):
             return 'navTreeCurrentItem'
         return ''
 


