Repository: Products.PlonePAS
Branch: refs/heads/master
Date: 2015-05-13T14:00:43+02:00
Author: Eric BREHAULT (ebrehault) <ebrehault@gmail.com>
Commit: https://github.com/plone/Products.PlonePAS/commit/74d1c8c0f1bbc0ff4832691e10424c87d0c36917

allow to set a property to None

Files changed:
M src/Products/PlonePAS/tools/memberdata.py

diff --git a/src/Products/PlonePAS/tools/memberdata.py b/src/Products/PlonePAS/tools/memberdata.py
index 6d62f45..2b4bc6b 100644
--- a/src/Products/PlonePAS/tools/memberdata.py
+++ b/src/Products/PlonePAS/tools/memberdata.py
@@ -245,7 +245,7 @@ class MemberData(BaseMemberData):
 
     # setProperties uses setMemberProperties. no need to override.
 
-    def setMemberProperties(self, mapping, force_local=0):
+    def setMemberProperties(self, mapping, force_local=0, force_empty=False):
         """PAS-specific method to set the properties of a
         member. Ignores 'force_local', which is not reliably present.
         """
@@ -273,7 +273,7 @@ def setMemberProperties(self, mapping, force_local=0):
         # property routing?
         modified = False
         for k, v in mapping.items():
-            if v is None:
+            if v is None and not force_empty:
                 continue
             for sheet in sheets:
                 if not sheet.hasProperty(k):


