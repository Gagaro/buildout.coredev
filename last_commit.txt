Repository: plone.schemaeditor
Branch: refs/heads/master
Date: 2015-05-13T00:00:51+02:00
Author: Eric BREHAULT (ebrehault) <ebrehault@gmail.com>
Commit: https://github.com/plone/plone.schemaeditor/commit/fd5be8aea09e88a5103f4ab90713953fe458afbe

allow to hide 'Save defaults' button

Files changed:
M plone/schemaeditor/browser/schema/listing.py

diff --git a/plone/schemaeditor/browser/schema/listing.py b/plone/schemaeditor/browser/schema/listing.py
index f54a7d8..1b2b349 100644
--- a/plone/schemaeditor/browser/schema/listing.py
+++ b/plone/schemaeditor/browser/schema/listing.py
@@ -80,7 +80,10 @@ def delete_url(self, field):
         url = addTokenToUrl(url, self.request)
         return url
 
-    @button.buttonAndHandler(_(u'Save Defaults'))
+    @button.buttonAndHandler(
+        _(u'Save Defaults'),
+        condition=lambda form: getattr(form.context, 'showSaveDefaults', True)
+    )
     def handleSaveDefaults(self, action):
         # ignore fields from behaviors by setting their widgets' modes
         # to the display mode while we extract the form values (hack!)


