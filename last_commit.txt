Repository: plone.app.openid
Branch: refs/heads/master
Date: 2015-03-06T07:13:47+01:00
Author: Tom Gross (tomgross) <itconsense@gmail.com>
Commit: https://github.com/plone/plone.app.openid/commit/ff322b0120a5db4a31d61372ff86903fd969a4bc

simplify plugin creation

This hopefully fixes the p.a.testing merge of p.openid

Files changed:
M plone/app/openid/setuphandlers.py

diff --git a/plone/app/openid/setuphandlers.py b/plone/app/openid/setuphandlers.py
index 7713a2b..2f13e8c 100644
--- a/plone/app/openid/setuphandlers.py
+++ b/plone/app/openid/setuphandlers.py
@@ -3,6 +3,7 @@
 from StringIO import StringIO
 from plone.portlets.interfaces import IPortletAssignmentMapping
 from plone.portlets.interfaces import IPortletManager
+from plone.openid.plugins.oid import addOpenIdPlugin
 from plone.app.openid.portlets.login import Assignment as LoginAssignment
 from Products.CMFCore.utils import getToolByName
 from Products.PlonePAS.browser.info import PASInfoView
@@ -15,9 +16,8 @@ def hasOpenIdPlugin(portal):
 
 def createOpenIdPlugin(portal, out):
     print >>out, "Adding an OpenId plugin"
-    acl=getToolByName(portal, "acl_users")
-    acl.manage_addProduct["plone.openid"].addOpenIdPlugin(
-            id="openid", title="OpenId authentication plugin")
+    acl = getToolByName(portal, "acl_users")
+    addOpenIdPlugin(acl, id="openid", title="OpenId authentication plugin")
 
 
 def activatePlugin(portal, out, plugin):


Repository: plone.app.openid
Branch: refs/heads/master
Date: 2015-03-06T10:04:08+01:00
Author: Timo Stollenwerk (tisto) <tisto@plone.org>
Commit: https://github.com/plone/plone.app.openid/commit/689fa3decf0ac324ce42738b250b5085f8ab47ee

Merge pull request #5 from plone/tomgross-patch-1

simplify plugin creation

Files changed:
M plone/app/openid/setuphandlers.py

diff --git a/plone/app/openid/setuphandlers.py b/plone/app/openid/setuphandlers.py
index 7713a2b..2f13e8c 100644
--- a/plone/app/openid/setuphandlers.py
+++ b/plone/app/openid/setuphandlers.py
@@ -3,6 +3,7 @@
 from StringIO import StringIO
 from plone.portlets.interfaces import IPortletAssignmentMapping
 from plone.portlets.interfaces import IPortletManager
+from plone.openid.plugins.oid import addOpenIdPlugin
 from plone.app.openid.portlets.login import Assignment as LoginAssignment
 from Products.CMFCore.utils import getToolByName
 from Products.PlonePAS.browser.info import PASInfoView
@@ -15,9 +16,8 @@ def hasOpenIdPlugin(portal):
 
 def createOpenIdPlugin(portal, out):
     print >>out, "Adding an OpenId plugin"
-    acl=getToolByName(portal, "acl_users")
-    acl.manage_addProduct["plone.openid"].addOpenIdPlugin(
-            id="openid", title="OpenId authentication plugin")
+    acl = getToolByName(portal, "acl_users")
+    addOpenIdPlugin(acl, id="openid", title="OpenId authentication plugin")
 
 
 def activatePlugin(portal, out, plugin):


