Repository: plone.app.theming


Branch: refs/heads/1.1.x
Date: 2015-07-14T14:50:21-04:00
Author: Sune Broendum Woeller (sunew) <sune@woeller.dk>
Commit: https://github.com/plone/plone.app.theming/commit/472b83883b23a35d4d4ff802ab6f5d350d131d56

fix AttributeError: 'NoneType' object has no attribute 'getroottree' when the result is not html / is empty.

Files changed:
M src/plone/app/theming/transform.py

diff --git a/src/plone/app/theming/transform.py b/src/plone/app/theming/transform.py
index 7cbab40..2667e98 100644
--- a/src/plone/app/theming/transform.py
+++ b/src/plone/app/theming/transform.py
@@ -137,7 +137,7 @@ def parseTree(self, result):
 
         try:
             return getHTMLSerializer(result, pretty_print=False)
-        except (TypeError, etree.ParseError):
+        except (AttributeError, TypeError, etree.ParseError):
             return None
 
     def transformString(self, result, encoding):


Repository: plone.app.theming


Branch: refs/heads/1.1.x
Date: 2015-07-14T14:52:24-04:00
Author: Sune Broendum Woeller (sunew) <sune@woeller.dk>
Commit: https://github.com/plone/plone.app.theming/commit/965424a2891ef188370e8f691b7a9ac2fb9d7b6f

changelog

# Conflicts:
#	docs/HISTORY.txt

Files changed:
M docs/HISTORY.txt

diff --git a/docs/HISTORY.txt b/docs/HISTORY.txt
index 3e10692..710f3dd 100644
--- a/docs/HISTORY.txt
+++ b/docs/HISTORY.txt
@@ -4,8 +4,9 @@ Changelog
 1.1.7 (unreleased)
 ------------------
 
-- Nothing changed yet.
-
+- Fix AttributeError: 'NoneType' object has no attribute 'getroottree' when the result is not
+  html / is empty.
+  [sunew]
 
 1.1.6 (2015-05-04)
 ------------------


