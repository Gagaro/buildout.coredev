Repository: plone.app.portlets


Branch: refs/heads/master
Date: 2015-09-18T13:27:04-07:00
Author: Fulvio Casali (fulv) <fulviocasali@gmail.com>
Commit: https://github.com/plone/plone.app.portlets/commit/6a2ba84766ed942b344fa787c2cd5031d49c6aac

Better resolution of deprecation warning for isDefaultPage.

Files changed:
M plone/app/portlets/portlets/navigation.py

diff --git a/plone/app/portlets/portlets/navigation.py b/plone/app/portlets/portlets/navigation.py
index b40452f..93ef70d 100644
--- a/plone/app/portlets/portlets/navigation.py
+++ b/plone/app/portlets/portlets/navigation.py
@@ -1,6 +1,5 @@
 from Acquisition import aq_inner, aq_base, aq_parent
 from ComputedAttribute import ComputedAttribute
-from Products.CMFPlone.defaultpage import check_default_page_via_view
 from plone.app.layout.navigation.interfaces import INavigationQueryBuilder
 from plone.app.layout.navigation.interfaces import INavigationRoot
 from plone.app.layout.navigation.interfaces import INavtreeStrategy
@@ -20,6 +19,7 @@
 from Products.CMFDynamicViewFTI.interfaces import IBrowserDefault
 from Products.CMFPlone import utils
 from Products.CMFPlone.browser.navtree import SitemapNavtreeStrategy
+from Products.CMFPlone.defaultpage import is_default_page
 from Products.CMFPlone.interfaces import INavigationSchema
 from Products.CMFPlone.interfaces import INonStructuralFolder
 from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile
@@ -214,7 +214,7 @@ def root_item_class(self):
         container = aq_parent(context)
         if (aq_base(root) is aq_base(context) or
                 (aq_base(root) is aq_base(container) and
-                check_default_page_via_view(container, context))):
+                is_default_page(container, context))):
             return 'navTreeCurrentItem'
         return ''
 


Repository: plone.app.portlets


Branch: refs/heads/master
Date: 2015-09-21T23:50:10+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.portlets/commit/40c861324ecddf0f864e70b144c5f52a1f1b5f10

Merge pull request #57 from plone/fulv-patch

Better resolution of deprecation warning for isDefaultPage.

Files changed:
M plone/app/portlets/portlets/navigation.py

diff --git a/plone/app/portlets/portlets/navigation.py b/plone/app/portlets/portlets/navigation.py
index f5dab2e..1a98023 100644
--- a/plone/app/portlets/portlets/navigation.py
+++ b/plone/app/portlets/portlets/navigation.py
@@ -1,6 +1,5 @@
 from Acquisition import aq_inner, aq_base, aq_parent
 from ComputedAttribute import ComputedAttribute
-from Products.CMFPlone.defaultpage import check_default_page_via_view
 from plone.app.layout.navigation.interfaces import INavigationQueryBuilder
 from plone.app.layout.navigation.interfaces import INavigationRoot
 from plone.app.layout.navigation.interfaces import INavtreeStrategy
@@ -20,6 +19,7 @@
 from Products.CMFDynamicViewFTI.interfaces import IBrowserDefault
 from Products.CMFPlone import utils
 from Products.CMFPlone.browser.navtree import SitemapNavtreeStrategy
+from Products.CMFPlone.defaultpage import is_default_page
 from Products.CMFPlone.interfaces import INavigationSchema
 from Products.CMFPlone.interfaces import INonStructuralFolder
 from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile
@@ -213,7 +213,7 @@ def root_item_class(self):
         container = aq_parent(context)
         if (aq_base(root) is aq_base(context) or
                 (aq_base(root) is aq_base(container) and
-                check_default_page_via_view(container, context))):
+                is_default_page(container, context))):
             return 'navTreeCurrentItem'
         return ''
 


