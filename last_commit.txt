Repository: Products.CMFPlone
Branch: refs/heads/master
Date: 2015-04-06T18:28:56-04:00
Author: David Glick (davisagli) <david@glicksoftware.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/e9a964dc9f02e7c64c1dff69bc6e489bcd9c8491

fix jquery error with collective.js.jqueryui in Plone 5

Files changed:
M CHANGES.rst
M Products/CMFPlone/browser/templates/main_template.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index 785757e..9d4b2ab 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -8,6 +8,11 @@ Changelog
 5.0b2 (unreleased)
 ------------------
 
+- Move `plone.htmlhead.links` viewlet manager after `plone.scripts`,
+  because the former is sometimes used to include scripts that depend on
+  the latter.
+  [davisagli]
+
 - Upgrade mockup-core and patternslib bower dependencies to fix bower install issue
   [vangheem]
 
diff --git a/Products/CMFPlone/browser/templates/main_template.pt b/Products/CMFPlone/browser/templates/main_template.pt
index fd6d4cd..6c953ee 100644
--- a/Products/CMFPlone/browser/templates/main_template.pt
+++ b/Products/CMFPlone/browser/templates/main_template.pt
@@ -26,7 +26,6 @@
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 
     <div tal:replace="structure provider:plone.htmlhead" />
-    <link tal:replace="structure provider:plone.htmlhead.links" />
 
     <tal:comment replace="nothing">
         Various slots where you can insert elements in the header from a template.
@@ -38,6 +37,7 @@
     <div tal:replace="structure provider:plone.scripts" />
     <metal:javascriptslot define-slot="javascript_head_slot" />
 
+    <link tal:replace="structure provider:plone.htmlhead.links" />
     <meta name="generator" content="Plone - http://plone.org" />
 
   </head>


