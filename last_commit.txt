Repository: plone.app.event
Branch: refs/heads/master
Date: 2015-02-16T22:34:47+01:00
Author: Gil Forcada (gforcada) <gforcada@gnome.org>
Commit: https://github.com/plone/plone.app.event/commit/a17c9e1178303639893a95141b468a73a654b5f5

Check for distribution

Plone's styleguide recommends not to check if a module can be imported
but that the distribution can be found instead.

Files changed:
M plone/app/event/dx/behaviors.py

diff --git a/plone/app/event/dx/behaviors.py b/plone/app/event/dx/behaviors.py
index 61838c8..0d4819d 100644
--- a/plone/app/event/dx/behaviors.py
+++ b/plone/app/event/dx/behaviors.py
@@ -42,10 +42,13 @@
 # TODO: altern., for backwards compat., we could import from plone.z3cform
 from z3c.form.browser.textlines import TextLinesFieldWidget
 
+import pkg_resources
+
 try:
     # Plone 5
+    pkg_resources.get_distribution('plone.app.z3cform')
     from plone.app.z3cform.widget import DatetimeWidget
-except ImportError:
+except pkg_resources.DistributionNotFound:
     from plone.app.widgets.dx import DatetimeWidget
 
 


