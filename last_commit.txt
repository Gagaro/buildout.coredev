Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2015-09-08T10:26:10+02:00
Author: Gagaro (Gagaro) <gagaro42@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/2a60c6843ce936d8ed172d7979c6104be33b07c3

fix: allow access to the site if content_css is None

Files changed:
M CHANGES.rst
M Products/CMFPlone/patterns/__init__.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 97bad0a..ab9ec3f 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -39,6 +39,8 @@ Changelog
   plone.app.linkintegrity's variant
   [vangheem]
 
+- Fix error to allow site navigation if TinyMCE content_css setting is None
+  [Gagaro]
 
 5.0b4 (2015-08-23)
 ------------------
diff --git a/Products/CMFPlone/patterns/__init__.py b/Products/CMFPlone/patterns/__init__.py
index 2f7f79f..6de08f9 100644
--- a/Products/CMFPlone/patterns/__init__.py
+++ b/Products/CMFPlone/patterns/__init__.py
@@ -34,7 +34,8 @@ def get_content_css(self):
             '%s/++plone++static/plone-compiled.css' % self.portal_url,
             '%s/++plone++static/tinymce-styles.css' % self.portal_url
         ]
-        for url in self.settings.content_css:
+        content_css = self.settings.content_css or []
+        for url in content_css:
             files.append('%s/%s' % (self.portal_url, url))
         theme = self.get_theme()
         if (theme and hasattr(theme, 'tinymce_content_css') and


Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2015-09-08T11:44:58+02:00
Author: Eric BREHAULT (ebrehault) <ebrehault@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/3e3273b49c132bb7323d0e3566241fa47d940eac

Merge pull request #878 from plone/fix_tinymce_none_content_css

Do not break the site if content_css is None

Files changed:
M CHANGES.rst
M Products/CMFPlone/patterns/__init__.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 97bad0a..ab9ec3f 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -39,6 +39,8 @@ Changelog
   plone.app.linkintegrity's variant
   [vangheem]
 
+- Fix error to allow site navigation if TinyMCE content_css setting is None
+  [Gagaro]
 
 5.0b4 (2015-08-23)
 ------------------
diff --git a/Products/CMFPlone/patterns/__init__.py b/Products/CMFPlone/patterns/__init__.py
index 2f7f79f..6de08f9 100644
--- a/Products/CMFPlone/patterns/__init__.py
+++ b/Products/CMFPlone/patterns/__init__.py
@@ -34,7 +34,8 @@ def get_content_css(self):
             '%s/++plone++static/plone-compiled.css' % self.portal_url,
             '%s/++plone++static/tinymce-styles.css' % self.portal_url
         ]
-        for url in self.settings.content_css:
+        content_css = self.settings.content_css or []
+        for url in content_css:
             files.append('%s/%s' % (self.portal_url, url))
         theme = self.get_theme()
         if (theme and hasattr(theme, 'tinymce_content_css') and


