Repository: plone.app.iterate


Branch: refs/heads/2.1.x
Date: 2015-08-20T16:12:53+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.iterate/commit/2fa5c53b5290b8f2deabdc28f339ad6ca19103f3

Fix tests to work with auto csrf and latest plone.protect.

This is from the 2.1.13 release on PyPI that somehow never made it to
the github repository.

Files changed:
M CHANGES.txt
M plone/app/iterate/tests/browser.txt
M setup.py

diff --git a/CHANGES.txt b/CHANGES.txt
index 3e520d4..0dfb547 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -1,10 +1,14 @@
 Changelog
 =========
 
-2.1.13 (unreleased)
+2.1.13 (2014-04-16)
 -------------------
 
-- Nothing changed yet.
+- Fix tests to work with auto csrf.
+  [vangheem]
+
+- Fix tests for latest plone.protect.
+  [vangheem]
 
 
 2.1.12 (2014-02-19)
@@ -17,6 +21,7 @@ Changelog
 - Replaced the "Locked" label with "Warning"
   [rristow]
 
+
 2.1.11 (2014-01-27)
 -------------------
 
diff --git a/plone/app/iterate/tests/browser.txt b/plone/app/iterate/tests/browser.txt
index fca26b6..5b0a650 100644
--- a/plone/app/iterate/tests/browser.txt
+++ b/plone/app/iterate/tests/browser.txt
@@ -39,7 +39,7 @@ Check it out
 Let's check out the document.  For this, we'll go to the *Check out*
 form directly.  From there, we'll check out to the parent folder:
 
-  >>> browser.open(browser.url + '/@@content-checkout')
+  >>> browser.getLink('Check out').click()
   >>> 'This is a working copy' in browser.contents
   True
   >>> browser.url
@@ -54,20 +54,21 @@ someone's working on a working copy:
 
 We'll now edit the working copy and save it:
 
-  >>> browser.open('http://nohost/plone/copy_of_hello-world/edit')
+  >>> browser.open('http://nohost/plone/copy_of_hello-world')
+  >>> browser.getLink('Edit').click()
   >>> browser.getControl('Title').value = 'Hello, World! version 2.0'
   >>> browser.getControl('Save').click()
   >>> 'Changes saved.' in browser.contents
   True
-  >>> browser.url
-  'http://nohost/plone/copy_of_hello-world'
+  >>> 'http://nohost/plone/copy_of_hello-world' in browser.url
+  True
 
 Check it in
 -----------
 
 Now that we've made our changes we'll check the working copy in:
 
-  >>> browser.open(browser.url + '/@@content-checkin')
+  >>> browser.getLink('Check in').click()
   >>> browser.getControl('Check in').click()
   >>> 'Checked in' in browser.contents
   True
@@ -167,7 +168,7 @@ Add an item to the folder.
 Check out the folder.
 
   >>> browser.getLink('Foo Folder').click()
-  >>> browser.open(browser.url + '/@@content-checkout')
+  >>> browser.getLink('Check out').click()
   >>> 'This is a working copy' in browser.contents
   True
   >>> wc_url = browser.url
@@ -302,4 +303,4 @@ http://code.google.com/p/dexterity/issues/detail?id=258
   >>> browser.getLink(id='plone-contentmenu-actions-delete')
   <Link text='Delete' ...>
   
-  
\ No newline at end of file
+  
diff --git a/setup.py b/setup.py
index dc75fe7..3b47875 100644
--- a/setup.py
+++ b/setup.py
@@ -1,6 +1,6 @@
 from setuptools import setup, find_packages
 
-version = '2.1.13.dev0'
+version = '2.1.13'
 
 setup(name='plone.app.iterate',
       version=version,


Repository: plone.app.iterate


Branch: refs/heads/2.1.x
Date: 2015-08-20T16:16:51+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.iterate/commit/0b6ae86c019f933256fba129675d414d87d9e76b

Back to development: 2.1.14

[ci skip]

Files changed:
M CHANGES.txt
M setup.py

diff --git a/CHANGES.txt b/CHANGES.txt
index 0dfb547..2352242 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -1,6 +1,12 @@
 Changelog
 =========
 
+2.1.14 (unreleased)
+-------------------
+
+- Nothing changed yet.
+
+
 2.1.13 (2014-04-16)
 -------------------
 
diff --git a/setup.py b/setup.py
index 3b47875..7e42631 100644
--- a/setup.py
+++ b/setup.py
@@ -1,6 +1,6 @@
 from setuptools import setup, find_packages
 
-version = '2.1.13'
+version = '2.1.14.dev0'
 
 setup(name='plone.app.iterate',
       version=version,


