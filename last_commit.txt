Repository: Products.TinyMCE


Branch: refs/heads/1.3.x
Date: 2015-11-20T12:23:30+01:00
Author: Godefroid Chapelle (gotcha) <gotcha@bubblenet.be>
Commit: https://github.com/plone/Products.TinyMCE/commit/a0f5469a615b3488b6369a44492081adbed5eb6a

fix `path` expression in `wysiwyg_support`

`plone.app.z3cform` support for `collective.ckeditor` where
`ckeditor_wysiwyg_support` is a view rather than a skin

Files changed:
M HISTORY.rst
M Products/TinyMCE/skins/tinymce/wysiwyg_support.pt

diff --git a/HISTORY.rst b/HISTORY.rst
index 02e24a0..9f8f9f9 100644
--- a/HISTORY.rst
+++ b/HISTORY.rst
@@ -14,6 +14,10 @@ Fixes:
 - Let upload adapter check permissions
   [tschorr]
 
+- fix `path` expression in `wysiwyg_support`;
+  `plone.app.z3cform` support for `collective.ckeditor` where 
+  `ckeditor_wysiwyg_support` is a view rather than a skin
+
 - *add item here*
 
 
diff --git a/Products/TinyMCE/skins/tinymce/wysiwyg_support.pt b/Products/TinyMCE/skins/tinymce/wysiwyg_support.pt
index aa4fa20..d7508a0 100644
--- a/Products/TinyMCE/skins/tinymce/wysiwyg_support.pt
+++ b/Products/TinyMCE/skins/tinymce/wysiwyg_support.pt
@@ -7,7 +7,7 @@
                      default_editor python: context.portal_properties.site_properties.getProperty('default_editor');
                      default_editor python: (default_editor or 'None').lower();
                      editor python: test(member_editor=='', default_editor, member_editor);
-                     support python: editor.lower() == 'none' and path('nocall:here/portal_skins/plone_wysiwyg/wysiwyg_support') or path('nocall:here/%s_wysiwyg_support|here/%s/wysiwyg_support|here/%s_wysiwyg_support|here/%s/wysiwyg_support|here/portal_skins/plone_wysiwyg/wysiwyg_support' % (editor, editor, default_editor, default_editor));">
+                     support python: editor.lower() == 'none' and path('nocall:here/portal_skins/plone_wysiwyg/wysiwyg_support') or path('nocall:here/@@%s_wysiwyg_support|here/%s_wysiwyg_support|here/%s/wysiwyg_support|here/@@%s_wysiwyg_support|here/%s_wysiwyg_support|here/%s/wysiwyg_support|here/portal_skins/plone_wysiwyg/wysiwyg_support' % (editor, editor, editor, default_editor, default_editor, default_editor));">
    <metal:block metal:use-macro="support/macros/wysiwygEditorBox">
    </metal:block>
   </tal:block>


Repository: Products.TinyMCE


Branch: refs/heads/1.3.x
Date: 2015-11-20T11:31:25Z
Author: Godefroid Chapelle (gotcha) <gotcha@bubblenet.be>
Commit: https://github.com/plone/Products.TinyMCE/commit/65cfd7f79d0d75c42cc203469e4a26da57ec7a60

Merge pull request #124 from plone/fix_traversal

fix `path` expression in `wysiwyg_support`

`plone.app.z3cform` support for `collective.ckeditor` where
`ckeditor_wysiwyg_support` is a view rather than a skin

Files changed:
M HISTORY.rst
M Products/TinyMCE/skins/tinymce/wysiwyg_support.pt

diff --git a/HISTORY.rst b/HISTORY.rst
index 02e24a0..9f8f9f9 100644
--- a/HISTORY.rst
+++ b/HISTORY.rst
@@ -14,6 +14,10 @@ Fixes:
 - Let upload adapter check permissions
   [tschorr]
 
+- fix `path` expression in `wysiwyg_support`;
+  `plone.app.z3cform` support for `collective.ckeditor` where 
+  `ckeditor_wysiwyg_support` is a view rather than a skin
+
 - *add item here*
 
 
diff --git a/Products/TinyMCE/skins/tinymce/wysiwyg_support.pt b/Products/TinyMCE/skins/tinymce/wysiwyg_support.pt
index aa4fa20..d7508a0 100644
--- a/Products/TinyMCE/skins/tinymce/wysiwyg_support.pt
+++ b/Products/TinyMCE/skins/tinymce/wysiwyg_support.pt
@@ -7,7 +7,7 @@
                      default_editor python: context.portal_properties.site_properties.getProperty('default_editor');
                      default_editor python: (default_editor or 'None').lower();
                      editor python: test(member_editor=='', default_editor, member_editor);
-                     support python: editor.lower() == 'none' and path('nocall:here/portal_skins/plone_wysiwyg/wysiwyg_support') or path('nocall:here/%s_wysiwyg_support|here/%s/wysiwyg_support|here/%s_wysiwyg_support|here/%s/wysiwyg_support|here/portal_skins/plone_wysiwyg/wysiwyg_support' % (editor, editor, default_editor, default_editor));">
+                     support python: editor.lower() == 'none' and path('nocall:here/portal_skins/plone_wysiwyg/wysiwyg_support') or path('nocall:here/@@%s_wysiwyg_support|here/%s_wysiwyg_support|here/%s/wysiwyg_support|here/@@%s_wysiwyg_support|here/%s_wysiwyg_support|here/%s/wysiwyg_support|here/portal_skins/plone_wysiwyg/wysiwyg_support' % (editor, editor, editor, default_editor, default_editor, default_editor));">
    <metal:block metal:use-macro="support/macros/wysiwygEditorBox">
    </metal:block>
   </tal:block>


