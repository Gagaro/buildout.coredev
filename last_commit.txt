Repository: plone.app.users
Branch: refs/heads/master
Date: 2015-01-26T19:54:27+01:00
Author: Jure Cerjak (jcerjak) <jcerjak@termitnjak.si>
Commit: https://github.com/plone/plone.app.users/commit/5f960232173060e93da87faefa9e363301bdda5c

fix doctests, security settings are now properly read from the registry

This reverts some of the changes done in fd8a29812598df320637a03588cf0c7599d2a9e7

See also https://github.com/plone/plone.app.users/pull/22

Files changed:
M plone/app/users/tests/duplicate_email.rst
M plone/app/users/tests/email_login.rst
M plone/app/users/tests/flexible_user_registration.rst

diff --git a/plone/app/users/tests/duplicate_email.rst b/plone/app/users/tests/duplicate_email.rst
index da0e362..91b2ded 100644
--- a/plone/app/users/tests/duplicate_email.rst
+++ b/plone/app/users/tests/duplicate_email.rst
@@ -32,7 +32,7 @@ Login as user two:
     >>> browser.open('http://nohost/plone/')
     >>> browser.getLink('Log in').click()
 
-    >>> browser.getControl('Login Name').value = 'usertwo@example.com'
+    >>> browser.getControl('E-mail').value = 'usertwo@example.com'
     >>> browser.getControl('Password').value = 'secret'
     >>> browser.getControl('Log in').click()
     >>> 'Login failed' in browser.contents
diff --git a/plone/app/users/tests/email_login.rst b/plone/app/users/tests/email_login.rst
index 7766ad3..4b7c649 100644
--- a/plone/app/users/tests/email_login.rst
+++ b/plone/app/users/tests/email_login.rst
@@ -67,10 +67,9 @@ Fill out the form, using an odd email address that should not give problems.
     >>> 'Failed to create your account' in browser.contents
     False
 
-    We can now login.
-    >>> browser.getLink('Log in').click()
-    >>> browser.getControl('Login Name').value = 'bob-jones+test@example.com'
-    >>> browser.getControl('Password').value = 'secret'
+    We can login immediately.
+    >>> 'Click the button to log in immediately.' in browser.contents
+    True
     >>> browser.getControl('Log in').click()
     >>> 'You are now logged in' in browser.contents
     True
@@ -81,9 +80,10 @@ Fill out the form, using an odd email address that should not give problems.
     True
     >>> browser.getLink(url='http://nohost/plone/logout').click()
 
-    We login as manager.
+    We login as manager. The login form now has a different label for
+    the login name.
     >>> browser.open('http://nohost/plone/login_form')
-    >>> browser.getControl('Login Name').value = SITE_OWNER_NAME
+    >>> browser.getControl('E-mail').value = SITE_OWNER_NAME
     >>> browser.getControl('Password').value = SITE_OWNER_PASSWORD
     >>> browser.getControl('Log in').click()
 
diff --git a/plone/app/users/tests/flexible_user_registration.rst b/plone/app/users/tests/flexible_user_registration.rst
index ae58d4a..affef03 100644
--- a/plone/app/users/tests/flexible_user_registration.rst
+++ b/plone/app/users/tests/flexible_user_registration.rst
@@ -147,6 +147,8 @@ Check render register form in 'Use Email As Login' mode.
     >>> browser.getControl('Password').value = 'testpassword'
     >>> browser.getControl('Confirm password').value = 'testpassword'
     >>> browser.getControl('Register').click()
+    >>> browser.contents
+    '...Welcome!...You have been registered...'
 
 Revert email mode.
 


Repository: plone.app.users
Branch: refs/heads/master
Date: 2015-02-27T07:46:59+01:00
Author: Timo Stollenwerk () <contact@timostollenwerk.net>
Commit: https://github.com/plone/plone.app.users/commit/0229de2b76b6e085a10aeb71b7b92207be27c597

Merge branch 'master' into plip10359-security-controlpanel

Files changed:
M MANIFEST.in

diff --git a/MANIFEST.in b/MANIFEST.in
index 233d37d..6acb23e 100644
--- a/MANIFEST.in
+++ b/MANIFEST.in
@@ -1,4 +1,3 @@
-include *.txt
 include *.rst
 
 recursive-include docs *


Repository: plone.app.users
Branch: refs/heads/master
Date: 2015-03-02T18:10:17+01:00
Author: Timo Stollenwerk (tisto) <tisto@plone.org>
Commit: https://github.com/plone/plone.app.users/commit/6473850d083c489462868f9f660101dd697a0269

Merge pull request #31 from plone/plip10359-security-controlpanel

Plip 10359 - Security Control Panel migration

Files changed:
M plone/app/users/tests/duplicate_email.rst
M plone/app/users/tests/email_login.rst
M plone/app/users/tests/flexible_user_registration.rst

diff --git a/plone/app/users/tests/duplicate_email.rst b/plone/app/users/tests/duplicate_email.rst
index da0e362..91b2ded 100644
--- a/plone/app/users/tests/duplicate_email.rst
+++ b/plone/app/users/tests/duplicate_email.rst
@@ -32,7 +32,7 @@ Login as user two:
     >>> browser.open('http://nohost/plone/')
     >>> browser.getLink('Log in').click()
 
-    >>> browser.getControl('Login Name').value = 'usertwo@example.com'
+    >>> browser.getControl('E-mail').value = 'usertwo@example.com'
     >>> browser.getControl('Password').value = 'secret'
     >>> browser.getControl('Log in').click()
     >>> 'Login failed' in browser.contents
diff --git a/plone/app/users/tests/email_login.rst b/plone/app/users/tests/email_login.rst
index 7766ad3..4b7c649 100644
--- a/plone/app/users/tests/email_login.rst
+++ b/plone/app/users/tests/email_login.rst
@@ -67,10 +67,9 @@ Fill out the form, using an odd email address that should not give problems.
     >>> 'Failed to create your account' in browser.contents
     False
 
-    We can now login.
-    >>> browser.getLink('Log in').click()
-    >>> browser.getControl('Login Name').value = 'bob-jones+test@example.com'
-    >>> browser.getControl('Password').value = 'secret'
+    We can login immediately.
+    >>> 'Click the button to log in immediately.' in browser.contents
+    True
     >>> browser.getControl('Log in').click()
     >>> 'You are now logged in' in browser.contents
     True
@@ -81,9 +80,10 @@ Fill out the form, using an odd email address that should not give problems.
     True
     >>> browser.getLink(url='http://nohost/plone/logout').click()
 
-    We login as manager.
+    We login as manager. The login form now has a different label for
+    the login name.
     >>> browser.open('http://nohost/plone/login_form')
-    >>> browser.getControl('Login Name').value = SITE_OWNER_NAME
+    >>> browser.getControl('E-mail').value = SITE_OWNER_NAME
     >>> browser.getControl('Password').value = SITE_OWNER_PASSWORD
     >>> browser.getControl('Log in').click()
 
diff --git a/plone/app/users/tests/flexible_user_registration.rst b/plone/app/users/tests/flexible_user_registration.rst
index ae58d4a..affef03 100644
--- a/plone/app/users/tests/flexible_user_registration.rst
+++ b/plone/app/users/tests/flexible_user_registration.rst
@@ -147,6 +147,8 @@ Check render register form in 'Use Email As Login' mode.
     >>> browser.getControl('Password').value = 'testpassword'
     >>> browser.getControl('Confirm password').value = 'testpassword'
     >>> browser.getControl('Register').click()
+    >>> browser.contents
+    '...Welcome!...You have been registered...'
 
 Revert email mode.
 


