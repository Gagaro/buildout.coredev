Repository: plone.app.blob
Branch: refs/heads/master
Date: 2015-03-03T19:11:25+01:00
Author: Timo Stollenwerk (tisto) <tisto@plone.org>
Commit: https://github.com/plone/plone.app.blob/commit/67d36896a40eb7312b30b99cd7948f87732d4181

Make permission checks more reliable.

Files changed:
M src/plone/app/blob/tests/test_replacements.py

diff --git a/src/plone/app/blob/tests/test_replacements.py b/src/plone/app/blob/tests/test_replacements.py
index 63db750..d8e7210 100644
--- a/src/plone/app/blob/tests/test_replacements.py
+++ b/src/plone/app/blob/tests/test_replacements.py
@@ -19,6 +19,7 @@
 from plone.app.blob.tests.utils import getImage, getData
 from ZODB.blob import SAVEPOINT_SUFFIX
 
+
 def permissionsFor(name, product):
     from Products import meta_types
     for mt in meta_types:
@@ -29,8 +30,8 @@ def permissionsFor(name, product):
 class FileReplacementTests(ReplacementTestCase):
 
     def testAddFilePermission(self):
-        permissions = list(permissionsFor('File', 'plone.app.blob'))
-        self.assertEqual(permissions, ['ATContentTypes: Add File'])
+        permissions = permissionsFor('File', 'plone.app.blob')
+        self.assertTrue('ATContentTypes: Add File' in permissions)
 
     def testCreateFileBlob(self):
         foo = self.folder[self.folder.invokeFactory('File', 'foo')]
@@ -155,8 +156,8 @@ def testBlobPath(self):
 class ImageReplacementTests(ReplacementTestCase):
 
     def testAddImagePermission(self):
-        permissions = list(permissionsFor('Image', 'plone.app.blob'))
-        self.assertEqual(permissions, ['ATContentTypes: Add Image'])
+        permissions = permissionsFor('Image', 'plone.app.blob')
+        self.assertTrue('ATContentTypes: Add Image' in permissions)
 
     def testCreateImageBlob(self):
         gif = getImage()


