Repository: plone.app.content


Branch: refs/heads/master
Date: 2015-10-05T15:24:50+02:00
Author: Gagaro (Gagaro) <gagaro42@gmail.com>
Commit: https://github.com/plone/plone.app.content/commit/d07ede576f639ba0689e65a431cb1ce1da5bccba

fix: allow unicode in object title when using actions

Files changed:
M CHANGES.rst
M plone/app/content/browser/actions.py
M plone/app/content/tests/test_actions.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 0c505d7..3a77963 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -5,6 +5,7 @@ Changelog
 -------------------
 
 - Refactor FolderContentsView to allow reasy overwriting of options.
+- Fix the actions to allow unicode in titles.
   [Gagaro]
 
 
diff --git a/plone/app/content/browser/actions.py b/plone/app/content/browser/actions.py
index 2ce40be..2290800 100644
--- a/plone/app/content/browser/actions.py
+++ b/plone/app/content/browser/actions.py
@@ -185,7 +185,7 @@ class ObjectCutView(LockingBase):
 
     @property
     def title(self):
-        return self.context.Title()
+        return self.context.Title().decode('utf8')
 
     @property
     def parent(self):
diff --git a/plone/app/content/tests/test_actions.py b/plone/app/content/tests/test_actions.py
index f19e59b..d6489c5 100644
--- a/plone/app/content/tests/test_actions.py
+++ b/plone/app/content/tests/test_actions.py
@@ -33,7 +33,7 @@ def setUp(self):
 
         setRoles(self.portal, TEST_USER_ID, ['Manager'])
         self.portal.invokeFactory(
-            type_name='Folder', id='f1', title='A Test Folder')
+            type_name='Folder', id='f1', title=u'A Tést Folder')
 
         transaction.commit()
         self.browser = Browser(self.layer['app'])


Repository: plone.app.content


Branch: refs/heads/master
Date: 2015-10-05T09:55:52-05:00
Author: Nathan Van Gheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/plone.app.content/commit/fbfb818a41159d0bcdde320246f543506066babb

Merge pull request #55 from plone/fix-actions-title-unicode

fix: allow unicode in object title when using actions

Files changed:
M CHANGES.rst
M plone/app/content/browser/actions.py
M plone/app/content/tests/test_actions.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 0c505d7..3a77963 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -5,6 +5,7 @@ Changelog
 -------------------
 
 - Refactor FolderContentsView to allow reasy overwriting of options.
+- Fix the actions to allow unicode in titles.
   [Gagaro]
 
 
diff --git a/plone/app/content/browser/actions.py b/plone/app/content/browser/actions.py
index 2ce40be..2290800 100644
--- a/plone/app/content/browser/actions.py
+++ b/plone/app/content/browser/actions.py
@@ -185,7 +185,7 @@ class ObjectCutView(LockingBase):
 
     @property
     def title(self):
-        return self.context.Title()
+        return self.context.Title().decode('utf8')
 
     @property
     def parent(self):
diff --git a/plone/app/content/tests/test_actions.py b/plone/app/content/tests/test_actions.py
index f19e59b..d6489c5 100644
--- a/plone/app/content/tests/test_actions.py
+++ b/plone/app/content/tests/test_actions.py
@@ -33,7 +33,7 @@ def setUp(self):
 
         setRoles(self.portal, TEST_USER_ID, ['Manager'])
         self.portal.invokeFactory(
-            type_name='Folder', id='f1', title='A Test Folder')
+            type_name='Folder', id='f1', title=u'A Tést Folder')
 
         transaction.commit()
         self.browser = Browser(self.layer['app'])


