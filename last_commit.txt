Repository: plone.app.content


Branch: refs/heads/master
Date: 2015-09-29T09:04:25+02:00
Author: Gagaro (Gagaro) <gagaro42@gmail.com>
Commit: https://github.com/plone/plone.app.content/commit/882734d55ca9b7c6c0bc154f0fcddb11d91b5108

feat: allow the folder_contents options to be easily overwritten by subclasses

Files changed:
M CHANGES.rst
M plone/app/content/browser/contents/__init__.py

diff --git a/CHANGES.rst b/CHANGES.rst
index c398013..0c505d7 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,7 +4,8 @@ Changelog
 3.0.13 (unreleased)
 -------------------
 
-- Nothing changed yet.
+- Refactor FolderContentsView to allow reasy overwriting of options.
+  [Gagaro]
 
 
 3.0.12 (2015-09-20)
diff --git a/plone/app/content/browser/contents/__init__.py b/plone/app/content/browser/contents/__init__.py
index 4ba81e1..e89fd47 100644
--- a/plone/app/content/browser/contents/__init__.py
+++ b/plone/app/content/browser/contents/__init__.py
@@ -143,7 +143,7 @@ def get_actions(self):
         actions.sort(key=lambda a: a.order)
         return [a.get_options() for a in actions]
 
-    def __call__(self):
+    def get_options(self):
         site = getSite()
         base_url = site.absolute_url()
         base_vocabulary = '%s/@@getVocabulary?name=' % base_url
@@ -192,9 +192,12 @@ def __call__(self):
                 'baseUrl': base_url,
                 'initialFolder': IUUID(self.context, None),
                 'useTus': TUS_ENABLED
-            }
+            },
         }
-        self.options = json_dumps(options)
+        return options
+
+    def __call__(self):
+        self.options = json_dumps(self.get_options())
         return super(FolderContentsView, self).__call__()
 
 


Repository: plone.app.content


Branch: refs/heads/master
Date: 2015-09-29T09:10:30+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.content/commit/6f72ad36cdd356fb2b3dc97016a55d98eb6fb88b

Merge pull request #54 from plone/easier-option-overwriting

feat: allow the folder_contents options to be easily overwritten by sâ€¦

Files changed:
M CHANGES.rst
M plone/app/content/browser/contents/__init__.py

diff --git a/CHANGES.rst b/CHANGES.rst
index c398013..0c505d7 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,7 +4,8 @@ Changelog
 3.0.13 (unreleased)
 -------------------
 
-- Nothing changed yet.
+- Refactor FolderContentsView to allow reasy overwriting of options.
+  [Gagaro]
 
 
 3.0.12 (2015-09-20)
diff --git a/plone/app/content/browser/contents/__init__.py b/plone/app/content/browser/contents/__init__.py
index 4ba81e1..e89fd47 100644
--- a/plone/app/content/browser/contents/__init__.py
+++ b/plone/app/content/browser/contents/__init__.py
@@ -143,7 +143,7 @@ def get_actions(self):
         actions.sort(key=lambda a: a.order)
         return [a.get_options() for a in actions]
 
-    def __call__(self):
+    def get_options(self):
         site = getSite()
         base_url = site.absolute_url()
         base_vocabulary = '%s/@@getVocabulary?name=' % base_url
@@ -192,9 +192,12 @@ def __call__(self):
                 'baseUrl': base_url,
                 'initialFolder': IUUID(self.context, None),
                 'useTus': TUS_ENABLED
-            }
+            },
         }
-        self.options = json_dumps(options)
+        return options
+
+    def __call__(self):
+        self.options = json_dumps(self.get_options())
         return super(FolderContentsView, self).__call__()
 
 


