Repository: archetypes.referencebrowserwidget
Branch: refs/heads/master
Date: 2015-02-27T11:01:23+01:00
Author: Dimitar Dimitrov (mitakas) <dimitrod@hu-berlin.de>
Commit: https://github.com/plone/archetypes.referencebrowserwidget/commit/e768e0fde5dd10cea7a6d884ae81c21d764f76fa

Add a label in the popup widget for the image preview.

Files changed:
M src/archetypes/referencebrowserwidget/browser/popup.pt

diff --git a/src/archetypes/referencebrowserwidget/browser/popup.pt b/src/archetypes/referencebrowserwidget/browser/popup.pt
index c7cae56..56dcede 100644
--- a/src/archetypes/referencebrowserwidget/browser/popup.pt
+++ b/src/archetypes/referencebrowserwidget/browser/popup.pt
@@ -192,9 +192,12 @@
         </td>
 
         <td tal:condition="image_portal_types">
-          <img tal:condition="python: item.Type in image_portal_types"
-               tal:attributes="src string:${item/getURL}/$image_method"
-               />
+          <label tal:condition="referenceable"
+                 tal:attributes="for uid;">
+            <img tal:condition="python: item.Type in image_portal_types"
+                 tal:attributes="src string:${item/getURL}/$image_method"
+                 />
+          </label>
         </td>
         <td tal:attributes="class python:'contenttype-' + normalizeString(item.portal_type)">
           <img tal:define="icon item/getIcon"


Repository: archetypes.referencebrowserwidget
Branch: refs/heads/master
Date: 2015-02-27T11:01:23+01:00
Author: Dimitar Dimitrov (mitakas) <dimitrod@hu-berlin.de>
Commit: https://github.com/plone/archetypes.referencebrowserwidget/commit/1a6d8b8bbd5dbcc9f96bb1c731971ee72ab3a232

Show the image even if it can't be referenced.

Files changed:
M src/archetypes/referencebrowserwidget/browser/popup.pt

diff --git a/src/archetypes/referencebrowserwidget/browser/popup.pt b/src/archetypes/referencebrowserwidget/browser/popup.pt
index 56dcede..7063ff1 100644
--- a/src/archetypes/referencebrowserwidget/browser/popup.pt
+++ b/src/archetypes/referencebrowserwidget/browser/popup.pt
@@ -192,7 +192,7 @@
         </td>
 
         <td tal:condition="image_portal_types">
-          <label tal:condition="referenceable"
+          <label tal:omit-tag="not: referenceable"
                  tal:attributes="for uid;">
             <img tal:condition="python: item.Type in image_portal_types"
                  tal:attributes="src string:${item/getURL}/$image_method"


Repository: archetypes.referencebrowserwidget
Branch: refs/heads/master
Date: 2015-02-27T11:04:31+01:00
Author: Dimitar Dimitrov (mitakas) <dimitrod@hu-berlin.de>
Commit: https://github.com/plone/archetypes.referencebrowserwidget/commit/0fa31145d519604d58116c3cb901324425e278ec

Update changelog.

Files changed:
M docs/CHANGES.txt

diff --git a/docs/CHANGES.txt b/docs/CHANGES.txt
index b7eedf7..64fc30d 100644
--- a/docs/CHANGES.txt
+++ b/docs/CHANGES.txt
@@ -9,6 +9,8 @@ Changelog
 - Fixing reference sorting issue due to global function refactoring done
   on recent versions
   [keul]
+- Add labels for images in the popup widget.
+  [mitakas]
 
 2.5.2 (2014-09-11)
 ------------------


Repository: archetypes.referencebrowserwidget
Branch: refs/heads/master
Date: 2015-04-10T01:18:55+02:00
Author: Harald Friessnegger (frisi) <harald@webmeisterei.com>
Commit: https://github.com/plone/archetypes.referencebrowserwidget/commit/a4f8e57bf30fdd4d41480278d5a3db1a2f20fd95

Merge pull request #17 from mitakas/image_preview_label

Add a label in the popup widget for the image preview.

Files changed:
M docs/CHANGES.txt
M src/archetypes/referencebrowserwidget/browser/popup.pt

diff --git a/docs/CHANGES.txt b/docs/CHANGES.txt
index 3a3313d..c8021b8 100644
--- a/docs/CHANGES.txt
+++ b/docs/CHANGES.txt
@@ -13,6 +13,8 @@ Changelog
 - Fixing reference sorting issue due to global function refactoring done
   on recent versions
   [keul]
+- Add labels for images in the popup widget.
+  [mitakas]
 
 - #16 fix browsing for widgets in case field has set ``allowed_types``
 
diff --git a/src/archetypes/referencebrowserwidget/browser/popup.pt b/src/archetypes/referencebrowserwidget/browser/popup.pt
index 0e2dabd..6dd3c96 100644
--- a/src/archetypes/referencebrowserwidget/browser/popup.pt
+++ b/src/archetypes/referencebrowserwidget/browser/popup.pt
@@ -203,9 +203,12 @@
         </td>
 
         <td tal:condition="image_portal_types">
-          <img tal:condition="python: item.Type in image_portal_types"
-               tal:attributes="src string:${item/getURL}/$image_method"
-               />
+          <label tal:omit-tag="not: referenceable"
+                 tal:attributes="for uid;">
+            <img tal:condition="python: item.Type in image_portal_types"
+                 tal:attributes="src string:${item/getURL}/$image_method"
+                 />
+          </label>
         </td>
         <td tal:attributes="class python:'contenttype-' + normalizeString(item.portal_type)">
           <img tal:define="icon item/getIcon"


