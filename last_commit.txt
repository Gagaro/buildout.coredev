Repository: plone.app.content


Branch: refs/heads/master
Date: 2015-07-25T22:27:08-05:00
Author: vangheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/plone.app.content/commit/35ba8dc9ea0cd78feb4affb02a6a313001d11eea

Do not clear clipboard when pasting content closes https://github.com/plone/Products.CMFPlone/issues/718

Files changed:
M CHANGES.rst
M plone/app/content/browser/contents/paste.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 931f9bf..dc2081b 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,7 +4,11 @@ Changelog
 3.0.8 (unreleased)
 ------------------
 
+- Do not clear clipboard when pasting content
+  [vangheem]
+
 - Fix i18n of '"title" has already been deleted'.
+
 - When clicking cancel on the delete_confirmation got to the view_url.
   [ale-rt]
 
diff --git a/plone/app/content/browser/contents/paste.py b/plone/app/content/browser/contents/paste.py
index 3e27d2a..8ac83c3 100644
--- a/plone/app/content/browser/contents/paste.py
+++ b/plone/app/content/browser/contents/paste.py
@@ -1,6 +1,5 @@
 # -*- coding: utf-8 -*-
 from AccessControl import Unauthorized
-from OFS.CopySupport import cookie_path
 from Products.CMFPlone import PloneMessageFactory as _
 from ZODB.POSException import ConflictError
 from plone.app.content.browser.contents import ContentsBaseAction
@@ -53,9 +52,4 @@ def __call__(self):
                 _(u'You are not authorized to paste ${title} here.',
                     mapping={u'title': self.objectTitle(self.dest)}))
 
-        resp = self.request.response
-        resp.setCookie('__cp', 'deleted',
-                       path='%s' % cookie_path(self.request),
-                       expires='Wed, 31-Dec-97 23:59:59 GMT')
-        self.request['__cp'] = None
         return self.message()


Repository: plone.app.content


Branch: refs/heads/master
Date: 2015-07-25T23:40:15-05:00
Author: Nathan Van Gheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/plone.app.content/commit/05be65c63c585211624b050bf84e3d521d1a6b4b

Merge pull request #44 from plone/maintain-clipboard-contents

Do not clear clipboard when pasting content

Files changed:
M CHANGES.rst
M plone/app/content/browser/contents/paste.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 931f9bf..dc2081b 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,7 +4,11 @@ Changelog
 3.0.8 (unreleased)
 ------------------
 
+- Do not clear clipboard when pasting content
+  [vangheem]
+
 - Fix i18n of '"title" has already been deleted'.
+
 - When clicking cancel on the delete_confirmation got to the view_url.
   [ale-rt]
 
diff --git a/plone/app/content/browser/contents/paste.py b/plone/app/content/browser/contents/paste.py
index 3e27d2a..8ac83c3 100644
--- a/plone/app/content/browser/contents/paste.py
+++ b/plone/app/content/browser/contents/paste.py
@@ -1,6 +1,5 @@
 # -*- coding: utf-8 -*-
 from AccessControl import Unauthorized
-from OFS.CopySupport import cookie_path
 from Products.CMFPlone import PloneMessageFactory as _
 from ZODB.POSException import ConflictError
 from plone.app.content.browser.contents import ContentsBaseAction
@@ -53,9 +52,4 @@ def __call__(self):
                 _(u'You are not authorized to paste ${title} here.',
                     mapping={u'title': self.objectTitle(self.dest)}))
 
-        resp = self.request.response
-        resp.setCookie('__cp', 'deleted',
-                       path='%s' % cookie_path(self.request),
-                       expires='Wed, 31-Dec-97 23:59:59 GMT')
-        self.request['__cp'] = None
         return self.message()


