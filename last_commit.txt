Repository: plone.resourceeditor


Branch: refs/heads/master
Date: 2015-09-08T12:11:26-05:00
Author: Sam Schwartz (obct537) <obct537@gmail.com>
Commit: https://github.com/plone/plone.resourceeditor/commit/be80eefb82ff48d3275672c5c3e96ec39ac6e645

Added check to prevent saving over folders

Files changed:
M plone/resourceeditor/browser.py

diff --git a/plone/resourceeditor/browser.py b/plone/resourceeditor/browser.py
index 99ee83c..fe5f179 100644
--- a/plone/resourceeditor/browser.py
+++ b/plone/resourceeditor/browser.py
@@ -174,7 +174,10 @@ def saveFile(self, path, value):
         path = path.lstrip('/').encode('utf-8')
         value = unicode(value.strip(), 'utf-8')
         value = value.replace('\r\n', '\n')
-        
+
+        if IResourceDirectory.providedBy(self.context[path]):
+           return json.dumps({'error': 'invalid path'})
+
         if 'relativeUrls' in self.request.form:
             reg = re.compile('url\(([^)]+)\)')
             urls = reg.findall(value)


Repository: plone.resourceeditor


Branch: refs/heads/master
Date: 2015-09-08T12:23:59-05:00
Author: Nathan Van Gheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/plone.resourceeditor/commit/62b2de71aefbbcb6074fdc35b9fde47c96c59ee2

Merge pull request #11 from plone/folder_saving

Added check to prevent saving over folders

Files changed:
M plone/resourceeditor/browser.py

diff --git a/plone/resourceeditor/browser.py b/plone/resourceeditor/browser.py
index 99ee83c..fe5f179 100644
--- a/plone/resourceeditor/browser.py
+++ b/plone/resourceeditor/browser.py
@@ -174,7 +174,10 @@ def saveFile(self, path, value):
         path = path.lstrip('/').encode('utf-8')
         value = unicode(value.strip(), 'utf-8')
         value = value.replace('\r\n', '\n')
-        
+
+        if IResourceDirectory.providedBy(self.context[path]):
+           return json.dumps({'error': 'invalid path'})
+
         if 'relativeUrls' in self.request.form:
             reg = re.compile('url\(([^)]+)\)')
             urls = reg.findall(value)


