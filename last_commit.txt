Repository: plone.app.theming
Branch: refs/heads/master
Date: 2014-11-27T17:32:17+02:00
Author: Asko Soukka (datakurre) <asko.soukka@iki.fi>
Commit: https://github.com/plone/plone.app.theming/commit/92011013303b6f22982656b2789749e65c524213

Fix issue where skinsSettings does not have use_popups attribute on Plone 5

Files changed:
M src/plone/app/theming/browser/controlpanel.pt

diff --git a/src/plone/app/theming/browser/controlpanel.pt b/src/plone/app/theming/browser/controlpanel.pt
index 2dedab7..eedb171 100644
--- a/src/plone/app/theming/browser/controlpanel.pt
+++ b/src/plone/app/theming/browser/controlpanel.pt
@@ -530,7 +530,8 @@
 
                     <div
                         class="field"
-                        tal:define="selected python:request.get('usePopups', view.skinsSettings.use_popups)">
+                        tal:define="selected_default view/skinsSettings/use_popups|python:False;
+                                    selected python:request.get('usePopups', selected_default)">
 
                         <input type="hidden" value="" name="usePopups:boolean:default" />
                         <input type="checkbox" value="1" name="usePopups:boolean" id="usePopups"


Repository: plone.app.theming
Branch: refs/heads/master
Date: 2014-11-27T11:16:10-06:00
Author: Nathan Van Gheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/plone.app.theming/commit/828c9e2c350260b2aa674081fefe4bc8b724d366

Merge pull request #33 from plone/datakurre-fix-controlpanel.pt

Fix issue where skinsSettings does not have use_popups attribute on Plone 5

Files changed:
M src/plone/app/theming/browser/controlpanel.pt

diff --git a/src/plone/app/theming/browser/controlpanel.pt b/src/plone/app/theming/browser/controlpanel.pt
index 2dedab7..eedb171 100644
--- a/src/plone/app/theming/browser/controlpanel.pt
+++ b/src/plone/app/theming/browser/controlpanel.pt
@@ -530,7 +530,8 @@
 
                     <div
                         class="field"
-                        tal:define="selected python:request.get('usePopups', view.skinsSettings.use_popups)">
+                        tal:define="selected_default view/skinsSettings/use_popups|python:False;
+                                    selected python:request.get('usePopups', selected_default)">
 
                         <input type="hidden" value="" name="usePopups:boolean:default" />
                         <input type="checkbox" value="1" name="usePopups:boolean" id="usePopups"


