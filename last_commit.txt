Repository: Products.CMFQuickInstallerTool
Branch: refs/heads/master
Date: 2015-06-02T16:47:11+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/Products.CMFQuickInstallerTool/commit/9966a0f0b01412ab4c0cd9200ef06034ead6a1e5

Revert "Readded doctests which were not run after migration to p.a.testing"

Files changed:
M CHANGES.rst
M Products/CMFQuickInstallerTool/tests/install.txt
M Products/CMFQuickInstallerTool/tests/profiles.txt
M Products/CMFQuickInstallerTool/tests/test_install.py

diff --git a/CHANGES.rst b/CHANGES.rst
index ad60c97..acb2cfa 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,8 +4,7 @@ Changelog
 3.0.9 (unreleased)
 ------------------
 
-- Readded doctests which were not run after port to plone.app.testing
-  [tomgross]
+- Nothing changed yet.
 
 
 3.0.8 (2015-03-21)
diff --git a/Products/CMFQuickInstallerTool/tests/install.txt b/Products/CMFQuickInstallerTool/tests/install.txt
index 46f1db8..b5b60d8 100644
--- a/Products/CMFQuickInstallerTool/tests/install.txt
+++ b/Products/CMFQuickInstallerTool/tests/install.txt
@@ -7,7 +7,7 @@ First we set three convenience variables for later use:
   >>> from Products.CMFQuickInstallerTool.interfaces import IQuickInstallerTool
   >>> from Products.CMFCore.utils import getToolByName
 
-  >>> portal = layer['portal']
+  >>> portal = layer['plone']
   >>> portal
   <PloneSite at /plone>
 
diff --git a/Products/CMFQuickInstallerTool/tests/profiles.txt b/Products/CMFQuickInstallerTool/tests/profiles.txt
index ec7e58c..7a85c3d 100644
--- a/Products/CMFQuickInstallerTool/tests/profiles.txt
+++ b/Products/CMFQuickInstallerTool/tests/profiles.txt
@@ -68,11 +68,6 @@ We now expect to see Products.Product1 and Products.Product2 in the list of
 installable products, but not Products.Product3.
 
   >>> installable = [x['id'] for x in qi.listInstallableProducts()]
-  >>> 'Products.Product1' in installable
-  True
-
-  >>> 'Products.Product2' in installable
-  True
-
-  >>> 'Products.Product3' in installable
-  False
+  >>> self.failUnless('Products.Product1' in installable)
+  >>> self.failUnless('Products.Product2' in installable)
+  >>> self.failIf('Products.Product3' in installable)
diff --git a/Products/CMFQuickInstallerTool/tests/test_install.py b/Products/CMFQuickInstallerTool/tests/test_install.py
index d59c6f6..143240d 100644
--- a/Products/CMFQuickInstallerTool/tests/test_install.py
+++ b/Products/CMFQuickInstallerTool/tests/test_install.py
@@ -5,7 +5,6 @@
 from Products.GenericSetup import EXTENSION, profile_registry
 from plone.app import testing
 from plone.testing import layered
-from plone.app.contenttypes.testing import PLONE_APP_CONTENTTYPES_FIXTURE
 
 from Products.CMFQuickInstallerTool.QuickInstallerTool import QuickInstallerTool
 from Products.CMFQuickInstallerTool.events import handleBeforeProfileImportEvent
@@ -18,7 +17,7 @@
 
 class QuickInstallerCaseFixture(testing.PloneSandboxLayer):
 
-    defaultBases = (PLONE_APP_CONTENTTYPES_FIXTURE, )
+    defaultBases = (testing.PLONE_FIXTURE, )
 
     def setUpZope(self, app, configurationContext):
         sm = zope.component.getSiteManager()
@@ -62,7 +61,7 @@ def test_suite():
     for testfile in ['actions.txt', 'profiles.txt', 'install.txt']:
         suite.addTest(layered(
             doctest.DocFileSuite(
-                testfile,
+                'actions.txt',
                 package='Products.CMFQuickInstallerTool.tests',
                 optionflags=OPTIONFLAGS),
             layer=CQI_FUNCTIONAL_TESTING))


Repository: Products.CMFQuickInstallerTool
Branch: refs/heads/master
Date: 2015-06-02T16:47:18+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/Products.CMFQuickInstallerTool/commit/4d93c878f1d5a2f46dffc2a27e493f8021b1cdbd

Merge pull request #9 from plone/revert-8-tomgross-fixdoctests

Revert "Readded doctests which were not run after migration to p.a.teâ€¦

Files changed:
M CHANGES.rst
M Products/CMFQuickInstallerTool/tests/install.txt
M Products/CMFQuickInstallerTool/tests/profiles.txt
M Products/CMFQuickInstallerTool/tests/test_install.py

diff --git a/CHANGES.rst b/CHANGES.rst
index ad60c97..acb2cfa 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,8 +4,7 @@ Changelog
 3.0.9 (unreleased)
 ------------------
 
-- Readded doctests which were not run after port to plone.app.testing
-  [tomgross]
+- Nothing changed yet.
 
 
 3.0.8 (2015-03-21)
diff --git a/Products/CMFQuickInstallerTool/tests/install.txt b/Products/CMFQuickInstallerTool/tests/install.txt
index 46f1db8..b5b60d8 100644
--- a/Products/CMFQuickInstallerTool/tests/install.txt
+++ b/Products/CMFQuickInstallerTool/tests/install.txt
@@ -7,7 +7,7 @@ First we set three convenience variables for later use:
   >>> from Products.CMFQuickInstallerTool.interfaces import IQuickInstallerTool
   >>> from Products.CMFCore.utils import getToolByName
 
-  >>> portal = layer['portal']
+  >>> portal = layer['plone']
   >>> portal
   <PloneSite at /plone>
 
diff --git a/Products/CMFQuickInstallerTool/tests/profiles.txt b/Products/CMFQuickInstallerTool/tests/profiles.txt
index ec7e58c..7a85c3d 100644
--- a/Products/CMFQuickInstallerTool/tests/profiles.txt
+++ b/Products/CMFQuickInstallerTool/tests/profiles.txt
@@ -68,11 +68,6 @@ We now expect to see Products.Product1 and Products.Product2 in the list of
 installable products, but not Products.Product3.
 
   >>> installable = [x['id'] for x in qi.listInstallableProducts()]
-  >>> 'Products.Product1' in installable
-  True
-
-  >>> 'Products.Product2' in installable
-  True
-
-  >>> 'Products.Product3' in installable
-  False
+  >>> self.failUnless('Products.Product1' in installable)
+  >>> self.failUnless('Products.Product2' in installable)
+  >>> self.failIf('Products.Product3' in installable)
diff --git a/Products/CMFQuickInstallerTool/tests/test_install.py b/Products/CMFQuickInstallerTool/tests/test_install.py
index d59c6f6..143240d 100644
--- a/Products/CMFQuickInstallerTool/tests/test_install.py
+++ b/Products/CMFQuickInstallerTool/tests/test_install.py
@@ -5,7 +5,6 @@
 from Products.GenericSetup import EXTENSION, profile_registry
 from plone.app import testing
 from plone.testing import layered
-from plone.app.contenttypes.testing import PLONE_APP_CONTENTTYPES_FIXTURE
 
 from Products.CMFQuickInstallerTool.QuickInstallerTool import QuickInstallerTool
 from Products.CMFQuickInstallerTool.events import handleBeforeProfileImportEvent
@@ -18,7 +17,7 @@
 
 class QuickInstallerCaseFixture(testing.PloneSandboxLayer):
 
-    defaultBases = (PLONE_APP_CONTENTTYPES_FIXTURE, )
+    defaultBases = (testing.PLONE_FIXTURE, )
 
     def setUpZope(self, app, configurationContext):
         sm = zope.component.getSiteManager()
@@ -62,7 +61,7 @@ def test_suite():
     for testfile in ['actions.txt', 'profiles.txt', 'install.txt']:
         suite.addTest(layered(
             doctest.DocFileSuite(
-                testfile,
+                'actions.txt',
                 package='Products.CMFQuickInstallerTool.tests',
                 optionflags=OPTIONFLAGS),
             layer=CQI_FUNCTIONAL_TESTING))


