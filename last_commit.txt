Repository: mockup
Branch: refs/heads/master
Date: 2015-05-05T13:27:20+02:00
Author: Johannes Raggam (thet) <raggam-nl@adm.at>
Commit: https://github.com/plone/mockup/commit/ff87396439afb64ab07e56b56bcca16f77c09e67

Change AJAX call method from HEAD to GET

Change TinyMCE initLanguage's ajax calls to ``GET`` method, as Zope's
ZPublisher doesn't know about ``HEAD`` requests. Explicitly set the request
to be cached, so there shouldn't be a negative performance impact. Removes some
Plone 404's.

Files changed:
M CHANGES.rst
M mockup/patterns/tinymce/pattern.js

diff --git a/CHANGES.rst b/CHANGES.rst
index 46f712f..f183fc8 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,6 +4,12 @@ Changelog
 2.0.3 (unreleased)
 ------------------
 
+- Change TinyMCE initLanguage's ajax calls to ``GET`` method, as Zope's
+  ZPublisher doesn't know about ``HEAD`` requests. Explicitly set the request
+  to be cached, so there shouldn't be a negative performance impact. Removes
+  some Plone 404's.
+  [thet]
+
 - Update Bootstrap to 3.3.4, which includes the WOFF2 version of Glyphicons.
   Removes some 404s.
   [thet]
diff --git a/mockup/patterns/tinymce/pattern.js b/mockup/patterns/tinymce/pattern.js
index a438d24..87579b1 100644
--- a/mockup/patterns/tinymce/pattern.js
+++ b/mockup/patterns/tinymce/pattern.js
@@ -297,7 +297,8 @@ define([
         // does the expected language exist?
         $.ajax({
           url: tinymce.baseURL + '/langs/' + lang + '.js',
-          type:'HEAD',
+          method: 'GET',
+          cache: 'true',
           success: function() {
             self.options.tiny.language = lang;
             call_back();
@@ -311,7 +312,8 @@ define([
             }
             $.ajax({
               url: tinymce.baseURL + '/langs/' + lang + '.js',
-              type:'HEAD',
+              method: 'GET',
+              cache: 'true',
               success: function() {
                 self.options.tiny.language = lang;
                 call_back();


