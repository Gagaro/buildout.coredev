Repository: plone.app.theming


Branch: refs/heads/master
Date: 2015-07-14T16:32:51+02:00
Author: Sune Broendum Woeller (sunew) <sune@woeller.dk>
Commit: https://github.com/plone/plone.app.theming/commit/51c0f1a3df57602cf7c3658e0428e33e7fedfb73

fix AttributeError: 'NoneType' object has no attribute 'getroottree' when the result is not html / is empty.

Files changed:
M src/plone/app/theming/transform.py

diff --git a/src/plone/app/theming/transform.py b/src/plone/app/theming/transform.py
index 9e214df..05ff8fa 100644
--- a/src/plone/app/theming/transform.py
+++ b/src/plone/app/theming/transform.py
@@ -91,7 +91,7 @@ def parseTree(self, result):
 
         try:
             return getHTMLSerializer(result, pretty_print=False)
-        except (TypeError, etree.ParseError):
+        except (AttributeError, TypeError, etree.ParseError):
             return None
 
     def transformString(self, result, encoding):


Repository: plone.app.theming


Branch: refs/heads/master
Date: 2015-07-14T16:32:51+02:00
Author: Sune Broendum Woeller (sunew) <sune@woeller.dk>
Commit: https://github.com/plone/plone.app.theming/commit/2b03a64df35763eaaeac90f03d307126bb603286

changelog

Files changed:
M CHANGES.rst

diff --git a/CHANGES.rst b/CHANGES.rst
index 6e769b4..76a3d3e 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -49,6 +49,10 @@ Changelog
 1.2.3 (2015-05-04)
 ------------------
 
+- fix AttributeError: 'NoneType' object has no attribute 'getroottree' when the result is not
+  html / is empty.
+  [sunew]
+
 - make control panel usable again. Fixed problem where skins
   control panel is no longer present.
   [vangheem]


Repository: plone.app.theming


Branch: refs/heads/master
Date: 2015-07-14T19:07:55+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.theming/commit/2c2dd001f3a21eb7df0aabe7c25c199453e38721

Merge pull request #49 from sunew/fix-transform

Fix transform

Files changed:
M CHANGES.rst
M src/plone/app/theming/transform.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 6e769b4..76a3d3e 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -49,6 +49,10 @@ Changelog
 1.2.3 (2015-05-04)
 ------------------
 
+- fix AttributeError: 'NoneType' object has no attribute 'getroottree' when the result is not
+  html / is empty.
+  [sunew]
+
 - make control panel usable again. Fixed problem where skins
   control panel is no longer present.
   [vangheem]
diff --git a/src/plone/app/theming/transform.py b/src/plone/app/theming/transform.py
index 9e214df..05ff8fa 100644
--- a/src/plone/app/theming/transform.py
+++ b/src/plone/app/theming/transform.py
@@ -91,7 +91,7 @@ def parseTree(self, result):
 
         try:
             return getHTMLSerializer(result, pretty_print=False)
-        except (TypeError, etree.ParseError):
+        except (AttributeError, TypeError, etree.ParseError):
             return None
 
     def transformString(self, result, encoding):


