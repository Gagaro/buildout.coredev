Repository: plone.app.querystring
Branch: refs/heads/master
Date: 2015-03-11T09:05:48+01:00
Author: Timo Stollenwerk (tisto) <tisto@plone.org>
Commit: https://github.com/plone/plone.app.querystring/commit/9b4dbc94c2d4dbce684424c603fad96178eb5c01

No need to install plone.app.querystring as z2 products in tests.

Files changed:
M CHANGES.rst
M plone/app/querystring/testing.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 5187c08..d07014e 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,6 +4,9 @@ Changelog
 1.3.1 (unreleased)
 ------------------
 
+- No need to install plone.app.querystring as z2 products in tests.
+  [timo]
+
 - Fix path-queries using UID.
   [pbauer]
 
diff --git a/plone/app/querystring/testing.py b/plone/app/querystring/testing.py
index 4e5bab4..ce41a32 100644
--- a/plone/app/querystring/testing.py
+++ b/plone/app/querystring/testing.py
@@ -43,8 +43,6 @@ def setUpPloneSite(self, portal):
             ('Document',), 'plone_workflow'
         )
 
-    def tearDownZope(self, app):
-        z2.uninstallProduct(app, 'plone.app.querystring')
 
 TEST_PROFILE_PLONEAPPQUERYSTRING_FIXTURE = PloneAppQuerystringTestProfileLayer()
 
@@ -53,12 +51,12 @@ class PloneAppQuerystringLayer(PloneAppQuerystringTestProfileLayer):
 
     def setUpZope(self, app, configurationContext):
         super(PloneAppQuerystringLayer, self).setUpZope(app, configurationContext)
-        z2.installProduct(app, 'plone.app.querystring')
         import plone.app.querystring
         xmlconfig.file(
             'configure.zcml',
             plone.app.querystring,
-            context=configurationContext)
+            context=configurationContext
+        )
 
     def setUpPloneSite(self, portal):
         super(PloneAppQuerystringLayer, self).setUpPloneSite(portal)


